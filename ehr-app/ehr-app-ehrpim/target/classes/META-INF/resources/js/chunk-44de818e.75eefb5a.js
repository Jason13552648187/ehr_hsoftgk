(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44de818e"],{"2fae":function(e,t,n){},"89d2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("img",{attrs:{src:"/assets/img/background.png"}}),n("div",{staticClass:"login-con"},[n("card",{attrs:{bordered:!1}},[n("p",{staticStyle:{"text-align":"center"},attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.appTitle)+" ")]),n("div",{staticClass:"form-con"},[n("i-form",{ref:"loginForm",attrs:{rules:e.rules,model:e.form}},[n("form-item",{attrs:{prop:"loginname"}},[n("p",[e._v("用户名")]),n("i-input",{attrs:{size:"large",prefix:"ios-contact",placeholder:"用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit(t)}},model:{value:e.form.loginname,callback:function(t){e.$set(e.form,"loginname","string"===typeof t?t.trim():t)},expression:"form.loginname"}})],1),n("form-item",{attrs:{prop:"password"}},[n("p",[e._v("密码")]),n("i-input",{attrs:{size:"large",prefix:"ios-key",type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),n("form-item",[n("i-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("登录 ")]),n("i-button",{staticClass:"login_reset",attrs:{type:"success"},on:{click:e.goReset}},[e._v("重置 ")])],1),n("form-item",[n("div",{staticStyle:{"text-align":"center"}},[n("span",{staticClass:"form_tipinfo"},[e._v("其他登录方式")])]),n("div",{staticStyle:{"text-align":"center"}},[n("div",{staticClass:"sign-btn",on:{click:function(t){return e.tencentHandleClick("tencent")}}},[n("img",{staticClass:"qq-svg-container",attrs:{src:"/assets/img/QQ.svg",draggable:"false"}})]),n("div",{staticClass:"sign-btn",on:{click:function(t){return e.wechatHandleClick("wechat")}}},[n("img",{staticClass:"wx-svg-container",attrs:{src:"/assets/img/weixin.svg",draggable:"false"}})])])])],1),n("p",{staticClass:"login-tip"},[e._v(" "+e._s(this.loginTip)+" ")])],1)]),n("div",{staticClass:"log_footer"},[n("div",{staticClass:"copyright"},[n("a",{attrs:{href:"https://www.ibizlab.cn/",target:"_blank"}},[e._v(e._s(e.appTitle)+" is based on ibizlab .")])])])],1)])},i=[],s=(n("0d03"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("d4ec")),o=n("bee2"),r=n("99de"),l=n("7e84"),c=n("262e"),u=n("9ab4"),g=n("60a3"),p=n("032b"),m=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(r["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.form={loginname:"guest",password:"guest"},e.loginTip="",e.canClick=!0,e.appTitle=p["a"].AppTitle,e.rules={},e}return Object(c["a"])(t,e),Object(o["a"])(t,[{key:"setRules",value:function(){this.rules={loginname:[{required:!0,message:this.$t("components.login.loginname.message"),trigger:"change"}],password:[{required:!0,message:this.$t("components.login.password.message"),trigger:"change"}]}}},{key:"created",value:function(){this.setRules()}},{key:"mounted",value:function(){this.getCookie("loginname")}},{key:"onLocaleChange",value:function(e,t){this.setRules()}},{key:"handleSubmit",value:function(){var e=this,t=new Date;t.setTime(t.getSeconds()-1e3),document.cookie="ibzuaa-token=;expires="+t.toUTCString();var n=this.$refs.loginForm,a=!0;if(n.validate((function(e){a=!!e})),a){var i=this.form.loginname,s=(this.form.password,this.$http.post("v7/login",this.form,!0));s.then((function(t){if(t&&200===t.status){var n=t.data;n&&n.token&&(localStorage.setItem("token",n.token),e.setCookie("ibzuaa-token",n.token,0)),e.setCookie("loginname",i,7);var a=e.$route.query.redirect?e.$route.query.redirect:"*";e.$router.push({path:a})}}))["catch"]((function(t){var n=t.data;n&&n.message?(e.loginTip=n.message,e.$Message.error({content:"登录失败，"+n.message,duration:5,closable:!0})):e.$Message.error({content:"登录失败",duration:5,closable:!0})}))}}},{key:"goReset",value:function(){var e=this;e.form={loginname:"ibzadmin",password:"123456"}}},{key:"setCookie",value:function(e,t,n){if(0!==n){var a=new Date,i=a.getTime(),s=new Date(a.toLocaleDateString()).getTime()-1,o=i-s,r=864e5-o,l=new Date;l.setTime(r+i),document.cookie=e+"="+escape(t)+";expires="+l.toUTCString()}else document.cookie=e+"="+escape(t)}},{key:"getCookie",value:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null}},{key:"tencentHandleClick",value:function(e){this.$Message.warning("qq授权登录暂未支持")}},{key:"wechatHandleClick",value:function(e){this.$Message.warning("微信授权登录暂未支持")}}]),t}(g["g"]);u["a"]([Object(g["h"])("$i18n.locale")],m.prototype,"onLocaleChange",null),m=u["a"]([Object(g["a"])({components:{}})],m);var d=m,f=d,k=(n("cc04"),n("2877")),v=Object(k["a"])(f,a,i,!1,null,null,null);t["default"]=v.exports},cc04:function(e,t,n){"use strict";var a=n("2fae"),i=n.n(a);i.a}}]);