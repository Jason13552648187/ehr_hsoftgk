(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c91d204e"],{"10d6":function(t,e,a){"use strict";var i=a("d4ec"),n=a("99de"),o=a("7e84"),r=a("262e"),s=(a("b0c0"),a("2b19"),a("bee2")),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i["a"])(this,t),this.caption="",this.detailType="",this.form=null,this.name="",this.visible=!0,this.isShowCaption=!0,this.caption=Object.is(e.caption,"")?"":e.caption,this.detailType=Object.is(e.detailType,"")?"":e.detailType,this.form=e.form?e.form:{},this.name=Object.is(e.name,"")?"":e.name,this.visible=!!e.visible,this.isShowCaption=!!e.isShowCaption}return Object(s["a"])(t,[{key:"setVisible",value:function(t){this.visible=t}},{key:"setShowCaption",value:function(t){this.isShowCaption=t}}]),t}(),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(this,e),Object(n["a"])(this,Object(o["a"])(e).call(this,t))}return Object(r["a"])(e,t),e}(c),u=(a("e25e"),function(t){function e(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(this,e),t=Object(n["a"])(this,Object(o["a"])(e).call(this,a)),t.disabled=!1,t.error="",t.enableCond=3,t.disabled=!!a.disabled,t.enableCond=a.enableCond,t}return Object(r["a"])(e,t),Object(s["a"])(e,[{key:"setDisabled",value:function(t){this.disabled=t}},{key:"setError",value:function(t){this.error=t}},{key:"setEnableCond",value:function(t){var e=!0,a=parseInt(t,10),i=!0;e&&(1===a?2===(2&this.enableCond)&&(i=!1):1===(1&this.enableCond)&&(i=!1)),this.setDisabled(i)}}]),e}(c)),d=function(t){function e(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(this,e),t=Object(n["a"])(this,Object(o["a"])(e).call(this,a)),t.refviewtype="",t.isSaving=!1,t.refViewDirty=!1,t.isSaveSuccess=!1,t.saveRefView=0,t.refviewtype=a.refviewtype,t}return Object(r["a"])(e,t),Object(s["a"])(e,[{key:"onDrDataSaved",value:function(t){this.isSaving=!1,t&&(this.refViewDirty=!1,this.isSaveSuccess=!0),t&&this.form&&this.form.DRUIPartSaveResult()&&this.form.save()}}]),e}(c),f=function(t){function e(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(this,e),t=Object(n["a"])(this,Object(o["a"])(e).call(this,a)),t.uiActionGroup={},Object.assign(t.uiActionGroup,a.uiActionGroup),t}return Object(r["a"])(e,t),e}(c),v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(this,e),Object(n["a"])(this,Object(o["a"])(e).call(this,t))}return Object(r["a"])(e,t),e}(c),p=(a("4de4"),a("c740"),a("45fc"),a("07ac"),a("2909")),h=function(t){function e(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(this,e),t=Object(n["a"])(this,Object(o["a"])(e).call(this,a)),t.activiedPage="",t.clickActiviePage="",t.tabPages=[],t.tabPages=Object(p["a"])(a.tabPages),t.tabPages.length>0&&(t.activiedPage=t.tabPages[0].name),t}return Object(r["a"])(e,t),Object(s["a"])(e,[{key:"setActiviePage",value:function(){var t=this;if(this.form){var e=this.form.detailsModel,a=this.tabPages.findIndex((function(a){return Object.is(a.name,t.clickActiviePage)&&Object.is(a.name,t.activiedPage)&&e[a.name].visible}));-1===a&&this.tabPages.some((function(a){return!!e[a.name].visible&&(t.activiedPage=a.name,!0)}))}}},{key:"clickPage",value:function(t){t&&(this.clickActiviePage=t,this.activiedPage=t)}}]),e}(c);a.d(e,"d",(function(){return l})),a.d(e,"c",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return f})),a.d(e,"e",(function(){return v})),a.d(e,"f",(function(){return h}))},"1cbb":function(t,e,a){"use strict";var i=a("97a4"),n=a.n(i);n.a},"427d":function(t,e,a){},7530:function(t,e,a){"use strict";a.r(e);var i=a("d4ec"),n=a("99de"),o=a("7e84"),r=a("262e"),s=a("9ab4"),c=a("60a3"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-layout",{attrs:{viewName:"pimtypecontracteditview",viewTitle:"合同类型编辑视图",className:{"view-container":!0,"default-mode-view":!0,deeditview:!0,"pimtypecontractedit-view":!0},layoutMode:"VIEW",isShowUserInfo:t.isDefaultView(),openMode:t.openMode},on:{"close-view":function(e){return t.closeView(e)}}},[a("template",{slot:"headerLeft"},[a("div",{staticClass:"view-header-left"},[t.isDefaultView()?a("div",{staticClass:"view-caption"},[t._v(t._s(t.$t(t.model.srfCaption)))]):t._e(),t.isModalView()?a("modal-breadcrumb"):t._e()],1)]),a("template",{slot:"headerRight"},[a("div",{staticClass:"view-header-right"},[a("app-header-menus",{attrs:{toolbarModel:t.toolBarModels,mode:"view",openMode:t.openMode},on:{"menu-click":function(e){return t.toolbar_click(e)}}})],1)]),a("template",{slot:"content"},[a("div",{staticClass:"view-content-wrapper"},[a("view_form",{ref:"form",attrs:{viewState:t.viewState,viewparams:t.viewparams,context:t.context,autosave:!1,viewtag:t.viewtag,showBusyIndicator:!0,updateAction:"Update",removeAction:"Remove",loaddraftAction:"GetDraft",loadAction:"Get",createAction:"Create",WFSubmitAction:"",WFStartAction:"",name:"form"},on:{save:function(e){return t.form_save(e)},remove:function(e){return t.form_remove(e)},load:function(e){return t.form_load(e)},closeview:function(e){return t.closeView(e)}}})],1)])],2)},u=[],d=(a("a4d3"),a("4de4"),a("4160"),a("1d1c"),a("7a82"),a("e439"),a("dbb4"),a("2b19"),a("b64b"),a("2ca0"),a("159b"),a("ade3")),f=a("2909"),v=a("bee2"),p=a("2bd2"),h=a("46aa"),m=a("e8fb"),g=a("ef3d");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach((function(e){Object(d["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(n["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.appEntityService=new m["default"],t.counterServiceArray=[],t.viewtag="e8db54a4b997adaeebdb886851e17369",t.srfparentdata={},t.customViewNavContexts={},t.customViewParams={},t.model={srfCaption:"entities.pimtypecontract.views.editview.caption",srfTitle:"entities.pimtypecontract.views.editview.title",srfSubTitle:"entities.pimtypecontract.views.editview.subtitle",dataInfo:""},t.containerModel={view_toolbar:{name:"toolbar",type:"TOOLBAR"},view_form:{name:"form",type:"FORM"}},t.viewState=new p["a"],t.toolBarModels={tbitem3:{name:"tbitem3",caption:"保存",isShowCaption:!0,isShowIcon:!0,tooltip:"保存",iconcls:"fa fa-save",icon:"",disabled:!1,type:"DEUIACTION",visabled:!0,dataaccaction:"SRFUR__JGLYZPMXME",uiaction:{tag:"Save",target:""},class:""},tbitem4:{name:"tbitem4",caption:"保存并新建",isShowCaption:!0,isShowIcon:!0,tooltip:"保存并新建",iconcls:"sx-tb-saveandnew",icon:"../sasrfex/images/default/icon_saveandnew.png",disabled:!1,type:"DEUIACTION",visabled:!0,dataaccaction:"",uiaction:{tag:"SaveAndNew",target:""},class:""},tbitem5:{name:"tbitem5",caption:"保存并关闭",isShowCaption:!0,isShowIcon:!0,tooltip:"保存并关闭",iconcls:"sx-tb-saveandclose",icon:"../sasrfex/images/default/icon_saveandclose.png",disabled:!1,type:"DEUIACTION",visabled:!0,dataaccaction:"SRFUR__JGLYXKML",uiaction:{tag:"SaveAndExit",target:""},class:""},tbitem7:{name:"tbitem7",caption:"删除并关闭",isShowCaption:!0,isShowIcon:!0,tooltip:"删除并关闭",iconcls:"fa fa-remove",icon:"",disabled:!1,type:"DEUIACTION",visabled:!0,dataaccaction:"",uiaction:{tag:"RemoveAndExit",target:"SINGLEKEY"},class:""},tbitem22:{name:"tbitem22",caption:"帮助",isShowCaption:!0,isShowIcon:!0,tooltip:"帮助",iconcls:"fa fa-question",icon:"",disabled:!1,type:"DEUIACTION",visabled:!0,dataaccaction:"",uiaction:{tag:"Help",target:""},class:""}},t.engine=new g["a"],t}return Object(r["a"])(e,t),Object(v["a"])(e,[{key:"viewDatasChange",value:function(t){return t}},{key:"engineInit",value:function(){this.engine.init({view:this,form:this.$refs.form,p2k:"0",keyPSDEField:"pimtypecontract",majorPSDEField:"pimtypecontractname",isLoadDefault:!0})}},{key:"toolbar_click",value:function(t,e){Object.is(t.tag,"tbitem3")&&this.toolbar_tbitem3_click(null,"",e),Object.is(t.tag,"tbitem4")&&this.toolbar_tbitem4_click(null,"",e),Object.is(t.tag,"tbitem5")&&this.toolbar_tbitem5_click(null,"",e),Object.is(t.tag,"tbitem7")&&this.toolbar_tbitem7_click(null,"",e),Object.is(t.tag,"tbitem10")&&this.toolbar_tbitem10_click(null,"",e),Object.is(t.tag,"tbitem15")&&this.toolbar_tbitem15_click(null,"",e),Object.is(t.tag,"tbitem22")&&this.toolbar_tbitem22_click(null,"",e)}},{key:"form_save",value:function(t,e){this.engine.onCtrlEvent("form","save",t)}},{key:"form_remove",value:function(t,e){this.engine.onCtrlEvent("form","remove",t)}},{key:"form_load",value:function(t,e){this.engine.onCtrlEvent("form","load",t)}},{key:"toolbar_tbitem3_click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0),a=[],i=null,n={},o={};i=this.$refs.form,i.getDatas&&i.getDatas instanceof Function&&(a=Object(f["a"])(i.getDatas())),t&&(a=[t]),this.Save(a,o,n,e,i,this,"PimTypeContract")}},{key:"toolbar_tbitem4_click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0),a=[],i=null,n={},o={};i=this.$refs.form,i.getDatas&&i.getDatas instanceof Function&&(a=Object(f["a"])(i.getDatas())),t&&(a=[t]),this.SaveAndNew(a,o,n,e,i,this,"PimTypeContract")}},{key:"toolbar_tbitem5_click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0),a=[],i=null,n={},o={};i=this.$refs.form,i.getDatas&&i.getDatas instanceof Function&&(a=Object(f["a"])(i.getDatas())),t&&(a=[t]),this.SaveAndExit(a,o,n,e,i,this,"PimTypeContract")}},{key:"toolbar_tbitem7_click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0),a=[],i=null,n={},o={};i=this.$refs.form,i.getDatas&&i.getDatas instanceof Function&&(a=Object(f["a"])(i.getDatas())),t&&(a=[t]),this.RemoveAndExit(a,o,n,e,i,this,"PimTypeContract")}},{key:"toolbar_tbitem10_click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0),a=[],i=null,n={},o={};i=this.$refs.form,i.getDatas&&i.getDatas instanceof Function&&(a=Object(f["a"])(i.getDatas())),t&&(a=[t]),this.ViewWFStep(a,o,n,e,i,this,"PimTypeContract")}},{key:"toolbar_tbitem15_click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0),a=[],i=null,n={},o={};i=this.$refs.form,i.getDatas&&i.getDatas instanceof Function&&(a=Object(f["a"])(i.getDatas())),t&&(a=[t]),this.Print(a,o,n,e,i,this,"PimTypeContract")}},{key:"toolbar_tbitem22_click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0),a=[],i=null,n={},o={};i=this.$refs.form,i.getDatas&&i.getDatas instanceof Function&&(a=Object(f["a"])(i.getDatas())),t&&(a=[t]),this.Help(a,o,n,e,i,this,"PimTypeContract")}},{key:"Save",value:function(t,e,a,i,n,o,r){var s=this;n&&n.save instanceof Function?n.save().then((function(t){t&&200===t.status&&s.$emit("viewdataschange",[y({},t.data)])})):s.save&&s.save instanceof Function&&s.save()}},{key:"SaveAndNew",value:function(t,e,a,i,n,o,r){var s=this;n&&n.saveAndNew instanceof Function&&n.saveAndNew().then((function(t){t&&200===t.status?(s.$emit("viewdataschange",JSON.stringify({status:"success",action:"saveAndNew",data:t.data})),n.autoLoad instanceof Function&&n.autoLoad()):s.$emit("viewdataschange",JSON.stringify({status:"error",action:"saveAndNew"}))}))}},{key:"SaveAndExit",value:function(t,e,a,i,n,o,r){var s=this;n&&n.saveAndExit instanceof Function?n.saveAndExit().then((function(t){t&&200===t.status&&window.parent&&window.parent.postMessage([y({},t.data)],"*")})):s.saveAndExit&&s.saveAndExit instanceof Function&&s.saveAndExit().then((function(t){t&&200===t.status&&window.parent&&window.parent.postMessage([y({},t.data)],"*")}))}},{key:"RemoveAndExit",value:function(t,e,a,i,n,o,r){var s=this;n&&n.removeAndExit instanceof Function?n.removeAndExit().then((function(t){t&&200===t.status&&window.parent&&window.parent.postMessage([y({},t.data)],"*")})):s.removeAndExit&&s.removeAndExit instanceof Function&&s.removeAndExit().then((function(t){t&&200===t.status&&window.parent&&window.parent.postMessage([y({},t.data)],"*")}))}},{key:"ViewWFStep",value:function(t,e,a,i,n,o,r){var s=this;n&&n.wfsubmit instanceof Function&&n.wfsubmit(t).then((function(t){if(t&&200===t.status){var e=t.data;s.viewdata?(s.$emit("viewdataschange",[y({},e)]),s.$emit("close")):s.$tabPageExp&&s.$tabPageExp.onClose(s.$route.fullPath)}}))}},{key:"Print",value:function(t,e,a,i,n,o,r){n&&n.print instanceof Function&&i&&n.print()}},{key:"Help",value:function(t,e,a,i,n,o,r){this.$Notice.error({title:"错误",desc:"帮助未支持"})}},{key:"destroyed",value:function(){var t=this;if(this.viewDefaultUsage){var e=Object.keys(localStorage);e.length>0&&e.forEach((function(e){e.startsWith(t.context.srfsessionid)&&localStorage.removeItem(e)}))}}}]),e}(h["h"]);s["a"]([Object(c["b"])()],w.prototype,"viewDatasChange",null),w=s["a"]([Object(c["a"])({}),h["q"]],w);var O=w,j=O,k=(a("b96d"),a("2877")),S=Object(k["a"])(j,l,u,!1,null,null,null),E=S.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-form",{ref:"form",staticClass:"app-form",attrs:{model:this.data,id:"pimtypecontract_main"}},[a("input",{staticStyle:{display:"none"}}),a("row",[a("i-col",{directives:[{name:"show",rawName:"v-show",value:t.detailsModel.group1.visible,expression:"detailsModel.group1.visible"}],style:{},attrs:{lg:{span:24,offset:0}}},[a("app-form-group",{attrs:{layoutType:"TABLE_24COL",titleStyle:"",uiActionGroup:t.detailsModel.group1.uiActionGroup,caption:t.$t("entities.pimtypecontract.main_form.details.group1"),isShowCaption:!0,uiStyle:"DEFAULT",titleBarCloseMode:0,isInfoGroupMode:!1},on:{groupuiactionclick:function(e){return t.groupUIActionClick(e)}}},[a("row",[a("i-col",{directives:[{name:"show",rawName:"v-show",value:t.detailsModel.sortno.visible,expression:"detailsModel.sortno.visible"}],style:{},attrs:{lg:{span:8,offset:0}}},[a("app-form-item",{attrs:{name:"sortno",itemRules:this.rules.sortno,caption:t.$t("entities.pimtypecontract.main_form.details.sortno"),uiStyle:"DEFAULT",labelWidth:130,isShowCaption:!0,error:t.detailsModel.sortno.error,isEmptyCaption:!1,labelPos:"LEFT"}},[a("input-box",{attrs:{unit:"",disabled:t.detailsModel.sortno.disabled,type:"number"},on:{enter:function(e){return t.onEnter(e)}},model:{value:t.data.sortno,callback:function(e){t.$set(t.data,"sortno",e)},expression:"data.sortno"}})],1)],1),a("i-col",{directives:[{name:"show",rawName:"v-show",value:t.detailsModel.pimtypecontractname.visible,expression:"detailsModel.pimtypecontractname.visible"}],style:{},attrs:{lg:{span:8,offset:0}}},[a("app-form-item",{attrs:{name:"pimtypecontractname",itemRules:this.rules.pimtypecontractname,caption:t.$t("entities.pimtypecontract.main_form.details.pimtypecontractname"),uiStyle:"DEFAULT",labelWidth:130,isShowCaption:!0,error:t.detailsModel.pimtypecontractname.error,isEmptyCaption:!1,labelPos:"LEFT"}},[a("input-box",{attrs:{unit:"",disabled:t.detailsModel.pimtypecontractname.disabled,type:"text"},on:{enter:function(e){return t.onEnter(e)}},model:{value:t.data.pimtypecontractname,callback:function(e){t.$set(t.data,"pimtypecontractname",e)},expression:"data.pimtypecontractname"}})],1)],1),a("i-col",{directives:[{name:"show",rawName:"v-show",value:t.detailsModel.contractlife.visible,expression:"detailsModel.contractlife.visible"}],style:{},attrs:{lg:{span:8,offset:0}}},[a("app-form-item",{attrs:{name:"contractlife",itemRules:this.rules.contractlife,caption:t.$t("entities.pimtypecontract.main_form.details.contractlife"),uiStyle:"DEFAULT",labelWidth:130,isShowCaption:!0,error:t.detailsModel.contractlife.error,isEmptyCaption:!1,labelPos:"LEFT"}},[a("input-box",{attrs:{unit:"",disabled:t.detailsModel.contractlife.disabled,type:"number"},on:{enter:function(e){return t.onEnter(e)}},model:{value:t.data.contractlife,callback:function(e){t.$set(t.data,"contractlife",e)},expression:"data.contractlife"}})],1)],1)],1)],1)],1)],1)],1)},D=[],T=(a("b0c0"),a("d3b7"),a("07ac"),a("4795"),a("96cf"),a("1da1")),x=a("257e"),F=a("d257"),A=a("a8bf"),P=function(){function t(){Object(i["a"])(this,t)}return Object(v["a"])(t,[{key:"getDataItems",value:function(){return[{name:"srfwfmemo",prop:"srfwfmemo",dataType:"TEXT"},{name:"srffrontuf",prop:"srffrontuf",dataType:"TEXT"},{name:"srfupdatedate",prop:"updatedate",dataType:"DATETIME"},{name:"srforikey"},{name:"srfkey",prop:"pimtypecontractid",dataType:"GUID"},{name:"srfmajortext",prop:"pimtypecontractname",dataType:"TEXT"},{name:"srftempmode"},{name:"srfuf"},{name:"srfdeid"},{name:"srfsourcekey"},{name:"sortno",prop:"sortno",dataType:"INT"},{name:"pimtypecontractname",prop:"pimtypecontractname",dataType:"TEXT"},{name:"contractlife",prop:"contractlife",dataType:"INT"},{name:"pimtypecontractid",prop:"pimtypecontractid",dataType:"GUID"},{name:"pimtypecontract",prop:"pimtypecontractid",dataType:"FONTKEY"}]}}]),t}(),N=function(t){function e(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(this,e),t=Object(n["a"])(this,Object(o["a"])(e).call(this,a)),t.appEntityService=new m["default"]({$store:t.getStore()}),t.model=new P,t}return Object(r["a"])(e,t),Object(v["a"])(e,[{key:"setTempMode",value:function(){this.isTempMode=!1}},{key:"doItems",value:function(t,e,a){return new Promise((function(i,n){t.then((function(t){if(t&&200===t.status){var o=t.data;o.forEach((function(t,i){t[a]=t[e],o[i]=t})),i(o)}else n([])}))["catch"]((function(t){n([])}))}))}},{key:"getItems",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&arguments[3],arguments.length>4&&arguments[4];return Promise.reject([])}},{key:"wfstart",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return i=this.handleWFData(i),a=this.handleRequestData(t,a,i).context,new Promise((function(r,s){var c,l=e.appEntityService;c=l[t]&&l[t]instanceof Function?l[t](a,i,n,o):e.appEntityService.WFStart(a,i,n,o),c.then((function(a){e.handleResponse(t,a),r(a)}))["catch"]((function(t){s(t)}))}))}},{key:"wfsubmit",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return i=this.handleWFData(i,!0),a=this.handleRequestData(t,a,i,!0).context,new Promise((function(r,s){var c,l=e.appEntityService;c=l[t]&&l[t]instanceof Function?l[t](a,i,n,o):e.appEntityService.WFSubmit(a,i,n,o),c.then((function(a){e.handleResponse(t,a),r(a)}))["catch"]((function(t){s(t)}))}))}},{key:"add",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=this.handleRequestData(t,a,i),r=o.data,s=o.context;return new Promise((function(a,i){var o,c=e.appEntityService;o=c[t]&&c[t]instanceof Function?c[t](s,r,n):e.appEntityService.Create(s,r,n),o.then((function(i){e.handleResponse(t,i),a(i)}))["catch"]((function(t){i(t)}))}))}},{key:"delete",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=this.handleRequestData(t,a,i),r=o.data,s=o.context;return new Promise((function(a,i){var o,c=e.appEntityService;o=c[t]&&c[t]instanceof Function?c[t](s,r,n):e.appEntityService.Remove(s,r,n),o.then((function(t){a(t)}))["catch"]((function(t){i(t)}))}))}},{key:"update",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=this.handleRequestData(t,a,i),r=o.data,s=o.context;return new Promise((function(a,i){var o,c=e.appEntityService;o=c[t]&&c[t]instanceof Function?c[t](s,r,n):e.appEntityService.Update(s,r,n),o.then((function(i){e.handleResponse(t,i),a(i)}))["catch"]((function(t){i(t)}))}))}},{key:"get",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=this.handleRequestData(t,a,i),r=o.data,s=o.context;return new Promise((function(a,i){var o,c=e.appEntityService;o=c[t]&&c[t]instanceof Function?c[t](s,r,n):e.appEntityService.Get(s,r,n),o.then((function(i){e.handleResponse(t,i),a(i)}))["catch"]((function(t){i(t)}))}))}},{key:"loadDraft",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=this.handleRequestData(t,a,i),r=o.data,s=o.context,c=F["h"].createUUID();return r.pimtypecontractid=c,r.pimtypecontract=c,new Promise((function(a,i){var o,l=e.appEntityService;o=l[t]&&l[t]instanceof Function?l[t](s,r,n):e.appEntityService.GetDraft(s,r,n),o.then((function(i){i.data.pimtypecontractid=c,e.handleResponse(t,i,!0),a(i)}))["catch"]((function(t){i(t)}))}))}},{key:"frontLogic",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=this.handleRequestData(t,a,i),r=o.data,s=o.context;return new Promise((function(a,i){var o,c=e.appEntityService;if(!(c[t]&&c[t]instanceof Function))return Promise.reject({status:500,data:{title:"失败",message:"系统异常"}});o=c[t](s,r,n),o.then((function(i){e.handleResponse(t,i,!0),a(i)}))["catch"]((function(t){i(t)}))}))}},{key:"handleRequestData",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.getMode();if(!n&&n.getDataItems instanceof Function)return a;var o=n.getDataItems(),r={};i&&a&&a.viewparams&&Object.assign(r,a.viewparams),o.forEach((function(t){t&&t.dataType&&Object.is(t.dataType,"FONTKEY")?t&&t.prop&&(r[t.prop]=e[t.name]):t&&t.prop&&(r[t.prop]=a[t.name])}));var s=JSON.parse(JSON.stringify(e));return s&&s.srfsessionid&&(s.srfsessionkey=s.srfsessionid,delete s.srfsessionid),{context:s,data:r}}}]),e}(A["a"]);s["a"]([F["b"]],N.prototype,"getItems",null),s["a"]([F["b"]],N.prototype,"wfstart",null),s["a"]([F["b"]],N.prototype,"wfsubmit",null),s["a"]([F["b"]],N.prototype,"add",null),s["a"]([F["b"]],N.prototype,"delete",null),s["a"]([F["b"]],N.prototype,"update",null),s["a"]([F["b"]],N.prototype,"get",null),s["a"]([F["b"]],N.prototype,"loadDraft",null),s["a"]([F["b"]],N.prototype,"frontLogic",null);var $=a("10d6"),I=a("1a2d"),M=a("69dd");function V(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function R(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?V(Object(a),!0).forEach((function(e){Object(d["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(n["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.counterServiceArray=[],t.service=new N({$store:t.$store}),t.appEntityService=new m["default"]({$store:t.$store}),t.srfwfmemo="",t.formState=new p["a"],t.ignorefieldvaluechange=!1,t.dataChang=new p["a"],t.oldData={},t.data={srfupdatedate:null,srforikey:null,srfkey:null,srfmajortext:null,srftempmode:null,srfuf:null,srfdeid:null,srfsourcekey:null,sortno:null,pimtypecontractname:null,contractlife:null,pimtypecontractid:null,pimtypecontract:null},t.currentAction="",t.drcounter=0,t.drsaveopt={},t.rules={srfupdatedate:[{type:"string",message:"更新时间 值必须为字符串类型",trigger:"change"},{type:"string",message:"更新时间 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:"更新时间 值不能为空",trigger:"change"},{required:!1,type:"string",message:"更新时间 值不能为空",trigger:"blur"}],srforikey:[{type:"string",message:" 值必须为字符串类型",trigger:"change"},{type:"string",message:" 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:" 值不能为空",trigger:"change"},{required:!1,type:"string",message:" 值不能为空",trigger:"blur"}],srfkey:[{type:"string",message:"合同类型标识 值必须为字符串类型",trigger:"change"},{type:"string",message:"合同类型标识 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:"合同类型标识 值不能为空",trigger:"change"},{required:!1,type:"string",message:"合同类型标识 值不能为空",trigger:"blur"}],srfmajortext:[{type:"string",message:"合同类型名称 值必须为字符串类型",trigger:"change"},{type:"string",message:"合同类型名称 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:"合同类型名称 值不能为空",trigger:"change"},{required:!1,type:"string",message:"合同类型名称 值不能为空",trigger:"blur"}],srftempmode:[{type:"string",message:" 值必须为字符串类型",trigger:"change"},{type:"string",message:" 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:" 值不能为空",trigger:"change"},{required:!1,type:"string",message:" 值不能为空",trigger:"blur"}],srfuf:[{type:"string",message:" 值必须为字符串类型",trigger:"change"},{type:"string",message:" 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:" 值不能为空",trigger:"change"},{required:!1,type:"string",message:" 值不能为空",trigger:"blur"}],srfdeid:[{type:"string",message:" 值必须为字符串类型",trigger:"change"},{type:"string",message:" 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:" 值不能为空",trigger:"change"},{required:!1,type:"string",message:" 值不能为空",trigger:"blur"}],srfsourcekey:[{type:"string",message:" 值必须为字符串类型",trigger:"change"},{type:"string",message:" 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:" 值不能为空",trigger:"change"},{required:!1,type:"string",message:" 值不能为空",trigger:"blur"}],sortno:[{type:"number",message:"排序号 值必须为数值类型",trigger:"change"},{type:"number",message:"排序号 值必须为数值类型",trigger:"blur"},{required:!1,type:"number",message:"排序号 值不能为空",trigger:"change"},{required:!1,type:"number",message:"排序号 值不能为空",trigger:"blur"}],pimtypecontractname:[{type:"string",message:"合同类型名称 值必须为字符串类型",trigger:"change"},{type:"string",message:"合同类型名称 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:"合同类型名称 值不能为空",trigger:"change"},{required:!1,type:"string",message:"合同类型名称 值不能为空",trigger:"blur"}],contractlife:[{type:"number",message:"合同年限 值必须为数值类型",trigger:"change"},{type:"number",message:"合同年限 值必须为数值类型",trigger:"blur"},{required:!1,type:"number",message:"合同年限 值不能为空",trigger:"change"},{required:!1,type:"number",message:"合同年限 值不能为空",trigger:"blur"}],pimtypecontractid:[{type:"string",message:"合同类型标识 值必须为字符串类型",trigger:"change"},{type:"string",message:"合同类型标识 值必须为字符串类型",trigger:"blur"},{required:!1,type:"string",message:"合同类型标识 值不能为空",trigger:"change"},{required:!1,type:"string",message:"合同类型标识 值不能为空",trigger:"blur"}]},t.detailsModel={group1:new $["b"]({caption:"合同类型基本信息",detailType:"GROUPPANEL",name:"group1",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),uiActionGroup:{caption:"",langbase:"entities.pimtypecontract.main_form",extractMode:"ITEM",details:[]}}),formpage1:new $["d"]({caption:"基本信息",detailType:"FORMPAGE",name:"formpage1",visible:!0,isShowCaption:!0,form:Object(x["a"])(t)}),srfupdatedate:new $["c"]({caption:"更新时间",detailType:"FORMITEM",name:"srfupdatedate",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),srforikey:new $["c"]({caption:"",detailType:"FORMITEM",name:"srforikey",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),srfkey:new $["c"]({caption:"合同类型标识",detailType:"FORMITEM",name:"srfkey",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),srfmajortext:new $["c"]({caption:"合同类型名称",detailType:"FORMITEM",name:"srfmajortext",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),srftempmode:new $["c"]({caption:"",detailType:"FORMITEM",name:"srftempmode",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),srfuf:new $["c"]({caption:"",detailType:"FORMITEM",name:"srfuf",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),srfdeid:new $["c"]({caption:"",detailType:"FORMITEM",name:"srfdeid",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),srfsourcekey:new $["c"]({caption:"",detailType:"FORMITEM",name:"srfsourcekey",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),sortno:new $["c"]({caption:"排序号",detailType:"FORMITEM",name:"sortno",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),pimtypecontractname:new $["c"]({caption:"合同类型名称",detailType:"FORMITEM",name:"pimtypecontractname",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),contractlife:new $["c"]({caption:"合同年限",detailType:"FORMITEM",name:"contractlife",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3}),pimtypecontractid:new $["c"]({caption:"合同类型标识",detailType:"FORMITEM",name:"pimtypecontractid",visible:!0,isShowCaption:!0,form:Object(x["a"])(t),disabled:!1,enableCond:3})},t}return Object(r["a"])(e,t),Object(v["a"])(e,[{key:"getControlType",value:function(){return"FORM"}},{key:"closeView",value:function(t){var e=this;e.$emit("closeview",[t])}},{key:"counterRefresh",value:function(){var t=this;t.counterServiceArray&&t.counterServiceArray.length>0&&t.counterServiceArray.forEach((function(t){t.refreshData&&t.refreshData instanceof Function&&t.refreshData()}))}},{key:"getDatas",value:function(){return[this.data]}},{key:"getData",value:function(){return this.data}},{key:"onSrfupdatedateChange",value:function(t,e){this.formDataChange({name:"srfupdatedate",newVal:t,oldVal:e})}},{key:"onSrforikeyChange",value:function(t,e){this.formDataChange({name:"srforikey",newVal:t,oldVal:e})}},{key:"onSrfkeyChange",value:function(t,e){this.formDataChange({name:"srfkey",newVal:t,oldVal:e})}},{key:"onSrfmajortextChange",value:function(t,e){this.formDataChange({name:"srfmajortext",newVal:t,oldVal:e})}},{key:"onSrftempmodeChange",value:function(t,e){this.formDataChange({name:"srftempmode",newVal:t,oldVal:e})}},{key:"onSrfufChange",value:function(t,e){this.formDataChange({name:"srfuf",newVal:t,oldVal:e})}},{key:"onSrfdeidChange",value:function(t,e){this.formDataChange({name:"srfdeid",newVal:t,oldVal:e})}},{key:"onSrfsourcekeyChange",value:function(t,e){this.formDataChange({name:"srfsourcekey",newVal:t,oldVal:e})}},{key:"onSortnoChange",value:function(t,e){this.formDataChange({name:"sortno",newVal:t,oldVal:e})}},{key:"onPimtypecontractnameChange",value:function(t,e){this.formDataChange({name:"pimtypecontractname",newVal:t,oldVal:e})}},{key:"onContractlifeChange",value:function(t,e){this.formDataChange({name:"contractlife",newVal:t,oldVal:e})}},{key:"onPimtypecontractidChange",value:function(t,e){this.formDataChange({name:"pimtypecontractid",newVal:t,oldVal:e})}},{key:"resetFormData",value:function(t){t.name,t.newVal,t.oldVal}},{key:"ResetData",value:function(t){var e=this;Object.keys(t).length>0&&Object.keys(t).forEach((function(t){e.data.hasOwnProperty(t)&&(e.data[t]=null)}))}},{key:"formLogic",value:function(t){t.name,t.newVal,t.oldVal}},{key:"formDataChange",value:function(t){var e=t.name,a=t.newVal,i=t.oldVal;this.ignorefieldvaluechange||(this.resetFormData({name:e,newVal:a,oldVal:i}),this.formLogic({name:e,newVal:a,oldVal:i}),this.dataChang.next(JSON.stringify(this.data)))}},{key:"onFormLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;(Object.is(e,"save")||Object.is(e,"autoSave")||Object.is(e,"submit"))&&t.pimtypecontract&&Object.assign(this.context,{pimtypecontract:t.pimtypecontract}),this.setFormEnableCond(t),this.fillForm(t,e),this.oldData={},Object.assign(this.oldData,JSON.parse(JSON.stringify(this.data))),this.$store.commit("viewaction/setViewDataChange",{viewtag:this.viewtag,viewdatachange:!1}),this.formLogic({name:"",newVal:null,oldVal:null})}},{key:"fillForm",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;this.ignorefieldvaluechange=!0,Object.keys(e).forEach((function(a){t.data.hasOwnProperty(a)&&(t.data[a]=e[a])})),Object.is(a,"loadDraft")&&this.createDefault(),Object.is(a,"load")&&this.updateDefault(),this.$nextTick((function(){this.ignorefieldvaluechange=!1}))}},{key:"setFormEnableCond",value:function(t){Object.values(this.detailsModel).forEach((function(e){if(Object.is(e.detailType,"FORMITEM")){var a=e;a.setEnableCond(t.srfuf)}}))}},{key:"resetDraftFormStates",value:function(){var t=this.$refs.form;t&&t.resetFields()}},{key:"resetValidates",value:function(){Object.values(this.detailsModel).forEach((function(t){if(Object.is(t.detailType,"FORMITEM")){var e=t;e.setError("")}}))}},{key:"fillValidates",value:function(t){var e=this;t.forEach((function(t){var a=e.detailsModel[t.field];a&&e.$nextTick((function(){a.setError(t.message)}))}))}},{key:"formValidateStatus",value:function(){var t=this.$refs.form,e=!0;return t.validate((function(t){e=!!t})),e}},{key:"getValues",value:function(){return this.data}},{key:"onFormItemValueChange",value:function(t){t&&t.name&&!Object.is(t.name,"")&&this.data.hasOwnProperty(t.name)&&(this.data[t.name]=t.value)}},{key:"setDataItemValue",value:function(t,e){t&&!Object.is(t,"")&&this.data.hasOwnProperty(t)&&(Object.is(this.data[t],e)||(this.data[t]=e))}},{key:"groupUIActionClick",value:function(t){if(t)t.item}},{key:"created",value:function(){this.afterCreated()}},{key:"afterCreated",value:function(){var t=this;this.viewState&&(this.viewStateEvent=this.viewState.subscribe((function(e){var a=e.tag,i=e.action,n=e.data;Object.is(a,t.name)&&(Object.is("autoload",i)&&t.autoLoad(n),Object.is("load",i)&&t.load(n),Object.is("loaddraft",i)&&(t.context.srfsourcekey?t.copy(t.context.srfsourcekey):t.loadDraft(n)),Object.is("save",i)&&t.save(n,n.showResultInfo),Object.is("remove",i)&&t.remove(n),Object.is("saveandexit",i)&&t.saveAndExit(n),Object.is("saveandnew",i)&&t.saveAndNew(n),Object.is("removeandexit",i)&&t.removeAndExit(n),Object.is("refresh",i)&&t.refresh(n))}))),this.dataChang.pipe(Object(I["a"])(300),Object(M["a"])()).subscribe((function(e){t.autosave&&t.autoSave();var a=!Object.is(JSON.stringify(t.oldData),JSON.stringify(t.data));t.$store.commit("viewaction/setViewDataChange",{viewtag:t.viewtag,viewdatachange:a})}))}},{key:"destroyed",value:function(){this.afterDestroy()}},{key:"afterDestroy",value:function(){this.viewStateEvent&&this.viewStateEvent.unsubscribe(),this.dataChangEvent&&this.dataChangEvent.unsubscribe()}},{key:"copy",value:function(t){var e=this,a=this.$store.getters.getCopyData(t);a.srfkey=F["h"].createUUID(),a.pimtypecontract=a.srfkey,a.pimtypecontractid=a.srfkey,Object.assign(this.context,{pimtypecontract:a.pimtypecontract}),this.data=a,this.$nextTick((function(){e.formState.next({type:"load",data:a}),e.data.srfuf="0",e.setFormEnableCond(e.data)}))}},{key:"print",value:function(){var t=this;t.$print({id:"pimtypecontract_main",popTitle:"主编辑表单"})}},{key:"refresh",value:function(t){var e={};return Object.assign(e,t[0]),this.data.srfkey&&!Object.is(this.data.srfkey,"")?(Object.assign(e,{srfkey:this.data.srfkey}),void this.load(e)):this.data.srfkeys&&!Object.is(this.data.srfkeys,"")?(Object.assign(e,{srfkey:this.data.srfkeys}),void this.load(e)):void 0}},{key:"autoLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.srfkey&&!Object.is(t.srfkey,"")?(Object.assign(t,{srfkey:t.srfkey}),void this.load(t)):t.srfkeys&&!Object.is(t.srfkeys,"")?(Object.assign(t,{srfkey:t.srfkeys}),void this.load(t)):void this.loadDraft(t)}},{key:"load",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.loadAction){var a=R({},e),i=Object.assign(a,this.viewparams),n=this.service.get(this.loadAction,JSON.parse(JSON.stringify(this.context)),{viewparams:i},this.showBusyIndicator);n.then((function(e){if(e&&200===e.status){var a=e.data;t.onFormLoad(a,"load"),t.$emit("load",a),t.$nextTick((function(){t.formState.next({type:"load",data:a})}))}}))["catch"]((function(e){e&&e.status&&e.data?t.$Notice.error({title:"错误",desc:e.data.message}):e&&e.status&&e.data||t.$Notice.error({title:"错误",desc:"系统异常"})}))}else this.$Notice.error({title:"错误",desc:"PIMTYPECONTRACTEditView视图表单loadAction参数未配置"})}},{key:"loadDraft",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.loaddraftAction){var a=R({},e),i=Object.assign(a,this.viewparams),n=this.service.loadDraft(this.loaddraftAction,JSON.parse(JSON.stringify(this.context)),{viewparams:i},this.showBusyIndicator);n.then((function(e){if(e.status&&200===e.status){var a=e.data;a.pimtypecontract&&Object.assign(t.context,{pimtypecontract:a.pimtypecontract}),t.resetDraftFormStates(),t.onFormLoad(a,"loadDraft"),t.$emit("load",a),t.$nextTick((function(){t.formState.next({type:"load",data:a})})),setTimeout((function(){var e=t.$refs.form;e&&e.fields.forEach((function(t){t.validateMessage="",t.validateState="",t.validateStatus=!1}))}))}else e.data&&t.$Notice.error({title:"错误",desc:e.data.message})}))["catch"]((function(e){e&&e.status&&e.data?t.$Notice.error({title:"错误",desc:e.data.message}):e&&e.status&&e.data||t.$Notice.error({title:"错误",desc:"系统异常"})}))}else this.$Notice.error({title:"错误",desc:"PIMTYPECONTRACTEditView视图表单loaddraftAction参数未配置"})}},{key:"autoSave",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.formValidateStatus()){var a=R({},e),i=this.getValues();Object.assign(a,i);var n=Object.is(i.srfuf,"1")?this.updateAction:this.createAction;if(n){Object.assign(a,{viewparams:this.viewparams});var o=this.service.add(n,JSON.parse(JSON.stringify(this.context)),a,this.showBusyIndicator);o.then((function(e){if(e.status&&200===e.status){var a=e.data;t.onFormLoad(a,"autoSave"),t.$emit("save",a),t.$store.dispatch("viewaction/datasaved",{viewtag:t.viewtag}),t.$nextTick((function(){t.formState.next({type:"save",data:a})}))}else e.data&&t.$Notice.error({title:"错误",desc:e.data.message})}))["catch"]((function(e){e&&e.status&&e.data?t.$Notice.error({title:"错误",desc:e.data.message}):e&&e.status&&e.data||t.$Notice.error({title:"错误",desc:"系统异常"})}))}else{var r=Object.is(i.srfuf,"1")?"updateAction":"createAction";this.$Notice.error({title:"错误",desc:"PIMTYPECONTRACTEditView视图表单"+r+"参数未配置"})}}}},{key:"save",value:function(){var t=Object(T["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{},a=o.length>1?o[1]:void 0,i=!(o.length>2&&void 0!==o[2])||o[2],t.abrupt("return",new Promise((function(t,o){if(a=void 0===a,n.formValidateStatus()){var r=R({},e),s=n.getValues();if(Object.assign(r,s),Object.assign(r,n.context),i&&(n.drcounter=0,0!==n.drcounter))return n.drsaveopt=e,n.formState.next({type:"beforesave",data:r}),void(n.saveState=t);var c=Object.is(s.srfuf,"1")?n.updateAction:n.createAction;if(c){Object.assign(r,{viewparams:n.viewparams});var l=Object.is(s.srfuf,"1")?n.service.update(c,JSON.parse(JSON.stringify(n.context)),r,n.showBusyIndicator):n.service.add(c,JSON.parse(JSON.stringify(n.context)),r,n.showBusyIndicator);l.then((function(e){if(e.status&&200===e.status){var i=e.data;n.onFormLoad(i,"save"),n.$emit("save",i),n.$store.dispatch("viewaction/datasaved",{viewtag:n.viewtag}),n.$nextTick((function(){n.formState.next({type:"save",data:i})})),a&&n.$Notice.success({title:"",desc:(i.srfmajortext?i.srfmajortext:"")+"&nbsp;保存成功！"}),t(e)}else e.data&&n.$Notice.error({title:"错误",desc:e.data.message})}))["catch"]((function(t){return t&&t.status&&t.data?(n.$Notice.error({title:"错误",desc:t.data.message}),void o(t)):t&&t.status&&t.data?void o(t):(n.$Notice.error({title:"错误",desc:"系统异常"}),void o(t))}))}else{var u=Object.is(s.srfuf,"1")?"updateAction":"createAction";n.$Notice.error({title:"错误",desc:"PIMTYPECONTRACTEditView视图表单"+u+"参数未配置"})}}else n.$Notice.error({title:"错误",desc:"值规则校验异常"})})));case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"remove",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return new Promise((function(i,n){if(t.removeAction){var o=e[0],r=t;Object.assign(o,{viewparams:t.viewparams}),t.service["delete"](r.removeAction,JSON.parse(JSON.stringify(t.context)),o,a).then((function(e){if(e){var a=e.data;t.$emit("remove",a),t.formState.next({type:"remove",data:a}),t.data.ismodify=!1,t.$Notice.success({title:"",desc:(a.srfmajortext?a.srfmajortext:"")+"&nbsp;删除成功！"}),i(e)}}))["catch"]((function(e){var a=e.data;t.$Notice.error({title:a.title,desc:a.message}),n(e)}))}else t.$Notice.error({title:"错误",desc:"PIMTYPECONTRACTEditView视图表单removeAction参数未配置"})}))}},{key:"wfstart",value:function(){var t=Object(T["a"])(regeneratorRuntime.mark((function t(e,a){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=i,o=n.save({},!1);o.then((function(o){var r=o.data;i.viewparams&&Object.assign(r,{viewparams:i.viewparams});var s=i.service.wfstart(n.WFStartAction,JSON.parse(JSON.stringify(i.context)),r,i.showBusyIndicator,a);s.then((function(e){e&&200===e.status?(i.$Notice.info({title:"",desc:"工作流启动成功"}),t(e)):e.data&&i.$Notice.error({title:"",desc:"工作流启动失败, "+e.data.message})}))["catch"]((function(t){return t&&t.status&&t.data?(i.$Notice.error({title:"错误",desc:t.data.message}),void e(t)):t&&t.status&&t.data?void e(t):(i.$Notice.error({title:"错误",desc:"系统异常"}),void e(t))}))}))["catch"]((function(t){return t&&t.status&&t.data?(i.$Notice.error({title:"错误",desc:t.data.message}),void e(t)):t&&t.status&&t.data?void e(t):(i.$Notice.error({title:"错误",desc:"系统异常"}),void e(t))}))})));case 1:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"wfsubmit",value:function(){var t=Object(T["a"])(regeneratorRuntime.mark((function t(e,a){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var o=i,r=e[0];if(Object.assign(r,{viewparams:i.viewparams}),r.pimtypecontract&&!Object.is(r.pimtypecontract,"")){var s=Object.is(r.srfuf,"1")?i.service.update(i.updateAction,JSON.parse(JSON.stringify(i.context)),r,i.showBusyIndicator):i.service.add(i.createAction,JSON.parse(JSON.stringify(i.context)),r,i.showBusyIndicator);s.then((function(e){var r=e.data;i.onFormLoad(r,"save"),i.$emit("save",r),i.$nextTick((function(){i.formState.next({type:"save",data:r})})),i.viewparams&&Object.assign(r,{viewparams:i.viewparams}),i.srfwfmemo&&Object.assign(r,{srfwfmemo:i.srfwfmemo});var s=i.service.wfsubmit(o.WFSubmitAction,JSON.parse(JSON.stringify(i.context)),r,i.showBusyIndicator,a);s.then((function(e){e&&200===e.status?(i.onFormLoad(r,"submit"),i.$store.dispatch("viewaction/datasaved",{viewtag:i.viewtag}),i.$Notice.info({title:"",desc:"工作流提交成功"}),t(e)):e.data&&i.$Notice.error({title:"",desc:"工作流提交失败, "+e.data.message})}))["catch"]((function(t){return t&&t.status&&t.data?(i.$Notice.error({title:"错误",desc:t.data.message}),void n(t)):t&&t.status&&t.data?void n(t):(i.$Notice.error({title:"错误",desc:"系统异常"}),void n(t))}))}))["catch"]((function(t){return t&&t.status&&t.data?(i.$Notice.error({title:"错误",desc:t.data.message}),void n(t)):t&&t.status&&t.data?void n(t):(i.$Notice.error({title:"错误",desc:"系统异常"}),void n(t))}))}})));case 1:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"updateFormItems",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!(!t||t&&Object.is(t,""))){var o=R({},a);Object.assign(o,this.viewparams);var r=this.service.frontLogic(t,JSON.parse(JSON.stringify(this.context)),o,n);r.then((function(t){if(t&&200===t.status){var a=t.data,n={};i.forEach((function(t){a.hasOwnProperty(t)&&Object.assign(n,Object(d["a"])({},t,a[t]))})),e.setFormEnableCond(n),e.fillForm(n,"updateFormItem"),e.formLogic({name:"",newVal:null,oldVal:null}),e.dataChang.next(JSON.stringify(e.data)),e.$nextTick((function(){e.formState.next({type:"updateformitem",ufimode:o.srfufimode,data:n})}))}else e.$Notice.error({title:"错误",desc:"表单项更新失败"})}))["catch"]((function(t){t&&t.status&&t.data?e.$Notice.error({title:"错误",desc:t.data.message}):t&&t.status&&t.data||e.$Notice.error({title:"错误",desc:"系统异常"})}))}}},{key:"onEnter",value:function(t){}},{key:"saveAndExit",value:function(t){var e=this;return new Promise((function(a,i){var n={};t&&t.length>0&&Object.assign(n,t[0]),e.currentAction="saveAndExit",e.save([n]).then((function(t){t&&e.closeView(t.data),a(t)}))["catch"]((function(t){i(t)}))}))}},{key:"saveAndNew",value:function(t){var e=this;return new Promise((function(a,i){var n={};t&&t.length>0&&Object.assign(n,t[0]),e.currentAction="saveAndNew",e.save([n]).then((function(t){e.ResetData(t),e.loadDraft({})}))["catch"]((function(t){i(t)}))}))}},{key:"removeAndExit",value:function(t){var e=this;return new Promise((function(a,i){var n={};t&&t.length>0&&Object.assign(n,t[0]),e.remove([n]).then((function(t){t&&e.closeView(t.data),a(t)}))["catch"]((function(t){i(t)}))}))}},{key:"drdatasaved",value:function(t){var e=this,a=this;this.drcounter--,0===this.drcounter&&this.save(this.drsaveopt,void 0,!1).then((function(t){e.saveState(t),e.drsaveopt={},Object.is(a.currentAction,"saveAndNew")?(a.ResetData(t),a.loadDraft({})):Object.is(a.currentAction,"saveAndExit")&&t&&a.closeView(t.data)}))}},{key:"createDefault",value:function(){}},{key:"updateDefault",value:function(){}}]),e}(c["g"]);s["a"]([Object(c["e"])()],_.prototype,"name",void 0),s["a"]([Object(c["e"])()],_.prototype,"viewState",void 0),s["a"]([Object(c["e"])()],_.prototype,"context",void 0),s["a"]([Object(c["e"])()],_.prototype,"viewparams",void 0),s["a"]([Object(c["e"])({default:!1})],_.prototype,"autosave",void 0),s["a"]([Object(c["e"])({default:!0})],_.prototype,"showBusyIndicator",void 0),s["a"]([Object(c["e"])()],_.prototype,"WFSubmitAction",void 0),s["a"]([Object(c["e"])()],_.prototype,"WFStartAction",void 0),s["a"]([Object(c["e"])()],_.prototype,"updateAction",void 0),s["a"]([Object(c["e"])()],_.prototype,"removeAction",void 0),s["a"]([Object(c["e"])()],_.prototype,"loaddraftAction",void 0),s["a"]([Object(c["e"])()],_.prototype,"loadAction",void 0),s["a"]([Object(c["e"])()],_.prototype,"createAction",void 0),s["a"]([Object(c["e"])()],_.prototype,"searchAction",void 0),s["a"]([Object(c["e"])()],_.prototype,"viewtag",void 0),s["a"]([Object(c["h"])("data.srfupdatedate")],_.prototype,"onSrfupdatedateChange",null),s["a"]([Object(c["h"])("data.srforikey")],_.prototype,"onSrforikeyChange",null),s["a"]([Object(c["h"])("data.srfkey")],_.prototype,"onSrfkeyChange",null),s["a"]([Object(c["h"])("data.srfmajortext")],_.prototype,"onSrfmajortextChange",null),s["a"]([Object(c["h"])("data.srftempmode")],_.prototype,"onSrftempmodeChange",null),s["a"]([Object(c["h"])("data.srfuf")],_.prototype,"onSrfufChange",null),s["a"]([Object(c["h"])("data.srfdeid")],_.prototype,"onSrfdeidChange",null),s["a"]([Object(c["h"])("data.srfsourcekey")],_.prototype,"onSrfsourcekeyChange",null),s["a"]([Object(c["h"])("data.sortno")],_.prototype,"onSortnoChange",null),s["a"]([Object(c["h"])("data.pimtypecontractname")],_.prototype,"onPimtypecontractnameChange",null),s["a"]([Object(c["h"])("data.contractlife")],_.prototype,"onContractlifeChange",null),s["a"]([Object(c["h"])("data.pimtypecontractid")],_.prototype,"onPimtypecontractidChange",null),_=s["a"]([Object(c["a"])({components:{}})],_);var L=_,J=L,q=(a("1cbb"),Object(k["a"])(J,C,D,!1,null,null,null)),U=q.exports,B=function(t){function e(){return Object(i["a"])(this,e),Object(n["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(r["a"])(e,t),e}(U);B=s["a"]([Object(c["a"])({components:{}})],B);var G,W,Y=B,K=Y,X=Object(k["a"])(K,G,W,!1,null,null,null),H=X.exports,Z=function(t){function e(){return Object(i["a"])(this,e),Object(n["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(r["a"])(e,t),e}(E);Z=s["a"]([Object(c["a"])({components:{view_form:H},beforeRouteEnter:function(t,e,a){a((function(e){e.$store.commit("addCurPageViewtag",{fullPath:t.fullPath,viewtag:e.viewtag})}))}})],Z);var z,Q,tt=Z,et=tt,at=Object(k["a"])(et,z,Q,!1,null,null,null);e["default"]=at.exports},"97a4":function(t,e,a){},b283:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("2b19"),a("b64b");var i=a("d4ec"),n=a("bee2"),o=function(){function t(){Object(i["a"])(this,t),this.view=null,this.opt={},this.methods={},this.isLoadDefault=!0}return Object(n["a"])(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt=t,this.methods=t.methods,this.view=t.view,this.isLoadDefault=t.isLoadDefault,this.keyPSDEField=t.keyPSDEField,this.majorPSDEField=t.majorPSDEField,this.load()}},{key:"load",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"onCtrlEvent",value:function(t,e,a){}},{key:"doSysUIAction",value:function(t,e){Object.is(e,"FRONT")&&this.methods.front&&this.methods.front(t)}},{key:"doSysWFUIAction",value:function(t,e){Object.is(e,"WFFRONT")&&this.methods.wfFront&&this.methods.wfFront(t)}},{key:"isFunc",value:function(t){return t instanceof Function}},{key:"setViewState2",value:function(t){var e=t.tag,a=t.action,i=t.viewdata;this.view.viewState.next({tag:e,action:a,data:i})}},{key:"calcToolbarItemState",value:function(t,e){var a=this;if(a.view.toolBarModels&&0!==Object.keys(a.view.toolBarModels).length)for(var i in a.view.toolBarModels){if(!a.view.toolBarModels.hasOwnProperty(i))return;var n=a.view.toolBarModels[i];n.uiaction&&(Object.is(n.uiaction.target,"SINGLEKEY")||Object.is(n.uiaction.target,"MULTIKEY"))&&(n.disabled=t)}}}]),t}()},b96d:function(t,e,a){"use strict";var i=a("427d"),n=a.n(i);n.a},ef3d:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));a("99af"),a("c975"),a("b0c0"),a("2b19");var i=a("d4ec"),n=a("bee2"),o=a("99de"),r=a("7e84"),s=a("45eb"),c=a("262e"),l=a("b283"),u=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.p2k="",t}return Object(c["a"])(e,t),Object(n["a"])(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.form=t.form,this.p2k=t.p2k,Object(s["a"])(Object(r["a"])(e.prototype),"init",this).call(this,t)}},{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s["a"])(Object(r["a"])(e.prototype),"load",this).call(this,t),this.getForm()&&this.isLoadDefault){var a=this.getForm().name,i="";i=this.keyPSDEField&&this.view.context[this.keyPSDEField]&&!Object.is(this.view.context[this.keyPSDEField],"")?"load":"loaddraft",this.setViewState2({tag:a,action:i,viewdata:this.view.viewparams})}this.isLoadDefault=!0}},{key:"onCtrlEvent",value:function(t,a,i){Object(s["a"])(Object(r["a"])(e.prototype),"onCtrlEvent",this).call(this,t,a,i),Object.is(t,"form")&&this.formEvent(a,i)}},{key:"formEvent",value:function(t,e){Object.is(t,"load")&&this.onFormLoad(e),Object.is(t,"save")&&this.onFormSave(e),Object.is(t,"remove")&&this.onFormRemove(e)}},{key:"onFormLoad",value:function(t){this.view.model.dataInfo=Object.is(t.srfuf,"1")?this.majorPSDEField?t[this.majorPSDEField]:t.srfmajortext:this.view.$t("app.local.new"),this.setTabCaption(this.view.model.dataInfo);var e=!Object.is(t.srfuf,"1");this.calcToolbarItemState(e)}},{key:"onFormSave",value:function(t){this.view.model.dataInfo=Object.is(t.srfuf,"1")?this.majorPSDEField?t[this.majorPSDEField]:t.srfmajortext:this.view.$t("app.local.new"),this.setTabCaption(this.view.model.dataInfo);var e=!Object.is(t.srfuf,"1");this.calcToolbarItemState(e),this.view.$emit("save",t),this.view.$emit("viewdataschange",JSON.stringify({action:"save",status:"success",data:t}))}},{key:"onFormRemove",value:function(t){this.view.$emit("remove",t),this.view.$emit("viewdataschange",JSON.stringify({action:"remove",status:"success",data:t}))}},{key:"doSysUIAction",value:function(t,a){Object.is(t,"Save")?this.doSave():Object(s["a"])(Object(r["a"])(e.prototype),"doSysUIAction",this).call(this,t,a)}},{key:"doSave",value:function(){this.saveData({})}},{key:"saveData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.getForm()){var e=this.getForm().name;this.setViewState2({tag:e,action:"save",viewdata:t})}}},{key:"getForm",value:function(){return this.form}},{key:"setTabCaption",value:function(t){var e=this.view.model,a=e.srfTitle.indexOf("-");e&&t&&!Object.is(t,"")&&(-1!==a&&(e.srfTitle=e.srfTitle.substr(0,a)),this.view.$tabPageExp&&this.view.$tabPageExp.setCurPageCaption(this.view.$t(e.srfTitle),this.view.$t(e.srfTitle),t),this.view.$route&&(this.view.$route.meta.info=t),this.view.model.srfTitle="".concat(this.view.$t(e.srfTitle),"-").concat(e.dataInfo))}}]),e}(l["a"])}}]);