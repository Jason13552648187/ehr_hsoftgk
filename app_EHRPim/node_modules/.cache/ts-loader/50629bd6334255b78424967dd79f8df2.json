{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js??ref--13-3!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\utils\\util\\util.ts","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\utils\\util\\util.ts","mtime":1630509410946},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5pcy1uYW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnBhZC1zdGFydCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgU2NoZW1hIGZyb20gImFzeW5jLXZhbGlkYXRvciI7Ci8qKg0KICog5bmz5Y+w5bel5YW357G7DQogKg0KICogQGV4cG9ydA0KICogQGNsYXNzIFV0aWwNCiAqLwoKZXhwb3J0IHZhciBVdGlsID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gVXRpbCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVdGlsKTsKICB9CgogIF9jcmVhdGVDbGFzcyhVdGlsLCBudWxsLCBbewogICAga2V5OiAiY3JlYXRlVVVJRCIsCgogICAgLyoqDQogICAgICog5Yib5bu6IFVVSUQNCiAgICAgKg0KICAgICAqIEBzdGF0aWMNCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBVdGlsDQogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlVVVJRCgpIHsKICAgICAgZnVuY3Rpb24gczQoKSB7CiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzNCgpICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWIm+W7uuW6j+WIl+WPtw0KICAgICAqDQogICAgICogQHN0YXRpYw0KICAgICAqIEByZXR1cm5zIHtudW1iZXJ9DQogICAgICogQG1lbWJlcm9mIFV0aWwNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY3JlYXRlU2VyaWFsTnVtYmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVTZXJpYWxOdW1iZXIoKSB7CiAgICAgIGZ1bmN0aW9uIHM0KCkgewogICAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHM0KCk7CiAgICB9CiAgICAvKioNCiAgICAgKiDliKTmlq3mmK/lkKbkuLrkuIDkuKrlh73mlbANCiAgICAgKg0KICAgICAqIEBzdGF0aWMNCiAgICAgKiBAcGFyYW0geyp9IGZ1bmMNCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgVXRpbA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpc0Z1bmN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0Z1bmN0aW9uKGZ1bmMpIHsKICAgICAgcmV0dXJuIHR5cGVvZiBmdW5jID09PSAnZnVuY3Rpb24nOwogICAgfQogICAgLyoqDQogICAgICoNCiAgICAgKg0KICAgICAqIEBzdGF0aWMNCiAgICAgKiBAcGFyYW0geyp9IFtvPXt9XQ0KICAgICAqIEBtZW1iZXJvZiBVdGlsDQogICAgICovCgogIH0sIHsKICAgIGtleTogInByb2Nlc3NSZXN1bHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2Nlc3NSZXN1bHQoKSB7CiAgICAgIHZhciBvID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCiAgICAgIGlmIChvLnVybCAhPSBudWxsICYmIG8udXJsICE9PSAnJykgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gby51cmw7CiAgICAgIH0KCiAgICAgIGlmIChvLmNvZGUgIT0gbnVsbCAmJiBvLmNvZGUgIT09ICcnKSB7CiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWV2YWwKICAgICAgICBldmFsKG8uY29kZSk7CiAgICAgIH0KCiAgICAgIGlmIChvLmRvd25sb2FkdXJsICE9IG51bGwgJiYgby5kb3dubG9hZHVybCAhPT0gJycpIHsKICAgICAgICB2YXIgZG93bmxvYWR1cmwgPSB0aGlzLnBhcnNlVVJMMihvLmRvd25sb2FkdXJsLCAnJyk7CiAgICAgICAgdGhpcy5kb3dubG9hZChkb3dubG9hZHVybCk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOS4i+i9veaWh+S7tg0KICAgICAqDQogICAgICogQHN0YXRpYw0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwNCiAgICAgKiBAbWVtYmVyb2YgVXRpbA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkb3dubG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZG93bmxvYWQodXJsKSB7CiAgICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpOwogICAgfQogICAgLyoqDQogICAgICoNCiAgICAgKg0KICAgICAqIEBzdGF0aWMNCiAgICAgKiBAcGFyYW0ge2FueX0gdXJsDQogICAgICogQHBhcmFtIHthbnl9IHBhcmFtcw0KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFV0aWwNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicGFyc2VVUkwyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZVVSTDIodXJsLCBwYXJhbXMpIHsKICAgICAgdmFyIHRtcFVSTDsKCiAgICAgIGlmICh1cmwuaW5kZXhPZignLi4vLi4vJykgIT09IC0xKSB7CiAgICAgICAgdG1wVVJMID0gdXJsLnN1YnN0cmluZyh1cmwuaW5kZXhPZignLi4vLi4vJykgKyA2LCB1cmwubGVuZ3RoKTsKICAgICAgfSBlbHNlIGlmICh1cmwuaW5kZXhPZignLycpID09PSAwKSB7CiAgICAgICAgdG1wVVJMID0gdXJsLnN1YnN0cmluZyh1cmwuaW5kZXhPZignLycpICsgMSwgdXJsLmxlbmd0aCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdG1wVVJMID0gdXJsOwogICAgICB9CgogICAgICBpZiAocGFyYW1zKSB7CiAgICAgICAgcmV0dXJuIHRtcFVSTCArICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRtcFVSTDsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog5piv5ZCm5piv5pWw5a2XDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG51bQ0KICAgICAqIEByZXR1cm5zIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBVdGlsDQogICAgICovCgogIH0sIHsKICAgIGtleTogImlzTnVtYmVyTmFOIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc051bWJlck5hTihudW0pIHsKICAgICAgcmV0dXJuIE51bWJlci5pc05hTihudW0pIHx8IG51bSAhPT0gbnVtOwogICAgfQogICAgLyoqDQogICAgICog5piv5ZCm5pyq5a6a5LmJDQogICAgICoNCiAgICAgKiBAc3RhdGljDQogICAgICogQHBhcmFtIHsqfSB2YWx1ZQ0KICAgICAqIEByZXR1cm5zIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBVdGlsDQogICAgICovCgogIH0sIHsKICAgIGtleTogImlzVW5kZWZpbmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSkgewogICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJzsKICAgIH0KICAgIC8qKg0KICAgICAqIOaYr+WQpuS4uuepug0KICAgICAqDQogICAgICogQHN0YXRpYw0KICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUNCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgVXRpbA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpc0VtcHR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVW5kZWZpbmVkKHZhbHVlKSB8fCBPYmplY3QuaXModmFsdWUsICcnKSB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWU7CiAgICB9CiAgICAvKioNCiAgICAgKiDovazmjaLkuLrnn6npmLXlj4LmlbANCiAgICAgKg0KICAgICAqIEBzdGF0aWMNCiAgICAgKiBAcGFyYW0geyp9IG9iag0KICAgICAqIEByZXR1cm5zIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBVdGlsDQogICAgICovCgogIH0sIHsKICAgIGtleTogImZvcm1hdE1hdHJpeFN0cmluZ2lmeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9ybWF0TWF0cml4U3RyaW5naWZ5KG9iaikgewogICAgICB2YXIgc3RyID0gJyc7CgogICAgICBpZiAob2JqICYmICEob2JqIGluc3RhbmNlb2YgQXJyYXkpICYmIG9iaiBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTsKICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgaWYgKCFvYmpba2V5XSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFPYmplY3QuaXMoc3RyLCAnJykpIHsKICAgICAgICAgICAgc3RyICs9ICc7JzsKICAgICAgICAgIH0KCiAgICAgICAgICBzdHIgKz0gIiIuY29uY2F0KGtleSwgIj0iKS5jb25jYXQob2JqW2tleV0pOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gT2JqZWN0LmlzKHN0ciwgJycpID8gdW5kZWZpbmVkIDogc3RyOwogICAgfQogICAgLyoqDQogICAgICog5YeG5aSH6Lev55Sx5Y+C5pWwDQogICAgICoNCiAgICAgKiBAc3RhdGljDQogICAgICogQHBhcmFtIHsqfSB7IHJvdXRlOiByb3V0ZSwgc291cmNlTm9kZTogc291cmNlTm9kZSwgdGFyZ2V0Tm9kZTogdGFyZ2V0Tm9kZSwgZGF0YTogZGF0YSB9DQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIFV0aWwNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicHJlcGFyZVJvdXRlUGFybWFzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVwYXJlUm91dGVQYXJtYXMoX3JlZikgewogICAgICB2YXIgcm91dGUgPSBfcmVmLnJvdXRlLAogICAgICAgICAgc291cmNlTm9kZSA9IF9yZWYuc291cmNlTm9kZSwKICAgICAgICAgIHRhcmdldE5vZGUgPSBfcmVmLnRhcmdldE5vZGUsCiAgICAgICAgICBkYXRhID0gX3JlZi5kYXRhOwogICAgICB2YXIgcGFyYW1zID0ge307CgogICAgICBpZiAoIXNvdXJjZU5vZGUgfHwgc291cmNlTm9kZSAmJiBPYmplY3QuaXMoc291cmNlTm9kZSwgJycpKSB7CiAgICAgICAgcmV0dXJuIHBhcmFtczsKICAgICAgfQoKICAgICAgaWYgKCF0YXJnZXROb2RlIHx8IHRhcmdldE5vZGUgJiYgT2JqZWN0LmlzKHRhcmdldE5vZGUsICcnKSkgewogICAgICAgIHJldHVybiBwYXJhbXM7CiAgICAgIH0KCiAgICAgIHZhciBpbmRleE5hbWUgPSByb3V0ZS5tYXRjaGVkWzBdLm5hbWU7CiAgICAgIE9iamVjdC5hc3NpZ24ocGFyYW1zLCBfZGVmaW5lUHJvcGVydHkoe30sIGluZGV4TmFtZSwgcm91dGUucGFyYW1zW2luZGV4TmFtZV0pKTsKICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbXMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgdGFyZ2V0Tm9kZSwgdGhpcy5mb3JtYXRNYXRyaXhTdHJpbmdpZnkoZGF0YSkpKTsKICAgICAgcmV0dXJuIHBhcmFtczsKICAgIH0KICAgIC8qKg0KICAgICAqIOiOt+WPluW9k+WJjeWAvOexu+Weiw0KICAgICAqDQogICAgICogQHN0YXRpYw0KICAgICAqIEBwYXJhbSB7Kn0gb2JqDQogICAgICogQHJldHVybnMNCiAgICAgKiBAbWVtYmVyb2YgVXRpbA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ0eXBlT2YiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHR5cGVPZihvYmopIHsKICAgICAgdmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKICAgICAgdmFyIG1hcCA9IHsKICAgICAgICAnW29iamVjdCBCb29sZWFuXSc6ICdib29sZWFuJywKICAgICAgICAnW29iamVjdCBOdW1iZXJdJzogJ251bWJlcicsCiAgICAgICAgJ1tvYmplY3QgU3RyaW5nXSc6ICdzdHJpbmcnLAogICAgICAgICdbb2JqZWN0IEZ1bmN0aW9uXSc6ICdmdW5jdGlvbicsCiAgICAgICAgJ1tvYmplY3QgQXJyYXldJzogJ2FycmF5JywKICAgICAgICAnW29iamVjdCBEYXRlXSc6ICdkYXRlJywKICAgICAgICAnW29iamVjdCBSZWdFeHBdJzogJ3JlZ0V4cCcsCiAgICAgICAgJ1tvYmplY3QgVW5kZWZpbmVkXSc6ICd1bmRlZmluZWQnLAogICAgICAgICdbb2JqZWN0IE51bGxdJzogJ251bGwnLAogICAgICAgICdbb2JqZWN0IE9iamVjdF0nOiAnb2JqZWN0JwogICAgICB9OwogICAgICByZXR1cm4gbWFwW3RvU3RyaW5nLmNhbGwob2JqKV07CiAgICB9CiAgICAvKioNCiAgICAgKiDmt7Hmi7fotJ0oZGVlcENvcHkpDQogICAgICoNCiAgICAgKiBAc3RhdGljDQogICAgICogQHBhcmFtIHsqfSBkYXRhDQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIFV0aWwNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGVlcENvcHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlZXBDb3B5KGRhdGEpIHsKICAgICAgdmFyIHQgPSB0aGlzLnR5cGVPZihkYXRhKTsKICAgICAgdmFyIG87CgogICAgICBpZiAodCA9PT0gJ2FycmF5JykgewogICAgICAgIG8gPSBbXTsKICAgICAgfSBlbHNlIGlmICh0ID09PSAnb2JqZWN0JykgewogICAgICAgIG8gPSB7fTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgfQoKICAgICAgaWYgKHQgPT09ICdhcnJheScpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIG8ucHVzaCh0aGlzLmRlZXBDb3B5KGRhdGFbaV0pKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodCA9PT0gJ29iamVjdCcpIHsKICAgICAgICBmb3IgKHZhciBfaSBpbiBkYXRhKSB7CiAgICAgICAgICBvW19pXSA9IHRoaXMuZGVlcENvcHkoZGF0YVtfaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG87CiAgICB9CiAgICAvKioNCiAgICAgKiDlkI3np7DmoLzlvI/ljJYNCiAgICAgKg0KICAgICAqIEBzdGF0aWMNCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZQ0KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFV0aWwNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic3JmRmlsZVBhdGgyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzcmZGaWxlUGF0aDIobmFtZSkgewogICAgICBpZiAoIW5hbWUgfHwgbmFtZSAmJiBPYmplY3QuaXMobmFtZSwgJycpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCflkI3np7DlvILluLgnKTsKICAgICAgfQoKICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW19dL2csICctJyk7CiAgICAgIHZhciBzdGF0ZSA9IDA7CiAgICAgIHZhciBfc3RyID0gJyc7CiAgICAgIHZhciB1UGF0dGVybiA9IC9eW0EtWl17MX0kLzsKICAgICAgdmFyIHN0cjEgPSBuYW1lLnN1YnN0cmluZygwLCAxKTsKICAgICAgdmFyIHN0cjIgPSBuYW1lLnN1YnN0cmluZygxKTsKICAgICAgc3RhdGUgPSB1UGF0dGVybi50ZXN0KHN0cjEpID8gMSA6IDA7CiAgICAgIF9zdHIgPSAiIi5jb25jYXQoX3N0cikuY29uY2F0KHN0cjEudG9Mb3dlckNhc2UoKSk7CiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gc3RyMltTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgIHZhciBjaHIgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICBpZiAodVBhdHRlcm4udGVzdChjaHIpKSB7CiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMSkgewogICAgICAgICAgICAgIF9zdHIgPSAiIi5jb25jYXQoX3N0cikuY29uY2F0KGNoci50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfc3RyID0gIiIuY29uY2F0KF9zdHIsICItIikuY29uY2F0KGNoci50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc3RhdGUgPSAxOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3N0ciA9ICIiLmNvbmNhdChfc3RyKS5jb25jYXQoY2hyLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICBzdGF0ZSA9IDA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3JbInJldHVybiJdICE9IG51bGwpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yWyJyZXR1cm4iXSgpOwogICAgICAgICAgfQogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBfc3RyID0gX3N0ci5yZXBsYWNlKC8tLS0vZywgJy0nKS5yZXBsYWNlKC8tLS9nLCAnLScpOwogICAgICByZXR1cm4gX3N0cjsKICAgIH0KICAgIC8qKg0KICAgICAqIOmZhOWKoOWPguaVsOagvOW8j+WMlg0KICAgICAqDQogICAgICogQHN0YXRpYw0KICAgICAqIEBwYXJhbSB7YW55fSBhcmcg6KGo5Y2V5pWw5o2uDQogICAgICogQHBhcmFtIHthbnl9IHBhcmVudCDlpJblsYJjb250ZXh05oiWdmlld3BhcmFtcw0KICAgICAqIEBwYXJhbSB7YW55fSBwYXJhbXMg6ZmE5Yqg5Y+C5pWwDQogICAgICogQHJldHVybnMge2FueX0NCiAgICAgKiBAbWVtYmVyb2YgVXRpbA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmb3JtYXREYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JtYXREYXRhKGFyZywgcGFyZW50LCBwYXJhbXMpIHsKICAgICAgdmFyIF9kYXRhID0ge307CiAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgIGlmICghbmFtZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHZhbHVlID0gcGFyYW1zW25hbWVdOwoKICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUuc3RhcnRzV2l0aCgnJScpICYmIHZhbHVlLmVuZHNXaXRoKCclJykpIHsKICAgICAgICAgIHZhciBrZXkgPSB2YWx1ZS5zdWJzdHJpbmcoMSwgdmFsdWUubGVuZ3RoIC0gMSk7CgogICAgICAgICAgaWYgKGFyZyAmJiBhcmcuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgICBpZiAoYXJnW2tleV0gIT09IG51bGwgJiYgYXJnW2tleV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHZhbHVlID0gYXJnW2tleV07CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyZW50W2tleV0gIT09IG51bGwgJiYgcGFyZW50W2tleV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHZhbHVlID0gcGFyZW50W2tleV07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFsdWUgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YWx1ZSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBPYmplY3QuYXNzaWduKF9kYXRhLCBfZGVmaW5lUHJvcGVydHkoe30sIG5hbWUsIHZhbHVlKSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gX2RhdGE7CiAgICB9CiAgICAvKioNCiAgICAgKiDorqHnrpflr7zoiKrmlbDmja4NCiAgICAgKiDlhYjku47lvZPliY3mlbDmja7nm67moIforqHnrpfvvIznhLblkI7lho3ku47lvZPliY3kuIrkuIvmloforqHnrpfvvIzmnIDlkI7ku47lvZPliY3op4blm77lj4LmlbDorqHnrpfvvIzmsqHmnInliJnkuLpudWxsDQogICAgICoNCiAgICAgKiBAc3RhdGljDQogICAgICogQHBhcmFtIHthbnl9IGRhdGEg6KGo5Y2V5pWw5o2uDQogICAgICogQHBhcmFtIHthbnl9IHBhcmVudENvbnRleHQg5aSW5bGCY29udGV4dA0KICAgICAqIEBwYXJhbSB7YW55fSBwYXJlbnRQYXJhbSDlpJblsYJwYXJhbQ0KICAgICAqIEBwYXJhbSB7YW55fSBwYXJhbXMg6ZmE5Yqg5Y+C5pWwDQogICAgICogQHJldHVybnMge2FueX0NCiAgICAgKiBAbWVtYmVyb2YgVXRpbA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjb21wdXRlZE5hdkRhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXB1dGVkTmF2RGF0YShkYXRhLCBwYXJlbnRDb250ZXh0LCBwYXJlbnRQYXJhbSwgcGFyYW1zKSB7CiAgICAgIHZhciBfZGF0YSA9IHt9OwoKICAgICAgaWYgKHBhcmFtcyAmJiBPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA+IDApIHsKICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgIGlmICghbmFtZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHZhbHVlID0gcGFyYW1zW25hbWVdOwoKICAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS5zdGFydHNXaXRoKCclJykgJiYgdmFsdWUuZW5kc1dpdGgoJyUnKSkgewogICAgICAgICAgICB2YXIga2V5ID0gdmFsdWUuc3Vic3RyaW5nKDEsIHZhbHVlLmxlbmd0aCAtIDEpLnRvTG93ZXJDYXNlKCk7CgogICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICB2YWx1ZSA9IGRhdGFba2V5XTsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJlbnRDb250ZXh0ICYmIHBhcmVudENvbnRleHRba2V5XSkgewogICAgICAgICAgICAgIHZhbHVlID0gcGFyZW50Q29udGV4dFtrZXldOwogICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmVudFBhcmFtICYmIHBhcmVudFBhcmFtW2tleV0pIHsKICAgICAgICAgICAgICB2YWx1ZSA9IHBhcmVudFBhcmFtW2tleV07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFsdWUgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgT2JqZWN0LmFzc2lnbihfZGF0YSwgX2RlZmluZVByb3BlcnR5KHt9LCBuYW1lLnRvTG93ZXJDYXNlKCksIHZhbHVlKSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfZGF0YTsKICAgIH0KICAgIC8qKg0KICAgICAqIOaXpeacn+agvOW8j+WMlg0KICAgICAqDQogICAgICogQHN0YXRpYw0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQg5qC85byP5YyW5a2X56ym5LiyDQogICAgICogQHBhcmFtIHthbnl9IGRhdGUg5pel5pyf5a+56LGhDQogICAgICogQHJldHVybnMge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgVXRpbA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkYXRlRm9ybWF0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkYXRlRm9ybWF0KGRhdGUpIHsKICAgICAgdmFyIGZtdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogIllZWVktbW0tZGQgSEg6TU06U1MiOwogICAgICB2YXIgcmV0OwogICAgICB2YXIgb3B0ID0gewogICAgICAgICJZKyI6IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpLAogICAgICAgICJtKyI6IChkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLAogICAgICAgICJkKyI6IGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCksCiAgICAgICAgIkgrIjogZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCksCiAgICAgICAgIk0rIjogZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKSwKICAgICAgICAiUysiOiBkYXRlLmdldFNlY29uZHMoKS50b1N0cmluZygpIC8vIOenkgogICAgICAgIC8vIOacieWFtuS7luagvOW8j+WMluWtl+espumcgOaxguWPr+S7pee7p+e7rea3u+WKoO+8jOW/hemhu+i9rOWMluaIkOWtl+espuS4sgoKICAgICAgfTsKCiAgICAgIGZvciAodmFyIGsgaW4gb3B0KSB7CiAgICAgICAgcmV0ID0gbmV3IFJlZ0V4cCgiKCIgKyBrICsgIikiKS5leGVjKGZtdCk7CgogICAgICAgIGlmIChyZXQpIHsKICAgICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKHJldFsxXSwgcmV0WzFdLmxlbmd0aCA9PSAxID8gb3B0W2tdIDogb3B0W2tdLnBhZFN0YXJ0KHJldFsxXS5sZW5ndGgsICIwIikpOwogICAgICAgIH0KCiAgICAgICAgOwogICAgICB9CgogICAgICA7CiAgICAgIHJldHVybiBmbXQ7CiAgICB9CiAgICAvKioNCiAgICAgKiDmt7HluqblkIjlubblr7nosaENCiAgICAgKg0KICAgICAqIEBwYXJhbSBGaXJzdE9CSiDnm67moIflr7nosaENCiAgICAgKiBAcGFyYW0gU2Vjb25kT0JKIOWOn+WvueixoQ0KICAgICAqIEByZXR1cm5zIHtPYmplY3R9DQogICAgICogQG1lbWJlcm9mIFV0aWwNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGVlcE9iamVjdE1lcmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWVwT2JqZWN0TWVyZ2UoRmlyc3RPQkosIFNlY29uZE9CSikgewogICAgICBmb3IgKHZhciBrZXkgaW4gU2Vjb25kT0JKKSB7CiAgICAgICAgRmlyc3RPQkpba2V5XSA9IEZpcnN0T0JKW2tleV0gJiYgRmlyc3RPQkpba2V5XS50b1N0cmluZygpID09PSAiW29iamVjdCBPYmplY3RdIiA/IHRoaXMuZGVlcE9iamVjdE1lcmdlKEZpcnN0T0JKW2tleV0sIFNlY29uZE9CSltrZXldKSA6IEZpcnN0T0JKW2tleV0gPSBTZWNvbmRPQkpba2V5XTsKICAgICAgfQoKICAgICAgcmV0dXJuIEZpcnN0T0JKOwogICAgfQogICAgLyoqDQogICAgICog6KGo5Y2V6aG55qCh6aqMDQogICAgICoNCiAgICAgKiBAcGFyYW0gcHJvcGVydHkg6KGo5Y2V6aG55bGe5oCn5ZCNDQogICAgICogQHBhcmFtIGRhdGEg6KGo5Y2V5pWw5o2uDQogICAgICogQHBhcmFtIHJ1bGVzIOihqOWNleWAvOinhOWImQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlfQ0KICAgICAqIEBtZW1iZXJvZiBVdGlsDQogICAgICovCgogIH0sIHsKICAgIGtleTogInZhbGlkYXRlSXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVJdGVtKHByb3BlcnR5LCBkYXRhLCBydWxlcykgewogICAgICAvLyAxLuiOt+WPluaVsOWAvOWSjOinhOWImQogICAgICB2YXIgdmFsdWUgPSBkYXRhW3Byb3BlcnR5XTsKICAgICAgdmFyIHJ1bGUgPSBydWxlc1twcm9wZXJ0eV07IC8vIDIu5Yib5bu65qCh6aqM6KeE5YiZCgogICAgICB2YXIgc2NoZW1hID0gbmV3IFNjaGVtYShfZGVmaW5lUHJvcGVydHkoe30sIHByb3BlcnR5LCBydWxlKSk7IC8vIOagoemqjOi/lOWbnlByb21pc2UKCiAgICAgIHJldHVybiBzY2hlbWEudmFsaWRhdGUoX2RlZmluZVByb3BlcnR5KHt9LCBwcm9wZXJ0eSwgdmFsdWUpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBVdGlsOwp9KCk7"},null]}