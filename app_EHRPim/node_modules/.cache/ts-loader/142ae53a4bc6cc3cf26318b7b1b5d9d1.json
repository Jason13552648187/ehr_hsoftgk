{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js??ref--14-3!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-contract\\tree-treeview\\tree-treeview-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-contract\\tree-treeview\\tree-treeview-base.vue","mtime":1630509411480},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydGllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgppbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gInRzbGliIjsKaW1wb3J0IHsgVnVlLCBDb21wb25lbnQsIFByb3AsIFByb3ZpZGUsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IFV0aWwgfSBmcm9tICdAL3V0aWxzJzsKaW1wb3J0IFBpbUNvbnRyYWN0U2VydmljZSBmcm9tICdAL3NlcnZpY2UvcGltLWNvbnRyYWN0L3BpbS1jb250cmFjdC1zZXJ2aWNlJzsKaW1wb3J0IFRyZWVTZXJ2aWNlIGZyb20gJy4vdHJlZS10cmVldmlldy1zZXJ2aWNlJzsKCnZhciBUcmVlQmFzZSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoVHJlZUJhc2UsIF9WdWUpOwoKICBmdW5jdGlvbiBUcmVlQmFzZSgpIHsKICAgIHZhciBfdGhpczI7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyZWVCYXNlKTsKCiAgICBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVHJlZUJhc2UpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgLyoqDQogICAgICog6K6h5pWw5Zmo5pyN5Yqh5a+56LGh6ZuG5ZCIDQogICAgICoNCiAgICAgKiBAdHlwZSB7QXJyYXk8Kj59DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogICAgX3RoaXMyLmNvdW50ZXJTZXJ2aWNlQXJyYXkgPSBbXTsKICAgIC8qKg0KICAgICAqIOW7uuaehOmDqOS7tuacjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1RyZWVTZXJ2aWNlfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5zZXJ2aWNlID0gbmV3IFRyZWVTZXJ2aWNlKHsKICAgICAgJHN0b3JlOiBfdGhpczIuJHN0b3JlCiAgICB9KTsKICAgIC8qKg0KICAgICAqIOWunuS9k+acjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1BpbUNvbnRyYWN0U2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuYXBwRW50aXR5U2VydmljZSA9IG5ldyBQaW1Db250cmFjdFNlcnZpY2UoewogICAgICAkc3RvcmU6IF90aGlzMi4kc3RvcmUKICAgIH0pOwogICAgLyoqDQogICAgICog5Yid5aeL5YyW5a6M5oiQDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuaW5pdGVkID0gZmFsc2U7CiAgICAvKioNCiAgICAgKiDlt7LpgInkuK3mlbDmja7pm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5zZWxlY3RlZE5vZGVzID0gW107CiAgICAvKioNCiAgICAgKiDlvZPliY3pgInkuK3mlbDmja7pobkNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5jdXJyZW50c2VsZWN0ZWROb2RlID0ge307CiAgICAvKioNCiAgICAgKiDlm57mmL7pgInkuK3mlbDmja7pm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5lY2hvc2VsZWN0ZWROb2RlcyA9IF90aGlzMi5zZWxlY3RlZERhdGEgPyBfdGhpczIuaXNTaW5nbGVTZWxlY3QgPyBbSlNPTi5wYXJzZShfdGhpczIuc2VsZWN0ZWREYXRhKVswXV0gOiBKU09OLnBhcnNlKF90aGlzMi5zZWxlY3RlZERhdGEpIDogW107CiAgICAvKioNCiAgICAgKiDov4fmu6TlsZ7mgKcNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogICAgX3RoaXMyLnNyZm5vZGVmaWx0ZXIgPSAnJzsKICAgIC8qKg0KICAgICAqIOm7mOiupOi+k+WHuuWbvuaghw0KICAgICAqDQogICAgICogQHR5cGUge2Jvb2xlYW59DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogICAgX3RoaXMyLmlzT3V0cHV0SWNvbkRlZmF1bHQgPSB0cnVlOwogICAgLyoqDQogICAgICog5pWw5o2u5bGV5byA5Li76ZSuDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nW119DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogICAgX3RoaXMyLmV4cGFuZGVkS2V5cyA9IFtdOwogICAgcmV0dXJuIF90aGlzMjsKICB9CiAgLyoqDQogICAqIOiOt+WPlumDqOS7tuexu+Weiw0KICAgKg0KICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoVHJlZUJhc2UsIFt7CiAgICBrZXk6ICJnZXRDb250cm9sVHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udHJvbFR5cGUoKSB7CiAgICAgIHJldHVybiAnVFJFRVZJRVcnOwogICAgfQogICAgLyoqDQogICAgICog5YWz6Zet6KeG5Zu+DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjbG9zZVZpZXciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlVmlldyhhcmdzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy4kZW1pdCgnY2xvc2V2aWV3JywgW2FyZ3NdKTsKICAgIH0KICAgIC8qKg0KICAgICAqICDorqHmlbDlmajliLfmlrANCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjb3VudGVyUmVmcmVzaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY291bnRlclJlZnJlc2goKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMuY291bnRlclNlcnZpY2VBcnJheSAmJiBfdGhpcy5jb3VudGVyU2VydmljZUFycmF5Lmxlbmd0aCA+IDApIHsKICAgICAgICBfdGhpcy5jb3VudGVyU2VydmljZUFycmF5LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChpdGVtLnJlZnJlc2hEYXRhICYmIGl0ZW0ucmVmcmVzaERhdGEgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgICBpdGVtLnJlZnJlc2hEYXRhKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOiOt+WPluWkmumhueaVsOaNrg0KICAgICAqDQogICAgICogQHJldHVybnMge2FueVtdfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXREYXRhcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGF0YXMoKSB7CiAgICAgIHJldHVybiBbdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlXTsKICAgIH0KICAgIC8qKg0KICAgICAqIOiOt+WPluWNlemhueagkQ0KICAgICAqDQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGU7CiAgICB9CiAgICAvKioNCiAgICAgKiDpgInkuK3lgLzlj5jljJYNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25WYWx1ZUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25WYWx1ZUNoYW5nZShuZXdWYWwsIG9sZFZhbCkgewogICAgICB0aGlzLmVjaG9zZWxlY3RlZE5vZGVzID0gbmV3VmFsID8gdGhpcy5pc1NpbmdsZVNlbGVjdCA/IEpTT04ucGFyc2UobmV3VmFsKVswXSA6IEpTT04ucGFyc2UobmV3VmFsKSA6IFtdOwogICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbXTsKCiAgICAgIGlmICh0aGlzLmVjaG9zZWxlY3RlZE5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgQWxsbm9kZXNPYmogPSB0aGlzLiRyZWZzLnRyZWVleHBiYXJfdHJlZS5zdG9yZS5ub2Rlc01hcDsKICAgICAgICB2YXIgQWxsbm9kZXNBcnJheSA9IFtdOwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gQWxsbm9kZXNPYmopIHsKICAgICAgICAgIGlmIChBbGxub2Rlc09iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgIEFsbG5vZGVzQXJyYXkucHVzaChBbGxub2Rlc09ialtrZXldLmRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5zZXREZWZhdWx0U2VsZWN0aW9uKEFsbG5vZGVzQXJyYXkpOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDpgInkuK3mlbDmja7lj5jmm7Tkuovku7YNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0geyp9IGRhdGENCiAgICAgKiBAcGFyYW0geyp9IGRhdGEg5b2T5YmN6IqC54K55a+55bqU5Lyg5YWl5a+56LGhDQogICAgICogQHBhcmFtIHsqfSBjaGVja2VkU3RhdGUg5qCR55uu5YmN6YCJ5Lit54q25oCB5a+56LGhDQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uQ2hlY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hlY2soZGF0YSwgY2hlY2tlZFN0YXRlKSB7CiAgICAgIC8vIOWkhOeQhuWkmumAieaVsOaNrgogICAgICBpZiAoIXRoaXMuaXNTaW5nbGVTZWxlY3QpIHsKICAgICAgICB2YXIgbGVhZk5vZGVzID0gY2hlY2tlZFN0YXRlLmNoZWNrZWROb2Rlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmxlYWY7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZWxlY3RlZE5vZGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShsZWFmTm9kZXMpKTsKICAgICAgICB0aGlzLiRlbWl0KCdzZWxlY3Rpb25jaGFuZ2UnLCB0aGlzLnNlbGVjdGVkTm9kZXMpOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDpgInkuK3mlbDmja7lj5jmm7Tkuovku7YNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0geyp9IGRhdGEg6IqC54K55a+55bqU5Lyg5YWl5a+56LGhDQogICAgICogQHBhcmFtIHsqfSBub2RlIOiKgueCueWvueW6lG5vZGXlr7nosaENCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2VsZWN0aW9uQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3Rpb25DaGFuZ2UoZGF0YSwgbm9kZSkgewogICAgICAvLyDnpoHnlKjpobnlpITnkIYKICAgICAgaWYgKGRhdGEuZGlzYWJsZWQpIHsKICAgICAgICBub2RlLmlzQ3VycmVudCA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyDlj6rlpITnkIbmnIDlupXlsYLlrZDoioLngrkKCgogICAgICBpZiAodGhpcy5pc0JyYW5jaEF2YWlsYWJsZSB8fCBkYXRhLmxlYWYpIHsKICAgICAgICB0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKTsgLy8g5Y2V6YCJ55u05o6l5pu/5o2iCgogICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsZWN0KSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlXTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGlvbmNoYW5nZScsIHRoaXMuc2VsZWN0ZWROb2Rlcyk7CiAgICAgICAgfSAvLyDlpJrpgInnlKhjaGVja+aWueazlQoKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICogVnVl5aOw5piO5ZGo5pyfKOWkhOeQhue7hOS7tueahOi+k+WFpeWxnuaApykNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjcmVhdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgICB0aGlzLmFmdGVyQ3JlYXRlZCgpOwogICAgfQogICAgLyoqDQogICAgICog5omn6KGMY3JlYXRlZOWQjueahOmAu+i+kQ0KICAgICAqDQogICAgICogIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJhZnRlckNyZWF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFmdGVyQ3JlYXRlZCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy52aWV3U3RhdGUpIHsKICAgICAgICB0aGlzLnZpZXdTdGF0ZUV2ZW50ID0gdGhpcy52aWV3U3RhdGUuc3Vic2NyaWJlKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgICB2YXIgdGFnID0gX3JlZi50YWcsCiAgICAgICAgICAgICAgYWN0aW9uID0gX3JlZi5hY3Rpb24sCiAgICAgICAgICAgICAgZGF0YSA9IF9yZWYuZGF0YTsKCiAgICAgICAgICBpZiAoIU9iamVjdC5pcyh0YWcsIF90aGlzMy5uYW1lKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygnbG9hZCcsIGFjdGlvbikpIHsKICAgICAgICAgICAgX3RoaXMzLmluaXRlZCA9IGZhbHNlOwoKICAgICAgICAgICAgX3RoaXMzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMzLmluaXRlZCA9IHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChPYmplY3QuaXMoJ2ZpbHRlcicsIGFjdGlvbikpIHsKICAgICAgICAgICAgX3RoaXMzLnNyZm5vZGVmaWx0ZXIgPSBkYXRhLnNyZm5vZGVmaWx0ZXI7CgogICAgICAgICAgICBfdGhpczMucmVmcmVzaF9hbGwoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdyZWZyZXNoX3BhcmVudCcsIGFjdGlvbikpIHsKICAgICAgICAgICAgX3RoaXMzLnJlZnJlc2hfcGFyZW50KCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOWvueagkeiKgueCuei/m+ihjOetm+mAieaTjeS9nA0KICAgICAqIEBtZW1iZXJvZiBPcmRlclRyZWUNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZmlsdGVyTm9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsdGVyTm9kZSh2YWx1ZSwgZGF0YSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIGRhdGEudGV4dC5pbmRleE9mKHZhbHVlKSAhPT0gLTE7CiAgICB9CiAgICAvKioNCiAgICAgKiB2dWUg55Sf5ZG95ZGo5pyfDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGVzdHJveWVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICAgIHRoaXMuYWZ0ZXJEZXN0cm95KCk7CiAgICB9CiAgICAvKioNCiAgICAgKiDmiafooYxkZXN0cm95ZWTlkI7nmoTpgLvovpENCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJhZnRlckRlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFmdGVyRGVzdHJveSgpIHsKICAgICAgaWYgKHRoaXMudmlld1N0YXRlRXZlbnQpIHsKICAgICAgICB0aGlzLnZpZXdTdGF0ZUV2ZW50LnVuc3Vic2NyaWJlKCk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOWIt+aWsOaVsOaNrg0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInJlZnJlc2hfYWxsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoX2FsbCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLmluaXRlZCA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LmluaXRlZCA9IHRydWU7CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5Yi35paw54i26IqC54K5DQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicmVmcmVzaF9wYXJlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2hfcGFyZW50KCkgewogICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlKS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciB0cmVlID0gdGhpcy4kcmVmcy50cmVlZXhwYmFyX3RyZWU7CiAgICAgIHZhciBub2RlID0gdHJlZS5nZXROb2RlKHRoaXMuY3VycmVudHNlbGVjdGVkTm9kZS5pZCk7CgogICAgICBpZiAoIW5vZGUgfHwgIW5vZGUucGFyZW50KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgY3VyTm9kZSA9IHt9OwogICAgICB2YXIgX3BhcmVudCA9IG5vZGUucGFyZW50OwogICAgICBjdXJOb2RlID0gVXRpbC5kZWVwT2JqZWN0TWVyZ2UoY3VyTm9kZSwgX3BhcmVudCk7CiAgICAgIHZhciB0ZW1wQ29udGV4dCA9IHt9OwoKICAgICAgaWYgKGN1ck5vZGUuZGF0YSAmJiBjdXJOb2RlLmRhdGEuc3JmYXBwY3R4KSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCwgY3VyTm9kZS5kYXRhLnNyZmFwcGN0eCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCwgdGhpcy5jb250ZXh0KTsKICAgICAgfQoKICAgICAgdmFyIGlkID0gX3BhcmVudC5rZXkgPyBfcGFyZW50LmtleSA6ICcjJzsKICAgICAgdmFyIHBhcmFtID0gewogICAgICAgIHNyZm5vZGVpZDogaWQKICAgICAgfTsKICAgICAgdGhpcy5yZWZyZXNoX25vZGUodGVtcENvbnRleHQsIHBhcmFtLCB0cnVlKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOaVsOaNruWKoOi9vQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBub2RlDQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIG5vZGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICB2YXIgcmVzb2x2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwoKICAgICAgaWYgKG5vZGUuZGF0YSAmJiBub2RlLmRhdGEuY2hpbGRyZW4pIHsKICAgICAgICByZXNvbHZlKG5vZGUuZGF0YS5jaGlsZHJlbik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgIHNyZm5vZGVpZDogbm9kZS5kYXRhICYmIG5vZGUuZGF0YS5pZCA/IG5vZGUuZGF0YS5pZCA6ICIjIiwKICAgICAgICBzcmZub2RlZmlsdGVyOiB0aGlzLnNyZm5vZGVmaWx0ZXIKICAgICAgfTsKICAgICAgdmFyIHRlbXBWaWV3UGFyYW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnZpZXdwYXJhbXMpKTsKICAgICAgdmFyIGN1ck5vZGUgPSB7fTsKICAgICAgY3VyTm9kZSA9IFV0aWwuZGVlcE9iamVjdE1lcmdlKGN1ck5vZGUsIG5vZGUpOwogICAgICB2YXIgdGVtcENvbnRleHQgPSB0aGlzLmNvbXB1dGVjdXJOb2RlQ29udGV4dChjdXJOb2RlKTsKCiAgICAgIGlmIChjdXJOb2RlLmRhdGEgJiYgY3VyTm9kZS5kYXRhLnNyZnBhcmVudGRlbmFtZSkgewogICAgICAgIE9iamVjdC5hc3NpZ24odGVtcENvbnRleHQsIHsKICAgICAgICAgIHNyZnBhcmVudGRlbmFtZTogY3VyTm9kZS5kYXRhLnNyZnBhcmVudGRlbmFtZQogICAgICAgIH0pOwogICAgICAgIE9iamVjdC5hc3NpZ24odGVtcFZpZXdQYXJhbXMsIHsKICAgICAgICAgIHNyZnBhcmVudGRlbmFtZTogY3VyTm9kZS5kYXRhLnNyZnBhcmVudGRlbmFtZQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoY3VyTm9kZS5kYXRhICYmIGN1ck5vZGUuZGF0YS5zcmZwYXJlbnRrZXkpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHRlbXBDb250ZXh0LCB7CiAgICAgICAgICBzcmZwYXJlbnRrZXk6IGN1ck5vZGUuZGF0YS5zcmZwYXJlbnRrZXkKICAgICAgICB9KTsKICAgICAgICBPYmplY3QuYXNzaWduKHRlbXBWaWV3UGFyYW1zLCB7CiAgICAgICAgICBzcmZwYXJlbnRrZXk6IGN1ck5vZGUuZGF0YS5zcmZwYXJlbnRrZXkKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbXMsIHsKICAgICAgICB2aWV3cGFyYW1zOiB0ZW1wVmlld1BhcmFtcwogICAgICB9KTsKICAgICAgdGhpcy5zZXJ2aWNlLmdldE5vZGVzKHRlbXBDb250ZXh0LCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKCFyZXNwb25zZSB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgX3RoaXM1LiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogIumUmeivryIsCiAgICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLmluZm8KICAgICAgICAgIH0pOwoKICAgICAgICAgIHJlc29sdmUoW10pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIF9pdGVtcyA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIF90aGlzNS5mb3JtYXRFeHBhbmRlZChfaXRlbXMpOwoKICAgICAgICByZXNvbHZlKF90b0NvbnN1bWFibGVBcnJheShfaXRlbXMpKTsKICAgICAgICB2YXIgaXNSb290ID0gT2JqZWN0LmlzKG5vZGUubGV2ZWwsIDApOwogICAgICAgIHZhciBpc1NlbGVjdGVkQWxsID0gbm9kZS5jaGVja2VkOwoKICAgICAgICBfdGhpczUuc2V0RGVmYXVsdFNlbGVjdGlvbihfaXRlbXMsIGlzUm9vdCwgaXNTZWxlY3RlZEFsbCk7CgogICAgICAgIF90aGlzNS4kZW1pdCgibG9hZCIsIF9pdGVtcyk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJlc29sdmUoW10pOwoKICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzNS4kTm90aWNlLmVycm9yKHsKICAgICAgICAgIHRpdGxlOiAi6ZSZ6K+vIiwKICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLmluZm8KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDorqHnrpflvZPliY3oioLngrnnmoTkuIrkuIvmlocNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gY3VyTm9kZSDlvZPliY3oioLngrkNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY29tcHV0ZWN1ck5vZGVDb250ZXh0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wdXRlY3VyTm9kZUNvbnRleHQoY3VyTm9kZSkgewogICAgICB2YXIgdGVtcENvbnRleHQgPSB7fTsKCiAgICAgIGlmIChjdXJOb2RlICYmIGN1ck5vZGUuZGF0YSAmJiBjdXJOb2RlLmRhdGEuc3JmYXBwY3R4KSB7CiAgICAgICAgdGVtcENvbnRleHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN1ck5vZGUuZGF0YS5zcmZhcHBjdHgpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ZW1wQ29udGV4dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0ZW1wQ29udGV4dDsKICAgIH0KICAgIC8qKg0KICAgICAqIOWIt+aWsOWKn+iDvQ0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoKGFyZ3MpIHsKICAgICAgdGhpcy5yZWZyZXNoX2FsbCgpOwogICAgfQogICAgLyoqDQogICAgICog5Yi35paw6IqC54K5DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBbY3VyQ29udGV4dF0g5b2T5YmN6IqC54K55LiK5LiL5paHDQogICAgICogQHBhcmFtIHsqfSBbYXJnPXt9XSDlvZPliY3oioLngrnpmYTliqDlj4LmlbANCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHBhcmVudG5vZGUg5piv5ZCm5piv5Yi35paw54i26IqC54K5DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInJlZnJlc2hfbm9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVmcmVzaF9ub2RlKGN1ckNvbnRleHQpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB2YXIgYXJnID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgdmFyIHBhcmVudG5vZGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZDsKICAgICAgdmFyIGlkID0gYXJnLnNyZm5vZGVpZDsKICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHsKICAgICAgICB2aWV3cGFyYW1zOiB0aGlzLnZpZXdwYXJhbXMKICAgICAgfSk7CiAgICAgIHZhciBnZXQgPSB0aGlzLnNlcnZpY2UuZ2V0Tm9kZXMoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSwgYXJnKTsKICAgICAgZ2V0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKCFyZXNwb25zZSB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgX3RoaXM2LiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLmluZm8KICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBfaXRlbXMgPSBfdG9Db25zdW1hYmxlQXJyYXkocmVzcG9uc2UuZGF0YSk7CgogICAgICAgIF90aGlzNi5mb3JtYXRFeHBhbmRlZChfaXRlbXMpOwoKICAgICAgICB2YXIgdHJlZSA9IF90aGlzNi4kcmVmcy50cmVlZXhwYmFyX3RyZWU7CiAgICAgICAgdHJlZS51cGRhdGVLZXlDaGlsZHJlbihpZCwgX2l0ZW1zKTsKCiAgICAgICAgaWYgKHBhcmVudG5vZGUpIHsKICAgICAgICAgIF90aGlzNi5jdXJyZW50c2VsZWN0ZWROb2RlID0ge307CiAgICAgICAgfQoKICAgICAgICBfdGhpczYuc2V0RGVmYXVsdFNlbGVjdGlvbihfaXRlbXMpOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzNi4kTm90aWNlLmVycm9yKHsKICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLmluZm8KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDpu5jorqTlsZXlvIDoioLngrkNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBpdGVtcw0KICAgICAqIEByZXR1cm5zIHthbnlbXX0NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZm9ybWF0RXhwYW5kZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdEV4cGFuZGVkKGl0ZW1zKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIGRhdGEgPSBbXTsKICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLmV4cGFuZGVkIHx8IGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICBfdGhpczcuZXhwYW5kZWRLZXlzLnB1c2goaXRlbS5pZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgICAvKioNCiAgICAgKiDorr7nva7pu5jorqTpgInkuK0s5Zue5pi+5pWw6aG577yM6YCJ5Lit5omA5pyJ5a2Q6IqC54K5DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBpdGVtcyDlvZPliY3oioLngrnmiYDmnInlrZDoioLngrnpm4blkIgNCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzUm9vdCDmmK/lkKbmmK/liqDovb3moLnoioLngrkNCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzU2VsZWN0ZWRBbGwg5piv5ZCm6YCJ5Lit5omA5pyJ5a2Q6IqC54K5DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInNldERlZmF1bHRTZWxlY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldERlZmF1bHRTZWxlY3Rpb24oaXRlbXMpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgaXNSb290ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgdmFyIGlzU2VsZWN0ZWRBbGwgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwoKICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZGVmYXVsdERhdGE7IC8vIOWvvOiIquS4remAieS4reesrOS4gOadoemFjee9rueahOm7mOiupOmAieS4rSzmsqHmnInpgInkuK3nrKzkuIDmnaEKCiAgICAgIGlmICh0aGlzLmlzU2VsZWN0Rmlyc3REZWZhdWx0KSB7CiAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWxlY3QpIHsKICAgICAgICAgIHZhciBpbmRleCA9IGl0ZW1zLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbS5zZWxlY3RlZDsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICAgICAgaWYgKGlzUm9vdCkgewogICAgICAgICAgICAgIGluZGV4ID0gMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBkZWZhdWx0RGF0YSA9IGl0ZW1zW2luZGV4XTsKICAgICAgICAgIHRoaXMuc2V0VHJlZU5vZGVIaWdoTGlnaHQoZGVmYXVsdERhdGEpOwogICAgICAgICAgdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZWZhdWx0RGF0YSkpOwoKICAgICAgICAgIGlmICh0aGlzLmlzQnJhbmNoQXZhaWxhYmxlIHx8IGRlZmF1bHREYXRhLmxlYWYpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE5vZGVzID0gW3RoaXMuY3VycmVudHNlbGVjdGVkTm9kZV07CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGlvbmNoYW5nZScsIHRoaXMuc2VsZWN0ZWROb2Rlcyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIOW3sumAieaVsOaNrueahOWbnuaYvgoKCiAgICAgIGlmICh0aGlzLmVjaG9zZWxlY3RlZE5vZGVzICYmIHRoaXMuZWNob3NlbGVjdGVkTm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBjaGVja2VkTm9kZXMgPSBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBfdGhpczguZWNob3NlbGVjdGVkTm9kZXMuc29tZShmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIGlmIChPYmplY3QuaXMoaXRlbS5zcmZrZXksIHZhbC5zcmZrZXkpICYmIE9iamVjdC5pcyhpdGVtLnNyZm1ham9ydGV4dCwgdmFsLnNyZm1ham9ydGV4dCkpIHsKICAgICAgICAgICAgICB2YWwudXNlZCA9IHRydWU7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoY2hlY2tlZE5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMuZWNob3NlbGVjdGVkTm9kZXMgPSB0aGlzLmVjaG9zZWxlY3RlZE5vZGVzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gIWl0ZW0udXNlZDsKICAgICAgICAgIH0pOyAvLyDniLboioLngrnpgInkuK3ml7bvvIzkuI3pnIDopoHmiafooYzov5nmrrXvvIzkvJrpgInkuK3miYDmnInlrZDoioLngrkKCiAgICAgICAgICBpZiAoIWlzU2VsZWN0ZWRBbGwpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWxlY3QpIHsKICAgICAgICAgICAgICB0aGlzLnNldFRyZWVOb2RlSGlnaExpZ2h0KGNoZWNrZWROb2Rlc1swXSk7CiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjaGVja2VkTm9kZXNbMF0pKTsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSB0aGlzLnNlbGVjdGVkTm9kZXMuY29uY2F0KGNoZWNrZWROb2Rlcyk7CiAgICAgICAgICAgICAgdmFyIHRyZWUgPSB0aGlzLiRyZWZzLnRyZWVleHBiYXJfdHJlZTsKICAgICAgICAgICAgICB0cmVlLnNldENoZWNrZWROb2Rlcyh0aGlzLnNlbGVjdGVkTm9kZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIOeItuiKgueCuemAieS4reaXtu+8jOmAieS4reaJgOacieWtkOiKgueCuQoKCiAgICAgIGlmIChpc1NlbGVjdGVkQWxsKSB7CiAgICAgICAgdmFyIGxlYWZOb2RlcyA9IGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0ubGVhZjsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSB0aGlzLnNlbGVjdGVkTm9kZXMuY29uY2F0KGxlYWZOb2Rlcyk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0aW9uY2hhbmdlJywgdGhpcy5zZWxlY3RlZE5vZGVzKTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog57uY5Yi25Y+z5Ye76I+c5Y2VDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5vZGUNCiAgICAgKiBAcmV0dXJucw0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZW5kZXJDb250ZXh0TWVudSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyQ29udGV4dE1lbnUobm9kZSkgewogICAgICB2YXIgY29udGVudDsKCiAgICAgIGlmIChub2RlICYmIG5vZGUuZGF0YSkgewogICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShub2RlLmRhdGEpKTsKICAgICAgICB0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGUgPSBfb2JqZWN0U3ByZWFkKHt9LCBkYXRhKTsKICAgICAgICB2YXIgdGFncyA9IGRhdGEuaWQuc3BsaXQoJzsnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbnRlbnQ7CiAgICB9CiAgICAvKioNCiAgICAgKiDorr7nva7pgInkuK3pq5jkuq4NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzZXRUcmVlTm9kZUhpZ2hMaWdodCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VHJlZU5vZGVIaWdoTGlnaHQoZGF0YSkgewogICAgICB2YXIgdHJlZSA9IHRoaXMuJHJlZnMudHJlZWV4cGJhcl90cmVlOwogICAgICB0cmVlLnNldEN1cnJlbnRLZXkoZGF0YS5pZCk7CiAgICB9CiAgICAvKioNCiAgICAgKiDmiafooYzpu5jorqTnlYzpnaLooYzkuLoNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbm9kZQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkb0RlZmF1bHRBY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvRGVmYXVsdEFjdGlvbihub2RlKSB7CiAgICAgIGlmIChub2RlICYmIG5vZGUuZGF0YSkgewogICAgICAgIHZhciBkYXRhID0gbm9kZS5kYXRhOwogICAgICAgIHZhciB0YWdzID0gZGF0YS5pZC5zcGxpdCgnOycpOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCdub2RlZGJsY2xpY2snLCB0aGlzLnNlbGVjdGVkTm9kZXMpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRyZWVCYXNlOwp9KFZ1ZSk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIFRyZWVCYXNlLnByb3RvdHlwZSwgIm5hbWUiLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBUcmVlQmFzZS5wcm90b3R5cGUsICJ2aWV3U3RhdGUiLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBUcmVlQmFzZS5wcm90b3R5cGUsICJjb250ZXh0Iiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgVHJlZUJhc2UucHJvdG90eXBlLCAidmlld3BhcmFtcyIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoewogICJkZWZhdWx0IjogdHJ1ZQp9KV0sIFRyZWVCYXNlLnByb3RvdHlwZSwgImlzU2luZ2xlU2VsZWN0Iiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCh7CiAgImRlZmF1bHQiOiBmYWxzZQp9KV0sIFRyZWVCYXNlLnByb3RvdHlwZSwgImlzU2VsZWN0Rmlyc3REZWZhdWx0Iiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCh7CiAgImRlZmF1bHQiOiB0cnVlCn0pXSwgVHJlZUJhc2UucHJvdG90eXBlLCAiaXNCcmFuY2hBdmFpbGFibGUiLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKHsKICAiZGVmYXVsdCI6IHRydWUKfSldLCBUcmVlQmFzZS5wcm90b3R5cGUsICJzaG93QnVzeUluZGljYXRvciIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIFRyZWVCYXNlLnByb3RvdHlwZSwgInNlbGVjdGVkRGF0YSIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdzZWxlY3RlZERhdGEnKV0sIFRyZWVCYXNlLnByb3RvdHlwZSwgIm9uVmFsdWVDaGFuZ2UiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgVHJlZUJhc2UucHJvdG90eXBlLCAidXBkYXRlQWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgVHJlZUJhc2UucHJvdG90eXBlLCAiZmV0Y2hBY3Rpb24iLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBUcmVlQmFzZS5wcm90b3R5cGUsICJyZW1vdmVBY3Rpb24iLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBUcmVlQmFzZS5wcm90b3R5cGUsICJsb2FkQWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgVHJlZUJhc2UucHJvdG90eXBlLCAiY3JlYXRlQWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvdmlkZSgpXSwgVHJlZUJhc2UucHJvdG90eXBlLCAiZXhwYW5kZWRLZXlzIiwgdm9pZCAwKTsKClRyZWVCYXNlID0gdHNsaWJfMS5fX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHt9Cn0pXSwgVHJlZUJhc2UpOwpleHBvcnQgZGVmYXVsdCBUcmVlQmFzZTs="},null]}