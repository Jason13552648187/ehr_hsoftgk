{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js??ref--14-3!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-archival-catalogue\\default-searchform\\default-searchform-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-archival-catalogue\\default-searchform\\default-searchform-base.vue","mtime":1630509411186},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0aWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5pcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IFZ1ZSwgQ29tcG9uZW50LCBQcm9wIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJzsKaW1wb3J0IFBpbUFyY2hpdmFsQ2F0YWxvZ3VlU2VydmljZSBmcm9tICdAL3NlcnZpY2UvcGltLWFyY2hpdmFsLWNhdGFsb2d1ZS9waW0tYXJjaGl2YWwtY2F0YWxvZ3VlLXNlcnZpY2UnOwppbXBvcnQgRGVmYXVsdFNlcnZpY2UgZnJvbSAnLi9kZWZhdWx0LXNlYXJjaGZvcm0tc2VydmljZSc7CmltcG9ydCB7IEZvcm1QYWdlTW9kZWwgfSBmcm9tICdAL21vZGVsL2Zvcm0tZGV0YWlsJzsKCnZhciBEZWZhdWx0QmFzZSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoRGVmYXVsdEJhc2UsIF9WdWUpOwoKICBmdW5jdGlvbiBEZWZhdWx0QmFzZSgpIHsKICAgIHZhciBfdGhpczI7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERlZmF1bHRCYXNlKTsKCiAgICBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRGVmYXVsdEJhc2UpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgLyoqDQogICAgICog6K6h5pWw5Zmo5pyN5Yqh5a+56LGh6ZuG5ZCIDQogICAgICoNCiAgICAgKiBAdHlwZSB7QXJyYXk8Kj59DQogICAgICogQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogICAgX3RoaXMyLmNvdW50ZXJTZXJ2aWNlQXJyYXkgPSBbXTsKICAgIC8qKg0KICAgICAqIOW7uuaehOmDqOS7tuacjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge0RlZmF1bHRTZXJ2aWNlfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5zZXJ2aWNlID0gbmV3IERlZmF1bHRTZXJ2aWNlKHsKICAgICAgJHN0b3JlOiBfdGhpczIuJHN0b3JlCiAgICB9KTsKICAgIC8qKg0KICAgICAqIOWunuS9k+acjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1BpbUFyY2hpdmFsQ2F0YWxvZ3VlU2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuYXBwRW50aXR5U2VydmljZSA9IG5ldyBQaW1BcmNoaXZhbENhdGFsb2d1ZVNlcnZpY2UoewogICAgICAkc3RvcmU6IF90aGlzMi4kc3RvcmUKICAgIH0pOwogICAgLyoqDQogICAgICog6KGo5Y2V54q25oCBDQogICAgICoNCiAgICAgKiBAdHlwZSB7U3ViamVjdDxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5mb3JtU3RhdGUgPSBuZXcgU3ViamVjdCgpOwogICAgLyoqDQogICAgICog5b+955Wl6KGo5Y2V6aG55YC85Y+Y5YyWDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuaWdub3JlZmllbGR2YWx1ZWNoYW5nZSA9IGZhbHNlOwogICAgLyoqDQogICAgICog5pWw5o2u5Y+Y5YyWDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHR5cGUge1N1YmplY3Q8YW55Pn0NCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuZGF0YUNoYW5nID0gbmV3IFN1YmplY3QoKTsKICAgIC8qKg0KICAgICAqIOWOn+Wni+aVsOaNrg0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5vbGREYXRhID0ge307CiAgICAvKioNCiAgICAgKiDooajljZXmlbDmja7lr7nosaENCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5kYXRhID0ge307CiAgICAvKioNCiAgICAgKiDlsZ7mgKflgLzop4TliJkNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5ydWxlcyA9IHt9OwogICAgLyoqDQogICAgICog6K+m5oOF5qih5Z6L6ZuG5ZCIDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuZGV0YWlsc01vZGVsID0gewogICAgICBmb3JtcGFnZTE6IG5ldyBGb3JtUGFnZU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAn5bi46KeE5p2h5Lu2JywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STVBBR0UnLAogICAgICAgIG5hbWU6ICdmb3JtcGFnZTEnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMikKICAgICAgfSkKICAgIH07CiAgICByZXR1cm4gX3RoaXMyOwogIH0KICAvKioNCiAgICog6I635Y+W6YOo5Lu257G75Z6LDQogICAqDQogICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhEZWZhdWx0QmFzZSwgW3sKICAgIGtleTogImdldENvbnRyb2xUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb250cm9sVHlwZSgpIHsKICAgICAgcmV0dXJuICdTRUFSQ0hGT1JNJzsKICAgIH0KICAgIC8qKg0KICAgICAqIOWFs+mXreinhuWbvg0KICAgICAqDQogICAgICogQHBhcmFtIHthbnl9IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY2xvc2VWaWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZVZpZXcoYXJncykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuJGVtaXQoJ2Nsb3NldmlldycsIFthcmdzXSk7CiAgICB9CiAgICAvKioNCiAgICAgKiAg6K6h5pWw5Zmo5Yi35pawDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY291bnRlclJlZnJlc2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvdW50ZXJSZWZyZXNoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLmNvdW50ZXJTZXJ2aWNlQXJyYXkgJiYgX3RoaXMuY291bnRlclNlcnZpY2VBcnJheS5sZW5ndGggPiAwKSB7CiAgICAgICAgX3RoaXMuY291bnRlclNlcnZpY2VBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBpZiAoaXRlbS5yZWZyZXNoRGF0YSAmJiBpdGVtLnJlZnJlc2hEYXRhIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICAgICAgaXRlbS5yZWZyZXNoRGF0YSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDojrflj5blpJrpobnmlbDmja4NCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHthbnlbXX0NCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0RGF0YXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGFzKCkgewogICAgICByZXR1cm4gW3RoaXMuZGF0YV07CiAgICB9CiAgICAvKioNCiAgICAgKiDojrflj5bljZXpobnmoJENCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXREYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXRhKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRhOwogICAgfQogICAgLyoqDQogICAgICog6YeN572u6KGo5Y2V6aG55YC8DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHt7IG5hbWU6IHN0cmluZywgbmV3VmFsOiBhbnksIG9sZFZhbDogYW55IH19IHsgbmFtZSwgbmV3VmFsLCBvbGRWYWwgfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZXNldEZvcm1EYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldEZvcm1EYXRhKF9yZWYpIHsKICAgICAgdmFyIG5hbWUgPSBfcmVmLm5hbWUsCiAgICAgICAgICBuZXdWYWwgPSBfcmVmLm5ld1ZhbCwKICAgICAgICAgIG9sZFZhbCA9IF9yZWYub2xkVmFsOwogICAgfQogICAgLyoqDQogICAgICog6KGo5Y2V6YC76L6RDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHt7IG5hbWU6IHN0cmluZywgbmV3VmFsOiBhbnksIG9sZFZhbDogYW55IH19IHsgbmFtZSwgbmV3VmFsLCBvbGRWYWwgfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmb3JtTG9naWMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1Mb2dpYyhfcmVmMikgewogICAgICB2YXIgbmFtZSA9IF9yZWYyLm5hbWUsCiAgICAgICAgICBuZXdWYWwgPSBfcmVmMi5uZXdWYWwsCiAgICAgICAgICBvbGRWYWwgPSBfcmVmMi5vbGRWYWw7CiAgICB9CiAgICAvKioNCiAgICAgKiDooajljZXlgLzlj5jljJYNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0ge3sgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfX0geyBuYW1lLCBuZXdWYWwsIG9sZFZhbCB9DQogICAgICogQHJldHVybnMge3ZvaWR9DQogICAgICogQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImZvcm1EYXRhQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JtRGF0YUNoYW5nZShfcmVmMykgewogICAgICB2YXIgbmFtZSA9IF9yZWYzLm5hbWUsCiAgICAgICAgICBuZXdWYWwgPSBfcmVmMy5uZXdWYWwsCiAgICAgICAgICBvbGRWYWwgPSBfcmVmMy5vbGRWYWw7CgogICAgICBpZiAodGhpcy5pZ25vcmVmaWVsZHZhbHVlY2hhbmdlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnJlc2V0Rm9ybURhdGEoewogICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgbmV3VmFsOiBuZXdWYWwsCiAgICAgICAgb2xkVmFsOiBvbGRWYWwKICAgICAgfSk7CiAgICAgIHRoaXMuZm9ybUxvZ2ljKHsKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIG5ld1ZhbDogbmV3VmFsLAogICAgICAgIG9sZFZhbDogb2xkVmFsCiAgICAgIH0pOwogICAgICB0aGlzLmRhdGFDaGFuZy5uZXh0KEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSkpOwogICAgfQogICAgLyoqDQogICAgICog6KGo5Y2V5Yqg6L295a6M5oiQDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBbZGF0YT17fV0NCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25Gb3JtTG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb3JtTG9hZCgpIHsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICB0aGlzLnNldEZvcm1FbmFibGVDb25kKGRhdGEpOwogICAgICB0aGlzLmZpbGxGb3JtKGRhdGEpOwogICAgICB0aGlzLmZvcm1Mb2dpYyh7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgbmV3VmFsOiBudWxsLAogICAgICAgIG9sZFZhbDogbnVsbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWAvOWhq+WFhQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbX2RhdGFzPXt9XQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmaWxsRm9ybSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbEZvcm0oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF9kYXRhcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgogICAgICB0aGlzLmlnbm9yZWZpZWxkdmFsdWVjaGFuZ2UgPSB0cnVlOwogICAgICBPYmplY3Qua2V5cyhfZGF0YXMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICBpZiAoX3RoaXMzLmRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICAgIF90aGlzMy5kYXRhW25hbWVdID0gX2RhdGFzW25hbWVdOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmlnbm9yZWZpZWxkdmFsdWVjaGFuZ2UgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDorr7nva7ooajljZXpobnmmK/lkKblkK/nlKgNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0geyp9IGRhdGENCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2V0Rm9ybUVuYWJsZUNvbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEZvcm1FbmFibGVDb25kKGRhdGEpIHsKICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmRldGFpbHNNb2RlbCkuZm9yRWFjaChmdW5jdGlvbiAoZGV0YWlsKSB7CiAgICAgICAgaWYgKCFPYmplY3QuaXMoZGV0YWlsLmRldGFpbFR5cGUsICdGT1JNSVRFTScpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZm9ybUl0ZW0gPSBkZXRhaWw7CiAgICAgICAgZm9ybUl0ZW0uc2V0RW5hYmxlQ29uZChkYXRhLnNyZnVmKTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDph43nva7ojYnnqL/ooajljZXnirbmgIENCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicmVzZXREcmFmdEZvcm1TdGF0ZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0RHJhZnRGb3JtU3RhdGVzKCkgewogICAgICB2YXIgZm9ybSA9IHRoaXMuJHJlZnMuZm9ybTsKCiAgICAgIGlmIChmb3JtKSB7CiAgICAgICAgZm9ybS5yZXNldEZpZWxkcygpOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDph43nva7moKHpqoznu5PmnpwNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZXNldFZhbGlkYXRlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRWYWxpZGF0ZXMoKSB7CiAgICAgIE9iamVjdC52YWx1ZXModGhpcy5kZXRhaWxzTW9kZWwpLmZvckVhY2goZnVuY3Rpb24gKGRldGFpbCkgewogICAgICAgIGlmICghT2JqZWN0LmlzKGRldGFpbC5kZXRhaWxUeXBlLCAnRk9STUlURU0nKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGZvcm1JdGVtID0gZGV0YWlsOwogICAgICAgIGZvcm1JdGVtLnNldEVycm9yKCcnKTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDloavlhYXmoKHpqoznu5Pmnpwg77yI5ZCO5Y+w77yJDQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBmaWVsZEVycm9ycw0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmaWxsVmFsaWRhdGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWxsVmFsaWRhdGVzKGZpZWxkRXJyb3JzKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgZmllbGRFcnJvcnMuZm9yRWFjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICB2YXIgZm9ybUl0ZW0gPSBfdGhpczQuZGV0YWlsc01vZGVsW2Vycm9yLmZpZWxkXTsKCiAgICAgICAgaWYgKCFmb3JtSXRlbSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX3RoaXM0LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmb3JtSXRlbS5zZXRFcnJvcihlcnJvci5tZXNzYWdlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDooajljZXmoKHpqoznirbmgIENCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmb3JtVmFsaWRhdGVTdGF0dXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1WYWxpZGF0ZVN0YXR1cygpIHsKICAgICAgdmFyIGZvcm0gPSB0aGlzLiRyZWZzLnNlYXJjaGZvcm07CiAgICAgIHZhciB2YWxpZGF0ZXN0YXRlID0gdHJ1ZTsKICAgICAgZm9ybS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICB2YWxpZGF0ZXN0YXRlID0gdmFsaWQgPyB0cnVlIDogZmFsc2U7CiAgICAgIH0pOwogICAgICByZXR1cm4gdmFsaWRhdGVzdGF0ZTsKICAgIH0KICAgIC8qKg0KICAgICAqIOiOt+WPluWFqOmDqOWAvA0KICAgICAqDQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFZhbHVlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWVzKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRhOwogICAgfQogICAgLyoqDQogICAgICog6KGo5Y2V6aG55YC85Y+Y5pu0DQogICAgICoNCiAgICAgKiBAcGFyYW0ge3sgbmFtZTogc3RyaW5nLCB2YWx1ZTogYW55IH19ICRldmVudA0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvbkZvcm1JdGVtVmFsdWVDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uRm9ybUl0ZW1WYWx1ZUNoYW5nZSgkZXZlbnQpIHsKICAgICAgaWYgKCEkZXZlbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghJGV2ZW50Lm5hbWUgfHwgT2JqZWN0LmlzKCRldmVudC5uYW1lLCAnJykgfHwgIXRoaXMuZGF0YS5oYXNPd25Qcm9wZXJ0eSgkZXZlbnQubmFtZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YVskZXZlbnQubmFtZV0gPSAkZXZlbnQudmFsdWU7CiAgICB9CiAgICAvKioNCiAgICAgKiDorr7nva7mlbDmja7pobnlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lDQogICAgICogQHBhcmFtIHsqfSB2YWx1ZQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzZXREYXRhSXRlbVZhbHVlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREYXRhSXRlbVZhbHVlKG5hbWUsIHZhbHVlKSB7CiAgICAgIGlmICghbmFtZSB8fCBPYmplY3QuaXMobmFtZSwgJycpIHx8ICF0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChPYmplY3QuaXModGhpcy5kYXRhW25hbWVdLCB2YWx1ZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YVtuYW1lXSA9IHZhbHVlOwogICAgfQogICAgLyoqDQogICAgICog5YiG57uE55WM6Z2i6KGM5Li65LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJncm91cFVJQWN0aW9uQ2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdyb3VwVUlBY3Rpb25DbGljaygkZXZlbnQpIHsKICAgICAgaWYgKCEkZXZlbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpdGVtID0gJGV2ZW50Lml0ZW07CiAgICB9CiAgICAvKioNCiAgICAgKiBWdWXlo7DmmI7lkajmnJ8o5aSE55CG57uE5Lu255qE6L6T5YWl5bGe5oCnKQ0KICAgICAqDQogICAgICogQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImNyZWF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuYWZ0ZXJDcmVhdGVkKCk7CiAgICB9CiAgICAvKioNCiAgICAgKiDmiafooYxjcmVhdGVk5ZCO55qE6YC76L6RDQogICAgICoNCiAgICAgKiAgQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImFmdGVyQ3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWZ0ZXJDcmVhdGVkKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnZpZXdTdGF0ZSkgewogICAgICAgIHRoaXMudmlld1N0YXRlRXZlbnQgPSB0aGlzLnZpZXdTdGF0ZS5zdWJzY3JpYmUoZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgICAgICB2YXIgdGFnID0gX3JlZjQudGFnLAogICAgICAgICAgICAgIGFjdGlvbiA9IF9yZWY0LmFjdGlvbiwKICAgICAgICAgICAgICBkYXRhID0gX3JlZjQuZGF0YTsKCiAgICAgICAgICBpZiAoIU9iamVjdC5pcyh0YWcsIF90aGlzNS5uYW1lKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygnYXV0b2xvYWQnLCBhY3Rpb24pKSB7CiAgICAgICAgICAgIF90aGlzNS5hdXRvTG9hZChkYXRhKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdsb2FkJywgYWN0aW9uKSkgewogICAgICAgICAgICBfdGhpczUubG9hZChkYXRhKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdsb2FkZHJhZnQnLCBhY3Rpb24pKSB7CiAgICAgICAgICAgIF90aGlzNS5sb2FkRHJhZnQoZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIHZ1ZSDnlJ/lkb3lkajmnJ8NCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkZXN0cm95ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgICAgdGhpcy5hZnRlckRlc3Ryb3koKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOaJp+ihjGRlc3Ryb3llZOWQjueahOmAu+i+kQ0KICAgICAqDQogICAgICogQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImFmdGVyRGVzdHJveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWZ0ZXJEZXN0cm95KCkgewogICAgICBpZiAodGhpcy52aWV3U3RhdGVFdmVudCkgewogICAgICAgIHRoaXMudmlld1N0YXRlRXZlbnQudW5zdWJzY3JpYmUoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGF0YUNoYW5nRXZlbnQpIHsKICAgICAgICB0aGlzLmRhdGFDaGFuZ0V2ZW50LnVuc3Vic2NyaWJlKCk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOiHquWKqOWKoOi9vQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbYXJnPXt9XQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJhdXRvTG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXV0b0xvYWQoKSB7CiAgICAgIHZhciBhcmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwoKICAgICAgaWYgKGFyZy5zcmZrZXkgJiYgIU9iamVjdC5pcyhhcmcuc3Jma2V5LCAnJykpIHsKICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgewogICAgICAgICAgc3Jma2V5OiBhcmcuc3Jma2V5CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5sb2FkKGFyZyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYXJnLnNyZmtleXMgJiYgIU9iamVjdC5pcyhhcmcuc3Jma2V5cywgJycpKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHsKICAgICAgICAgIHNyZmtleTogYXJnLnNyZmtleXMKICAgICAgICB9KTsKICAgICAgICB0aGlzLmxvYWQoYXJnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubG9hZERyYWZ0KGFyZyk7CiAgICB9CiAgICAvKioNCiAgICAgKiDliqDovb0NCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0geyp9IFtvcHQ9e31dDQogICAgICogQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIG9wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgogICAgICBpZiAoIXRoaXMubG9hZEFjdGlvbikgewogICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICBkZXNjOiAnQVJDSElWQUxDQVRBTE9HVUVQaWNrdXBHcmlkVmlld+inhuWbvuaQnOe0ouihqOWNlWxvYWRBY3Rpb27lj4LmlbDmnKrphY3nva4nCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgYXJnID0gX29iamVjdFNwcmVhZCh7fSwgb3B0KTsKCiAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7CiAgICAgICAgdmlld3BhcmFtczogdGhpcy52aWV3cGFyYW1zCiAgICAgIH0pOwogICAgICB2YXIgZ2V0ID0gdGhpcy5zZXJ2aWNlLmdldCh0aGlzLmxvYWRBY3Rpb24sIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksIGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcik7CiAgICAgIGdldC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICAgIF90aGlzNi5vbkZvcm1Mb2FkKGRhdGEpOwoKICAgICAgICAgIF90aGlzNi4kZW1pdCgnbG9hZCcsIGRhdGEpOwoKICAgICAgICAgIF90aGlzNi4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczYuZm9ybVN0YXRlLm5leHQoewogICAgICAgICAgICAgIHR5cGU6ICdsb2FkJywKICAgICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgX3RoaXM2LiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgIGRlc2M6ICfns7vnu5/lvILluLgnCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgX2RhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBfdGhpczYuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICB0aXRsZTogX2RhdGEudGl0bGUsCiAgICAgICAgICBkZXNjOiBfZGF0YS5tZXNzYWdlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5Yqg6L296I2J56i/DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFtvcHQ9e31dDQogICAgICogQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImxvYWREcmFmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZERyYWZ0KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBvcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICB2YXIgbW9kZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwoKICAgICAgaWYgKCF0aGlzLmxvYWRkcmFmdEFjdGlvbikgewogICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICBkZXNjOiAnQVJDSElWQUxDQVRBTE9HVUVQaWNrdXBHcmlkVmlld+inhuWbvuaQnOe0ouihqOWNlWxvYWRkcmFmdEFjdGlvbuWPguaVsOacqumFjee9ricKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhcmcgPSBfb2JqZWN0U3ByZWFkKHt9LCBvcHQpOwoKICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHsKICAgICAgICB2aWV3cGFyYW1zOiB0aGlzLnZpZXdwYXJhbXMKICAgICAgfSk7CiAgICAgIHZhciBwb3N0ID0gdGhpcy5zZXJ2aWNlLmxvYWREcmFmdCh0aGlzLmxvYWRkcmFmdEFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSwgYXJnLCB0aGlzLnNob3dCdXN5SW5kaWNhdG9yKTsKICAgICAgcG9zdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JNZXNzYWdlKSB7CiAgICAgICAgICAgIF90aGlzNy4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgZGVzYzogcmVzcG9uc2UuZXJyb3JNZXNzYWdlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgX3RoaXM3LnJlc2V0RHJhZnRGb3JtU3RhdGVzKCk7CgogICAgICAgIF90aGlzNy5vbkZvcm1Mb2FkKGRhdGEpOwoKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBmb3JtID0gX3RoaXM3LiRyZWZzLmZvcm07CgogICAgICAgICAgaWYgKGZvcm0pIHsKICAgICAgICAgICAgZm9ybS5maWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICAgICAgICBmaWVsZC52YWxpZGF0ZU1lc3NhZ2UgPSAiIjsKICAgICAgICAgICAgICBmaWVsZC52YWxpZGF0ZVN0YXRlID0gIiI7CiAgICAgICAgICAgICAgZmllbGQudmFsaWRhdGVTdGF0dXMgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmIChPYmplY3QuaXMobW9kZSwgJ1JFU0VUJykpIHsKICAgICAgICAgIGlmICghX3RoaXM3LmZvcm1WYWxpZGF0ZVN0YXR1cygpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF90aGlzNy4kZW1pdCgnbG9hZCcsIGRhdGEpOwoKICAgICAgICBfdGhpczcuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNy5mb3JtU3RhdGUubmV4dCh7CiAgICAgICAgICAgIHR5cGU6ICdsb2FkJywKICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICBfdGhpczcuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgZGVzYzogJ+ezu+e7n+W8guW4uCcKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBfZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIF90aGlzNy4kTm90aWNlLmVycm9yKHsKICAgICAgICAgIHRpdGxlOiBfZGF0YS50aXRsZSwKICAgICAgICAgIGRlc2M6IF9kYXRhLm1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDooajljZXpobnmm7TmlrANCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIOeVjOmdouihjOS4uuWQjeensA0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dIOivt+axguaVsOaNrg0KICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHVwZGF0ZURldGFpbHMg5pu05paw6aG5DQogICAgICogQHBhcmFtIHtib29sZWFufSBbc2hvd2xvYWRpbmddIOaYr+WQpuaYvuekuuWKoOi9veeKtuaAgQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBEZWZhdWx0QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVGb3JtSXRlbXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUZvcm1JdGVtcyhtb2RlKSB7CiAgICAgIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgdmFyIHVwZGF0ZURldGFpbHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZDsKICAgICAgdmFyIHNob3dsb2FkaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgICB9CiAgICAvKioNCiAgICAgKiDlm57ovabkuovku7YNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gJGV2ZW50DQogICAgICogQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uRW50ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uRW50ZXIoJGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGVTdGF0dXMoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgnc2VhcmNoJywgdGhpcy5kYXRhKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOaQnOe0og0KICAgICAqDQogICAgICogQG1lbWJlcm9mIERlZmF1bHRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uU2VhcmNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNlYXJjaCgpIHsKICAgICAgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZVN0YXR1cygpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCdzZWFyY2gnLCB0aGlzLmRhdGEpOwogICAgfQogICAgLyoqDQogICAgICog6YeN572uDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgRGVmYXVsdEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25SZXNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNldCgpIHsKICAgICAgdGhpcy5sb2FkRHJhZnQoe30sICdSRVNFVCcpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIERlZmF1bHRCYXNlOwp9KFZ1ZSk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIERlZmF1bHRCYXNlLnByb3RvdHlwZSwgIm5hbWUiLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBEZWZhdWx0QmFzZS5wcm90b3R5cGUsICJ2aWV3U3RhdGUiLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBEZWZhdWx0QmFzZS5wcm90b3R5cGUsICJjb250ZXh0Iiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgRGVmYXVsdEJhc2UucHJvdG90eXBlLCAidmlld3BhcmFtcyIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoewogICJkZWZhdWx0IjogdHJ1ZQp9KV0sIERlZmF1bHRCYXNlLnByb3RvdHlwZSwgInNob3dCdXN5SW5kaWNhdG9yIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgRGVmYXVsdEJhc2UucHJvdG90eXBlLCAibG9hZGRyYWZ0QWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgRGVmYXVsdEJhc2UucHJvdG90eXBlLCAibG9hZEFjdGlvbiIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIERlZmF1bHRCYXNlLnByb3RvdHlwZSwgInZpZXd0YWciLCB2b2lkIDApOwoKRGVmYXVsdEJhc2UgPSB0c2xpYl8xLl9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czoge30KfSldLCBEZWZhdWx0QmFzZSk7CmV4cG9ydCBkZWZhdWx0IERlZmF1bHRCYXNlOw=="},null]}