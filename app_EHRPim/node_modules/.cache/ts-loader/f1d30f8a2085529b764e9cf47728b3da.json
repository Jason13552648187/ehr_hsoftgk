{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js??ref--14-3!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-person\\personinfotree-treeview\\personinfotree-treeview-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-person\\personinfotree-treeview\\personinfotree-treeview-base.vue","mtime":1630509411922},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydGllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgppbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gInRzbGliIjsKaW1wb3J0IHsgVnVlLCBDb21wb25lbnQsIFByb3AsIFByb3ZpZGUsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IFV0aWwgfSBmcm9tICdAL3V0aWxzJzsKaW1wb3J0IFBpbVBlcnNvblNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlL3BpbS1wZXJzb24vcGltLXBlcnNvbi1zZXJ2aWNlJzsKaW1wb3J0IFBFUlNPTklORk9UUkVFU2VydmljZSBmcm9tICcuL3BlcnNvbmluZm90cmVlLXRyZWV2aWV3LXNlcnZpY2UnOwoKdmFyIFBFUlNPTklORk9UUkVFQmFzZSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoUEVSU09OSU5GT1RSRUVCYXNlLCBfVnVlKTsKCiAgZnVuY3Rpb24gUEVSU09OSU5GT1RSRUVCYXNlKCkgewogICAgdmFyIF90aGlzMjsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUEVSU09OSU5GT1RSRUVCYXNlKTsKCiAgICBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoUEVSU09OSU5GT1RSRUVCYXNlKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICAgIC8qKg0KICAgICAqIOiuoeaVsOWZqOacjeWKoeWvueixoembhuWQiA0KICAgICAqDQogICAgICogQHR5cGUge0FycmF5PCo+fQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuY291bnRlclNlcnZpY2VBcnJheSA9IFtdOwogICAgLyoqDQogICAgICog5bu65p6E6YOo5Lu25pyN5Yqh5a+56LGhDQogICAgICoNCiAgICAgKiBAdHlwZSB7UEVSU09OSU5GT1RSRUVTZXJ2aWNlfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuc2VydmljZSA9IG5ldyBQRVJTT05JTkZPVFJFRVNlcnZpY2UoewogICAgICAkc3RvcmU6IF90aGlzMi4kc3RvcmUKICAgIH0pOwogICAgLyoqDQogICAgICog5a6e5L2T5pyN5Yqh5a+56LGhDQogICAgICoNCiAgICAgKiBAdHlwZSB7UGltUGVyc29uU2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovCgogICAgX3RoaXMyLmFwcEVudGl0eVNlcnZpY2UgPSBuZXcgUGltUGVyc29uU2VydmljZSh7CiAgICAgICRzdG9yZTogX3RoaXMyLiRzdG9yZQogICAgfSk7CiAgICAvKioNCiAgICAgKiDliJ3lp4vljJblrozmiJANCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuaW5pdGVkID0gZmFsc2U7CiAgICAvKioNCiAgICAgKiDlt7LpgInkuK3mlbDmja7pm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuc2VsZWN0ZWROb2RlcyA9IFtdOwogICAgLyoqDQogICAgICog5b2T5YmN6YCJ5Lit5pWw5o2u6aG5DQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovCgogICAgX3RoaXMyLmN1cnJlbnRzZWxlY3RlZE5vZGUgPSB7fTsKICAgIC8qKg0KICAgICAqIOWbnuaYvumAieS4reaVsOaNrumbhuWQiA0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5lY2hvc2VsZWN0ZWROb2RlcyA9IF90aGlzMi5zZWxlY3RlZERhdGEgPyBfdGhpczIuaXNTaW5nbGVTZWxlY3QgPyBbSlNPTi5wYXJzZShfdGhpczIuc2VsZWN0ZWREYXRhKVswXV0gOiBKU09OLnBhcnNlKF90aGlzMi5zZWxlY3RlZERhdGEpIDogW107CiAgICAvKioNCiAgICAgKiDov4fmu6TlsZ7mgKcNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5zcmZub2RlZmlsdGVyID0gJyc7CiAgICAvKioNCiAgICAgKiDpu5jorqTovpPlh7rlm77moIcNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuaXNPdXRwdXRJY29uRGVmYXVsdCA9IHRydWU7CiAgICAvKioNCiAgICAgKiDmlbDmja7lsZXlvIDkuLvplK4NCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmdbXX0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovCgogICAgX3RoaXMyLmV4cGFuZGVkS2V5cyA9IFtdOwogICAgcmV0dXJuIF90aGlzMjsKICB9CiAgLyoqDQogICAqIOiOt+WPlumDqOS7tuexu+Weiw0KICAgKg0KICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFBFUlNPTklORk9UUkVFQmFzZSwgW3sKICAgIGtleTogImdldENvbnRyb2xUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb250cm9sVHlwZSgpIHsKICAgICAgcmV0dXJuICdUUkVFVklFVyc7CiAgICB9CiAgICAvKioNCiAgICAgKiDlhbPpl63op4blm74NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55fSBhcmdzDQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjbG9zZVZpZXciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlVmlldyhhcmdzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy4kZW1pdCgnY2xvc2V2aWV3JywgW2FyZ3NdKTsKICAgIH0KICAgIC8qKg0KICAgICAqICDorqHmlbDlmajliLfmlrANCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY291bnRlclJlZnJlc2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvdW50ZXJSZWZyZXNoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLmNvdW50ZXJTZXJ2aWNlQXJyYXkgJiYgX3RoaXMuY291bnRlclNlcnZpY2VBcnJheS5sZW5ndGggPiAwKSB7CiAgICAgICAgX3RoaXMuY291bnRlclNlcnZpY2VBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBpZiAoaXRlbS5yZWZyZXNoRGF0YSAmJiBpdGVtLnJlZnJlc2hEYXRhIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICAgICAgaXRlbS5yZWZyZXNoRGF0YSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDojrflj5blpJrpobnmlbDmja4NCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHthbnlbXX0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldERhdGFzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXRhcygpIHsKICAgICAgcmV0dXJuIFt0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGVdOwogICAgfQogICAgLyoqDQogICAgICog6I635Y+W5Y2V6aG55qCRDQogICAgICoNCiAgICAgKiBAcmV0dXJucyB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGU7CiAgICB9CiAgICAvKioNCiAgICAgKiDpgInkuK3lgLzlj5jljJYNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uVmFsdWVDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uVmFsdWVDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5lY2hvc2VsZWN0ZWROb2RlcyA9IG5ld1ZhbCA/IHRoaXMuaXNTaW5nbGVTZWxlY3QgPyBKU09OLnBhcnNlKG5ld1ZhbClbMF0gOiBKU09OLnBhcnNlKG5ld1ZhbCkgOiBbXTsKICAgICAgdGhpcy5zZWxlY3RlZE5vZGVzID0gW107CgogICAgICBpZiAodGhpcy5lY2hvc2VsZWN0ZWROb2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIEFsbG5vZGVzT2JqID0gdGhpcy4kcmVmcy50cmVlZXhwYmFyX3RyZWUuc3RvcmUubm9kZXNNYXA7CiAgICAgICAgdmFyIEFsbG5vZGVzQXJyYXkgPSBbXTsKCiAgICAgICAgZm9yICh2YXIga2V5IGluIEFsbG5vZGVzT2JqKSB7CiAgICAgICAgICBpZiAoQWxsbm9kZXNPYmouaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgICBBbGxub2Rlc0FycmF5LnB1c2goQWxsbm9kZXNPYmpba2V5XS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuc2V0RGVmYXVsdFNlbGVjdGlvbihBbGxub2Rlc0FycmF5KTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog6YCJ5Lit5pWw5o2u5Y+Y5pu05LqL5Lu2DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBkYXRhDQogICAgICogQHBhcmFtIHsqfSBkYXRhIOW9k+WJjeiKgueCueWvueW6lOS8oOWFpeWvueixoQ0KICAgICAqIEBwYXJhbSB7Kn0gY2hlY2tlZFN0YXRlIOagkeebruWJjemAieS4reeKtuaAgeWvueixoQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25DaGVjayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGVjayhkYXRhLCBjaGVja2VkU3RhdGUpIHsKICAgICAgLy8g5aSE55CG5aSa6YCJ5pWw5o2uCiAgICAgIGlmICghdGhpcy5pc1NpbmdsZVNlbGVjdCkgewogICAgICAgIHZhciBsZWFmTm9kZXMgPSBjaGVja2VkU3RhdGUuY2hlY2tlZE5vZGVzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0ubGVhZjsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGxlYWZOb2RlcykpOwogICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGlvbmNoYW5nZScsIHRoaXMuc2VsZWN0ZWROb2Rlcyk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOmAieS4reaVsOaNruWPmOabtOS6i+S7tg0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YSDoioLngrnlr7nlupTkvKDlhaXlr7nosaENCiAgICAgKiBAcGFyYW0geyp9IG5vZGUg6IqC54K55a+55bqUbm9kZeWvueixoQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2VsZWN0aW9uQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3Rpb25DaGFuZ2UoZGF0YSwgbm9kZSkgewogICAgICAvLyDnpoHnlKjpobnlpITnkIYKICAgICAgaWYgKGRhdGEuZGlzYWJsZWQpIHsKICAgICAgICBub2RlLmlzQ3VycmVudCA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyDlj6rlpITnkIbmnIDlupXlsYLlrZDoioLngrkKCgogICAgICBpZiAodGhpcy5pc0JyYW5jaEF2YWlsYWJsZSB8fCBkYXRhLmxlYWYpIHsKICAgICAgICB0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKTsgLy8g5Y2V6YCJ55u05o6l5pu/5o2iCgogICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsZWN0KSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlXTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGlvbmNoYW5nZScsIHRoaXMuc2VsZWN0ZWROb2Rlcyk7CiAgICAgICAgfSAvLyDlpJrpgInnlKhjaGVja+aWueazlQoKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICogVnVl5aOw5piO5ZGo5pyfKOWkhOeQhue7hOS7tueahOi+k+WFpeWxnuaApykNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgdGhpcy5hZnRlckNyZWF0ZWQoKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOaJp+ihjGNyZWF0ZWTlkI7nmoTpgLvovpENCiAgICAgKg0KICAgICAqICBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImFmdGVyQ3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWZ0ZXJDcmVhdGVkKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnZpZXdTdGF0ZSkgewogICAgICAgIHRoaXMudmlld1N0YXRlRXZlbnQgPSB0aGlzLnZpZXdTdGF0ZS5zdWJzY3JpYmUoZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICAgIHZhciB0YWcgPSBfcmVmLnRhZywKICAgICAgICAgICAgICBhY3Rpb24gPSBfcmVmLmFjdGlvbiwKICAgICAgICAgICAgICBkYXRhID0gX3JlZi5kYXRhOwoKICAgICAgICAgIGlmICghT2JqZWN0LmlzKHRhZywgX3RoaXMzLm5hbWUpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdsb2FkJywgYWN0aW9uKSkgewogICAgICAgICAgICBfdGhpczMuaW5pdGVkID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfdGhpczMuaW5pdGVkID0gdHJ1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygnZmlsdGVyJywgYWN0aW9uKSkgewogICAgICAgICAgICBfdGhpczMuc3Jmbm9kZWZpbHRlciA9IGRhdGEuc3Jmbm9kZWZpbHRlcjsKCiAgICAgICAgICAgIF90aGlzMy5yZWZyZXNoX2FsbCgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChPYmplY3QuaXMoJ3JlZnJlc2hfcGFyZW50JywgYWN0aW9uKSkgewogICAgICAgICAgICBfdGhpczMucmVmcmVzaF9wYXJlbnQoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog5a+55qCR6IqC54K56L+b6KGM562b6YCJ5pON5L2cDQogICAgICogQG1lbWJlcm9mIE9yZGVyVHJlZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmaWx0ZXJOb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlOwogICAgICByZXR1cm4gZGF0YS50ZXh0LmluZGV4T2YodmFsdWUpICE9PSAtMTsKICAgIH0KICAgIC8qKg0KICAgICAqIHZ1ZSDnlJ/lkb3lkajmnJ8NCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGVzdHJveWVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICAgIHRoaXMuYWZ0ZXJEZXN0cm95KCk7CiAgICB9CiAgICAvKioNCiAgICAgKiDmiafooYxkZXN0cm95ZWTlkI7nmoTpgLvovpENCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYWZ0ZXJEZXN0cm95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZnRlckRlc3Ryb3koKSB7CiAgICAgIGlmICh0aGlzLnZpZXdTdGF0ZUV2ZW50KSB7CiAgICAgICAgdGhpcy52aWV3U3RhdGVFdmVudC51bnN1YnNjcmliZSgpOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDliLfmlrDmlbDmja4NCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicmVmcmVzaF9hbGwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2hfYWxsKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuaW5pdGVkID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuaW5pdGVkID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDliLfmlrDniLboioLngrkNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicmVmcmVzaF9wYXJlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2hfcGFyZW50KCkgewogICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlKS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciB0cmVlID0gdGhpcy4kcmVmcy50cmVlZXhwYmFyX3RyZWU7CiAgICAgIHZhciBub2RlID0gdHJlZS5nZXROb2RlKHRoaXMuY3VycmVudHNlbGVjdGVkTm9kZS5pZCk7CgogICAgICBpZiAoIW5vZGUgfHwgIW5vZGUucGFyZW50KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgY3VyTm9kZSA9IHt9OwogICAgICB2YXIgX3BhcmVudCA9IG5vZGUucGFyZW50OwogICAgICBjdXJOb2RlID0gVXRpbC5kZWVwT2JqZWN0TWVyZ2UoY3VyTm9kZSwgX3BhcmVudCk7CiAgICAgIHZhciB0ZW1wQ29udGV4dCA9IHt9OwoKICAgICAgaWYgKGN1ck5vZGUuZGF0YSAmJiBjdXJOb2RlLmRhdGEuc3JmYXBwY3R4KSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCwgY3VyTm9kZS5kYXRhLnNyZmFwcGN0eCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCwgdGhpcy5jb250ZXh0KTsKICAgICAgfQoKICAgICAgdmFyIGlkID0gX3BhcmVudC5rZXkgPyBfcGFyZW50LmtleSA6ICcjJzsKICAgICAgdmFyIHBhcmFtID0gewogICAgICAgIHNyZm5vZGVpZDogaWQKICAgICAgfTsKICAgICAgdGhpcy5yZWZyZXNoX25vZGUodGVtcENvbnRleHQsIHBhcmFtLCB0cnVlKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOaVsOaNruWKoOi9vQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBub2RlDQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBub2RlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdmFyIHJlc29sdmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKCiAgICAgIGlmIChub2RlLmRhdGEgJiYgbm9kZS5kYXRhLmNoaWxkcmVuKSB7CiAgICAgICAgcmVzb2x2ZShub2RlLmRhdGEuY2hpbGRyZW4pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICBzcmZub2RlaWQ6IG5vZGUuZGF0YSAmJiBub2RlLmRhdGEuaWQgPyBub2RlLmRhdGEuaWQgOiAiIyIsCiAgICAgICAgc3Jmbm9kZWZpbHRlcjogdGhpcy5zcmZub2RlZmlsdGVyCiAgICAgIH07CiAgICAgIHZhciB0ZW1wVmlld1BhcmFtcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy52aWV3cGFyYW1zKSk7CiAgICAgIHZhciBjdXJOb2RlID0ge307CiAgICAgIGN1ck5vZGUgPSBVdGlsLmRlZXBPYmplY3RNZXJnZShjdXJOb2RlLCBub2RlKTsKICAgICAgdmFyIHRlbXBDb250ZXh0ID0gdGhpcy5jb21wdXRlY3VyTm9kZUNvbnRleHQoY3VyTm9kZSk7CgogICAgICBpZiAoY3VyTm9kZS5kYXRhICYmIGN1ck5vZGUuZGF0YS5zcmZwYXJlbnRkZW5hbWUpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHRlbXBDb250ZXh0LCB7CiAgICAgICAgICBzcmZwYXJlbnRkZW5hbWU6IGN1ck5vZGUuZGF0YS5zcmZwYXJlbnRkZW5hbWUKICAgICAgICB9KTsKICAgICAgICBPYmplY3QuYXNzaWduKHRlbXBWaWV3UGFyYW1zLCB7CiAgICAgICAgICBzcmZwYXJlbnRkZW5hbWU6IGN1ck5vZGUuZGF0YS5zcmZwYXJlbnRkZW5hbWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKGN1ck5vZGUuZGF0YSAmJiBjdXJOb2RlLmRhdGEuc3JmcGFyZW50a2V5KSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCwgewogICAgICAgICAgc3JmcGFyZW50a2V5OiBjdXJOb2RlLmRhdGEuc3JmcGFyZW50a2V5CiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wVmlld1BhcmFtcywgewogICAgICAgICAgc3JmcGFyZW50a2V5OiBjdXJOb2RlLmRhdGEuc3JmcGFyZW50a2V5CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIE9iamVjdC5hc3NpZ24ocGFyYW1zLCB7CiAgICAgICAgdmlld3BhcmFtczogdGVtcFZpZXdQYXJhbXMKICAgICAgfSk7CiAgICAgIHRoaXMuc2VydmljZS5nZXROb2Rlcyh0ZW1wQ29udGV4dCwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgIF90aGlzNS4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICLplJnor68iLAogICAgICAgICAgICBkZXNjOiByZXNwb25zZS5pbmZvCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXNvbHZlKFtdKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBfaXRlbXMgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBfdGhpczUuZm9ybWF0RXhwYW5kZWQoX2l0ZW1zKTsKCiAgICAgICAgcmVzb2x2ZShfdG9Db25zdW1hYmxlQXJyYXkoX2l0ZW1zKSk7CiAgICAgICAgdmFyIGlzUm9vdCA9IE9iamVjdC5pcyhub2RlLmxldmVsLCAwKTsKICAgICAgICB2YXIgaXNTZWxlY3RlZEFsbCA9IG5vZGUuY2hlY2tlZDsKCiAgICAgICAgX3RoaXM1LnNldERlZmF1bHRTZWxlY3Rpb24oX2l0ZW1zLCBpc1Jvb3QsIGlzU2VsZWN0ZWRBbGwpOwoKICAgICAgICBfdGhpczUuJGVtaXQoImxvYWQiLCBfaXRlbXMpOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXNvbHZlKFtdKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBfdGhpczUuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICB0aXRsZTogIumUmeivryIsCiAgICAgICAgICBkZXNjOiByZXNwb25zZS5pbmZvCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog6K6h566X5b2T5YmN6IqC54K555qE5LiK5LiL5paHDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IGN1ck5vZGUg5b2T5YmN6IqC54K5DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjb21wdXRlY3VyTm9kZUNvbnRleHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXB1dGVjdXJOb2RlQ29udGV4dChjdXJOb2RlKSB7CiAgICAgIHZhciB0ZW1wQ29udGV4dCA9IHt9OwoKICAgICAgaWYgKGN1ck5vZGUgJiYgY3VyTm9kZS5kYXRhICYmIGN1ck5vZGUuZGF0YS5zcmZhcHBjdHgpIHsKICAgICAgICB0ZW1wQ29udGV4dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3VyTm9kZS5kYXRhLnNyZmFwcGN0eCkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRlbXBDb250ZXh0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRlbXBDb250ZXh0OwogICAgfQogICAgLyoqDQogICAgICog5Yi35paw5Yqf6IO9DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzDQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoKGFyZ3MpIHsKICAgICAgdGhpcy5yZWZyZXNoX2FsbCgpOwogICAgfQogICAgLyoqDQogICAgICog5Yi35paw6IqC54K5DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBbY3VyQ29udGV4dF0g5b2T5YmN6IqC54K55LiK5LiL5paHDQogICAgICogQHBhcmFtIHsqfSBbYXJnPXt9XSDlvZPliY3oioLngrnpmYTliqDlj4LmlbANCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHBhcmVudG5vZGUg5piv5ZCm5piv5Yi35paw54i26IqC54K5DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoX25vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2hfbm9kZShjdXJDb250ZXh0KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHZhciBwYXJlbnRub2RlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBpZCA9IGFyZy5zcmZub2RlaWQ7CiAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7CiAgICAgICAgdmlld3BhcmFtczogdGhpcy52aWV3cGFyYW1zCiAgICAgIH0pOwogICAgICB2YXIgZ2V0ID0gdGhpcy5zZXJ2aWNlLmdldE5vZGVzKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksIGFyZyk7CiAgICAgIGdldC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgIF90aGlzNi4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICBkZXNjOiByZXNwb25zZS5pbmZvCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgX2l0ZW1zID0gX3RvQ29uc3VtYWJsZUFycmF5KHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICBfdGhpczYuZm9ybWF0RXhwYW5kZWQoX2l0ZW1zKTsKCiAgICAgICAgdmFyIHRyZWUgPSBfdGhpczYuJHJlZnMudHJlZWV4cGJhcl90cmVlOwogICAgICAgIHRyZWUudXBkYXRlS2V5Q2hpbGRyZW4oaWQsIF9pdGVtcyk7CgogICAgICAgIGlmIChwYXJlbnRub2RlKSB7CiAgICAgICAgICBfdGhpczYuY3VycmVudHNlbGVjdGVkTm9kZSA9IHt9OwogICAgICAgIH0KCiAgICAgICAgX3RoaXM2LnNldERlZmF1bHRTZWxlY3Rpb24oX2l0ZW1zKTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBfdGhpczYuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICBkZXNjOiByZXNwb25zZS5pbmZvCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog6buY6K6k5bGV5byA6IqC54K5DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHthbnlbXX0gaXRlbXMNCiAgICAgKiBAcmV0dXJucyB7YW55W119DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmb3JtYXRFeHBhbmRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9ybWF0RXhwYW5kZWQoaXRlbXMpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IFtdOwogICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0uZXhwYW5kZWQgfHwgaXRlbS5jaGlsZHJlbiAmJiBpdGVtLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgIF90aGlzNy5leHBhbmRlZEtleXMucHVzaChpdGVtLmlkKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gZGF0YTsKICAgIH0KICAgIC8qKg0KICAgICAqIOiuvue9rum7mOiupOmAieS4rSzlm57mmL7mlbDpobnvvIzpgInkuK3miYDmnInlrZDoioLngrkNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGl0ZW1zIOW9k+WJjeiKgueCueaJgOacieWtkOiKgueCuembhuWQiA0KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSb290IOaYr+WQpuaYr+WKoOi9veagueiKgueCuQ0KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNTZWxlY3RlZEFsbCDmmK/lkKbpgInkuK3miYDmnInlrZDoioLngrkNCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInNldERlZmF1bHRTZWxlY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldERlZmF1bHRTZWxlY3Rpb24oaXRlbXMpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgaXNSb290ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgdmFyIGlzU2VsZWN0ZWRBbGwgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwoKICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZGVmYXVsdERhdGE7IC8vIOWvvOiIquS4remAieS4reesrOS4gOadoemFjee9rueahOm7mOiupOmAieS4rSzmsqHmnInpgInkuK3nrKzkuIDmnaEKCiAgICAgIGlmICh0aGlzLmlzU2VsZWN0Rmlyc3REZWZhdWx0KSB7CiAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWxlY3QpIHsKICAgICAgICAgIHZhciBpbmRleCA9IGl0ZW1zLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbS5zZWxlY3RlZDsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICAgICAgaWYgKGlzUm9vdCkgewogICAgICAgICAgICAgIGluZGV4ID0gMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBkZWZhdWx0RGF0YSA9IGl0ZW1zW2luZGV4XTsKICAgICAgICAgIHRoaXMuc2V0VHJlZU5vZGVIaWdoTGlnaHQoZGVmYXVsdERhdGEpOwogICAgICAgICAgdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZWZhdWx0RGF0YSkpOwoKICAgICAgICAgIGlmICh0aGlzLmlzQnJhbmNoQXZhaWxhYmxlIHx8IGRlZmF1bHREYXRhLmxlYWYpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE5vZGVzID0gW3RoaXMuY3VycmVudHNlbGVjdGVkTm9kZV07CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGlvbmNoYW5nZScsIHRoaXMuc2VsZWN0ZWROb2Rlcyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIOW3sumAieaVsOaNrueahOWbnuaYvgoKCiAgICAgIGlmICh0aGlzLmVjaG9zZWxlY3RlZE5vZGVzICYmIHRoaXMuZWNob3NlbGVjdGVkTm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBjaGVja2VkTm9kZXMgPSBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBfdGhpczguZWNob3NlbGVjdGVkTm9kZXMuc29tZShmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIGlmIChPYmplY3QuaXMoaXRlbS5zcmZrZXksIHZhbC5zcmZrZXkpICYmIE9iamVjdC5pcyhpdGVtLnNyZm1ham9ydGV4dCwgdmFsLnNyZm1ham9ydGV4dCkpIHsKICAgICAgICAgICAgICB2YWwudXNlZCA9IHRydWU7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoY2hlY2tlZE5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMuZWNob3NlbGVjdGVkTm9kZXMgPSB0aGlzLmVjaG9zZWxlY3RlZE5vZGVzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gIWl0ZW0udXNlZDsKICAgICAgICAgIH0pOyAvLyDniLboioLngrnpgInkuK3ml7bvvIzkuI3pnIDopoHmiafooYzov5nmrrXvvIzkvJrpgInkuK3miYDmnInlrZDoioLngrkKCiAgICAgICAgICBpZiAoIWlzU2VsZWN0ZWRBbGwpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWxlY3QpIHsKICAgICAgICAgICAgICB0aGlzLnNldFRyZWVOb2RlSGlnaExpZ2h0KGNoZWNrZWROb2Rlc1swXSk7CiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjaGVja2VkTm9kZXNbMF0pKTsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSB0aGlzLnNlbGVjdGVkTm9kZXMuY29uY2F0KGNoZWNrZWROb2Rlcyk7CiAgICAgICAgICAgICAgdmFyIHRyZWUgPSB0aGlzLiRyZWZzLnRyZWVleHBiYXJfdHJlZTsKICAgICAgICAgICAgICB0cmVlLnNldENoZWNrZWROb2Rlcyh0aGlzLnNlbGVjdGVkTm9kZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIOeItuiKgueCuemAieS4reaXtu+8jOmAieS4reaJgOacieWtkOiKgueCuQoKCiAgICAgIGlmIChpc1NlbGVjdGVkQWxsKSB7CiAgICAgICAgdmFyIGxlYWZOb2RlcyA9IGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0ubGVhZjsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSB0aGlzLnNlbGVjdGVkTm9kZXMuY29uY2F0KGxlYWZOb2Rlcyk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0aW9uY2hhbmdlJywgdGhpcy5zZWxlY3RlZE5vZGVzKTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog57uY5Yi25Y+z5Ye76I+c5Y2VDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5vZGUNCiAgICAgKiBAcmV0dXJucw0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicmVuZGVyQ29udGV4dE1lbnUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckNvbnRleHRNZW51KG5vZGUpIHsKICAgICAgdmFyIGNvbnRlbnQ7CgogICAgICBpZiAobm9kZSAmJiBub2RlLmRhdGEpIHsKICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobm9kZS5kYXRhKSk7CiAgICAgICAgdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlID0gX29iamVjdFNwcmVhZCh7fSwgZGF0YSk7CiAgICAgICAgdmFyIHRhZ3MgPSBkYXRhLmlkLnNwbGl0KCc7Jyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb250ZW50OwogICAgfQogICAgLyoqDQogICAgICog6K6+572u6YCJ5Lit6auY5LquDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IGRhdGENCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInNldFRyZWVOb2RlSGlnaExpZ2h0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUcmVlTm9kZUhpZ2hMaWdodChkYXRhKSB7CiAgICAgIHZhciB0cmVlID0gdGhpcy4kcmVmcy50cmVlZXhwYmFyX3RyZWU7CiAgICAgIHRyZWUuc2V0Q3VycmVudEtleShkYXRhLmlkKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOaJp+ihjOm7mOiupOeVjOmdouihjOS4ug0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBub2RlDQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkb0RlZmF1bHRBY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvRGVmYXVsdEFjdGlvbihub2RlKSB7CiAgICAgIGlmIChub2RlICYmIG5vZGUuZGF0YSkgewogICAgICAgIHZhciBkYXRhID0gbm9kZS5kYXRhOwogICAgICAgIHZhciB0YWdzID0gZGF0YS5pZC5zcGxpdCgnOycpOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCdub2RlZGJsY2xpY2snLCB0aGlzLnNlbGVjdGVkTm9kZXMpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBFUlNPTklORk9UUkVFQmFzZTsKfShWdWUpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBQRVJTT05JTkZPVFJFRUJhc2UucHJvdG90eXBlLCAibmFtZSIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIFBFUlNPTklORk9UUkVFQmFzZS5wcm90b3R5cGUsICJ2aWV3U3RhdGUiLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBQRVJTT05JTkZPVFJFRUJhc2UucHJvdG90eXBlLCAiY29udGV4dCIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIFBFUlNPTklORk9UUkVFQmFzZS5wcm90b3R5cGUsICJ2aWV3cGFyYW1zIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCh7CiAgImRlZmF1bHQiOiB0cnVlCn0pXSwgUEVSU09OSU5GT1RSRUVCYXNlLnByb3RvdHlwZSwgImlzU2luZ2xlU2VsZWN0Iiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCh7CiAgImRlZmF1bHQiOiBmYWxzZQp9KV0sIFBFUlNPTklORk9UUkVFQmFzZS5wcm90b3R5cGUsICJpc1NlbGVjdEZpcnN0RGVmYXVsdCIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoewogICJkZWZhdWx0IjogdHJ1ZQp9KV0sIFBFUlNPTklORk9UUkVFQmFzZS5wcm90b3R5cGUsICJpc0JyYW5jaEF2YWlsYWJsZSIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoewogICJkZWZhdWx0IjogdHJ1ZQp9KV0sIFBFUlNPTklORk9UUkVFQmFzZS5wcm90b3R5cGUsICJzaG93QnVzeUluZGljYXRvciIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIFBFUlNPTklORk9UUkVFQmFzZS5wcm90b3R5cGUsICJzZWxlY3RlZERhdGEiLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtXYXRjaCgnc2VsZWN0ZWREYXRhJyldLCBQRVJTT05JTkZPVFJFRUJhc2UucHJvdG90eXBlLCAib25WYWx1ZUNoYW5nZSIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBQRVJTT05JTkZPVFJFRUJhc2UucHJvdG90eXBlLCAidXBkYXRlQWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgUEVSU09OSU5GT1RSRUVCYXNlLnByb3RvdHlwZSwgImZldGNoQWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgUEVSU09OSU5GT1RSRUVCYXNlLnByb3RvdHlwZSwgInJlbW92ZUFjdGlvbiIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIFBFUlNPTklORk9UUkVFQmFzZS5wcm90b3R5cGUsICJsb2FkQWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgUEVSU09OSU5GT1RSRUVCYXNlLnByb3RvdHlwZSwgImNyZWF0ZUFjdGlvbiIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3ZpZGUoKV0sIFBFUlNPTklORk9UUkVFQmFzZS5wcm90b3R5cGUsICJleHBhbmRlZEtleXMiLCB2b2lkIDApOwoKUEVSU09OSU5GT1RSRUVCYXNlID0gdHNsaWJfMS5fX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHt9Cn0pXSwgUEVSU09OSU5GT1RSRUVCYXNlKTsKZXhwb3J0IGRlZmF1bHQgUEVSU09OSU5GT1RSRUVCYXNlOw=="},null]}