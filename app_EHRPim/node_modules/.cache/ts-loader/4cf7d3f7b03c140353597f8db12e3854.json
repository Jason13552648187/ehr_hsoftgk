{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js??ref--14-3!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-contract\\lab-services-edit-grid-form\\lab-services-edit-grid-form-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-contract\\lab-services-edit-grid-form\\lab-services-edit-grid-form-base.vue","mtime":1630509411427},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydGllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZCI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSAidHNsaWIiOwppbXBvcnQgeyBWdWUsIENvbXBvbmVudCwgUHJvcCwgV2F0Y2ggfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnOwppbXBvcnQgeyBVdGlsIH0gZnJvbSAnQC91dGlscyc7CmltcG9ydCBQaW1Db250cmFjdFNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlL3BpbS1jb250cmFjdC9waW0tY29udHJhY3Qtc2VydmljZSc7CmltcG9ydCBMYWJTZXJ2aWNlc19FZGl0R3JpZFNlcnZpY2UgZnJvbSAnLi9sYWItc2VydmljZXMtZWRpdC1ncmlkLWZvcm0tc2VydmljZSc7CmltcG9ydCB7IEZvcm1QYWdlTW9kZWwsIEZvcm1JdGVtTW9kZWwsIEZvcm1Hcm91cFBhbmVsTW9kZWwgfSBmcm9tICdAL21vZGVsL2Zvcm0tZGV0YWlsJzsKaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJzsKCnZhciBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfVnVlKSB7CiAgX2luaGVyaXRzKExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZSwgX1Z1ZSk7CgogIGZ1bmN0aW9uIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZSgpIHsKICAgIHZhciBfdGhpczI7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZSk7CgogICAgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgICAvKioNCiAgICAgKiDorqHmlbDlmajmnI3liqHlr7nosaHpm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHtBcnJheTwqPn0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogICAgX3RoaXMyLmNvdW50ZXJTZXJ2aWNlQXJyYXkgPSBbXTsKICAgIC8qKg0KICAgICAqIOW7uuaehOmDqOS7tuacjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge0xhYlNlcnZpY2VzX0VkaXRHcmlkU2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogICAgX3RoaXMyLnNlcnZpY2UgPSBuZXcgTGFiU2VydmljZXNfRWRpdEdyaWRTZXJ2aWNlKHsKICAgICAgJHN0b3JlOiBfdGhpczIuJHN0b3JlCiAgICB9KTsKICAgIC8qKg0KICAgICAqIOWunuS9k+acjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1BpbUNvbnRyYWN0U2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogICAgX3RoaXMyLmFwcEVudGl0eVNlcnZpY2UgPSBuZXcgUGltQ29udHJhY3RTZXJ2aWNlKHsKICAgICAgJHN0b3JlOiBfdGhpczIuJHN0b3JlCiAgICB9KTsKICAgIC8qKg0KICAgICAqIOW3peS9nOa1geWuoeaJueaEj+ingeaOp+S7tue7keWumuWAvA0KICAgICAqDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5zcmZ3Zm1lbW8gPSAiIjsKICAgIC8qKg0KICAgICAqIOihqOWNleeKtuaAgQ0KICAgICAqDQogICAgICogQHR5cGUge1N1YmplY3Q8YW55Pn0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogICAgX3RoaXMyLmZvcm1TdGF0ZSA9IG5ldyBTdWJqZWN0KCk7CiAgICAvKioNCiAgICAgKiDlv73nlaXooajljZXpobnlgLzlj5jljJYNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuaWdub3JlZmllbGR2YWx1ZWNoYW5nZSA9IGZhbHNlOwogICAgLyoqDQogICAgICog5pWw5o2u5Y+Y5YyWDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHR5cGUge1N1YmplY3Q8YW55Pn0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogICAgX3RoaXMyLmRhdGFDaGFuZyA9IG5ldyBTdWJqZWN0KCk7CiAgICAvKioNCiAgICAgKiDljp/lp4vmlbDmja4NCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogICAgX3RoaXMyLm9sZERhdGEgPSB7fTsKICAgIC8qKg0KICAgICAqIOihqOWNleaVsOaNruWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5kYXRhID0gewogICAgICBzcmZ1cGRhdGVkYXRlOiBudWxsLAogICAgICBzcmZvcmlrZXk6IG51bGwsCiAgICAgIHNyZmtleTogbnVsbCwKICAgICAgc3JmbWFqb3J0ZXh0OiBudWxsLAogICAgICBzcmZ0ZW1wbW9kZTogbnVsbCwKICAgICAgc3JmdWY6IG51bGwsCiAgICAgIHNyZmRlaWQ6IG51bGwsCiAgICAgIHNyZnNvdXJjZWtleTogbnVsbCwKICAgICAgcGltcGVyc29uaWQ6IG51bGwsCiAgICAgIHBpbXBlcnNvbm5hbWU6IG51bGwsCiAgICAgIGh0Ymg6IG51bGwsCiAgICAgIGNvbnRyYWN0dHlwZTogbnVsbCwKICAgICAgcXNycTogbnVsbCwKICAgICAganNycTogbnVsbCwKICAgICAgaHR6dDogbnVsbCwKICAgICAgb3Jtb3JnbmFtZTogbnVsbCwKICAgICAgc3lkcXNqOiBudWxsLAogICAgICBwaW1sYWJvdXJjYW1wYW55bmFtZTogbnVsbCwKICAgICAgb3Jtb3JnaWQ6IG51bGwsCiAgICAgIG9yZ2lkOiBudWxsLAogICAgICBwZXJzb25vcmdpZDogbnVsbCwKICAgICAgcGltY29udHJhY3RpZDogbnVsbCwKICAgICAgcGltbGFib3VyY2FtcGFueWlkOiBudWxsLAogICAgICBwaW1jb250cmFjdDogbnVsbAogICAgfTsKICAgIC8qKg0KICAgICAgKiDlvZPliY3miafooYznmoTooYzkuLrpgLvovpENCiAgICAgICoNCiAgICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAgKi8KCiAgICBfdGhpczIuY3VycmVudEFjdGlvbiA9ICIiOwogICAgLyoqDQogICAgICAqIOWFs+ezu+eVjOmdouiuoeaVsOWZqA0KICAgICAgKg0KICAgICAgKiBAdHlwZSB7bnVtYmVyfQ0KICAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICAqLwoKICAgIF90aGlzMi5kcmNvdW50ZXIgPSAwOwogICAgLyoqDQogICAgICAqIOmcgOimgeetieW+heWFs+ezu+eVjOmdouS/neWtmOaXtu+8jOesrOS4gOasoeiwg+eUqHNhdmXlj4LmlbDnmoTlpIfku70NCiAgICAgICoNCiAgICAgICogQHR5cGUge251bWJlcn0NCiAgICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAgKi8KCiAgICBfdGhpczIuZHJzYXZlb3B0ID0ge307CiAgICAvKioNCiAgICAgKiDlsZ7mgKflgLzop4TliJkNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIucnVsZXMgPSB7CiAgICAgIHNyZnVwZGF0ZWRhdGU6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+abtOaWsOaXtumXtCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5pu05paw5pe26Ze0IOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+abtOaWsOaXtumXtCDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+abtOaWsOaXtumXtCDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgc3Jmb3Jpa2V5OiBbewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0sCiAgICAgIHNyZmtleTogW3sKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZCI5ZCM5L+h5oGv5qCH6K+GIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIzkv6Hmga/moIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZCI5ZCM5L+h5oGv5qCH6K+GIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZCI5ZCM5L+h5oGv5qCH6K+GIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICBzcmZtYWpvcnRleHQ6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WRmOW3peWnk+WQjSDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZGY5bel5aeT5ZCNIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WRmOW3peWnk+WQjSDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WRmOW3peWnk+WQjSDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgc3JmdGVtcG1vZGU6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgc3JmdWY6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgc3JmZGVpZDogW3sKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICBzcmZzb3VyY2VrZXk6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgcGltcGVyc29uaWQ6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+S6uuWRmOS/oeaBr+agh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5Lq65ZGY5L+h5oGv5qCH6K+GIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+S6uuWRmOS/oeaBr+agh+ivhiDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+S6uuWRmOS/oeaBr+agh+ivhiDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgcGltcGVyc29ubmFtZTogW3sKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZGY5bel5aeT5ZCNIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkZjlt6Xlp5PlkI0g5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkZjlt6Xlp5PlkI0g5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WRmOW3peWnk+WQjSDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgaHRiaDogW3sKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZCI5ZCM57yW5Y+3IOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIznvJblj7cg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIznvJblj7cg5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WQiOWQjOe8luWPtyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgY29udHJhY3R0eXBlOiBbewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIznsbvlnosg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WQiOWQjOexu+WeiyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIznsbvlnosg5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIznsbvlnosg5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0sCiAgICAgIHFzcnE6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+i1t+Wni+aXpeacnyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn6LW35aeL5pel5pyfIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+i1t+Wni+aXpeacnyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+i1t+Wni+aXpeacnyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAganNycTogW3sKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn57uT5p2f5pel5pyfIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICfnu5PmnZ/ml6XmnJ8g5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICfnu5PmnZ/ml6XmnJ8g5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+e7k+adn+aXpeacnyDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgaHR6dDogW3sKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZCI5ZCM54q25oCBIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIznirbmgIEg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIznirbmgIEg5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WQiOWQjOeKtuaAgSDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgb3Jtb3JnbmFtZTogW3sKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZCI5ZCM566h55CG5Y2V5L2NIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIznrqHnkIbljZXkvY0g5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZCI5ZCM566h55CG5Y2V5L2NIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZCI5ZCM566h55CG5Y2V5L2NIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICBzeWRxc2o6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+ivleeUqOWIsOacn+aXtumXtCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn6K+V55So5Yiw5pyf5pe26Ze0IOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+ivleeUqOWIsOacn+aXtumXtCDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+ivleeUqOWIsOacn+aXtumXtCDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgcGltbGFib3VyY2FtcGFueW5hbWU6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+aJgOWxnuWKs+WKoea0vumBo+WFrOWPuCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5omA5bGe5Yqz5Yqh5rS+6YGj5YWs5Y+4IOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+aJgOWxnuWKs+WKoea0vumBo+WFrOWPuCDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+aJgOWxnuWKs+WKoea0vumBo+WFrOWPuCDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgb3Jtb3JnaWQ6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WQiOWQjOeuoeeQhuWNleS9jeagh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5ZCI5ZCM566h55CG5Y2V5L2N5qCH6K+GIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WQiOWQjOeuoeeQhuWNleS9jeagh+ivhiDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WQiOWQjOeuoeeQhuWNleS9jeagh+ivhiDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgb3JnaWQ6IFt7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+e7hOe7h0lEIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICfnu4Tnu4dJRCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICfnu4Tnu4dJRCDlgLzkuI3og73kuLrnqbonLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH0sIHsKICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+e7hOe7h0lEIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICBwZXJzb25vcmdpZDogW3sKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5Lq65ZGY5omA5bGe5Y2V5L2N5qCH6K+GIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICfkurrlkZjmiYDlsZ7ljZXkvY3moIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5Lq65ZGY5omA5bGe5Y2V5L2N5qCH6K+GIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5Lq65ZGY5omA5bGe5Y2V5L2N5qCH6K+GIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICBwaW1jb250cmFjdGlkOiBbewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIzkv6Hmga/moIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgbWVzc2FnZTogJ+WQiOWQjOS/oeaBr+agh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIzkv6Hmga/moIfor4Yg5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9LCB7CiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflkIjlkIzkv6Hmga/moIfor4Yg5YC85LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0sCiAgICAgIHBpbWxhYm91cmNhbXBhbnlpZDogW3sKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5Yqz5Yqh5rS+6YGj5YWs5Y+4566h55CG5qCH6K+GIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1lc3NhZ2U6ICflirPliqHmtL7pgaPlhazlj7jnrqHnkIbmoIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5Yqz5Yqh5rS+6YGj5YWs5Y+4566h55CG5qCH6K+GIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtZXNzYWdlOiAn5Yqz5Yqh5rS+6YGj5YWs5Y+4566h55CG5qCH6K+GIOWAvOS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dCiAgICB9OwogICAgLyoqDQogICAgICog6K+m5oOF5qih5Z6L6ZuG5ZCIDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogICAgX3RoaXMyLmRldGFpbHNNb2RlbCA9IHsKICAgICAgZ3JvdXAxOiBuZXcgRm9ybUdyb3VwUGFuZWxNb2RlbCh7CiAgICAgICAgY2FwdGlvbjogJ+WfuuacrOS/oeaBrycsCiAgICAgICAgZGV0YWlsVHlwZTogJ0dST1VQUEFORUwnLAogICAgICAgIG5hbWU6ICdncm91cDEnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMiksCiAgICAgICAgdWlBY3Rpb25Hcm91cDogewogICAgICAgICAgY2FwdGlvbjogJycsCiAgICAgICAgICBsYW5nYmFzZTogJ2VudGl0aWVzLnBpbWNvbnRyYWN0LmxhYnNlcnZpY2VzX2VkaXRncmlkX2Zvcm0nLAogICAgICAgICAgZXh0cmFjdE1vZGU6ICdJVEVNJywKICAgICAgICAgIGRldGFpbHM6IFtdCiAgICAgICAgfQogICAgICB9KSwKICAgICAgZm9ybXBhZ2UxOiBuZXcgRm9ybVBhZ2VNb2RlbCh7CiAgICAgICAgY2FwdGlvbjogJ+WfuuacrOS/oeaBrycsCiAgICAgICAgZGV0YWlsVHlwZTogJ0ZPUk1QQUdFJywKICAgICAgICBuYW1lOiAnZm9ybXBhZ2UxJywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIGlzU2hvd0NhcHRpb246IHRydWUsCiAgICAgICAgZm9ybTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpCiAgICAgIH0pLAogICAgICBzcmZ1cGRhdGVkYXRlOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7CiAgICAgICAgY2FwdGlvbjogJ+abtOaWsOaXtumXtCcsCiAgICAgICAgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywKICAgICAgICBuYW1lOiAnc3JmdXBkYXRlZGF0ZScsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBpc1Nob3dDYXB0aW9uOiB0cnVlLAogICAgICAgIGZvcm06IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMyKSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgZW5hYmxlQ29uZDogMwogICAgICB9KSwKICAgICAgc3Jmb3Jpa2V5OiBuZXcgRm9ybUl0ZW1Nb2RlbCh7CiAgICAgICAgY2FwdGlvbjogJycsCiAgICAgICAgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywKICAgICAgICBuYW1lOiAnc3Jmb3Jpa2V5JywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIGlzU2hvd0NhcHRpb246IHRydWUsCiAgICAgICAgZm9ybTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBlbmFibGVDb25kOiAzCiAgICAgIH0pLAogICAgICBzcmZrZXk6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAn5ZCI5ZCM5L+h5oGv5qCH6K+GJywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdzcmZrZXknLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMiksCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGVuYWJsZUNvbmQ6IDMKICAgICAgfSksCiAgICAgIHNyZm1ham9ydGV4dDogbmV3IEZvcm1JdGVtTW9kZWwoewogICAgICAgIGNhcHRpb246ICflkZjlt6Xlp5PlkI0nLAogICAgICAgIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsCiAgICAgICAgbmFtZTogJ3NyZm1ham9ydGV4dCcsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBpc1Nob3dDYXB0aW9uOiB0cnVlLAogICAgICAgIGZvcm06IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMyKSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgZW5hYmxlQ29uZDogMwogICAgICB9KSwKICAgICAgc3JmdGVtcG1vZGU6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAnJywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdzcmZ0ZW1wbW9kZScsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBpc1Nob3dDYXB0aW9uOiB0cnVlLAogICAgICAgIGZvcm06IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMyKSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgZW5hYmxlQ29uZDogMwogICAgICB9KSwKICAgICAgc3JmdWY6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAnJywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdzcmZ1ZicsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBpc1Nob3dDYXB0aW9uOiB0cnVlLAogICAgICAgIGZvcm06IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMyKSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgZW5hYmxlQ29uZDogMwogICAgICB9KSwKICAgICAgc3JmZGVpZDogbmV3IEZvcm1JdGVtTW9kZWwoewogICAgICAgIGNhcHRpb246ICcnLAogICAgICAgIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsCiAgICAgICAgbmFtZTogJ3NyZmRlaWQnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMiksCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGVuYWJsZUNvbmQ6IDMKICAgICAgfSksCiAgICAgIHNyZnNvdXJjZWtleTogbmV3IEZvcm1JdGVtTW9kZWwoewogICAgICAgIGNhcHRpb246ICcnLAogICAgICAgIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsCiAgICAgICAgbmFtZTogJ3NyZnNvdXJjZWtleScsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBpc1Nob3dDYXB0aW9uOiB0cnVlLAogICAgICAgIGZvcm06IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMyKSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgZW5hYmxlQ29uZDogMwogICAgICB9KSwKICAgICAgcGltcGVyc29uaWQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAn5Lq65ZGY5L+h5oGv5qCH6K+GJywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdwaW1wZXJzb25pZCcsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBpc1Nob3dDYXB0aW9uOiB0cnVlLAogICAgICAgIGZvcm06IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMyKSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgZW5hYmxlQ29uZDogMwogICAgICB9KSwKICAgICAgcGltcGVyc29ubmFtZTogbmV3IEZvcm1JdGVtTW9kZWwoewogICAgICAgIGNhcHRpb246ICflkZjlt6Xlp5PlkI0nLAogICAgICAgIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsCiAgICAgICAgbmFtZTogJ3BpbXBlcnNvbm5hbWUnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMiksCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGVuYWJsZUNvbmQ6IDMKICAgICAgfSksCiAgICAgIGh0Ymg6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAn5ZCI5ZCM57yW5Y+3JywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdodGJoJywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIGlzU2hvd0NhcHRpb246IHRydWUsCiAgICAgICAgZm9ybTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBlbmFibGVDb25kOiAzCiAgICAgIH0pLAogICAgICBjb250cmFjdHR5cGU6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAn5ZCI5ZCM57G75Z6LJywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdjb250cmFjdHR5cGUnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMiksCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGVuYWJsZUNvbmQ6IDMKICAgICAgfSksCiAgICAgIHFzcnE6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAn6LW35aeL5pel5pyfJywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdxc3JxJywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIGlzU2hvd0NhcHRpb246IHRydWUsCiAgICAgICAgZm9ybTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBlbmFibGVDb25kOiAzCiAgICAgIH0pLAogICAgICBqc3JxOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7CiAgICAgICAgY2FwdGlvbjogJ+e7k+adn+aXpeacnycsCiAgICAgICAgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywKICAgICAgICBuYW1lOiAnanNycScsCiAgICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMiksCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGVuYWJsZUNvbmQ6IDMKICAgICAgfSksCiAgICAgIGh0enQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAn5ZCI5ZCM54q25oCBJywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdodHp0JywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIGlzU2hvd0NhcHRpb246IHRydWUsCiAgICAgICAgZm9ybTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBlbmFibGVDb25kOiAzCiAgICAgIH0pLAogICAgICBvcm1vcmduYW1lOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7CiAgICAgICAgY2FwdGlvbjogJ+WQiOWQjOeuoeeQhuWNleS9jScsCiAgICAgICAgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywKICAgICAgICBuYW1lOiAnb3Jtb3JnbmFtZScsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBpc1Nob3dDYXB0aW9uOiB0cnVlLAogICAgICAgIGZvcm06IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMyKSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgZW5hYmxlQ29uZDogMwogICAgICB9KSwKICAgICAgc3lkcXNqOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7CiAgICAgICAgY2FwdGlvbjogJ+ivleeUqOWIsOacn+aXtumXtCcsCiAgICAgICAgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywKICAgICAgICBuYW1lOiAnc3lkcXNqJywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIGlzU2hvd0NhcHRpb246IHRydWUsCiAgICAgICAgZm9ybTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBlbmFibGVDb25kOiAzCiAgICAgIH0pLAogICAgICBwaW1sYWJvdXJjYW1wYW55bmFtZTogbmV3IEZvcm1JdGVtTW9kZWwoewogICAgICAgIGNhcHRpb246ICfmiYDlsZ7lirPliqHmtL7pgaPlhazlj7gnLAogICAgICAgIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsCiAgICAgICAgbmFtZTogJ3BpbWxhYm91cmNhbXBhbnluYW1lJywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIGlzU2hvd0NhcHRpb246IHRydWUsCiAgICAgICAgZm9ybTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBlbmFibGVDb25kOiAzCiAgICAgIH0pLAogICAgICBvcm1vcmdpZDogbmV3IEZvcm1JdGVtTW9kZWwoewogICAgICAgIGNhcHRpb246ICflkIjlkIznrqHnkIbljZXkvY3moIfor4YnLAogICAgICAgIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsCiAgICAgICAgbmFtZTogJ29ybW9yZ2lkJywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIGlzU2hvd0NhcHRpb246IHRydWUsCiAgICAgICAgZm9ybTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBlbmFibGVDb25kOiAzCiAgICAgIH0pLAogICAgICBvcmdpZDogbmV3IEZvcm1JdGVtTW9kZWwoewogICAgICAgIGNhcHRpb246ICfnu4Tnu4dJRCcsCiAgICAgICAgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywKICAgICAgICBuYW1lOiAnb3JnaWQnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMiksCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGVuYWJsZUNvbmQ6IDMKICAgICAgfSksCiAgICAgIHBlcnNvbm9yZ2lkOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7CiAgICAgICAgY2FwdGlvbjogJ+S6uuWRmOaJgOWxnuWNleS9jeagh+ivhicsCiAgICAgICAgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywKICAgICAgICBuYW1lOiAncGVyc29ub3JnaWQnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMiksCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGVuYWJsZUNvbmQ6IDMKICAgICAgfSksCiAgICAgIHBpbWNvbnRyYWN0aWQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAn5ZCI5ZCM5L+h5oGv5qCH6K+GJywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdwaW1jb250cmFjdGlkJywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIGlzU2hvd0NhcHRpb246IHRydWUsCiAgICAgICAgZm9ybTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczIpLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBlbmFibGVDb25kOiAzCiAgICAgIH0pLAogICAgICBwaW1sYWJvdXJjYW1wYW55aWQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsKICAgICAgICBjYXB0aW9uOiAn5Yqz5Yqh5rS+6YGj5YWs5Y+4566h55CG5qCH6K+GJywKICAgICAgICBkZXRhaWxUeXBlOiAnRk9STUlURU0nLAogICAgICAgIG5hbWU6ICdwaW1sYWJvdXJjYW1wYW55aWQnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgaXNTaG93Q2FwdGlvbjogdHJ1ZSwKICAgICAgICBmb3JtOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMiksCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGVuYWJsZUNvbmQ6IDMKICAgICAgfSkKICAgIH07CiAgICByZXR1cm4gX3RoaXMyOwogIH0KICAvKioNCiAgICog6I635Y+W6YOo5Lu257G75Z6LDQogICAqDQogICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLCBbewogICAga2V5OiAiZ2V0Q29udHJvbFR5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbnRyb2xUeXBlKCkgewogICAgICByZXR1cm4gJ0ZPUk0nOwogICAgfQogICAgLyoqDQogICAgICog5YWz6Zet6KeG5Zu+DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY2xvc2VWaWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZVZpZXcoYXJncykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuJGVtaXQoJ2Nsb3NldmlldycsIFthcmdzXSk7CiAgICB9CiAgICAvKioNCiAgICAgKiAg6K6h5pWw5Zmo5Yi35pawDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImNvdW50ZXJSZWZyZXNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudGVyUmVmcmVzaCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpcy5jb3VudGVyU2VydmljZUFycmF5ICYmIF90aGlzLmNvdW50ZXJTZXJ2aWNlQXJyYXkubGVuZ3RoID4gMCkgewogICAgICAgIF90aGlzLmNvdW50ZXJTZXJ2aWNlQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgaWYgKGl0ZW0ucmVmcmVzaERhdGEgJiYgaXRlbS5yZWZyZXNoRGF0YSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgICAgIGl0ZW0ucmVmcmVzaERhdGEoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog6I635Y+W5aSa6aG55pWw5o2uDQogICAgICoNCiAgICAgKiBAcmV0dXJucyB7YW55W119DQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXREYXRhcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGF0YXMoKSB7CiAgICAgIHJldHVybiBbdGhpcy5kYXRhXTsKICAgIH0KICAgIC8qKg0KICAgICAqIOiOt+WPluWNlemhueagkQ0KICAgICAqDQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXREYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXRhKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRhOwogICAgfQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZnVwZGF0ZWRhdGUg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvblNyZnVwZGF0ZWRhdGVDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3JmdXBkYXRlZGF0ZUNoYW5nZShuZXdWYWwsIG9sZFZhbCkgewogICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsKICAgICAgICBuYW1lOiAnc3JmdXBkYXRlZGF0ZScsCiAgICAgICAgbmV3VmFsOiBuZXdWYWwsCiAgICAgICAgb2xkVmFsOiBvbGRWYWwKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3Jmb3Jpa2V5IOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25TcmZvcmlrZXlDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3Jmb3Jpa2V5Q2hhbmdlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoewogICAgICAgIG5hbWU6ICdzcmZvcmlrZXknLAogICAgICAgIG5ld1ZhbDogbmV3VmFsLAogICAgICAgIG9sZFZhbDogb2xkVmFsCiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZmtleSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uU3Jma2V5Q2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNyZmtleUNoYW5nZShuZXdWYWwsIG9sZFZhbCkgewogICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsKICAgICAgICBuYW1lOiAnc3Jma2V5JywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZtYWpvcnRleHQg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvblNyZm1ham9ydGV4dENoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TcmZtYWpvcnRleHRDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ3NyZm1ham9ydGV4dCcsCiAgICAgICAgbmV3VmFsOiBuZXdWYWwsCiAgICAgICAgb2xkVmFsOiBvbGRWYWwKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3JmdGVtcG1vZGUg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvblNyZnRlbXBtb2RlQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNyZnRlbXBtb2RlQ2hhbmdlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoewogICAgICAgIG5hbWU6ICdzcmZ0ZW1wbW9kZScsCiAgICAgICAgbmV3VmFsOiBuZXdWYWwsCiAgICAgICAgb2xkVmFsOiBvbGRWYWwKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3JmdWYg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvblNyZnVmQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNyZnVmQ2hhbmdlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoewogICAgICAgIG5hbWU6ICdzcmZ1ZicsCiAgICAgICAgbmV3VmFsOiBuZXdWYWwsCiAgICAgICAgb2xkVmFsOiBvbGRWYWwKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3JmZGVpZCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uU3JmZGVpZENoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TcmZkZWlkQ2hhbmdlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoewogICAgICAgIG5hbWU6ICdzcmZkZWlkJywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZzb3VyY2VrZXkg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvblNyZnNvdXJjZWtleUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TcmZzb3VyY2VrZXlDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ3NyZnNvdXJjZWtleScsCiAgICAgICAgbmV3VmFsOiBuZXdWYWwsCiAgICAgICAgb2xkVmFsOiBvbGRWYWwKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgcGltcGVyc29uaWQg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvblBpbXBlcnNvbmlkQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblBpbXBlcnNvbmlkQ2hhbmdlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoewogICAgICAgIG5hbWU6ICdwaW1wZXJzb25pZCcsCiAgICAgICAgbmV3VmFsOiBuZXdWYWwsCiAgICAgICAgb2xkVmFsOiBvbGRWYWwKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgcGltcGVyc29ubmFtZSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uUGltcGVyc29ubmFtZUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25QaW1wZXJzb25uYW1lQ2hhbmdlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoewogICAgICAgIG5hbWU6ICdwaW1wZXJzb25uYW1lJywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBodGJoIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25IdGJoQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkh0YmhDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ2h0YmgnLAogICAgICAgIG5ld1ZhbDogbmV3VmFsLAogICAgICAgIG9sZFZhbDogb2xkVmFsCiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIGNvbnRyYWN0dHlwZSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uQ29udHJhY3R0eXBlQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbnRyYWN0dHlwZUNoYW5nZShuZXdWYWwsIG9sZFZhbCkgewogICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsKICAgICAgICBuYW1lOiAnY29udHJhY3R0eXBlJywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBxc3JxIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25Rc3JxQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblFzcnFDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ3FzcnEnLAogICAgICAgIG5ld1ZhbDogbmV3VmFsLAogICAgICAgIG9sZFZhbDogb2xkVmFsCiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIGpzcnEg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvbkpzcnFDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uSnNycUNoYW5nZShuZXdWYWwsIG9sZFZhbCkgewogICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsKICAgICAgICBuYW1lOiAnanNycScsCiAgICAgICAgbmV3VmFsOiBuZXdWYWwsCiAgICAgICAgb2xkVmFsOiBvbGRWYWwKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgaHR6dCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uSHR6dENoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25IdHp0Q2hhbmdlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoewogICAgICAgIG5hbWU6ICdodHp0JywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBvcm1vcmduYW1lIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25Pcm1vcmduYW1lQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbk9ybW9yZ25hbWVDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ29ybW9yZ25hbWUnLAogICAgICAgIG5ld1ZhbDogbmV3VmFsLAogICAgICAgIG9sZFZhbDogb2xkVmFsCiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHN5ZHFzaiDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uU3lkcXNqQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblN5ZHFzakNoYW5nZShuZXdWYWwsIG9sZFZhbCkgewogICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsKICAgICAgICBuYW1lOiAnc3lkcXNqJywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBwaW1sYWJvdXJjYW1wYW55bmFtZSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uUGltbGFib3VyY2FtcGFueW5hbWVDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUGltbGFib3VyY2FtcGFueW5hbWVDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ3BpbWxhYm91cmNhbXBhbnluYW1lJywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBvcm1vcmdpZCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uT3Jtb3JnaWRDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uT3Jtb3JnaWRDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ29ybW9yZ2lkJywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBvcmdpZCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uT3JnaWRDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uT3JnaWRDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ29yZ2lkJywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBwZXJzb25vcmdpZCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uUGVyc29ub3JnaWRDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUGVyc29ub3JnaWRDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ3BlcnNvbm9yZ2lkJywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBwaW1jb250cmFjdGlkIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25QaW1jb250cmFjdGlkQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblBpbWNvbnRyYWN0aWRDaGFuZ2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7CiAgICAgICAgbmFtZTogJ3BpbWNvbnRyYWN0aWQnLAogICAgICAgIG5ld1ZhbDogbmV3VmFsLAogICAgICAgIG9sZFZhbDogb2xkVmFsCiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHBpbWxhYm91cmNhbXBhbnlpZCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uUGltbGFib3VyY2FtcGFueWlkQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblBpbWxhYm91cmNhbXBhbnlpZENoYW5nZShuZXdWYWwsIG9sZFZhbCkgewogICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsKICAgICAgICBuYW1lOiAncGltbGFib3VyY2FtcGFueWlkJywKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOmHjee9ruihqOWNlemhueWAvA0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7eyBuYW1lOiBzdHJpbmcsIG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSB9fSB7IG5hbWUsIG5ld1ZhbCwgb2xkVmFsIH0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInJlc2V0Rm9ybURhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0Rm9ybURhdGEoX3JlZikgewogICAgICB2YXIgbmFtZSA9IF9yZWYubmFtZSwKICAgICAgICAgIG5ld1ZhbCA9IF9yZWYubmV3VmFsLAogICAgICAgICAgb2xkVmFsID0gX3JlZi5vbGRWYWw7CiAgICB9CiAgICAvKioNCiAgICAgICog572u56m65a+56LGhDQogICAgICAqDQogICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJSZXNldERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIFJlc2V0RGF0YShfZGF0YXMpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoT2JqZWN0LmtleXMoX2RhdGFzKS5sZW5ndGggPiAwKSB7CiAgICAgICAgT2JqZWN0LmtleXMoX2RhdGFzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICBpZiAoX3RoaXMzLmRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICAgICAgX3RoaXMzLmRhdGFbbmFtZV0gPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDooajljZXpgLvovpENCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0ge3sgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfX0geyBuYW1lLCBuZXdWYWwsIG9sZFZhbCB9DQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmb3JtTG9naWMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1Mb2dpYyhfcmVmMikgewogICAgICB2YXIgbmFtZSA9IF9yZWYyLm5hbWUsCiAgICAgICAgICBuZXdWYWwgPSBfcmVmMi5uZXdWYWwsCiAgICAgICAgICBvbGRWYWwgPSBfcmVmMi5vbGRWYWw7CgogICAgICBpZiAoT2JqZWN0LmlzKG5hbWUsICcnKSB8fCBPYmplY3QuaXMobmFtZSwgJ2NvbnRyYWN0dHlwZScpKSB7CiAgICAgICAgdmFyIHJldCA9IHRydWU7CiAgICAgICAgdmFyIF9jb250cmFjdHR5cGUgPSB0aGlzLmRhdGEuY29udHJhY3R0eXBlOwoKICAgICAgICBpZiAodGhpcy4kdmVyaWZ5LnRlc3RDb25kKF9jb250cmFjdHR5cGUsICdOT1RFUScsICcxMCcpKSB7CiAgICAgICAgICByZXQgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHRoaXMucnVsZXMuanNycS5zb21lKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgICAgICBpZiAocnVsZS5oYXNPd25Qcm9wZXJ0eSgncmVxdWlyZWQnKSkgewogICAgICAgICAgICBydWxlLnJlcXVpcmVkID0gcmV0OwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKE9iamVjdC5pcyhuYW1lLCAnJykgfHwgT2JqZWN0LmlzKG5hbWUsICdjb250cmFjdHR5cGUnKSkgewogICAgICAgIHZhciBfcmV0ID0gZmFsc2U7CiAgICAgICAgdmFyIF9jb250cmFjdHR5cGUyID0gdGhpcy5kYXRhLmNvbnRyYWN0dHlwZTsKCiAgICAgICAgaWYgKHRoaXMuJHZlcmlmeS50ZXN0Q29uZChfY29udHJhY3R0eXBlMiwgJ0VRJywgJzEwJykpIHsKICAgICAgICAgIF9yZXQgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5kZXRhaWxzTW9kZWwuanNycS5zZXRWaXNpYmxlKF9yZXQpOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDooajljZXlgLzlj5jljJYNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0ge3sgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfX0geyBuYW1lLCBuZXdWYWwsIG9sZFZhbCB9DQogICAgICogQHJldHVybnMge3ZvaWR9DQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmb3JtRGF0YUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9ybURhdGFDaGFuZ2UoX3JlZjMpIHsKICAgICAgdmFyIG5hbWUgPSBfcmVmMy5uYW1lLAogICAgICAgICAgbmV3VmFsID0gX3JlZjMubmV3VmFsLAogICAgICAgICAgb2xkVmFsID0gX3JlZjMub2xkVmFsOwoKICAgICAgaWYgKHRoaXMuaWdub3JlZmllbGR2YWx1ZWNoYW5nZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5yZXNldEZvcm1EYXRhKHsKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIG5ld1ZhbDogbmV3VmFsLAogICAgICAgIG9sZFZhbDogb2xkVmFsCiAgICAgIH0pOwogICAgICB0aGlzLmZvcm1Mb2dpYyh7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICBuZXdWYWw6IG5ld1ZhbCwKICAgICAgICBvbGRWYWw6IG9sZFZhbAogICAgICB9KTsKICAgICAgdGhpcy5kYXRhQ2hhbmcubmV4dChKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOihqOWNleWKoOi9veWujOaIkA0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHtzdHJpbmd9IFthY3Rpb25dDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvbkZvcm1Mb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvcm1Mb2FkKCkgewogICAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKICAgICAgaWYgKE9iamVjdC5pcyhhY3Rpb24sICJzYXZlIikgfHwgT2JqZWN0LmlzKGFjdGlvbiwgImF1dG9TYXZlIikgfHwgT2JqZWN0LmlzKGFjdGlvbiwgInN1Ym1pdCIpKSAvLyDmm7TmlrBjb250ZXh055qE5a6e5L2T5Li76ZSuCiAgICAgICAgaWYgKGRhdGEucGltY29udHJhY3QpIHsKICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb250ZXh0LCB7CiAgICAgICAgICAgIHBpbWNvbnRyYWN0OiBkYXRhLnBpbWNvbnRyYWN0CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIHRoaXMuc2V0Rm9ybUVuYWJsZUNvbmQoZGF0YSk7CiAgICAgIHRoaXMuZmlsbEZvcm0oZGF0YSwgYWN0aW9uKTsKICAgICAgdGhpcy5vbGREYXRhID0ge307CiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5vbGREYXRhLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSkpKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd2aWV3YWN0aW9uL3NldFZpZXdEYXRhQ2hhbmdlJywgewogICAgICAgIHZpZXd0YWc6IHRoaXMudmlld3RhZywKICAgICAgICB2aWV3ZGF0YWNoYW5nZTogZmFsc2UKICAgICAgfSk7CiAgICAgIHRoaXMuZm9ybUxvZ2ljKHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBuZXdWYWw6IG51bGwsCiAgICAgICAgb2xkVmFsOiBudWxsCiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5YC85aGr5YWFDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFtfZGF0YXM9e31dDQogICAgICogQHBhcmFtIHtzdHJpbmd9IFthY3Rpb25dDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmaWxsRm9ybSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbEZvcm0oKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIF9kYXRhcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgogICAgICB2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7CiAgICAgIHRoaXMuaWdub3JlZmllbGR2YWx1ZWNoYW5nZSA9IHRydWU7CiAgICAgIE9iamVjdC5rZXlzKF9kYXRhcykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgIGlmIChfdGhpczQuZGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgX3RoaXM0LmRhdGFbbmFtZV0gPSBfZGF0YXNbbmFtZV07CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmIChPYmplY3QuaXMoYWN0aW9uLCAnbG9hZERyYWZ0JykpIHsKICAgICAgICB0aGlzLmNyZWF0ZURlZmF1bHQoKTsKICAgICAgfQoKICAgICAgaWYgKE9iamVjdC5pcyhhY3Rpb24sICdsb2FkJykpIHsKICAgICAgICB0aGlzLnVwZGF0ZURlZmF1bHQoKTsKICAgICAgfQoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaWdub3JlZmllbGR2YWx1ZWNoYW5nZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOiuvue9ruihqOWNlemhueaYr+WQpuWQr+eUqA0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2V0Rm9ybUVuYWJsZUNvbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEZvcm1FbmFibGVDb25kKGRhdGEpIHsKICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmRldGFpbHNNb2RlbCkuZm9yRWFjaChmdW5jdGlvbiAoZGV0YWlsKSB7CiAgICAgICAgaWYgKCFPYmplY3QuaXMoZGV0YWlsLmRldGFpbFR5cGUsICdGT1JNSVRFTScpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZm9ybUl0ZW0gPSBkZXRhaWw7CiAgICAgICAgZm9ybUl0ZW0uc2V0RW5hYmxlQ29uZChkYXRhLnNyZnVmKTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDph43nva7ojYnnqL/ooajljZXnirbmgIENCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInJlc2V0RHJhZnRGb3JtU3RhdGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldERyYWZ0Rm9ybVN0YXRlcygpIHsKICAgICAgdmFyIGZvcm0gPSB0aGlzLiRyZWZzLmZvcm07CgogICAgICBpZiAoZm9ybSkgewogICAgICAgIGZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog6YeN572u5qCh6aqM57uT5p6cDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInJlc2V0VmFsaWRhdGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldFZhbGlkYXRlcygpIHsKICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmRldGFpbHNNb2RlbCkuZm9yRWFjaChmdW5jdGlvbiAoZGV0YWlsKSB7CiAgICAgICAgaWYgKCFPYmplY3QuaXMoZGV0YWlsLmRldGFpbFR5cGUsICdGT1JNSVRFTScpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZm9ybUl0ZW0gPSBkZXRhaWw7CiAgICAgICAgZm9ybUl0ZW0uc2V0RXJyb3IoJycpOwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWhq+WFheagoemqjOe7k+aenCDvvIjlkI7lj7DvvIkNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGZpZWxkRXJyb3JzDQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmaWxsVmFsaWRhdGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWxsVmFsaWRhdGVzKGZpZWxkRXJyb3JzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgZmllbGRFcnJvcnMuZm9yRWFjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICB2YXIgZm9ybUl0ZW0gPSBfdGhpczUuZGV0YWlsc01vZGVsW2Vycm9yLmZpZWxkXTsKCiAgICAgICAgaWYgKCFmb3JtSXRlbSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX3RoaXM1LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmb3JtSXRlbS5zZXRFcnJvcihlcnJvci5tZXNzYWdlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDooajljZXmoKHpqoznirbmgIENCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZm9ybVZhbGlkYXRlU3RhdHVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JtVmFsaWRhdGVTdGF0dXMoKSB7CiAgICAgIHZhciBmb3JtID0gdGhpcy4kcmVmcy5mb3JtOwogICAgICB2YXIgdmFsaWRhdGVzdGF0ZSA9IHRydWU7CiAgICAgIGZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgdmFsaWRhdGVzdGF0ZSA9IHZhbGlkID8gdHJ1ZSA6IGZhbHNlOwogICAgICB9KTsKICAgICAgcmV0dXJuIHZhbGlkYXRlc3RhdGU7CiAgICB9CiAgICAvKioNCiAgICAgKiDojrflj5blhajpg6jlgLwNCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0VmFsdWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGE7CiAgICB9CiAgICAvKioNCiAgICAgKiDooajljZXpobnlgLzlj5jmm7QNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7eyBuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkgfX0gJGV2ZW50DQogICAgICogQHJldHVybnMge3ZvaWR9DQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJvbkZvcm1JdGVtVmFsdWVDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uRm9ybUl0ZW1WYWx1ZUNoYW5nZSgkZXZlbnQpIHsKICAgICAgaWYgKCEkZXZlbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghJGV2ZW50Lm5hbWUgfHwgT2JqZWN0LmlzKCRldmVudC5uYW1lLCAnJykgfHwgIXRoaXMuZGF0YS5oYXNPd25Qcm9wZXJ0eSgkZXZlbnQubmFtZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YVskZXZlbnQubmFtZV0gPSAkZXZlbnQudmFsdWU7CiAgICB9CiAgICAvKioNCiAgICAgKiDorr7nva7mlbDmja7pobnlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lDQogICAgICogQHBhcmFtIHsqfSB2YWx1ZQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2V0RGF0YUl0ZW1WYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGF0YUl0ZW1WYWx1ZShuYW1lLCB2YWx1ZSkgewogICAgICBpZiAoIW5hbWUgfHwgT2JqZWN0LmlzKG5hbWUsICcnKSB8fCAhdGhpcy5kYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoT2JqZWN0LmlzKHRoaXMuZGF0YVtuYW1lXSwgdmFsdWUpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmRhdGFbbmFtZV0gPSB2YWx1ZTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWIhue7hOeVjOmdouihjOS4uuS6i+S7tg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSAkZXZlbnQNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdyb3VwVUlBY3Rpb25DbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ3JvdXBVSUFjdGlvbkNsaWNrKCRldmVudCkgewogICAgICBpZiAoISRldmVudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGl0ZW0gPSAkZXZlbnQuaXRlbTsKICAgIH0KICAgIC8qKg0KICAgICAqIFZ1ZeWjsOaYjuWRqOacnyjlpITnkIbnu4Tku7bnmoTovpPlhaXlsZ7mgKcpDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImNyZWF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuYWZ0ZXJDcmVhdGVkKCk7CiAgICB9CiAgICAvKioNCiAgICAgKiDmiafooYxjcmVhdGVk5ZCO55qE6YC76L6RDQogICAgICoNCiAgICAgKiAgQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJhZnRlckNyZWF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFmdGVyQ3JlYXRlZCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBpZiAodGhpcy52aWV3U3RhdGUpIHsKICAgICAgICB0aGlzLnZpZXdTdGF0ZUV2ZW50ID0gdGhpcy52aWV3U3RhdGUuc3Vic2NyaWJlKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgICAgdmFyIHRhZyA9IF9yZWY0LnRhZywKICAgICAgICAgICAgICBhY3Rpb24gPSBfcmVmNC5hY3Rpb24sCiAgICAgICAgICAgICAgZGF0YSA9IF9yZWY0LmRhdGE7CgogICAgICAgICAgaWYgKCFPYmplY3QuaXModGFnLCBfdGhpczYubmFtZSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChPYmplY3QuaXMoJ2F1dG9sb2FkJywgYWN0aW9uKSkgewogICAgICAgICAgICBfdGhpczYuYXV0b0xvYWQoZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygnbG9hZCcsIGFjdGlvbikpIHsKICAgICAgICAgICAgX3RoaXM2LmxvYWQoZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygnbG9hZGRyYWZ0JywgYWN0aW9uKSkgewogICAgICAgICAgICBpZiAoX3RoaXM2LmNvbnRleHQuc3Jmc291cmNla2V5KSB7CiAgICAgICAgICAgICAgX3RoaXM2LmNvcHkoX3RoaXM2LmNvbnRleHQuc3Jmc291cmNla2V5KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczYubG9hZERyYWZ0KGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygnc2F2ZScsIGFjdGlvbikpIHsKICAgICAgICAgICAgX3RoaXM2LnNhdmUoZGF0YSwgZGF0YS5zaG93UmVzdWx0SW5mbyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygncmVtb3ZlJywgYWN0aW9uKSkgewogICAgICAgICAgICBfdGhpczYucmVtb3ZlKGRhdGEpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChPYmplY3QuaXMoJ3NhdmVhbmRleGl0JywgYWN0aW9uKSkgewogICAgICAgICAgICBfdGhpczYuc2F2ZUFuZEV4aXQoZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygnc2F2ZWFuZG5ldycsIGFjdGlvbikpIHsKICAgICAgICAgICAgX3RoaXM2LnNhdmVBbmROZXcoZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygncmVtb3ZlYW5kZXhpdCcsIGFjdGlvbikpIHsKICAgICAgICAgICAgX3RoaXM2LnJlbW92ZUFuZEV4aXQoZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKE9iamVjdC5pcygncmVmcmVzaCcsIGFjdGlvbikpIHsKICAgICAgICAgICAgX3RoaXM2LnJlZnJlc2goZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YUNoYW5nLnBpcGUoZGVib3VuY2VUaW1lKDMwMCksIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpLnN1YnNjcmliZShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGlmIChfdGhpczYuYXV0b3NhdmUpIHsKICAgICAgICAgIF90aGlzNi5hdXRvU2F2ZSgpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHN0YXRlID0gIU9iamVjdC5pcyhKU09OLnN0cmluZ2lmeShfdGhpczYub2xkRGF0YSksIEpTT04uc3RyaW5naWZ5KF90aGlzNi5kYXRhKSkgPyB0cnVlIDogZmFsc2U7CgogICAgICAgIF90aGlzNi4kc3RvcmUuY29tbWl0KCd2aWV3YWN0aW9uL3NldFZpZXdEYXRhQ2hhbmdlJywgewogICAgICAgICAgdmlld3RhZzogX3RoaXM2LnZpZXd0YWcsCiAgICAgICAgICB2aWV3ZGF0YWNoYW5nZTogc3RhdGUKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiB2dWUg55Sf5ZG95ZGo5pyfDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImRlc3Ryb3llZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgICB0aGlzLmFmdGVyRGVzdHJveSgpOwogICAgfQogICAgLyoqDQogICAgICog5omn6KGMZGVzdHJveWVk5ZCO55qE6YC76L6RDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImFmdGVyRGVzdHJveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWZ0ZXJEZXN0cm95KCkgewogICAgICBpZiAodGhpcy52aWV3U3RhdGVFdmVudCkgewogICAgICAgIHRoaXMudmlld1N0YXRlRXZlbnQudW5zdWJzY3JpYmUoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGF0YUNoYW5nRXZlbnQpIHsKICAgICAgICB0aGlzLmRhdGFDaGFuZ0V2ZW50LnVuc3Vic2NyaWJlKCk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOaLt+i0neWGheWuuQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbYXJnPXt9XQ0KICAgICAqIEBtZW1iZXJvZiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImNvcHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvcHkoc3Jma2V5KSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIGNvcHlEYXRhID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDb3B5RGF0YShzcmZrZXkpOwogICAgICBjb3B5RGF0YS5zcmZrZXkgPSBVdGlsLmNyZWF0ZVVVSUQoKTsKICAgICAgY29weURhdGEucGltY29udHJhY3QgPSBjb3B5RGF0YS5zcmZrZXk7CiAgICAgIGNvcHlEYXRhLnBpbWNvbnRyYWN0aWQgPSBjb3B5RGF0YS5zcmZrZXk7CiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb250ZXh0LCB7CiAgICAgICAgcGltY29udHJhY3Q6IGNvcHlEYXRhLnBpbWNvbnRyYWN0CiAgICAgIH0pOwogICAgICB0aGlzLmRhdGEgPSBjb3B5RGF0YTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNy5mb3JtU3RhdGUubmV4dCh7CiAgICAgICAgICB0eXBlOiAnbG9hZCcsCiAgICAgICAgICBkYXRhOiBjb3B5RGF0YQogICAgICAgIH0pOwoKICAgICAgICBfdGhpczcuZGF0YS5zcmZ1ZiA9ICcwJzsKCiAgICAgICAgX3RoaXM3LnNldEZvcm1FbmFibGVDb25kKF90aGlzNy5kYXRhKTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKuaJk+WNsA0KICAgICAqQG1lbWJlcm9mIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicHJpbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByaW50KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuJHByaW50KHsKICAgICAgICBpZDogJ3BpbWNvbnRyYWN0X2xhYnNlcnZpY2VzX2VkaXRncmlkJywKICAgICAgICBwb3BUaXRsZTogJ+S4u+e8lui+keihqOWNlSjlirPliqHlkIjlkIwpJwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOmDqOS7tuWIt+aWsA0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicmVmcmVzaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVmcmVzaChhcmdzKSB7CiAgICAgIHZhciBhcmcgPSB7fTsKICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIGFyZ3NbMF0pOwoKICAgICAgaWYgKHRoaXMuZGF0YS5zcmZrZXkgJiYgIU9iamVjdC5pcyh0aGlzLmRhdGEuc3Jma2V5LCAnJykpIHsKICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgewogICAgICAgICAgc3Jma2V5OiB0aGlzLmRhdGEuc3Jma2V5CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5sb2FkKGFyZyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5kYXRhLnNyZmtleXMgJiYgIU9iamVjdC5pcyh0aGlzLmRhdGEuc3Jma2V5cywgJycpKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHsKICAgICAgICAgIHNyZmtleTogdGhpcy5kYXRhLnNyZmtleXMKICAgICAgICB9KTsKICAgICAgICB0aGlzLmxvYWQoYXJnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOiHquWKqOWKoOi9vQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbYXJnPXt9XQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYXV0b0xvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGF1dG9Mb2FkKCkgewogICAgICB2YXIgYXJnID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCiAgICAgIGlmIChhcmcuc3Jma2V5ICYmICFPYmplY3QuaXMoYXJnLnNyZmtleSwgJycpKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHsKICAgICAgICAgIHNyZmtleTogYXJnLnNyZmtleQogICAgICAgIH0pOwogICAgICAgIHRoaXMubG9hZChhcmcpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGFyZy5zcmZrZXlzICYmICFPYmplY3QuaXMoYXJnLnNyZmtleXMsICcnKSkgewogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7CiAgICAgICAgICBzcmZrZXk6IGFyZy5zcmZrZXlzCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5sb2FkKGFyZyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmxvYWREcmFmdChhcmcpOwogICAgfQogICAgLyoqDQogICAgICog5Yqg6L29DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBbb3B0PXt9XQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAibG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgb3B0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCiAgICAgIGlmICghdGhpcy5sb2FkQWN0aW9uKSB7CiAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsKICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgIGRlc2M6ICdQSU1DT05UUkFDVExXRWRpdFZpZXfop4blm77ooajljZVsb2FkQWN0aW9u5Y+C5pWw5pyq6YWN572uJwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGFyZyA9IF9vYmplY3RTcHJlYWQoe30sIG9wdCk7CgogICAgICB2YXIgdmlld3BhcmFtUmVzdWx0ID0gT2JqZWN0LmFzc2lnbihhcmcsIHRoaXMudmlld3BhcmFtcyk7CiAgICAgIHZhciBnZXQgPSB0aGlzLnNlcnZpY2UuZ2V0KHRoaXMubG9hZEFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSwgewogICAgICAgIHZpZXdwYXJhbXM6IHZpZXdwYXJhbVJlc3VsdAogICAgICB9LCB0aGlzLnNob3dCdXN5SW5kaWNhdG9yKTsKICAgICAgZ2V0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgX3RoaXM4Lm9uRm9ybUxvYWQoZGF0YSwgJ2xvYWQnKTsKCiAgICAgICAgICBfdGhpczguJGVtaXQoJ2xvYWQnLCBkYXRhKTsKCiAgICAgICAgICBfdGhpczguJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXM4LmZvcm1TdGF0ZS5uZXh0KHsKICAgICAgICAgICAgICB0eXBlOiAnbG9hZCcsCiAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICBfdGhpczguJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIF90aGlzOC4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICBkZXNjOiAn57O757uf5byC5bi4JwogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDliqDovb3ojYnnqL8NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW29wdD17fV0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImxvYWREcmFmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZERyYWZ0KCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHZhciBvcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwoKICAgICAgaWYgKCF0aGlzLmxvYWRkcmFmdEFjdGlvbikgewogICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICBkZXNjOiAnUElNQ09OVFJBQ1RMV0VkaXRWaWV36KeG5Zu+6KGo5Y2VbG9hZGRyYWZ0QWN0aW9u5Y+C5pWw5pyq6YWN572uJwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGFyZyA9IF9vYmplY3RTcHJlYWQoe30sIG9wdCk7CgogICAgICB2YXIgdmlld3BhcmFtUmVzdWx0ID0gT2JqZWN0LmFzc2lnbihhcmcsIHRoaXMudmlld3BhcmFtcyk7CiAgICAgIHZhciBwb3N0ID0gdGhpcy5zZXJ2aWNlLmxvYWREcmFmdCh0aGlzLmxvYWRkcmFmdEFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSwgewogICAgICAgIHZpZXdwYXJhbXM6IHZpZXdwYXJhbVJlc3VsdAogICAgICB9LCB0aGlzLnNob3dCdXN5SW5kaWNhdG9yKTsKICAgICAgcG9zdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICBfdGhpczkuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGlmIChkYXRhLnBpbWNvbnRyYWN0KSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKF90aGlzOS5jb250ZXh0LCB7CiAgICAgICAgICAgIHBpbWNvbnRyYWN0OiBkYXRhLnBpbWNvbnRyYWN0CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIF90aGlzOS5yZXNldERyYWZ0Rm9ybVN0YXRlcygpOwoKICAgICAgICBfdGhpczkub25Gb3JtTG9hZChkYXRhLCAnbG9hZERyYWZ0Jyk7CgogICAgICAgIF90aGlzOS4kZW1pdCgnbG9hZCcsIGRhdGEpOwoKICAgICAgICBfdGhpczkuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzOS5mb3JtU3RhdGUubmV4dCh7CiAgICAgICAgICAgIHR5cGU6ICdsb2FkJywKICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGZvcm0gPSBfdGhpczkuJHJlZnMuZm9ybTsKCiAgICAgICAgICBpZiAoZm9ybSkgewogICAgICAgICAgICBmb3JtLmZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgICAgIGZpZWxkLnZhbGlkYXRlTWVzc2FnZSA9ICIiOwogICAgICAgICAgICAgIGZpZWxkLnZhbGlkYXRlU3RhdGUgPSAiIjsKICAgICAgICAgICAgICBmaWVsZC52YWxpZGF0ZVN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICBfdGhpczkuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIF90aGlzOS4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICBkZXNjOiAn57O757uf5byC5bi4JwogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDoh6rliqjkv53lrZgNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW29wdD17fV0NCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImF1dG9TYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhdXRvU2F2ZSgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdmFyIG9wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgogICAgICBpZiAoIXRoaXMuZm9ybVZhbGlkYXRlU3RhdHVzKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhcmcgPSBfb2JqZWN0U3ByZWFkKHt9LCBvcHQpOwoKICAgICAgdmFyIGRhdGEgPSB0aGlzLmdldFZhbHVlcygpOwogICAgICBPYmplY3QuYXNzaWduKGFyZywgZGF0YSk7CiAgICAgIHZhciBhY3Rpb24gPSBPYmplY3QuaXMoZGF0YS5zcmZ1ZiwgJzEnKSA/IHRoaXMudXBkYXRlQWN0aW9uIDogdGhpcy5jcmVhdGVBY3Rpb247CgogICAgICBpZiAoIWFjdGlvbikgewogICAgICAgIHZhciBhY3Rpb25OYW1lID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJykgPyAidXBkYXRlQWN0aW9uIiA6ICJjcmVhdGVBY3Rpb24iOwogICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICBkZXNjOiAnUElNQ09OVFJBQ1RMV0VkaXRWaWV36KeG5Zu+6KGo5Y2VJyArIGFjdGlvbk5hbWUgKyAn5Y+C5pWw5pyq6YWN572uJwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHsKICAgICAgICB2aWV3cGFyYW1zOiB0aGlzLnZpZXdwYXJhbXMKICAgICAgfSk7CiAgICAgIHZhciBwb3N0ID0gdGhpcy5zZXJ2aWNlLmFkZChhY3Rpb24sIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksIGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcik7CiAgICAgIHBvc3QudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgX3RoaXMxMC4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgX3RoaXMxMC5vbkZvcm1Mb2FkKGRhdGEsICdhdXRvU2F2ZScpOwoKICAgICAgICBfdGhpczEwLiRlbWl0KCdzYXZlJywgZGF0YSk7CgogICAgICAgIF90aGlzMTAuJHN0b3JlLmRpc3BhdGNoKCd2aWV3YWN0aW9uL2RhdGFzYXZlZCcsIHsKICAgICAgICAgIHZpZXd0YWc6IF90aGlzMTAudmlld3RhZwogICAgICAgIH0pOwoKICAgICAgICBfdGhpczEwLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczEwLmZvcm1TdGF0ZS5uZXh0KHsKICAgICAgICAgICAgdHlwZTogJ3NhdmUnLAogICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICBfdGhpczEwLiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZQogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICBfdGhpczEwLiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgIGRlc2M6ICfns7vnu5/lvILluLgnCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOS/neWtmA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbb3B0PXt9XQ0KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3dSZXN1bHRJbmZvXQ0KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lmU3RhdGVOZXh0XSBmb3JtU3RhdGXmmK/lkKbkuIvlj5HpgJrnn6UNCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NhdmUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgICAgdmFyIG9wdCwKICAgICAgICAgICAgc2hvd1Jlc3VsdEluZm8sCiAgICAgICAgICAgIGlmU3RhdGVOZXh0LAogICAgICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBvcHQgPSBfYXJncy5sZW5ndGggPiAwICYmIF9hcmdzWzBdICE9PSB1bmRlZmluZWQgPyBfYXJnc1swXSA6IHt9OwogICAgICAgICAgICAgICAgc2hvd1Jlc3VsdEluZm8gPSBfYXJncy5sZW5ndGggPiAxID8gX2FyZ3NbMV0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBpZlN0YXRlTmV4dCA9IF9hcmdzLmxlbmd0aCA+IDIgJiYgX2FyZ3NbMl0gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzJdIDogdHJ1ZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgc2hvd1Jlc3VsdEluZm8gPSBzaG93UmVzdWx0SW5mbyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpczExLmZvcm1WYWxpZGF0ZVN0YXR1cygpKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgICAgICAgICAgIGRlc2M6ICflgLzop4TliJnmoKHpqozlvILluLgnCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdmFyIGFyZyA9IF9vYmplY3RTcHJlYWQoe30sIG9wdCk7CgogICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IF90aGlzMTEuZ2V0VmFsdWVzKCk7CgogICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgZGF0YSk7CiAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCBfdGhpczExLmNvbnRleHQpOwoKICAgICAgICAgICAgICAgICAgaWYgKGlmU3RhdGVOZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5kcmNvdW50ZXIgPSAwOwoKICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMxMS5kcmNvdW50ZXIgIT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuZHJzYXZlb3B0ID0gb3B0OwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuZm9ybVN0YXRlLm5leHQoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYmVmb3Jlc2F2ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGFyZwogICAgICAgICAgICAgICAgICAgICAgfSk7IC8v5YWI6YCa55+l5YWz57O755WM6Z2i5L+d5a2YCgoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuc2F2ZVN0YXRlID0gcmVzb2x2ZTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBPYmplY3QuaXMoZGF0YS5zcmZ1ZiwgJzEnKSA/IF90aGlzMTEudXBkYXRlQWN0aW9uIDogX3RoaXMxMS5jcmVhdGVBY3Rpb247CgogICAgICAgICAgICAgICAgICBpZiAoIWFjdGlvbikgewogICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb25OYW1lID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJykgPyAidXBkYXRlQWN0aW9uIiA6ICJjcmVhdGVBY3Rpb24iOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczExLiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICAgICAgZGVzYzogJ1BJTUNPTlRSQUNUTFdFZGl0Vmlld+inhuWbvuihqOWNlScgKyBhY3Rpb25OYW1lICsgJ+WPguaVsOacqumFjee9ricKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgewogICAgICAgICAgICAgICAgICAgIHZpZXdwYXJhbXM6IF90aGlzMTEudmlld3BhcmFtcwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgdmFyIHBvc3QgPSBPYmplY3QuaXMoZGF0YS5zcmZ1ZiwgJzEnKSA/IF90aGlzMTEuc2VydmljZS51cGRhdGUoYWN0aW9uLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzMTEuY29udGV4dCkpLCBhcmcsIF90aGlzMTEuc2hvd0J1c3lJbmRpY2F0b3IpIDogX3RoaXMxMS5zZXJ2aWNlLmFkZChhY3Rpb24sIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMxMS5jb250ZXh0KSksIGFyZywgX3RoaXMxMS5zaG93QnVzeUluZGljYXRvcik7CiAgICAgICAgICAgICAgICAgIHBvc3QudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5vbkZvcm1Mb2FkKGRhdGEsICdzYXZlJyk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMTEuJGVtaXQoJ3NhdmUnLCBkYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS4kc3RvcmUuZGlzcGF0Y2goJ3ZpZXdhY3Rpb24vZGF0YXNhdmVkJywgewogICAgICAgICAgICAgICAgICAgICAgdmlld3RhZzogX3RoaXMxMS52aWV3dGFnCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMTEuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuZm9ybVN0YXRlLm5leHQoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2F2ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd1Jlc3VsdEluZm8pIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuJE5vdGljZS5zdWNjZXNzKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiAoZGF0YS5zcmZtYWpvcnRleHQgPyBkYXRhLnNyZm1ham9ydGV4dCA6ICcnKSArICcmbmJzcDvkv53lrZjmiJDlip/vvIEnCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczExLiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6ICfns7vnu5/lvILluLgnCiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzYXZlKCkgewogICAgICAgIHJldHVybiBfc2F2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2F2ZTsKICAgIH0oKQogICAgLyoqDQogICAgKiDliKDpmaQNCiAgICAqDQogICAgKiBAcHVibGljDQogICAgKiBAcGFyYW0geyp9IFtvcHQ9e31dDQogICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgKi8KCiAgfSwgewogICAga2V5OiAicmVtb3ZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIHZhciBvcHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICB2YXIgc2hvd1Jlc3VsdEluZm8gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAoIV90aGlzMTIucmVtb3ZlQWN0aW9uKSB7CiAgICAgICAgICBfdGhpczEyLiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgIGRlc2M6ICdQSU1DT05UUkFDVExXRWRpdFZpZXfop4blm77ooajljZVyZW1vdmVBY3Rpb27lj4LmlbDmnKrphY3nva4nCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgYXJnID0gb3B0WzBdOwogICAgICAgIHZhciBfdGhpcyA9IF90aGlzMTI7CiAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHsKICAgICAgICAgIHZpZXdwYXJhbXM6IF90aGlzMTIudmlld3BhcmFtcwogICAgICAgIH0pOwoKICAgICAgICBfdGhpczEyLnNlcnZpY2VbImRlbGV0ZSJdKF90aGlzLnJlbW92ZUFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczEyLmNvbnRleHQpKSwgYXJnLCBzaG93UmVzdWx0SW5mbykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICBfdGhpczEyLiRlbWl0KCdyZW1vdmUnLCBkYXRhKTsKCiAgICAgICAgICAgIF90aGlzMTIuZm9ybVN0YXRlLm5leHQoewogICAgICAgICAgICAgIHR5cGU6ICdyZW1vdmUnLAogICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpczEyLmRhdGEuaXNtb2RpZnkgPSBmYWxzZTsKCiAgICAgICAgICAgIF90aGlzMTIuJE5vdGljZS5zdWNjZXNzKHsKICAgICAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICAgICAgZGVzYzogKGRhdGEuc3JmbWFqb3J0ZXh0ID8gZGF0YS5zcmZtYWpvcnRleHQgOiAnJykgKyAnJm5ic3A75Yig6Zmk5oiQ5Yqf77yBJwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgdmFyIF9kYXRhID0gZXJyb3IuZGF0YTsKCiAgICAgICAgICBfdGhpczEyLiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogX2RhdGEudGl0bGUsCiAgICAgICAgICAgIGRlc2M6IF9kYXRhLm1lc3NhZ2UKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5bel5L2c5rWB5ZCv5YqoDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFtkYXRhPXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gW2xvY2FsZGF0YT17fV0NCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAid2ZzdGFydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3dmc3RhcnQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihkYXRhLCBsb2NhbGRhdGEpIHsKICAgICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSBfdGhpczEzOwoKICAgICAgICAgICAgICAgICAgdmFyIHBvc3QgPSBfdGhpcy5zYXZlKHt9LCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICBwb3N0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZyA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczEzLnZpZXdwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdwYXJhbXM6IF90aGlzMTMudmlld3BhcmFtcwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMxMy5zZXJ2aWNlLndmc3RhcnQoX3RoaXMuV0ZTdGFydEFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczEzLmNvbnRleHQpKSwgYXJnLCBfdGhpczEzLnNob3dCdXN5SW5kaWNhdG9yLCBsb2NhbGRhdGEpOwoKICAgICAgICAgICAgICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+W3peS9nOa1geWQr+WKqOWksei0pSwgJyArIHJlc3BvbnNlLmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy4kTm90aWNlLmluZm8oewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6ICflt6XkvZzmtYHlkK/liqjmiJDlip8nCiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6ICfns7vnu5/lvILluLgnCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTMuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+ezu+e7n+W8guW4uCcKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gd2ZzdGFydChfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF93ZnN0YXJ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB3ZnN0YXJ0OwogICAgfSgpCiAgICAvKioNCiAgICAgKiDlt6XkvZzmtYHmj5DkuqQNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHsqfSBbbG9jYWxkYXRhPXt9XQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ3ZnN1Ym1pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3dmc3VibWl0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoZGF0YSwgbG9jYWxkYXRhKSB7CiAgICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gX3RoaXMxNDsKICAgICAgICAgICAgICAgICAgdmFyIGFyZyA9IGRhdGFbMF07CiAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7CiAgICAgICAgICAgICAgICAgICAgdmlld3BhcmFtczogX3RoaXMxNC52aWV3cGFyYW1zCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgaWYgKCFhcmcucGltY29udHJhY3QgfHwgT2JqZWN0LmlzKGFyZy5waW1jb250cmFjdCwgJycpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgcG9zdCA9IE9iamVjdC5pcyhhcmcuc3JmdWYsICcxJykgPyBfdGhpczE0LnNlcnZpY2UudXBkYXRlKF90aGlzMTQudXBkYXRlQWN0aW9uLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzMTQuY29udGV4dCkpLCBhcmcsIF90aGlzMTQuc2hvd0J1c3lJbmRpY2F0b3IpIDogX3RoaXMxNC5zZXJ2aWNlLmFkZChfdGhpczE0LmNyZWF0ZUFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczE0LmNvbnRleHQpKSwgYXJnLCBfdGhpczE0LnNob3dCdXN5SW5kaWNhdG9yKTsKICAgICAgICAgICAgICAgICAgcG9zdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmcgPSByZXNwb25zZS5kYXRhOyAvLyDkv53lrZjlrozmiJBVSeWkhOeQhgoKICAgICAgICAgICAgICAgICAgICBfdGhpczE0Lm9uRm9ybUxvYWQoYXJnLCAnc2F2ZScpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczE0LiRlbWl0KCdzYXZlJywgYXJnKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC5mb3JtU3RhdGUubmV4dCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzYXZlJywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogYXJnCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsgLy8g5YeG5aSH5o+Q5Lqk5Y+C5pWwCgoKICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMxNC52aWV3cGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgewogICAgICAgICAgICAgICAgICAgICAgICB2aWV3cGFyYW1zOiBfdGhpczE0LnZpZXdwYXJhbXMKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gLy8g5by65Yi26KGl5YWFc3Jmd2ZtZW1vCgoKICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMxNC5zcmZ3Zm1lbW8pIHsKICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyZndmbWVtbzogX3RoaXMxNC5zcmZ3Zm1lbW8KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF90aGlzMTQuc2VydmljZS53ZnN1Ym1pdChfdGhpcy5XRlN1Ym1pdEFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczE0LmNvbnRleHQpKSwgYXJnLCBfdGhpczE0LnNob3dCdXN5SW5kaWNhdG9yLCBsb2NhbGRhdGEpOwoKICAgICAgICAgICAgICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczE0LiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+W3peS9nOa1geaPkOS6pOWksei0pSwgJyArIHJlc3BvbnNlLmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC5vbkZvcm1Mb2FkKGFyZywgJ3N1Ym1pdCcpOwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTQuJHN0b3JlLmRpc3BhdGNoKCd2aWV3YWN0aW9uL2RhdGFzYXZlZCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmlld3RhZzogX3RoaXMxNC52aWV3dGFnCiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE0LiROb3RpY2UuaW5mbyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+W3peS9nOa1geaPkOS6pOaIkOWKnycKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTQuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+ezu+e7n+W8guW4uCcKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE0LiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiAn57O757uf5byC5bi4JwogICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB3ZnN1Ym1pdChfeDMsIF94NCkgewogICAgICAgIHJldHVybiBfd2ZzdWJtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHdmc3VibWl0OwogICAgfSgpCiAgICAvKioNCiAgICAgKiDooajljZXpobnmm7TmlrANCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIOeVjOmdouihjOS4uuWQjeensA0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dIOivt+axguaVsOaNrg0KICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHVwZGF0ZURldGFpbHMg5pu05paw6aG5DQogICAgICogQHBhcmFtIHtib29sZWFufSBbc2hvd2xvYWRpbmddIOaYr+WQpuaYvuekuuWKoOi9veeKtuaAgQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidXBkYXRlRm9ybUl0ZW1zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVGb3JtSXRlbXMobW9kZSkgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHZhciB1cGRhdGVEZXRhaWxzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBzaG93bG9hZGluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gYXJndW1lbnRzWzNdIDogdW5kZWZpbmVkOwoKICAgICAgaWYgKCFtb2RlIHx8IG1vZGUgJiYgT2JqZWN0LmlzKG1vZGUsICcnKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGFyZyA9IF9vYmplY3RTcHJlYWQoe30sIGRhdGEpOwoKICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHRoaXMudmlld3BhcmFtcyk7CiAgICAgIHZhciBwb3N0ID0gdGhpcy5zZXJ2aWNlLmZyb250TG9naWMobW9kZSwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSwgYXJnLCBzaG93bG9hZGluZyk7CiAgICAgIHBvc3QudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICBfdGhpczE1LiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgIGRlc2M6ICfooajljZXpobnmm7TmlrDlpLHotKUnCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdmFyIF9kYXRhID0ge307CiAgICAgICAgdXBkYXRlRGV0YWlscy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIE9iamVjdC5hc3NpZ24oX2RhdGEsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgbmFtZSwgZGF0YVtuYW1lXSkpOwogICAgICAgIH0pOwoKICAgICAgICBfdGhpczE1LnNldEZvcm1FbmFibGVDb25kKF9kYXRhKTsKCiAgICAgICAgX3RoaXMxNS5maWxsRm9ybShfZGF0YSwgJ3VwZGF0ZUZvcm1JdGVtJyk7CgogICAgICAgIF90aGlzMTUuZm9ybUxvZ2ljKHsKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgbmV3VmFsOiBudWxsLAogICAgICAgICAgb2xkVmFsOiBudWxsCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzMTUuZGF0YUNoYW5nLm5leHQoSlNPTi5zdHJpbmdpZnkoX3RoaXMxNS5kYXRhKSk7CgogICAgICAgIF90aGlzMTUuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMTUuZm9ybVN0YXRlLm5leHQoewogICAgICAgICAgICB0eXBlOiAndXBkYXRlZm9ybWl0ZW0nLAogICAgICAgICAgICB1Zmltb2RlOiBhcmcuc3JmdWZpbW9kZSwKICAgICAgICAgICAgZGF0YTogX2RhdGEKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIF90aGlzMTUuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIF90aGlzMTUuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgZGVzYzogJ+ezu+e7n+W8guW4uCcKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5Zue6L2m5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25FbnRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25FbnRlcigkZXZlbnQpIHt9CiAgICAvKioNCiAgICAgKiDkv53lrZjlubbpgIDlh7oNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInNhdmVBbmRFeGl0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlQW5kRXhpdChkYXRhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBhcmcgPSB7fTsKCiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgZGF0YVswXSk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5jdXJyZW50QWN0aW9uID0gInNhdmVBbmRFeGl0IjsKCiAgICAgICAgX3RoaXMuc2F2ZShbYXJnXSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzLmNsb3NlVmlldyhyZXMuZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDkv53lrZjlubbmlrDlu7oNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInNhdmVBbmROZXciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVBbmROZXcoZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgYXJnID0ge307CgogICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIGRhdGFbMF0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuY3VycmVudEFjdGlvbiA9ICJzYXZlQW5kTmV3IjsKCiAgICAgICAgX3RoaXMuc2F2ZShbYXJnXSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpcy5SZXNldERhdGEocmVzKTsKCiAgICAgICAgICBfdGhpcy5sb2FkRHJhZnQoe30pOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDliKDpmaTlubbpgIDlh7oNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInJlbW92ZUFuZEV4aXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUFuZEV4aXQoZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgYXJnID0ge307CgogICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIGRhdGFbMF0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMucmVtb3ZlKFthcmddKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgX3RoaXMuY2xvc2VWaWV3KHJlcy5kYXRhKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICog5YWz57O755WM6Z2i5pWw5o2u5L+d5a2Y5a6M5oiQDQogICAgKg0KICAgICogQHBhcmFtIHthbnl9ICRldmVudA0KICAgICogQG1lbWJlcm9mIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZQ0KICAgICovCgogIH0sIHsKICAgIGtleTogImRyZGF0YXNhdmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcmRhdGFzYXZlZCgkZXZlbnQpIHsKICAgICAgdmFyIF90aGlzMTYgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZHJjb3VudGVyLS07CgogICAgICBpZiAodGhpcy5kcmNvdW50ZXIgPT09IDApIHsKICAgICAgICB0aGlzLnNhdmUodGhpcy5kcnNhdmVvcHQsIHVuZGVmaW5lZCwgZmFsc2UpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMxNi5zYXZlU3RhdGUocmVzKTsKCiAgICAgICAgICBfdGhpczE2LmRyc2F2ZW9wdCA9IHt9OwoKICAgICAgICAgIGlmIChPYmplY3QuaXMoX3RoaXMuY3VycmVudEFjdGlvbiwgInNhdmVBbmROZXciKSkgewogICAgICAgICAgICBfdGhpcy5SZXNldERhdGEocmVzKTsKCiAgICAgICAgICAgIF90aGlzLmxvYWREcmFmdCh7fSk7CiAgICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pcyhfdGhpcy5jdXJyZW50QWN0aW9uLCAic2F2ZUFuZEV4aXQiKSkgewogICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXMuY2xvc2VWaWV3KHJlcy5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDmlrDlu7rpu5jorqTlgLwNCiAgICAgKiBAbWVtYmVyb2YgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImNyZWF0ZURlZmF1bHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHQoKSB7CiAgICAgIGlmICh0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkoJ29ybW9yZ25hbWUnKSkgewogICAgICAgIHRoaXMuZGF0YVsnb3Jtb3JnbmFtZSddID0gdGhpcy5jb250ZXh0WydTUkZPUkdOQU1FJ107CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkoJ29ybW9yZ2lkJykpIHsKICAgICAgICB0aGlzLmRhdGFbJ29ybW9yZ2lkJ10gPSB0aGlzLmNvbnRleHRbJ1NSRk9SR0lEJ107CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOabtOaWsOm7mOiupOWAvA0KICAgICAqIEBtZW1iZXJvZiBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidXBkYXRlRGVmYXVsdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRGVmYXVsdCgpIHt9CiAgfV0pOwoKICByZXR1cm4gTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlOwp9KFZ1ZSk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJuYW1lIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgInZpZXdTdGF0ZSIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJjb250ZXh0Iiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgInZpZXdwYXJhbXMiLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKHsKICAiZGVmYXVsdCI6IGZhbHNlCn0pXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgImF1dG9zYXZlIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCh7CiAgImRlZmF1bHQiOiB0cnVlCn0pXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgInNob3dCdXN5SW5kaWNhdG9yIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIldGU3VibWl0QWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIldGU3RhcnRBY3Rpb24iLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAidXBkYXRlQWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgInJlbW92ZUFjdGlvbiIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJsb2FkZHJhZnRBY3Rpb24iLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAibG9hZEFjdGlvbiIsIHZvaWQgMCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJjcmVhdGVBY3Rpb24iLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wKCldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAic2VhcmNoQWN0aW9uIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcCgpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgInZpZXd0YWciLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtXYXRjaCgnZGF0YS5zcmZ1cGRhdGVkYXRlJyldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAib25TcmZ1cGRhdGVkYXRlQ2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdkYXRhLnNyZm9yaWtleScpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uU3Jmb3Jpa2V5Q2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdkYXRhLnNyZmtleScpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uU3Jma2V5Q2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdkYXRhLnNyZm1ham9ydGV4dCcpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uU3JmbWFqb3J0ZXh0Q2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdkYXRhLnNyZnRlbXBtb2RlJyldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAib25TcmZ0ZW1wbW9kZUNoYW5nZSIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtXYXRjaCgnZGF0YS5zcmZ1ZicpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uU3JmdWZDaGFuZ2UiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbV2F0Y2goJ2RhdGEuc3JmZGVpZCcpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uU3JmZGVpZENoYW5nZSIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtXYXRjaCgnZGF0YS5zcmZzb3VyY2VrZXknKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJvblNyZnNvdXJjZWtleUNoYW5nZSIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtXYXRjaCgnZGF0YS5waW1wZXJzb25pZCcpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uUGltcGVyc29uaWRDaGFuZ2UiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbV2F0Y2goJ2RhdGEucGltcGVyc29ubmFtZScpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uUGltcGVyc29ubmFtZUNoYW5nZSIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtXYXRjaCgnZGF0YS5odGJoJyldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAib25IdGJoQ2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdkYXRhLmNvbnRyYWN0dHlwZScpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uQ29udHJhY3R0eXBlQ2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdkYXRhLnFzcnEnKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJvblFzcnFDaGFuZ2UiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbV2F0Y2goJ2RhdGEuanNycScpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uSnNycUNoYW5nZSIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtXYXRjaCgnZGF0YS5odHp0JyldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAib25IdHp0Q2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdkYXRhLm9ybW9yZ25hbWUnKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJvbk9ybW9yZ25hbWVDaGFuZ2UiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbV2F0Y2goJ2RhdGEuc3lkcXNqJyldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAib25TeWRxc2pDaGFuZ2UiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbV2F0Y2goJ2RhdGEucGltbGFib3VyY2FtcGFueW5hbWUnKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJvblBpbWxhYm91cmNhbXBhbnluYW1lQ2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdkYXRhLm9ybW9yZ2lkJyldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAib25Pcm1vcmdpZENoYW5nZSIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtXYXRjaCgnZGF0YS5vcmdpZCcpXSwgTGFiU2VydmljZXNfRWRpdEdyaWRCYXNlLnByb3RvdHlwZSwgIm9uT3JnaWRDaGFuZ2UiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbV2F0Y2goJ2RhdGEucGVyc29ub3JnaWQnKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJvblBlcnNvbm9yZ2lkQ2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1dhdGNoKCdkYXRhLnBpbWNvbnRyYWN0aWQnKV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZS5wcm90b3R5cGUsICJvblBpbWNvbnRyYWN0aWRDaGFuZ2UiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbV2F0Y2goJ2RhdGEucGltbGFib3VyY2FtcGFueWlkJyldLCBMYWJTZXJ2aWNlc19FZGl0R3JpZEJhc2UucHJvdG90eXBlLCAib25QaW1sYWJvdXJjYW1wYW55aWRDaGFuZ2UiLCBudWxsKTsKCkxhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZSA9IHRzbGliXzEuX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7fQp9KV0sIExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZSk7CmV4cG9ydCBkZWZhdWx0IExhYlNlcnZpY2VzX0VkaXRHcmlkQmFzZTs="},null]}