{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js??ref--14-3!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\pages\\pim\\pimqualmajorgrid-view\\pimqualmajorgrid-view-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\pages\\pim\\pimqualmajorgrid-view\\pimqualmajorgrid-view-base.vue","mtime":1630509410175},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydGllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9nZXQgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2dldCI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSAidHNsaWIiOwppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIEVtaXQsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJzsKaW1wb3J0IHsgVnVlTGlmZUN5Y2xlUHJvY2Vzc2luZywgR3JpZFZpZXdCYXNlIH0gZnJvbSAnQC9jcm0tY29yZSc7CmltcG9ydCBQaW1RdWFsTWFqb3JTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9waW0tcXVhbC1tYWpvci9waW0tcXVhbC1tYWpvci1zZXJ2aWNlJzsKaW1wb3J0IEdyaWRWaWV3RW5naW5lIGZyb20gJ0BlbmdpbmUvdmlldy9ncmlkLXZpZXctZW5naW5lJzsKLyoqDQogKiDmiafkuJrotYTmoLzkuJPkuJrln7rnsbsNCiAqDQogKiBAZXhwb3J0DQogKiBAY2xhc3MgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogKiBAZXh0ZW5kcyB7R3JpZFZpZXdCYXNlfQ0KICovCgp2YXIgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0dyaWRWaWV3QmFzZSkgewogIF9pbmhlcml0cyhQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UsIF9HcmlkVmlld0Jhc2UpOwoKICAvKioNCiAgICog5omn5Lia6LWE5qC85LiT5Lia5Z+657G7DQogICAqDQogICAqIEBleHBvcnQNCiAgICogQGNsYXNzIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgKiBAZXh0ZW5kcyB7R3JpZFZpZXdCYXNlfQ0KICAgKi8KICBmdW5jdGlvbiBQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UoKSB7CiAgICB2YXIgX3RoaXMyOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UpOwoKICAgIF90aGlzMiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgLyoqDQogICAgICog5a6e5L2T5pyN5Yqh5a+56LGhDQogICAgICoNCiAgICAgKiBAdHlwZSB7UGltUXVhbE1ham9yU2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogICAgX3RoaXMyLmFwcEVudGl0eVNlcnZpY2UgPSBuZXcgUGltUXVhbE1ham9yU2VydmljZSgpOwogICAgLyoqDQogICAgICog6K6h5pWw5Zmo5pyN5Yqh5a+56LGh6ZuG5ZCIDQogICAgICoNCiAgICAgKiBAdHlwZSB7QXJyYXk8Kj59DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5jb3VudGVyU2VydmljZUFycmF5ID0gW107CiAgICAvKioNCiAgICAgKiDop4blm77moIfor4YNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi52aWV3dGFnID0gJ2UxZmEzM2Q5YTllZjYyNjA2YjI2NWExMjllZDc3Y2JlJzsKICAgIC8qKg0KICAgICAqIOeItuaVsOaNruWvueixoQ0KICAgICAqDQogICAgICogQHByb3RlY3RlZA0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuc3JmcGFyZW50ZGF0YSA9IHt9OwogICAgLyoqDQogICAgICog6Ieq5a6a5LmJ6KeG5Zu+5a+86Iiq5LiK5LiL5paH6ZuG5ZCIDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogICAgX3RoaXMyLmN1c3RvbVZpZXdOYXZDb250ZXh0cyA9IHt9OwogICAgLyoqDQogICAgICog6Ieq5a6a5LmJ6KeG5Zu+5a+86Iiq5Y+C5pWw6ZuG5ZCIDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogICAgX3RoaXMyLmN1c3RvbVZpZXdQYXJhbXMgPSB7fTsKICAgIC8qKg0KICAgICAqIOinhuWbvuaooeWei+aVsOaNrg0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5tb2RlbCA9IHsKICAgICAgc3JmQ2FwdGlvbjogJ2VudGl0aWVzLnBpbXF1YWxtYWpvci52aWV3cy5ncmlkdmlldy5jYXB0aW9uJywKICAgICAgc3JmVGl0bGU6ICdlbnRpdGllcy5waW1xdWFsbWFqb3Iudmlld3MuZ3JpZHZpZXcudGl0bGUnLAogICAgICBzcmZTdWJUaXRsZTogJ2VudGl0aWVzLnBpbXF1YWxtYWpvci52aWV3cy5ncmlkdmlldy5zdWJ0aXRsZScsCiAgICAgIGRhdGFJbmZvOiAnJwogICAgfTsKICAgIC8qKg0KICAgICAqIOWuueWZqOaooeWeiw0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5jb250YWluZXJNb2RlbCA9IHsKICAgICAgdmlld190b29sYmFyOiB7CiAgICAgICAgbmFtZTogJ3Rvb2xiYXInLAogICAgICAgIHR5cGU6ICdUT09MQkFSJwogICAgICB9LAogICAgICB2aWV3X2dyaWQ6IHsKICAgICAgICBuYW1lOiAnZ3JpZCcsCiAgICAgICAgdHlwZTogJ0dSSUQnCiAgICAgIH0sCiAgICAgIHZpZXdfc2VhcmNoZm9ybTogewogICAgICAgIG5hbWU6ICdzZWFyY2hmb3JtJywKICAgICAgICB0eXBlOiAnU0VBUkNIRk9STScKICAgICAgfQogICAgfTsKICAgIC8qKg0KICAgICAqIOinhuWbvueKtuaAgeiuoumYheWvueixoQ0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEB0eXBlIHtTdWJqZWN0PHthY3Rpb246IHN0cmluZywgZGF0YTogYW55fT59DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi52aWV3U3RhdGUgPSBuZXcgU3ViamVjdCgpOwogICAgLyoqDQogICAgICog5bel5YW35qCP5qih5Z6LDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXcNCiAgICAgKi8KCiAgICBfdGhpczIudG9vbEJhck1vZGVscyA9IHsKICAgICAgZGV1aWFjdGlvbjE6IHsKICAgICAgICBuYW1lOiAnZGV1aWFjdGlvbjEnLAogICAgICAgIGNhcHRpb246ICfmlrDlu7onLAogICAgICAgICdpc1Nob3dDYXB0aW9uJzogdHJ1ZSwKICAgICAgICAnaXNTaG93SWNvbic6IHRydWUsCiAgICAgICAgdG9vbHRpcDogJ+aWsOW7uicsCiAgICAgICAgaWNvbmNsczogJ2ZhIGZhLXBsdXMnLAogICAgICAgIGljb246ICcnLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICB0eXBlOiAnREVVSUFDVElPTicsCiAgICAgICAgdmlzYWJsZWQ6IHRydWUsCiAgICAgICAgZGF0YWFjY2FjdGlvbjogJycsCiAgICAgICAgdWlhY3Rpb246IHsKICAgICAgICAgIHRhZzogJ05ld1JvdycsCiAgICAgICAgICB0YXJnZXQ6ICcnCiAgICAgICAgfSwKICAgICAgICAiY2xhc3MiOiAnJwogICAgICB9LAogICAgICBkZXVpYWN0aW9uMjogewogICAgICAgIG5hbWU6ICdkZXVpYWN0aW9uMicsCiAgICAgICAgY2FwdGlvbjogJ+S/neWtmCcsCiAgICAgICAgJ2lzU2hvd0NhcHRpb24nOiB0cnVlLAogICAgICAgICdpc1Nob3dJY29uJzogdHJ1ZSwKICAgICAgICB0b29sdGlwOiAn5L+d5a2YJywKICAgICAgICBpY29uY2xzOiAnZmEgZmEtc2F2ZScsCiAgICAgICAgaWNvbjogJycsCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIHR5cGU6ICdERVVJQUNUSU9OJywKICAgICAgICB2aXNhYmxlZDogdHJ1ZSwKICAgICAgICBkYXRhYWNjYWN0aW9uOiAnJywKICAgICAgICB1aWFjdGlvbjogewogICAgICAgICAgdGFnOiAnU2F2ZVJvdycsCiAgICAgICAgICB0YXJnZXQ6ICcnCiAgICAgICAgfSwKICAgICAgICAiY2xhc3MiOiAnJwogICAgICB9LAogICAgICBkZXVpYWN0aW9uMzogewogICAgICAgIG5hbWU6ICdkZXVpYWN0aW9uMycsCiAgICAgICAgY2FwdGlvbjogJ+WIoOmZpCcsCiAgICAgICAgJ2lzU2hvd0NhcHRpb24nOiB0cnVlLAogICAgICAgICdpc1Nob3dJY29uJzogdHJ1ZSwKICAgICAgICB0b29sdGlwOiAn5Yig6ZmkJywKICAgICAgICBpY29uY2xzOiAnZmEgZmEtcmVtb3ZlJywKICAgICAgICBpY29uOiAnJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ0RFVUlBQ1RJT04nLAogICAgICAgIHZpc2FibGVkOiB0cnVlLAogICAgICAgIGRhdGFhY2NhY3Rpb246ICdTUkZVUl9fSkdMWUdYTUwnLAogICAgICAgIHVpYWN0aW9uOiB7CiAgICAgICAgICB0YWc6ICdSZW1vdmUnLAogICAgICAgICAgdGFyZ2V0OiAnTVVMVElLRVknCiAgICAgICAgfSwKICAgICAgICAiY2xhc3MiOiAnJwogICAgICB9LAogICAgICBkZXVpYWN0aW9uNDogewogICAgICAgIG5hbWU6ICdkZXVpYWN0aW9uNCcsCiAgICAgICAgY2FwdGlvbjogJ+WvvOWFpScsCiAgICAgICAgJ2lzU2hvd0NhcHRpb24nOiB0cnVlLAogICAgICAgICdpc1Nob3dJY29uJzogdHJ1ZSwKICAgICAgICB0b29sdGlwOiAn5a+85YWlJywKICAgICAgICBpY29uY2xzOiAnZmEgZmEtdXBsb2FkJywKICAgICAgICBpY29uOiAnJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ0RFVUlBQ1RJT04nLAogICAgICAgIHZpc2FibGVkOiB0cnVlLAogICAgICAgIGRhdGFhY2NhY3Rpb246ICdTUkZVUl9fSkdMWVlQWlNaWUpUSicsCiAgICAgICAgdWlhY3Rpb246IHsKICAgICAgICAgIHRhZzogJ0ltcG9ydCcsCiAgICAgICAgICB0YXJnZXQ6ICcnCiAgICAgICAgfSwKICAgICAgICAiY2xhc3MiOiAnJwogICAgICB9LAogICAgICBkZXVpYWN0aW9uNTogewogICAgICAgIG5hbWU6ICdkZXVpYWN0aW9uNScsCiAgICAgICAgY2FwdGlvbjogJ+WvvOWHuicsCiAgICAgICAgJ2lzU2hvd0NhcHRpb24nOiB0cnVlLAogICAgICAgICdpc1Nob3dJY29uJzogdHJ1ZSwKICAgICAgICB0b29sdGlwOiAn5a+85Ye6JywKICAgICAgICBpY29uY2xzOiAnZmEgZmEtZmlsZS1leGNlbC1vJywKICAgICAgICBpY29uOiAnJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgdHlwZTogJ0RFVUlBQ1RJT04nLAogICAgICAgIHZpc2FibGVkOiB0cnVlLAogICAgICAgIGRhdGFhY2NhY3Rpb246ICcnLAogICAgICAgIHVpYWN0aW9uOiB7CiAgICAgICAgICB0YWc6ICdFeHBvcnRFeGNlbCcsCiAgICAgICAgICB0YXJnZXQ6ICcnCiAgICAgICAgfSwKICAgICAgICBNYXhSb3dDb3VudDogNTAwMCwKICAgICAgICAiY2xhc3MiOiAnJwogICAgICB9CiAgICB9OwogICAgLyoqDQogICAgICog6KeG5Zu+5byV5pOODQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHR5cGUge0VuZ2luZX0NCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogICAgX3RoaXMyLmVuZ2luZSA9IG5ldyBHcmlkVmlld0VuZ2luZSgpOwogICAgLyoqDQogICAgICog5piv5ZCm5Y2V6YCJDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogICAgX3RoaXMyLmlzU2luZ2xlU2VsZWN0ID0gZmFsc2U7CiAgICAvKioNCiAgICAgKiDmkJzntKLlgLwNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5xdWVyeSA9ICcnOwogICAgLyoqDQogICAgICog5piv5ZCm5bGV5byA5pCc57Si6KGo5Y2VDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogICAgX3RoaXMyLmlzRXhwYW5kU2VhcmNoRm9ybSA9IGZhbHNlOwogICAgLyoqDQogICAgICog6KGo5qC86KGM5pWw5o2u6buY6K6k5r+A5rS75qih5byPDQogICAgICogMCDkuI3mv4DmtLsNCiAgICAgKiAxIOWNleWHu+a/gOa0uw0KICAgICAqIDIg5Y+M5Ye75r+A5rS7DQogICAgICoNCiAgICAgKiBAdHlwZSB7KG51bWJlciB8IDAgfCAxIHwgMil9DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5ncmlkUm93QWN0aXZlTW9kZSA9IDI7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KICAvKioNCiAgICog5pWw5o2u5Y+Y5YyWDQogICAqDQogICAqIEBwYXJhbSB7Kn0gdmFsDQogICAqIEByZXR1cm5zIHsqfQ0KICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZSwgW3sKICAgIGtleTogInZpZXdEYXRhc0NoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmlld0RhdGFzQ2hhbmdlKHZhbCkgewogICAgICByZXR1cm4gdmFsOwogICAgfQogICAgLyoqDQogICAgICog5byV5pOO5Yid5aeL5YyWDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJlbmdpbmVJbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBlbmdpbmVJbml0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuZW5naW5lLmluaXQoewogICAgICAgIHZpZXc6IHRoaXMsCiAgICAgICAgb3BlbmRhdGE6IGZ1bmN0aW9uIG9wZW5kYXRhKGFyZ3MsIHBhcmFtcywgJGV2ZW50LCB4RGF0YSkgewogICAgICAgICAgX3RoaXMzLm9wZW5kYXRhKGFyZ3MsIHBhcmFtcywgJGV2ZW50LCB4RGF0YSk7CiAgICAgICAgfSwKICAgICAgICBuZXdkYXRhOiBmdW5jdGlvbiBuZXdkYXRhKGFyZ3MsIHBhcmFtcywgJGV2ZW50LCB4RGF0YSkgewogICAgICAgICAgX3RoaXMzLm5ld2RhdGEoYXJncywgcGFyYW1zLCAkZXZlbnQsIHhEYXRhKTsKICAgICAgICB9LAogICAgICAgIGdyaWQ6IHRoaXMuJHJlZnMuZ3JpZCwKICAgICAgICBzZWFyY2hmb3JtOiB0aGlzLiRyZWZzLnNlYXJjaGZvcm0sCiAgICAgICAga2V5UFNERUZpZWxkOiAncGltcXVhbG1ham9yJywKICAgICAgICBtYWpvclBTREVGaWVsZDogJ3p5emd6eScsCiAgICAgICAgaXNMb2FkRGVmYXVsdDogdHJ1ZQogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIHRvb2xiYXIg6YOo5Lu2IGNsaWNrIOS6i+S7tg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbYXJncz17fV0NCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidG9vbGJhcl9jbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9vbGJhcl9jbGljaygkZXZlbnQsICRldmVudDIpIHsKICAgICAgaWYgKE9iamVjdC5pcygkZXZlbnQudGFnLCAnZGV1aWFjdGlvbjEnKSkgewogICAgICAgIHRoaXMudG9vbGJhcl9kZXVpYWN0aW9uMV9jbGljayhudWxsLCAnJywgJGV2ZW50Mik7CiAgICAgIH0KCiAgICAgIGlmIChPYmplY3QuaXMoJGV2ZW50LnRhZywgJ2RldWlhY3Rpb24yJykpIHsKICAgICAgICB0aGlzLnRvb2xiYXJfZGV1aWFjdGlvbjJfY2xpY2sobnVsbCwgJycsICRldmVudDIpOwogICAgICB9CgogICAgICBpZiAoT2JqZWN0LmlzKCRldmVudC50YWcsICdkZXVpYWN0aW9uMycpKSB7CiAgICAgICAgdGhpcy50b29sYmFyX2RldWlhY3Rpb24zX2NsaWNrKG51bGwsICcnLCAkZXZlbnQyKTsKICAgICAgfQoKICAgICAgaWYgKE9iamVjdC5pcygkZXZlbnQudGFnLCAnZGV1aWFjdGlvbjQnKSkgewogICAgICAgIHRoaXMudG9vbGJhcl9kZXVpYWN0aW9uNF9jbGljayhudWxsLCAnJywgJGV2ZW50Mik7CiAgICAgIH0KCiAgICAgIGlmIChPYmplY3QuaXMoJGV2ZW50LnRhZywgJ2RldWlhY3Rpb241JykpIHsKICAgICAgICB0aGlzLnRvb2xiYXJfZGV1aWFjdGlvbjVfY2xpY2sobnVsbCwgJycsICRldmVudDIpOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiBncmlkIOmDqOS7tiBzZWxlY3Rpb25jaGFuZ2Ug5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFthcmdzPXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gJGV2ZW50DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJncmlkX3NlbGVjdGlvbmNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ3JpZF9zZWxlY3Rpb25jaGFuZ2UoJGV2ZW50LCAkZXZlbnQyKSB7CiAgICAgIHRoaXMuZW5naW5lLm9uQ3RybEV2ZW50KCdncmlkJywgJ3NlbGVjdGlvbmNoYW5nZScsICRldmVudCk7CiAgICB9CiAgICAvKioNCiAgICAgKiBncmlkIOmDqOS7tiBiZWZvcmVsb2FkIOS6i+S7tg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbYXJncz17fV0NCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ3JpZF9iZWZvcmVsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBncmlkX2JlZm9yZWxvYWQoJGV2ZW50LCAkZXZlbnQyKSB7CiAgICAgIHRoaXMuZW5naW5lLm9uQ3RybEV2ZW50KCdncmlkJywgJ2JlZm9yZWxvYWQnLCAkZXZlbnQpOwogICAgfQogICAgLyoqDQogICAgICogZ3JpZCDpg6jku7Ygcm93ZGJsY2xpY2sg5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFthcmdzPXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gJGV2ZW50DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJncmlkX3Jvd2RibGNsaWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBncmlkX3Jvd2RibGNsaWNrKCRldmVudCwgJGV2ZW50MikgewogICAgICB0aGlzLmVuZ2luZS5vbkN0cmxFdmVudCgnZ3JpZCcsICdyb3dkYmxjbGljaycsICRldmVudCk7CiAgICB9CiAgICAvKioNCiAgICAgKiBncmlkIOmDqOS7tiByZW1vdmUg5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFthcmdzPXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gJGV2ZW50DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJncmlkX3JlbW92ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ3JpZF9yZW1vdmUoJGV2ZW50LCAkZXZlbnQyKSB7CiAgICAgIHRoaXMuZW5naW5lLm9uQ3RybEV2ZW50KCdncmlkJywgJ3JlbW92ZScsICRldmVudCk7CiAgICB9CiAgICAvKioNCiAgICAgKiBncmlkIOmDqOS7tiBsb2FkIOS6i+S7tg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbYXJncz17fV0NCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ3JpZF9sb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBncmlkX2xvYWQoJGV2ZW50LCAkZXZlbnQyKSB7CiAgICAgIHRoaXMuZW5naW5lLm9uQ3RybEV2ZW50KCdncmlkJywgJ2xvYWQnLCAkZXZlbnQpOwogICAgfQogICAgLyoqDQogICAgICogc2VhcmNoZm9ybSDpg6jku7Ygc2F2ZSDkuovku7YNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW2FyZ3M9e31dDQogICAgICogQHBhcmFtIHsqfSAkZXZlbnQNCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInNlYXJjaGZvcm1fc2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoZm9ybV9zYXZlKCRldmVudCwgJGV2ZW50MikgewogICAgICB0aGlzLmVuZ2luZS5vbkN0cmxFdmVudCgnc2VhcmNoZm9ybScsICdzYXZlJywgJGV2ZW50KTsKICAgIH0KICAgIC8qKg0KICAgICAqIHNlYXJjaGZvcm0g6YOo5Lu2IHNlYXJjaCDkuovku7YNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW2FyZ3M9e31dDQogICAgICogQHBhcmFtIHsqfSAkZXZlbnQNCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInNlYXJjaGZvcm1fc2VhcmNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2hmb3JtX3NlYXJjaCgkZXZlbnQsICRldmVudDIpIHsKICAgICAgdGhpcy5lbmdpbmUub25DdHJsRXZlbnQoJ3NlYXJjaGZvcm0nLCAnc2VhcmNoJywgJGV2ZW50KTsKICAgIH0KICAgIC8qKg0KICAgICAqIHNlYXJjaGZvcm0g6YOo5Lu2IGxvYWQg5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFthcmdzPXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gJGV2ZW50DQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzZWFyY2hmb3JtX2xvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaGZvcm1fbG9hZCgkZXZlbnQsICRldmVudDIpIHsKICAgICAgdGhpcy5lbmdpbmUub25DdHJsRXZlbnQoJ3NlYXJjaGZvcm0nLCAnbG9hZCcsICRldmVudCk7CiAgICB9CiAgICAvKioNCiAgICAgKiDpgLvovpHkuovku7YNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW3BhcmFtcz17fV0NCiAgICAgKiBAcGFyYW0geyp9IFt0YWddDQogICAgICogQHBhcmFtIHsqfSBbJGV2ZW50XQ0KICAgICAqIEBtZW1iZXJvZg0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ0b29sYmFyX2RldWlhY3Rpb24xX2NsaWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b29sYmFyX2RldWlhY3Rpb24xX2NsaWNrKCkgewogICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdmFyIHRhZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwogICAgICB2YXIgJGV2ZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7CiAgICAgIC8vIOWPguaVsAogICAgICAvLyDlj5bmlbAKICAgICAgdmFyIGRhdGFzID0gW107CiAgICAgIHZhciB4RGF0YSA9IG51bGw7IC8vIF90aGlzIOaMh+WQkeWuueWZqOWvueixoQoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBwYXJhbUpPID0ge307CiAgICAgIHZhciBjb250ZXh0Sk8gPSB7fTsKICAgICAgeERhdGEgPSB0aGlzLiRyZWZzLmdyaWQ7CgogICAgICBpZiAoeERhdGEuZ2V0RGF0YXMgJiYgeERhdGEuZ2V0RGF0YXMgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgIGRhdGFzID0gX3RvQ29uc3VtYWJsZUFycmF5KHhEYXRhLmdldERhdGFzKCkpOwogICAgICB9CgogICAgICBpZiAocGFyYW1zKSB7CiAgICAgICAgZGF0YXMgPSBbcGFyYW1zXTsKICAgICAgfSAvLyDnlYzpnaLooYzkuLoKCgogICAgICB0aGlzLk5ld1JvdyhkYXRhcywgY29udGV4dEpPLCBwYXJhbUpPLCAkZXZlbnQsIHhEYXRhLCB0aGlzLCAiUGltUXVhbE1ham9yIik7CiAgICB9CiAgICAvKioNCiAgICAgKiDpgLvovpHkuovku7YNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW3BhcmFtcz17fV0NCiAgICAgKiBAcGFyYW0geyp9IFt0YWddDQogICAgICogQHBhcmFtIHsqfSBbJGV2ZW50XQ0KICAgICAqIEBtZW1iZXJvZg0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ0b29sYmFyX2RldWlhY3Rpb24yX2NsaWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b29sYmFyX2RldWlhY3Rpb24yX2NsaWNrKCkgewogICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdmFyIHRhZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwogICAgICB2YXIgJGV2ZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7CiAgICAgIC8vIOWPguaVsAogICAgICAvLyDlj5bmlbAKICAgICAgdmFyIGRhdGFzID0gW107CiAgICAgIHZhciB4RGF0YSA9IG51bGw7IC8vIF90aGlzIOaMh+WQkeWuueWZqOWvueixoQoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBwYXJhbUpPID0ge307CiAgICAgIHZhciBjb250ZXh0Sk8gPSB7fTsKICAgICAgeERhdGEgPSB0aGlzLiRyZWZzLmdyaWQ7CgogICAgICBpZiAoeERhdGEuZ2V0RGF0YXMgJiYgeERhdGEuZ2V0RGF0YXMgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgIGRhdGFzID0gX3RvQ29uc3VtYWJsZUFycmF5KHhEYXRhLmdldERhdGFzKCkpOwogICAgICB9CgogICAgICBpZiAocGFyYW1zKSB7CiAgICAgICAgZGF0YXMgPSBbcGFyYW1zXTsKICAgICAgfSAvLyDnlYzpnaLooYzkuLoKCgogICAgICB0aGlzLlNhdmVSb3coZGF0YXMsIGNvbnRleHRKTywgcGFyYW1KTywgJGV2ZW50LCB4RGF0YSwgdGhpcywgIlBpbVF1YWxNYWpvciIpOwogICAgfQogICAgLyoqDQogICAgICog6YC76L6R5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXM9e31dDQogICAgICogQHBhcmFtIHsqfSBbdGFnXQ0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0NCiAgICAgKiBAbWVtYmVyb2YNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidG9vbGJhcl9kZXVpYWN0aW9uM19jbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9vbGJhcl9kZXVpYWN0aW9uM19jbGljaygpIHsKICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHZhciB0YWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKICAgICAgdmFyICRldmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkOwogICAgICAvLyDlj4LmlbAKICAgICAgLy8g5Y+W5pWwCiAgICAgIHZhciBkYXRhcyA9IFtdOwogICAgICB2YXIgeERhdGEgPSBudWxsOyAvLyBfdGhpcyDmjIflkJHlrrnlmajlr7nosaEKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcGFyYW1KTyA9IHt9OwogICAgICB2YXIgY29udGV4dEpPID0ge307CiAgICAgIHhEYXRhID0gdGhpcy4kcmVmcy5ncmlkOwoKICAgICAgaWYgKHhEYXRhLmdldERhdGFzICYmIHhEYXRhLmdldERhdGFzIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICBkYXRhcyA9IF90b0NvbnN1bWFibGVBcnJheSh4RGF0YS5nZXREYXRhcygpKTsKICAgICAgfQoKICAgICAgaWYgKHBhcmFtcykgewogICAgICAgIGRhdGFzID0gW3BhcmFtc107CiAgICAgIH0gLy8g55WM6Z2i6KGM5Li6CgoKICAgICAgdGhpcy5SZW1vdmUoZGF0YXMsIGNvbnRleHRKTywgcGFyYW1KTywgJGV2ZW50LCB4RGF0YSwgdGhpcywgIlBpbVF1YWxNYWpvciIpOwogICAgfQogICAgLyoqDQogICAgICog6YC76L6R5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXM9e31dDQogICAgICogQHBhcmFtIHsqfSBbdGFnXQ0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0NCiAgICAgKiBAbWVtYmVyb2YNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidG9vbGJhcl9kZXVpYWN0aW9uNF9jbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9vbGJhcl9kZXVpYWN0aW9uNF9jbGljaygpIHsKICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHZhciB0YWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKICAgICAgdmFyICRldmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkOwogICAgICAvLyDlj4LmlbAKICAgICAgLy8g5Y+W5pWwCiAgICAgIHZhciBkYXRhcyA9IFtdOwogICAgICB2YXIgeERhdGEgPSBudWxsOyAvLyBfdGhpcyDmjIflkJHlrrnlmajlr7nosaEKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcGFyYW1KTyA9IHt9OwogICAgICB2YXIgY29udGV4dEpPID0ge307CiAgICAgIHhEYXRhID0gdGhpcy4kcmVmcy5ncmlkOwoKICAgICAgaWYgKHhEYXRhLmdldERhdGFzICYmIHhEYXRhLmdldERhdGFzIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICBkYXRhcyA9IF90b0NvbnN1bWFibGVBcnJheSh4RGF0YS5nZXREYXRhcygpKTsKICAgICAgfQoKICAgICAgaWYgKHBhcmFtcykgewogICAgICAgIGRhdGFzID0gW3BhcmFtc107CiAgICAgIH0gLy8g55WM6Z2i6KGM5Li6CgoKICAgICAgdGhpcy5JbXBvcnQoZGF0YXMsIGNvbnRleHRKTywgcGFyYW1KTywgJGV2ZW50LCB4RGF0YSwgdGhpcywgIlBpbVF1YWxNYWpvciIpOwogICAgfQogICAgLyoqDQogICAgICog6YC76L6R5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXM9e31dDQogICAgICogQHBhcmFtIHsqfSBbdGFnXQ0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0NCiAgICAgKiBAbWVtYmVyb2YNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidG9vbGJhcl9kZXVpYWN0aW9uNV9jbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9vbGJhcl9kZXVpYWN0aW9uNV9jbGljaygpIHsKICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHZhciB0YWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKICAgICAgdmFyICRldmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkOwogICAgICAvLyDlj4LmlbAKICAgICAgLy8g5Y+W5pWwCiAgICAgIHZhciBkYXRhcyA9IFtdOwogICAgICB2YXIgeERhdGEgPSBudWxsOyAvLyBfdGhpcyDmjIflkJHlrrnlmajlr7nosaEKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcGFyYW1KTyA9IHt9OwogICAgICB2YXIgY29udGV4dEpPID0ge307CiAgICAgIHhEYXRhID0gdGhpcy4kcmVmcy5ncmlkOwoKICAgICAgaWYgKHhEYXRhLmdldERhdGFzICYmIHhEYXRhLmdldERhdGFzIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICBkYXRhcyA9IF90b0NvbnN1bWFibGVBcnJheSh4RGF0YS5nZXREYXRhcygpKTsKICAgICAgfQoKICAgICAgaWYgKHBhcmFtcykgewogICAgICAgIGRhdGFzID0gW3BhcmFtc107CiAgICAgIH0gLy8g55WM6Z2i6KGM5Li6CgoKICAgICAgdGhpcy5FeHBvcnRFeGNlbChkYXRhcywgY29udGV4dEpPLCBwYXJhbUpPLCAkZXZlbnQsIHhEYXRhLCB0aGlzLCAiUGltUXVhbE1ham9yIik7CiAgICB9CiAgICAvKioNCiAgICAgKiDmiZPlvIDmlrDlu7rmlbDmja7op4blm74NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXNdDQogICAgICogQHBhcmFtIHsqfSBbZnVsbGFyZ3NdDQogICAgICogQHBhcmFtIHsqfSBbJGV2ZW50XQ0KICAgICAqIEBwYXJhbSB7Kn0gW3hEYXRhXQ0KICAgICAqIEBtZW1iZXJvZiBQSU1RVUFMTUFKT1JHcmlkVmlldw0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJuZXdkYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBuZXdkYXRhKGFyZ3MsIGZ1bGxhcmdzLCBwYXJhbXMsICRldmVudCwgeERhdGEpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgbG9jYWxDb250ZXh0ID0gbnVsbDsKICAgICAgdmFyIGxvY2FsVmlld1BhcmFtID0gbnVsbDsKICAgICAgdmFyIGRhdGEgPSB7fTsKCiAgICAgIGlmIChhcmdzWzBdLnNyZnNvdXJjZWtleSkgewogICAgICAgIGRhdGEuc3Jmc291cmNla2V5ID0gYXJnc1swXS5zcmZzb3VyY2VrZXk7CiAgICAgIH0KCiAgICAgIHZhciB0ZW1wQ29udGV4dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSk7CiAgICAgIGRlbGV0ZSB0ZW1wQ29udGV4dC5waW1xdWFsbWFqb3I7CgogICAgICBpZiAoYXJncy5sZW5ndGggPiAwKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCwgYXJnc1swXSk7CiAgICAgIH0KCiAgICAgIHZhciBkZVJlc1BhcmFtZXRlcnMgPSBbXTsKICAgICAgdmFyIHBhcmFtZXRlcnMgPSBbewogICAgICAgIHBhdGhOYW1lOiAncGltcXVhbG1ham9ycycsCiAgICAgICAgcGFyYW1ldGVyTmFtZTogJ3BpbXF1YWxtYWpvcicKICAgICAgfSwgewogICAgICAgIHBhdGhOYW1lOiAnZWRpdHZpZXcnLAogICAgICAgIHBhcmFtZXRlck5hbWU6ICdlZGl0dmlldycKICAgICAgfV07CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG9wZW5JbmRleFZpZXdUYWIgPSBmdW5jdGlvbiBvcGVuSW5kZXhWaWV3VGFiKGRhdGEpIHsKICAgICAgICB2YXIgX2RhdGEgPSB7CiAgICAgICAgICB3OiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LmFzc2lnbihfZGF0YSwgZGF0YSk7CgogICAgICAgIHZhciByb3V0ZVBhdGggPSBfdGhpczQuJHZpZXdUb29sLmJ1aWxkVXBSb3V0ZVBhdGgoX3RoaXM0LiRyb3V0ZSwgdGVtcENvbnRleHQsIGRlUmVzUGFyYW1ldGVycywgcGFyYW1ldGVycywgYXJncywgX2RhdGEpOwoKICAgICAgICBfdGhpczQuJHJvdXRlci5wdXNoKHJvdXRlUGF0aCk7CiAgICAgIH07CgogICAgICBvcGVuSW5kZXhWaWV3VGFiKGRhdGEpOwogICAgfQogICAgLyoqDQogICAgICog5omT5byA57yW6L6R5pWw5o2u6KeG5Zu+DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzDQogICAgICogQHBhcmFtIHsqfSBbcGFyYW1zXQ0KICAgICAqIEBwYXJhbSB7Kn0gW2Z1bGxhcmdzXQ0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0NCiAgICAgKiBAcGFyYW0geyp9IFt4RGF0YV0NCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXcNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib3BlbmRhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5kYXRhKGFyZ3MsIGZ1bGxhcmdzLCBwYXJhbXMsICRldmVudCwgeERhdGEpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgbG9jYWxDb250ZXh0ID0gbnVsbDsKICAgICAgdmFyIGxvY2FsVmlld1BhcmFtID0gbnVsbDsKICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgdmFyIHRlbXBDb250ZXh0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKTsKCiAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDApIHsKICAgICAgICBPYmplY3QuYXNzaWduKHRlbXBDb250ZXh0LCBhcmdzWzBdKTsKICAgICAgfQoKICAgICAgdmFyIGRlUmVzUGFyYW1ldGVycyA9IFtdOwogICAgICB2YXIgcGFyYW1ldGVycyA9IFt7CiAgICAgICAgcGF0aE5hbWU6ICdwaW1xdWFsbWFqb3JzJywKICAgICAgICBwYXJhbWV0ZXJOYW1lOiAncGltcXVhbG1ham9yJwogICAgICB9LCB7CiAgICAgICAgcGF0aE5hbWU6ICdlZGl0dmlldycsCiAgICAgICAgcGFyYW1ldGVyTmFtZTogJ2VkaXR2aWV3JwogICAgICB9XTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgb3BlbkluZGV4Vmlld1RhYiA9IGZ1bmN0aW9uIG9wZW5JbmRleFZpZXdUYWIoZGF0YSkgewogICAgICAgIHZhciByb3V0ZVBhdGggPSBfdGhpczUuJHZpZXdUb29sLmJ1aWxkVXBSb3V0ZVBhdGgoX3RoaXM1LiRyb3V0ZSwgdGVtcENvbnRleHQsIGRlUmVzUGFyYW1ldGVycywgcGFyYW1ldGVycywgYXJncywgZGF0YSk7CgogICAgICAgIF90aGlzNS4kcm91dGVyLnB1c2gocm91dGVQYXRoKTsKICAgICAgfTsKCiAgICAgIG9wZW5JbmRleFZpZXdUYWIoZGF0YSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDmlrDlu7rooYwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3Mg5b2T5YmN5pWw5o2uDQogICAgICogQHBhcmFtIHthbnl9IGNvbnRleHRKTyDooYzkuLrpmYTliqDkuIrkuIvmlocNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXNdIOmZhOWKoOWPguaVsA0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0g5LqL5Lu25rqQDQogICAgICogQHBhcmFtIHsqfSBbeERhdGFdICDmiafooYzooYzkuLrmiYDpnIDlvZPliY3pg6jku7YNCiAgICAgKiBAcGFyYW0geyp9IFthY3Rpb25Db250ZXh0XSAg5omn6KGM6KGM5Li65LiK5LiL5paHDQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJOZXdSb3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIE5ld1JvdyhhcmdzLCBjb250ZXh0Sk8sIHBhcmFtcywgJGV2ZW50LCB4RGF0YSwgYWN0aW9uQ29udGV4dCwgc3JmUGFyZW50RGVOYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IHt9OwoKICAgICAgaWYgKF90aGlzLm5ld1JvdyAmJiBfdGhpcy5uZXdSb3cgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgIF90aGlzLm5ld1JvdyhbX29iamVjdFNwcmVhZCh7fSwgZGF0YSldLCBwYXJhbXMsICRldmVudCwgeERhdGEpOwogICAgICB9IGVsc2UgaWYgKHhEYXRhLm5ld1JvdyAmJiB4RGF0YS5uZXdSb3cgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgIHhEYXRhLm5ld1JvdyhbX29iamVjdFNwcmVhZCh7fSwgZGF0YSldLCBwYXJhbXMsICRldmVudCwgeERhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLiROb3RpY2UuZXJyb3IoewogICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgZGVzYzogJ25ld1JvdyDop4blm77lpITnkIbpgLvovpHkuI3lrZjlnKjvvIzor7fmt7vliqAhJwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDkv53lrZjooYwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3Mg5b2T5YmN5pWw5o2uDQogICAgICogQHBhcmFtIHthbnl9IGNvbnRleHRKTyDooYzkuLrpmYTliqDkuIrkuIvmlocNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXNdIOmZhOWKoOWPguaVsA0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0g5LqL5Lu25rqQDQogICAgICogQHBhcmFtIHsqfSBbeERhdGFdICDmiafooYzooYzkuLrmiYDpnIDlvZPliY3pg6jku7YNCiAgICAgKiBAcGFyYW0geyp9IFthY3Rpb25Db250ZXh0XSAg5omn6KGM6KGM5Li65LiK5LiL5paHDQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJTYXZlUm93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBTYXZlUm93KGFyZ3MsIGNvbnRleHRKTywgcGFyYW1zLCAkZXZlbnQsIHhEYXRhLCBhY3Rpb25Db250ZXh0LCBzcmZQYXJlbnREZU5hbWUpIHsKICAgICAgLy8g55WM6Z2i6KGM5Li65a655Zmo5a+56LGhIF90aGlzCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoeERhdGEgJiYgeERhdGEuc2F2ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgeERhdGEuc2F2ZSgpOwogICAgICB9IGVsc2UgaWYgKF90aGlzLnNhdmUgJiYgX3RoaXMuc2F2ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgX3RoaXMuc2F2ZSgpOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDliKDpmaQNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3Mg5b2T5YmN5pWw5o2uDQogICAgICogQHBhcmFtIHthbnl9IGNvbnRleHRKTyDooYzkuLrpmYTliqDkuIrkuIvmlocNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXNdIOmZhOWKoOWPguaVsA0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0g5LqL5Lu25rqQDQogICAgICogQHBhcmFtIHsqfSBbeERhdGFdICDmiafooYzooYzkuLrmiYDpnIDlvZPliY3pg6jku7YNCiAgICAgKiBAcGFyYW0geyp9IFthY3Rpb25Db250ZXh0XSAg5omn6KGM6KGM5Li65LiK5LiL5paHDQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJSZW1vdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIFJlbW92ZShhcmdzLCBjb250ZXh0Sk8sIHBhcmFtcywgJGV2ZW50LCB4RGF0YSwgYWN0aW9uQ29udGV4dCwgc3JmUGFyZW50RGVOYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXhEYXRhIHx8ICEoeERhdGEucmVtb3ZlIGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB4RGF0YS5yZW1vdmUoYXJncyk7CiAgICB9CiAgICAvKioNCiAgICAgKiDmlbDmja7lr7zlhaUNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3Mg5b2T5YmN5pWw5o2uDQogICAgICogQHBhcmFtIHthbnl9IGNvbnRleHRKTyDooYzkuLrpmYTliqDkuIrkuIvmlocNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXNdIOmZhOWKoOWPguaVsA0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0g5LqL5Lu25rqQDQogICAgICogQHBhcmFtIHsqfSBbeERhdGFdICDmiafooYzooYzkuLrmiYDpnIDlvZPliY3pg6jku7YNCiAgICAgKiBAcGFyYW0geyp9IFthY3Rpb25Db250ZXh0XSAg5omn6KGM6KGM5Li65LiK5LiL5paHDQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJJbXBvcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIEltcG9ydChhcmdzLCBjb250ZXh0Sk8sIHBhcmFtcywgJGV2ZW50LCB4RGF0YSwgYWN0aW9uQ29udGV4dCwgc3JmUGFyZW50RGVOYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXhEYXRhIHx8ICEoeERhdGEuaW1wb3J0RXhjZWwgaW5zdGFuY2VvZiBGdW5jdGlvbikgfHwgISRldmVudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgeERhdGEuaW1wb3J0RXhjZWwocGFyYW1zKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWvvOWHug0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncyDlvZPliY3mlbDmja4NCiAgICAgKiBAcGFyYW0ge2FueX0gY29udGV4dEpPIOihjOS4uumZhOWKoOS4iuS4i+aWhw0KICAgICAqIEBwYXJhbSB7Kn0gW3BhcmFtc10g6ZmE5Yqg5Y+C5pWwDQogICAgICogQHBhcmFtIHsqfSBbJGV2ZW50XSDkuovku7bmupANCiAgICAgKiBAcGFyYW0geyp9IFt4RGF0YV0gIOaJp+ihjOihjOS4uuaJgOmcgOW9k+WJjemDqOS7tg0KICAgICAqIEBwYXJhbSB7Kn0gW2FjdGlvbkNvbnRleHRdICDmiafooYzooYzkuLrkuIrkuIvmlocNCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIkV4cG9ydEV4Y2VsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBFeHBvcnRFeGNlbChhcmdzLCBjb250ZXh0Sk8sIHBhcmFtcywgJGV2ZW50LCB4RGF0YSwgYWN0aW9uQ29udGV4dCwgc3JmUGFyZW50RGVOYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXhEYXRhIHx8ICEoeERhdGEuZXhwb3J0RXhjZWwgaW5zdGFuY2VvZiBGdW5jdGlvbikgfHwgISRldmVudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgeERhdGEuZXhwb3J0RXhjZWwoJGV2ZW50LmV4cG9ydHBhcm1zKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOmUgOavgeinhuWbvuWbnuiwgw0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkZXN0cm95ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBpZiAodGhpcy52aWV3RGVmYXVsdFVzYWdlKSB7CiAgICAgICAgdmFyIGxvY2FsU3RvcmVMZW5ndGggPSBPYmplY3Qua2V5cyhsb2NhbFN0b3JhZ2UpOwoKICAgICAgICBpZiAobG9jYWxTdG9yZUxlbmd0aC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBsb2NhbFN0b3JlTGVuZ3RoLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKGl0ZW0uc3RhcnRzV2l0aChfdGhpczYuY29udGV4dC5zcmZzZXNzaW9uaWQpKSB7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oaXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqDQogICAgICogVnVl5aOw5piO5ZGo5pyfDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgVmlld0Jhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UucHJvdG90eXBlKSwgImNyZWF0ZWQiLCB0aGlzKS5jYWxsKHRoaXMpOwoKICAgICAgaWYgKHRoaXMuZm9ybURydWlwYXJ0KSB7CiAgICAgICAgdGhpcy5mb3JtRHJ1aXBhcnQuc3Vic2NyaWJlKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChPYmplY3QuaXMocmVzLmFjdGlvbiwgJ3NhdmUnKSkgewogICAgICAgICAgICBfdGhpczcudmlld1N0YXRlLm5leHQoewogICAgICAgICAgICAgIHRhZzogJ2dyaWQnLAogICAgICAgICAgICAgIGFjdGlvbjogJ3NhdmUnLAogICAgICAgICAgICAgIGRhdGE6IF90aGlzNy52aWV3cGFyYW1zCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChPYmplY3QuaXMocmVzLmFjdGlvbiwgJ2xvYWQnKSkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSBfdGhpczc7CgogICAgICAgICAgICBfdGhpcy5lbmdpbmUubG9hZChyZXMuZGF0YSwgdHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOW/q+mAn+aQnOe0og0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSAkZXZlbnQNCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uU2VhcmNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNlYXJjaCgkZXZlbnQpIHsKICAgICAgdmFyIGdyaWQgPSB0aGlzLiRyZWZzLmdyaWQ7CgogICAgICBpZiAoZ3JpZCkgewogICAgICAgIGdyaWQubG9hZCh0aGlzLmNvbnRleHQpOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiBncmlkIOmDqOS7tiBzYXZlIOS6i+S7tg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbYXJncz17fV0NCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBFTlRJVFlURVNUMVVzcjJHcmlkVmlld0Jhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAib25TYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNhdmUoJGV2ZW50KSB7CiAgICAgIHRoaXMuJGVtaXQoJ2RyZGF0YXNhdmVkJywgJGV2ZW50KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWIt+aWsOaVsOaNrg0KICAgICAqDQogICAgICogQHJlYWRvbmx5DQogICAgICogQHR5cGUgeyhudW1iZXIgfCBudWxsKX0NCiAgICAgKiBAbWVtYmVyb2YgUElNUVVBTE1BSk9SR3JpZFZpZXdCYXNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uUmVmcmVzaERhdGEiLAoKICAgIC8qKg0KICAgICAqIOebkeaOp+aVsOaNruWPmOWMlg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEByZXR1cm5zDQogICAgICogQG1lbWJlcm9mIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZQ0KICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVmcmVzaERhdGEobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCA9PT0gbnVsbCB8fCBuZXdWYWwgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKG5ld1ZhbCA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGdyaWQgPSB0aGlzLiRyZWZzLmdyaWQ7CgogICAgICBpZiAoZ3JpZCkgewogICAgICAgIGdyaWQubG9hZCh7fSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoZGF0YSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ZpZXdhY3Rpb24vZ2V0UmVmcmVzaERhdGEnXSh0aGlzLnZpZXd0YWcpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZTsKfShHcmlkVmlld0Jhc2UpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtFbWl0KCldLCBQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UucHJvdG90eXBlLCAidmlld0RhdGFzQ2hhbmdlIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3AoKV0sIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZS5wcm90b3R5cGUsICJmb3JtRHJ1aXBhcnQiLCB2b2lkIDApOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtXYXRjaCgncmVmcmVzaGRhdGEnKV0sIFBJTVFVQUxNQUpPUkdyaWRWaWV3QmFzZS5wcm90b3R5cGUsICJvblJlZnJlc2hEYXRhIiwgbnVsbCk7CgpQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UgPSB0c2xpYl8xLl9fZGVjb3JhdGUoW0NvbXBvbmVudCh7fSksIFZ1ZUxpZmVDeWNsZVByb2Nlc3NpbmddLCBQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2UpOwpleHBvcnQgZGVmYXVsdCBQSU1RVUFMTUFKT1JHcmlkVmlld0Jhc2U7"},null]}