{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js??ref--13-3!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\control-service.ts","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\control-service.ts","mtime":1630509410987},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5pcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgQ29kZUxpc3RTZXJ2aWNlIGZyb20gIkBzZXJ2aWNlL2FwcC9jb2RlbGlzdC1zZXJ2aWNlIjsKLyoqDQogKiDpg6jku7bmnI3liqHln7rnsbsNCiAqDQogKiBAZXhwb3J0DQogKiBAY2xhc3MgQ29udHJvbFNlcnZpY2UNCiAqLwoKdmFyIENvbnRyb2xTZXJ2aWNlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgLyoqDQogICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQ29udHJvbFNlcnZpY2UuDQogICAqDQogICAqIEBwYXJhbSB7Kn0gW29wdHM9e31dDQogICAqIEBtZW1iZXJvZiBDb250cm9sU2VydmljZQ0KICAgKi8KICBmdW5jdGlvbiBDb250cm9sU2VydmljZSgpIHsKICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udHJvbFNlcnZpY2UpOwoKICAgIC8qKg0KICAgICAqIFZ1ZSDnirbmgIHnrqHnkIblmagNCiAgICAgKg0KICAgICAqIEBwcml2YXRlDQogICAgICogQHR5cGUgeyhhbnkgfCBudWxsKX0NCiAgICAgKiBAbWVtYmVyb2YgU2VydmljZQ0KICAgICAqLwogICAgdGhpcy4kc3RvcmUgPSBudWxsOwogICAgLyoqDQogICAgICog6YOo5Lu25qih5Z6LDQogICAgICoNCiAgICAgKiBAdHlwZSB7KGFueSB8IG51bGwpfQ0KICAgICAqIEBtZW1iZXJvZiBDb250cm9sU2VydmljZQ0KICAgICAqLwoKICAgIHRoaXMubW9kZWwgPSBudWxsOwogICAgLyoqDQogICAgICog5piv5ZCm5Li65LuO5pWw5o2u5qih5byPDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgQ29udHJvbFNlcnZpY2UNCiAgICAgKi8KCiAgICB0aGlzLmlzVGVtcE1vZGUgPSBmYWxzZTsKICAgIHRoaXMuJHN0b3JlID0gb3B0cy4kc3RvcmU7CiAgICB0aGlzLnNldFRlbXBNb2RlKCk7CiAgICB0aGlzLmNvZGVMaXN0U2VydmljZSA9IG5ldyBDb2RlTGlzdFNlcnZpY2UoewogICAgICAkc3RvcmU6IG9wdHMuJHN0b3JlCiAgICB9KTsKICB9CiAgLyoqDQogICAqIOiOt+WPlueKtuaAgeeuoeeQhuWZqA0KICAgKg0KICAgKiBAcmV0dXJucyB7KGFueSB8IG51bGwpfQ0KICAgKiBAbWVtYmVyb2YgQ29udHJvbFNlcnZpY2UNCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoQ29udHJvbFNlcnZpY2UsIFt7CiAgICBrZXk6ICJnZXRTdG9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3RvcmUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZTsKICAgIH0KICAgIC8qKg0KICAgICAqIOiOt+WPlumDqOS7tuaooeWeiw0KICAgICAqDQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIENvbnRyb2xTZXJ2aWNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldE1vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1vZGUoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGVsOwogICAgfQogICAgLyoqDQogICAgICog6K6+572u6Zu25pe25qih5byPDQogICAgICoNCiAgICAgKiBAcmV0dXJucyB7KGFueSB8IG51bGwpfQ0KICAgICAqIEBtZW1iZXJvZiBDb250cm9sU2VydmljZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzZXRUZW1wTW9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VGVtcE1vZGUoKSB7fQogICAgLyoqDQogICAgICog5aSE55CG6K+35rGC5pWw5o2uDQogICAgICoNCiAgICAgKiBAcGFyYW0gYWN0aW9uIOihjOS4ug0KICAgICAqIEBwYXJhbSBkYXRhIOaVsOaNrg0KICAgICAqIEBtZW1iZXJvZiBDb250cm9sU2VydmljZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVSZXF1ZXN0RGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlUmVxdWVzdERhdGEoYWN0aW9uKSB7CiAgICAgIHZhciBjb250ZXh0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9OwogICAgICB2YXIgaXNNZXJnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICAgIHZhciBtb2RlbCA9IHRoaXMuZ2V0TW9kZSgpOwoKICAgICAgaWYgKCFtb2RlbCAmJiBtb2RlbC5nZXREYXRhSXRlbXMgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9CgogICAgICB2YXIgZGF0YUl0ZW1zID0gbW9kZWwuZ2V0RGF0YUl0ZW1zKCk7CiAgICAgIHZhciByZXF1ZXN0RGF0YSA9IHt9OwoKICAgICAgaWYgKGlzTWVyZ2UgJiYgZGF0YSAmJiBkYXRhLnZpZXdwYXJhbXMpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHJlcXVlc3REYXRhLCBkYXRhLnZpZXdwYXJhbXMpOwogICAgICB9CgogICAgICBkYXRhSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtICYmIGl0ZW0uZGF0YVR5cGUgJiYgT2JqZWN0LmlzKGl0ZW0uZGF0YVR5cGUsICdGT05US0VZJykpIHsKICAgICAgICAgIGlmIChpdGVtICYmIGl0ZW0ucHJvcCAmJiBpdGVtLm5hbWUpIHsKICAgICAgICAgICAgcmVxdWVzdERhdGFbaXRlbS5wcm9wXSA9IGNvbnRleHRbaXRlbS5uYW1lXTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5wcm9wICYmIGl0ZW0ubmFtZSAmJiAoZGF0YVtpdGVtLm5hbWVdIHx8IE9iamVjdC5pcyhkYXRhW2l0ZW0ubmFtZV0sIDApKSkgewogICAgICAgICAgICByZXF1ZXN0RGF0YVtpdGVtLnByb3BdID0gZGF0YVtpdGVtLm5hbWVdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciB0ZW1wQ29udGV4dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29udGV4dCkpOwoKICAgICAgaWYgKHRlbXBDb250ZXh0ICYmIHRlbXBDb250ZXh0LnNyZnNlc3Npb25pZCkgewogICAgICAgIHRlbXBDb250ZXh0LnNyZnNlc3Npb25rZXkgPSB0ZW1wQ29udGV4dC5zcmZzZXNzaW9uaWQ7CiAgICAgICAgZGVsZXRlIHRlbXBDb250ZXh0LnNyZnNlc3Npb25pZDsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBjb250ZXh0OiB0ZW1wQ29udGV4dCwKICAgICAgICBkYXRhOiByZXF1ZXN0RGF0YQogICAgICB9OwogICAgfQogICAgLyoqDQogICAgICog5aSE55CGcmVzcG9uc2UNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb24NCiAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlDQogICAgICogQG1lbWJlcm9mIENvbnRyb2xTZXJ2aWNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZVJlc3BvbnNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfaGFuZGxlUmVzcG9uc2UgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGFjdGlvbiwgcmVzcG9uc2UpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB2YXIgaXNDcmVhdGUsCiAgICAgICAgICAgIHJlc3VsdCwKICAgICAgICAgICAgaGFuZGxlUmVzdWx0LAogICAgICAgICAgICBjb2RlbGlzdE1vZGVsLAogICAgICAgICAgICByZXMsCiAgICAgICAgICAgIF9hcmdzID0gYXJndW1lbnRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlzQ3JlYXRlID0gX2FyZ3MubGVuZ3RoID4gMiAmJiBfYXJnc1syXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3NbMl0gOiBmYWxzZTsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IG51bGw7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBoYW5kbGVSZXN1bHQgPSBmdW5jdGlvbiBoYW5kbGVSZXN1bHQoYWN0aW9uLCByZXNwb25zZSwgaXNDcmVhdGUsIGNvZGVsaXN0QXJyYXkpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goX3RoaXMuaGFuZGxlUmVzcG9uc2VEYXRhKGFjdGlvbiwgaXRlbSwgaXNDcmVhdGUsIGNvZGVsaXN0QXJyYXkpKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfdGhpcy5oYW5kbGVSZXNwb25zZURhdGEoYWN0aW9uLCByZXNwb25zZS5kYXRhLCBpc0NyZWF0ZSwgY29kZWxpc3RBcnJheSk7CiAgICAgICAgICAgICAgICAgIH0gLy8gcmVzcG9uc2XnirbmgIHvvIzlpLTmlofku7YKCgogICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuaGVhZGVycykgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzWyd4LXBhZ2UnXSkgewogICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyZXNwb25zZSwgewogICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBOdW1iZXIocmVzcG9uc2UuaGVhZGVyc1sneC1wYWdlJ10pCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzWyd4LXBlci1wYWdlJ10pIHsKICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzcG9uc2UsIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogTnVtYmVyKHJlc3BvbnNlLmhlYWRlcnNbJ3gtcGVyLXBhZ2UnXSkKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmhlYWRlcnNbJ3gtdG90YWwnXSkgewogICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyZXNwb25zZSwgewogICAgICAgICAgICAgICAgICAgICAgICB0b3RhbDogTnVtYmVyKHJlc3BvbnNlLmhlYWRlcnNbJ3gtdG90YWwnXSkKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IHJlc3VsdDsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY29kZWxpc3RNb2RlbCA9IHRoaXMuaGFuZGxlQ29kZWxpc3QoKTsKCiAgICAgICAgICAgICAgICBpZiAoIShjb2RlbGlzdE1vZGVsLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxDb2RlTGlzdChjb2RlbGlzdE1vZGVsKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGhhbmRsZVJlc3VsdChhY3Rpb24sIHJlc3BvbnNlLCBpc0NyZWF0ZSwgcmVzKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgaGFuZGxlUmVzdWx0KGFjdGlvbiwgcmVzcG9uc2UsIGlzQ3JlYXRlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9oYW5kbGVSZXNwb25zZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaGFuZGxlUmVzcG9uc2U7CiAgICB9KCkKICAgIC8qKg0KICAgICAqIOWkhOeQhui/lOWbnuaVsOaNrg0KICAgICAqDQogICAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbg0KICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2UNCiAgICAgKiBAbWVtYmVyb2YgQ29udHJvbFNlcnZpY2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaGFuZGxlUmVzcG9uc2VEYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZURhdGEoYWN0aW9uKSB7CiAgICAgIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgdmFyIGlzQ3JlYXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBjb2RlbGlzdEFycmF5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBtb2RlbCA9IHRoaXMuZ2V0TW9kZSgpOwoKICAgICAgaWYgKCFtb2RlbCAmJiBtb2RlbC5nZXREYXRhSXRlbXMgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9CgogICAgICB2YXIgaXRlbSA9IHt9OwogICAgICB2YXIgZGF0YUl0ZW1zID0gbW9kZWwuZ2V0RGF0YUl0ZW1zKCk7CiAgICAgIGRhdGFJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhaXRlbSkgewogICAgICAgIHZhciB2YWwgPSBkYXRhLmhhc093blByb3BlcnR5KGRhdGFpdGVtLnByb3ApID8gZGF0YVtkYXRhaXRlbS5wcm9wXSA6IG51bGw7CgogICAgICAgIGlmICghdmFsKSB7CiAgICAgICAgICB2YWwgPSBkYXRhLmhhc093blByb3BlcnR5KGRhdGFpdGVtLm5hbWUpID8gZGF0YVtkYXRhaXRlbS5uYW1lXSA6IG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAoKGlzQ3JlYXRlID09PSB1bmRlZmluZWQgfHwgaXNDcmVhdGUgPT09IG51bGwpICYmIE9iamVjdC5pcyhkYXRhaXRlbS5kYXRhVHlwZSwgJ0dVSUQnKSAmJiBPYmplY3QuaXMoZGF0YWl0ZW0ubmFtZSwgJ3NyZmtleScpICYmIHZhbCAmJiAhT2JqZWN0LmlzKHZhbCwgJycpKSB7CiAgICAgICAgICBpc0NyZWF0ZSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpdGVtW2RhdGFpdGVtLm5hbWVdID0gdmFsOyAvLyDovazljJbku6PnoIHooagKCiAgICAgICAgaWYgKGNvZGVsaXN0QXJyYXkgJiYgZGF0YWl0ZW0uY29kZWxpc3QpIHsKICAgICAgICAgIGlmIChjb2RlbGlzdEFycmF5LmdldChkYXRhaXRlbS5jb2RlbGlzdC50YWcpICYmIGNvZGVsaXN0QXJyYXkuZ2V0KGRhdGFpdGVtLmNvZGVsaXN0LnRhZykuZ2V0KHZhbCkpIHsKICAgICAgICAgICAgaXRlbVtkYXRhaXRlbS5uYW1lXSA9IGNvZGVsaXN0QXJyYXkuZ2V0KGRhdGFpdGVtLmNvZGVsaXN0LnRhZykuZ2V0KHZhbCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaXRlbS5zcmZ1ZiA9IGRhdGEuc3JmdWYgPyBkYXRhLnNyZnVmIDogaXNDcmVhdGUgPyAiMCIgOiAiMSI7CiAgICAgIHJldHVybiBpdGVtOwogICAgfQogICAgLyoqDQogICAgICog5aSE55CG5bel5L2c5rWB5pWw5o2uDQogICAgICoNCiAgICAgKiBAcGFyYW0gZGF0YSDkvKDlhaXmlbDmja4NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaGFuZGxlV0ZEYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVXRkRhdGEoZGF0YSkgewogICAgICB2YXIgaXNNZXJnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgIHZhciBtb2RlbCA9IHRoaXMuZ2V0TW9kZSgpOwoKICAgICAgaWYgKCFtb2RlbCAmJiBtb2RlbC5nZXREYXRhSXRlbXMgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9CgogICAgICB2YXIgZGF0YUl0ZW1zID0gbW9kZWwuZ2V0RGF0YUl0ZW1zKCk7CiAgICAgIHZhciByZXF1ZXN0RGF0YSA9IHt9OwogICAgICBkYXRhSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtICYmIGl0ZW0ucHJvcCkgewogICAgICAgICAgcmVxdWVzdERhdGFbaXRlbS5wcm9wXSA9IGRhdGFbaXRlbS5uYW1lXTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKGlzTWVyZ2UgJiYgZGF0YS52aWV3cGFyYW1zICYmIE9iamVjdC5rZXlzKGRhdGEudmlld3BhcmFtcykubGVuZ3RoID4gMCkgewogICAgICAgIE9iamVjdC5hc3NpZ24ocmVxdWVzdERhdGEsIGRhdGEudmlld3BhcmFtcyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXF1ZXN0RGF0YTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWkhOeQhuS7o+eggeihqA0KICAgICAqDQogICAgICogQG1lbWJlcm9mIENvbnRyb2xTZXJ2aWNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZUNvZGVsaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDb2RlbGlzdCgpIHsKICAgICAgdmFyIG1vZGVsID0gdGhpcy5nZXRNb2RlKCk7CgogICAgICBpZiAoIW1vZGVsKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICB2YXIgZGF0YUl0ZW1zID0gbW9kZWwuZ2V0RGF0YUl0ZW1zKCk7CiAgICAgIHZhciBjb2RlbGlzdE1hcCA9IG5ldyBNYXAoKTsKCiAgICAgIGlmIChkYXRhSXRlbXMgJiYgZGF0YUl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICBkYXRhSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgaWYgKGl0ZW0uY29kZWxpc3QpIHsKICAgICAgICAgICAgY29kZWxpc3RNYXAuc2V0KGl0ZW0ubmFtZSwgaXRlbS5jb2RlbGlzdCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChjb2RlbGlzdE1hcC5zaXplID4gMCkgewogICAgICAgIHJldHVybiBBcnJheS5mcm9tKGNvZGVsaXN0TWFwKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtWzFdOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog6I635Y+W5omA5pyJ5Luj56CB6KGoDQogICAgICoNCiAgICAgKiBAcGFyYW0gY29kZWxpc3RBcnJheSDku6PnoIHooajmqKHlnovmlbDnu4QNCiAgICAgKiBAbWVtYmVyb2YgQ29udHJvbFNlcnZpY2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0QWxsQ29kZUxpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsbENvZGVMaXN0KGNvZGVsaXN0QXJyYXkpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBjb2RlTGlzdE1hcCA9IG5ldyBNYXAoKTsKICAgICAgICB2YXIgcHJvbWlzZUFycmF5ID0gW107CiAgICAgICAgY29kZWxpc3RBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBpZiAoIWNvZGVMaXN0TWFwLmdldChpdGVtLnRhZykpIHsKICAgICAgICAgICAgcHJvbWlzZUFycmF5LnB1c2goX3RoaXMyLmdldENvZGVMaXN0KGl0ZW0pKTsKICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZUFycmF5KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoY29kZUxpc3QpIHsKICAgICAgICAgICAgICAgICAgdmFyIHRlbXBDb2RlTGlzdE1hcCA9IG5ldyBNYXAoKTsKCiAgICAgICAgICAgICAgICAgIGlmIChjb2RlTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29kZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoY29kZUxpc3RJdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICB0ZW1wQ29kZUxpc3RNYXAuc2V0KGNvZGVMaXN0SXRlbS52YWx1ZSwgY29kZUxpc3RJdGVtLnRleHQpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjb2RlTGlzdE1hcC5zZXQoaXRlbS50YWcsIHRlbXBDb2RlTGlzdE1hcCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJlc29sdmUoY29kZUxpc3RNYXApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog6I635Y+W5Luj56CB6KGoDQogICAgICoNCiAgICAgKiBAcGFyYW0gY29kZUxpc3RPYmplY3Qg5Lyg5YWl5Luj56CB6KGo5a+56LGhDQogICAgICogQG1lbWJlcm9mIENvbnRyb2xTZXJ2aWNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldENvZGVMaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb2RlTGlzdChjb2RlTGlzdE9iamVjdCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgaWYgKGNvZGVMaXN0T2JqZWN0LnRhZyAmJiBPYmplY3QuaXMoY29kZUxpc3RPYmplY3QuY29kZWxpc3RUeXBlLCAiU1RBVElDIikpIHsKICAgICAgICAgIHZhciBjb2RlbGlzdCA9IF90aGlzMy5nZXRTdG9yZSgpLmdldHRlcnMuZ2V0Q29kZUxpc3QoY29kZUxpc3RPYmplY3QudGFnKTsKCiAgICAgICAgICBpZiAoY29kZWxpc3QpIHsKICAgICAgICAgICAgcmVzb2x2ZShfdG9Db25zdW1hYmxlQXJyYXkoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb2RlbGlzdC5pdGVtcykpKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXNvbHZlKFtdKTsKICAgICAgICAgICAgY29uc29sZS5sb2coIi0tLS0iLmNvbmNhdChjb2RlTGlzdE9iamVjdC50YWcsICItLS0tXHU0RUUzXHU3ODAxXHU4ODY4XHU0RTBEXHU1QjU4XHU1NzI4IikpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoY29kZUxpc3RPYmplY3QudGFnICYmIE9iamVjdC5pcyhjb2RlTGlzdE9iamVjdC5jb2RlbGlzdFR5cGUsICJEWU5BTUlDIikpIHsKICAgICAgICAgIF90aGlzMy5jb2RlTGlzdFNlcnZpY2UuZ2V0SXRlbXMoY29kZUxpc3RPYmplY3QudGFnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIHJlc29sdmUoW10pOwogICAgICAgICAgICBjb25zb2xlLmxvZygiLS0tLSIuY29uY2F0KGNvZGVMaXN0T2JqZWN0LnRhZywgIi0tLS1cdTRFRTNcdTc4MDFcdTg4NjhcdTRFMERcdTVCNThcdTU3MjgiKSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIENvbnRyb2xTZXJ2aWNlOwp9KCk7CgpleHBvcnQgeyBDb250cm9sU2VydmljZSBhcyBkZWZhdWx0IH07"},null]}