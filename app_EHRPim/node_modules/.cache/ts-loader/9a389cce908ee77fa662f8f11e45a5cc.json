{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js??ref--13-3!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-exitandentry\\ygcgj-form\\ygcgj-form-service.ts","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-exitandentry\\ygcgj-form\\ygcgj-form-service.ts","mtime":1630509411604},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSAidHNsaWIiOwppbXBvcnQgeyBVdGlsLCBFcnJvcmxvZyB9IGZyb20gJ0AvdXRpbHMnOwppbXBvcnQgQ29udHJvbFNlcnZpY2UgZnJvbSAnQC93aWRnZXRzL2NvbnRyb2wtc2VydmljZSc7CmltcG9ydCBQaW1FeGl0YW5kZW50cnlTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9waW0tZXhpdGFuZGVudHJ5L3BpbS1leGl0YW5kZW50cnktc2VydmljZSc7CmltcG9ydCBZR0NHSk1vZGVsIGZyb20gJy4veWdjZ2otZm9ybS1tb2RlbCc7CmltcG9ydCBQaW1QZXJzb25TZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9waW0tcGVyc29uL3BpbS1wZXJzb24tc2VydmljZSc7Ci8qKg0KICogWUdDR0og6YOo5Lu25pyN5Yqh5a+56LGhDQogKg0KICogQGV4cG9ydA0KICogQGNsYXNzIFlHQ0dKU2VydmljZQ0KICovCgp2YXIgWUdDR0pTZXJ2aWNlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbnRyb2xTZXJ2aWNlKSB7CiAgX2luaGVyaXRzKFlHQ0dKU2VydmljZSwgX0NvbnRyb2xTZXJ2aWNlKTsKCiAgLyoqDQogICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgWUdDR0pTZXJ2aWNlLg0KICAgKg0KICAgKiBAcGFyYW0geyp9IFtvcHRzPXt9XQ0KICAgKiBAbWVtYmVyb2YgWUdDR0pTZXJ2aWNlDQogICAqLwogIGZ1bmN0aW9uIFlHQ0dKU2VydmljZSgpIHsKICAgIHZhciBfdGhpczsKCiAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFlHQ0dKU2VydmljZSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoWUdDR0pTZXJ2aWNlKS5jYWxsKHRoaXMsIG9wdHMpKTsKICAgIC8qKg0KICAgICAqIOWHuuWFpeWig+euoeeQhuacjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1BpbUV4aXRhbmRlbnRyeVNlcnZpY2V9DQogICAgICogQG1lbWJlcm9mIFlHQ0dKU2VydmljZQ0KICAgICAqLwoKICAgIF90aGlzLmFwcEVudGl0eVNlcnZpY2UgPSBuZXcgUGltRXhpdGFuZGVudHJ5U2VydmljZSh7CiAgICAgICRzdG9yZTogX3RoaXMuZ2V0U3RvcmUoKQogICAgfSk7CiAgICAvKioNCiAgICAgKiDkurrlkZjkv6Hmga/mnI3liqHlr7nosaENCiAgICAgKg0KICAgICAqIEB0eXBlIHtQaW1QZXJzb25TZXJ2aWNlfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSlNlcnZpY2UNCiAgICAgKi8KCiAgICBfdGhpcy5waW1wZXJzb25TZXJ2aWNlID0gbmV3IFBpbVBlcnNvblNlcnZpY2UoKTsKICAgIF90aGlzLm1vZGVsID0gbmV3IFlHQ0dKTW9kZWwoKTsKICAgIHJldHVybiBfdGhpczsKICB9CiAgLyoqDQogICAqIOiuvue9ruS7juaVsOaNruaooeW8jw0KICAgKg0KICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICogQG1lbWJlcm9mIFlHQ0dKU2VydmljZQ0KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhZR0NHSlNlcnZpY2UsIFt7CiAgICBrZXk6ICJzZXRUZW1wTW9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VGVtcE1vZGUoKSB7CiAgICAgIHRoaXMuaXNUZW1wTW9kZSA9IGZhbHNlOwogICAgfQogICAgLyoqDQogICAgICog5aSE55CG5pWw5o2uDQogICAgICoNCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqIEBwYXJhbSB7UHJvbWlzZTxhbnk+fSBwcm9taXNlDQogICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pTZXJ2aWNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImRvSXRlbXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvSXRlbXMocHJvbWlzZSwgZGVLZXlGaWVsZCwgZGVOYW1lKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgIGl0ZW1bZGVOYW1lXSA9IGl0ZW1bZGVLZXlGaWVsZF07CiAgICAgICAgICAgICAgZGF0YVtpbmRleF0gPSBpdGVtOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChbXSk7CiAgICAgICAgICB9CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZWplY3QoW10pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOiOt+WPlui3qOWunuS9k+aVsOaNrumbhuWQiA0KICAgICAqDQogICAgICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VOYW1lIOacjeWKoeWQjeensA0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlcmZhY2VOYW1lIOaOpeWPo+WQjeensA0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YQ0KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzbG9hZGluZ10NCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnlbXT59DQogICAgICogQG1lbWJlcm9mICBZR0NHSlNlcnZpY2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0SXRlbXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW1zKHNlcnZpY2VOYW1lLCBpbnRlcmZhY2VOYW1lKSB7CiAgICAgIHZhciBjb250ZXh0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKICAgICAgdmFyIGlzbG9hZGluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ID8gYXJndW1lbnRzWzRdIDogdW5kZWZpbmVkOwoKICAgICAgaWYgKE9iamVjdC5pcyhzZXJ2aWNlTmFtZSwgJ1BpbVBlcnNvblNlcnZpY2UnKSAmJiBPYmplY3QuaXMoaW50ZXJmYWNlTmFtZSwgJ0ZldGNoRGVmYXVsdCcpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZG9JdGVtcyh0aGlzLnBpbXBlcnNvblNlcnZpY2UuRmV0Y2hEZWZhdWx0KEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29udGV4dCkpLCBkYXRhLCBpc2xvYWRpbmcpLCAncGltcGVyc29uaWQnLCAncGltcGVyc29uJyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChbXSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDlkK/liqjlt6XkvZzmtYENCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb24NCiAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0PXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHtib29sZWFufSBbaXNsb2FkaW5nXQ0KICAgICAqIEBwYXJhbSB7Kn0gW2xvY2FsZGF0YV0NCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSlNlcnZpY2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAid2ZzdGFydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gd2ZzdGFydChhY3Rpb24pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgY29udGV4dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICAgICAgdmFyIGlzbG9hZGluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gYXJndW1lbnRzWzNdIDogdW5kZWZpbmVkOwogICAgICB2YXIgbG9jYWxkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgPyBhcmd1bWVudHNbNF0gOiB1bmRlZmluZWQ7CiAgICAgIGRhdGEgPSB0aGlzLmhhbmRsZVdGRGF0YShkYXRhKTsKICAgICAgY29udGV4dCA9IHRoaXMuaGFuZGxlUmVxdWVzdERhdGEoYWN0aW9uLCBjb250ZXh0LCBkYXRhKS5jb250ZXh0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgdmFyIF9hcHBFbnRpdHlTZXJ2aWNlID0gX3RoaXMyLmFwcEVudGl0eVNlcnZpY2U7CgogICAgICAgIGlmIChfYXBwRW50aXR5U2VydmljZVthY3Rpb25dICYmIF9hcHBFbnRpdHlTZXJ2aWNlW2FjdGlvbl0gaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgcmVzdWx0ID0gX2FwcEVudGl0eVNlcnZpY2VbYWN0aW9uXShjb250ZXh0LCBkYXRhLCBpc2xvYWRpbmcsIGxvY2FsZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdCA9IF90aGlzMi5hcHBFbnRpdHlTZXJ2aWNlLldGU3RhcnQoY29udGV4dCwgZGF0YSwgaXNsb2FkaW5nLCBsb2NhbGRhdGEpOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczIuaGFuZGxlUmVzcG9uc2UoYWN0aW9uLCByZXNwb25zZSk7CgogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZWplY3QocmVzcG9uc2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOaPkOS6pOW3peS9nOa1gQ0KICAgICAqDQogICAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbg0KICAgICAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9e31dDQogICAgICogQHBhcmFtIHsqfSBbZGF0YT17fV0NCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc2xvYWRpbmddDQogICAgICogQHBhcmFtIHsqfSBbbG9jYWxkYXRhXQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIFlHQ0dKU2VydmljZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ3ZnN1Ym1pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gd2ZzdWJtaXQoYWN0aW9uKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGNvbnRleHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgICAgIHZhciBpc2xvYWRpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKICAgICAgdmFyIGxvY2FsZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ID8gYXJndW1lbnRzWzRdIDogdW5kZWZpbmVkOwogICAgICBkYXRhID0gdGhpcy5oYW5kbGVXRkRhdGEoZGF0YSwgdHJ1ZSk7CiAgICAgIGNvbnRleHQgPSB0aGlzLmhhbmRsZVJlcXVlc3REYXRhKGFjdGlvbiwgY29udGV4dCwgZGF0YSwgdHJ1ZSkuY29udGV4dDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHZhciBfYXBwRW50aXR5U2VydmljZSA9IF90aGlzMy5hcHBFbnRpdHlTZXJ2aWNlOwoKICAgICAgICBpZiAoX2FwcEVudGl0eVNlcnZpY2VbYWN0aW9uXSAmJiBfYXBwRW50aXR5U2VydmljZVthY3Rpb25dIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICAgIHJlc3VsdCA9IF9hcHBFbnRpdHlTZXJ2aWNlW2FjdGlvbl0oY29udGV4dCwgZGF0YSwgaXNsb2FkaW5nLCBsb2NhbGRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQgPSBfdGhpczMuYXBwRW50aXR5U2VydmljZS5XRlN1Ym1pdChjb250ZXh0LCBkYXRhLCBpc2xvYWRpbmcsIGxvY2FsZGF0YSk7CiAgICAgICAgfQoKICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzMy5oYW5kbGVSZXNwb25zZShhY3Rpb24sIHJlc3BvbnNlKTsKCiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5re75Yqg5pWw5o2uDQogICAgICoNCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uDQogICAgICogQHBhcmFtIHsqfSBbY29udGV4dD17fV0NCiAgICAgKiBAcGFyYW0geyp9IFtkYXRhPXt9XQ0KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzbG9hZGluZ10NCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSlNlcnZpY2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYWRkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQoYWN0aW9uKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIGNvbnRleHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgICAgIHZhciBpc2xvYWRpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKCiAgICAgIHZhciBfdGhpcyRoYW5kbGVSZXF1ZXN0RGEgPSB0aGlzLmhhbmRsZVJlcXVlc3REYXRhKGFjdGlvbiwgY29udGV4dCwgZGF0YSksCiAgICAgICAgICBEYXRhID0gX3RoaXMkaGFuZGxlUmVxdWVzdERhLmRhdGEsCiAgICAgICAgICBDb250ZXh0ID0gX3RoaXMkaGFuZGxlUmVxdWVzdERhLmNvbnRleHQ7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgdmFyIF9hcHBFbnRpdHlTZXJ2aWNlID0gX3RoaXM0LmFwcEVudGl0eVNlcnZpY2U7CgogICAgICAgIGlmIChfYXBwRW50aXR5U2VydmljZVthY3Rpb25dICYmIF9hcHBFbnRpdHlTZXJ2aWNlW2FjdGlvbl0gaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgcmVzdWx0ID0gX2FwcEVudGl0eVNlcnZpY2VbYWN0aW9uXShDb250ZXh0LCBEYXRhLCBpc2xvYWRpbmcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQgPSBfdGhpczQuYXBwRW50aXR5U2VydmljZS5DcmVhdGUoQ29udGV4dCwgRGF0YSwgaXNsb2FkaW5nKTsKICAgICAgICB9CgogICAgICAgIHJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM0LmhhbmRsZVJlc3BvbnNlKGFjdGlvbiwgcmVzcG9uc2UpOwoKICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDliKDpmaTmlbDmja4NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb24NCiAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0PXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHtib29sZWFufSBbaXNsb2FkaW5nXQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIFlHQ0dKU2VydmljZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkZWxldGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoYWN0aW9uKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIGNvbnRleHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgICAgIHZhciBpc2xvYWRpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKCiAgICAgIHZhciBfdGhpcyRoYW5kbGVSZXF1ZXN0RGEyID0gdGhpcy5oYW5kbGVSZXF1ZXN0RGF0YShhY3Rpb24sIGNvbnRleHQsIGRhdGEpLAogICAgICAgICAgRGF0YSA9IF90aGlzJGhhbmRsZVJlcXVlc3REYTIuZGF0YSwKICAgICAgICAgIENvbnRleHQgPSBfdGhpcyRoYW5kbGVSZXF1ZXN0RGEyLmNvbnRleHQ7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgdmFyIF9hcHBFbnRpdHlTZXJ2aWNlID0gX3RoaXM1LmFwcEVudGl0eVNlcnZpY2U7CgogICAgICAgIGlmIChfYXBwRW50aXR5U2VydmljZVthY3Rpb25dICYmIF9hcHBFbnRpdHlTZXJ2aWNlW2FjdGlvbl0gaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgcmVzdWx0ID0gX2FwcEVudGl0eVNlcnZpY2VbYWN0aW9uXShDb250ZXh0LCBEYXRhLCBpc2xvYWRpbmcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQgPSBfdGhpczUuYXBwRW50aXR5U2VydmljZS5SZW1vdmUoQ29udGV4dCwgRGF0YSwgaXNsb2FkaW5nKTsKICAgICAgICB9CgogICAgICAgIHJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZWplY3QocmVzcG9uc2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOS/ruaUueaVsOaNrg0KICAgICAqDQogICAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbg0KICAgICAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9e31dDQogICAgICogQHBhcmFtIHsqfSBbZGF0YT17fV0NCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc2xvYWRpbmddDQogICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pTZXJ2aWNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogInVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKGFjdGlvbikgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHZhciBjb250ZXh0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9OwogICAgICB2YXIgaXNsb2FkaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CgogICAgICB2YXIgX3RoaXMkaGFuZGxlUmVxdWVzdERhMyA9IHRoaXMuaGFuZGxlUmVxdWVzdERhdGEoYWN0aW9uLCBjb250ZXh0LCBkYXRhKSwKICAgICAgICAgIERhdGEgPSBfdGhpcyRoYW5kbGVSZXF1ZXN0RGEzLmRhdGEsCiAgICAgICAgICBDb250ZXh0ID0gX3RoaXMkaGFuZGxlUmVxdWVzdERhMy5jb250ZXh0OwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHZhciBfYXBwRW50aXR5U2VydmljZSA9IF90aGlzNi5hcHBFbnRpdHlTZXJ2aWNlOwoKICAgICAgICBpZiAoX2FwcEVudGl0eVNlcnZpY2VbYWN0aW9uXSAmJiBfYXBwRW50aXR5U2VydmljZVthY3Rpb25dIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICAgIHJlc3VsdCA9IF9hcHBFbnRpdHlTZXJ2aWNlW2FjdGlvbl0oQ29udGV4dCwgRGF0YSwgaXNsb2FkaW5nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0ID0gX3RoaXM2LmFwcEVudGl0eVNlcnZpY2UuVXBkYXRlKENvbnRleHQsIERhdGEsIGlzbG9hZGluZyk7CiAgICAgICAgfQoKICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzNi5oYW5kbGVSZXNwb25zZShhY3Rpb24sIHJlc3BvbnNlKTsKCiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5p+l6K+i5pWw5o2uDQogICAgICoNCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uDQogICAgICogQHBhcmFtIHsqfSBbY29udGV4dD17fV0NCiAgICAgKiBAcGFyYW0geyp9IFtkYXRhPXt9XQ0KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzbG9hZGluZ10NCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSlNlcnZpY2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoYWN0aW9uKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIGNvbnRleHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgICAgIHZhciBpc2xvYWRpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKCiAgICAgIHZhciBfdGhpcyRoYW5kbGVSZXF1ZXN0RGE0ID0gdGhpcy5oYW5kbGVSZXF1ZXN0RGF0YShhY3Rpb24sIGNvbnRleHQsIGRhdGEpLAogICAgICAgICAgRGF0YSA9IF90aGlzJGhhbmRsZVJlcXVlc3REYTQuZGF0YSwKICAgICAgICAgIENvbnRleHQgPSBfdGhpcyRoYW5kbGVSZXF1ZXN0RGE0LmNvbnRleHQ7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgdmFyIF9hcHBFbnRpdHlTZXJ2aWNlID0gX3RoaXM3LmFwcEVudGl0eVNlcnZpY2U7CgogICAgICAgIGlmIChfYXBwRW50aXR5U2VydmljZVthY3Rpb25dICYmIF9hcHBFbnRpdHlTZXJ2aWNlW2FjdGlvbl0gaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgcmVzdWx0ID0gX2FwcEVudGl0eVNlcnZpY2VbYWN0aW9uXShDb250ZXh0LCBEYXRhLCBpc2xvYWRpbmcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQgPSBfdGhpczcuYXBwRW50aXR5U2VydmljZS5HZXQoQ29udGV4dCwgRGF0YSwgaXNsb2FkaW5nKTsKICAgICAgICB9CgogICAgICAgIHJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM3LmhhbmRsZVJlc3BvbnNlKGFjdGlvbiwgcmVzcG9uc2UpOwoKICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDliqDovb3ojYnnqL8NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb24NCiAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0PXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHtib29sZWFufSBbaXNsb2FkaW5nXQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIFlHQ0dKU2VydmljZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJsb2FkRHJhZnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWREcmFmdChhY3Rpb24pIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgY29udGV4dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICAgICAgdmFyIGlzbG9hZGluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gYXJndW1lbnRzWzNdIDogdW5kZWZpbmVkOwoKICAgICAgdmFyIF90aGlzJGhhbmRsZVJlcXVlc3REYTUgPSB0aGlzLmhhbmRsZVJlcXVlc3REYXRhKGFjdGlvbiwgY29udGV4dCwgZGF0YSksCiAgICAgICAgICBEYXRhID0gX3RoaXMkaGFuZGxlUmVxdWVzdERhNS5kYXRhLAogICAgICAgICAgQ29udGV4dCA9IF90aGlzJGhhbmRsZVJlcXVlc3REYTUuY29udGV4dDsgLy/ku7/nnJ/kuLvplK7mlbDmja4KCgogICAgICB2YXIgUHJpbWFyeUtleSA9IFV0aWwuY3JlYXRlVVVJRCgpOwogICAgICBEYXRhLnBpbWV4aXRhbmRlbnRyeWlkID0gUHJpbWFyeUtleTsKICAgICAgRGF0YS5waW1leGl0YW5kZW50cnkgPSBQcmltYXJ5S2V5OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgdmFyIF9hcHBFbnRpdHlTZXJ2aWNlID0gX3RoaXM4LmFwcEVudGl0eVNlcnZpY2U7CgogICAgICAgIGlmIChfYXBwRW50aXR5U2VydmljZVthY3Rpb25dICYmIF9hcHBFbnRpdHlTZXJ2aWNlW2FjdGlvbl0gaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgcmVzdWx0ID0gX2FwcEVudGl0eVNlcnZpY2VbYWN0aW9uXShDb250ZXh0LCBEYXRhLCBpc2xvYWRpbmcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQgPSBfdGhpczguYXBwRW50aXR5U2VydmljZS5HZXREcmFmdChDb250ZXh0LCBEYXRhLCBpc2xvYWRpbmcpOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXNwb25zZS5kYXRhLnBpbWV4aXRhbmRlbnRyeWlkID0gUHJpbWFyeUtleTsKCiAgICAgICAgICBfdGhpczguaGFuZGxlUmVzcG9uc2UoYWN0aW9uLCByZXNwb25zZSwgdHJ1ZSk7CgogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZWplY3QocmVzcG9uc2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICog5YmN5Y+w6YC76L6RDQogICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uDQogICAgKiBAcGFyYW0geyp9IFtjb250ZXh0PXt9XQ0KICAgICogQHBhcmFtIHsqfSBbZGF0YT17fV0NCiAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzbG9hZGluZ10NCiAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgKiBAbWVtYmVyb2YgWUdDR0pTZXJ2aWNlDQogICAgKi8KCiAgfSwgewogICAga2V5OiAiZnJvbnRMb2dpYyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZnJvbnRMb2dpYyhhY3Rpb24pIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB2YXIgY29udGV4dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICAgICAgdmFyIGlzbG9hZGluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gYXJndW1lbnRzWzNdIDogdW5kZWZpbmVkOwoKICAgICAgdmFyIF90aGlzJGhhbmRsZVJlcXVlc3REYTYgPSB0aGlzLmhhbmRsZVJlcXVlc3REYXRhKGFjdGlvbiwgY29udGV4dCwgZGF0YSksCiAgICAgICAgICBEYXRhID0gX3RoaXMkaGFuZGxlUmVxdWVzdERhNi5kYXRhLAogICAgICAgICAgQ29udGV4dCA9IF90aGlzJGhhbmRsZVJlcXVlc3REYTYuY29udGV4dDsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICB2YXIgX2FwcEVudGl0eVNlcnZpY2UgPSBfdGhpczkuYXBwRW50aXR5U2VydmljZTsKCiAgICAgICAgaWYgKF9hcHBFbnRpdHlTZXJ2aWNlW2FjdGlvbl0gJiYgX2FwcEVudGl0eVNlcnZpY2VbYWN0aW9uXSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgICByZXN1bHQgPSBfYXBwRW50aXR5U2VydmljZVthY3Rpb25dKENvbnRleHQsIERhdGEsIGlzbG9hZGluZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7CiAgICAgICAgICAgIHN0YXR1czogNTAwLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgdGl0bGU6ICflpLHotKUnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfns7vnu5/lvILluLgnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczkuaGFuZGxlUmVzcG9uc2UoYWN0aW9uLCByZXNwb25zZSwgdHJ1ZSk7CgogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZWplY3QocmVzcG9uc2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWkhOeQhuivt+axguaVsOaNrg0KICAgICAqDQogICAgICogQHBhcmFtIGFjdGlvbiDooYzkuLoNCiAgICAgKiBAcGFyYW0gZGF0YSDmlbDmja4NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pTZXJ2aWNlDQogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZVJlcXVlc3REYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0RGF0YShhY3Rpb24sIGNvbnRleHQpIHsKICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9OwogICAgICB2YXIgaXNNZXJnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICAgIHZhciBtb2RlID0gdGhpcy5nZXRNb2RlKCk7CgogICAgICBpZiAoIW1vZGUgJiYgbW9kZS5nZXREYXRhSXRlbXMgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9CgogICAgICB2YXIgZm9ybUl0ZW1JdGVtcyA9IG1vZGUuZ2V0RGF0YUl0ZW1zKCk7CiAgICAgIHZhciByZXF1ZXN0RGF0YSA9IHt9OwoKICAgICAgaWYgKGlzTWVyZ2UgJiYgZGF0YSAmJiBkYXRhLnZpZXdwYXJhbXMpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHJlcXVlc3REYXRhLCBkYXRhLnZpZXdwYXJhbXMpOwogICAgICB9CgogICAgICBmb3JtSXRlbUl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmRhdGFUeXBlICYmIE9iamVjdC5pcyhpdGVtLmRhdGFUeXBlLCAnRk9OVEtFWScpKSB7CiAgICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLnByb3ApIHsKICAgICAgICAgICAgcmVxdWVzdERhdGFbaXRlbS5wcm9wXSA9IGNvbnRleHRbaXRlbS5uYW1lXTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5wcm9wKSB7CiAgICAgICAgICAgIHJlcXVlc3REYXRhW2l0ZW0ucHJvcF0gPSBkYXRhW2l0ZW0ubmFtZV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIHRlbXBDb250ZXh0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb250ZXh0KSk7CgogICAgICBpZiAodGVtcENvbnRleHQgJiYgdGVtcENvbnRleHQuc3Jmc2Vzc2lvbmlkKSB7CiAgICAgICAgdGVtcENvbnRleHQuc3Jmc2Vzc2lvbmtleSA9IHRlbXBDb250ZXh0LnNyZnNlc3Npb25pZDsKICAgICAgICBkZWxldGUgdGVtcENvbnRleHQuc3Jmc2Vzc2lvbmlkOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGNvbnRleHQ6IHRlbXBDb250ZXh0LAogICAgICAgIGRhdGE6IHJlcXVlc3REYXRhCiAgICAgIH07CiAgICB9CiAgfV0pOwoKICByZXR1cm4gWUdDR0pTZXJ2aWNlOwp9KENvbnRyb2xTZXJ2aWNlKTsKCmV4cG9ydCB7IFlHQ0dKU2VydmljZSBhcyBkZWZhdWx0IH07Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW0Vycm9ybG9nXSwgWUdDR0pTZXJ2aWNlLnByb3RvdHlwZSwgImdldEl0ZW1zIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW0Vycm9ybG9nXSwgWUdDR0pTZXJ2aWNlLnByb3RvdHlwZSwgIndmc3RhcnQiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbRXJyb3Jsb2ddLCBZR0NHSlNlcnZpY2UucHJvdG90eXBlLCAid2ZzdWJtaXQiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbRXJyb3Jsb2ddLCBZR0NHSlNlcnZpY2UucHJvdG90eXBlLCAiYWRkIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW0Vycm9ybG9nXSwgWUdDR0pTZXJ2aWNlLnByb3RvdHlwZSwgImRlbGV0ZSIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtFcnJvcmxvZ10sIFlHQ0dKU2VydmljZS5wcm90b3R5cGUsICJ1cGRhdGUiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbRXJyb3Jsb2ddLCBZR0NHSlNlcnZpY2UucHJvdG90eXBlLCAiZ2V0IiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW0Vycm9ybG9nXSwgWUdDR0pTZXJ2aWNlLnByb3RvdHlwZSwgImxvYWREcmFmdCIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtFcnJvcmxvZ10sIFlHQ0dKU2VydmljZS5wcm90b3R5cGUsICJmcm9udExvZ2ljIiwgbnVsbCk7"},null]}