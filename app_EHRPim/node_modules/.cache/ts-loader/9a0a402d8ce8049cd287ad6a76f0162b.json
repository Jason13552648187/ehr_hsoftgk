{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js??ref--13-3!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\uiservice\\pim-exitandentry\\pim-exitandentry-ui-service-base.ts","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\uiservice\\pim-exitandentry\\pim-exitandentry-ui-service-base.ts","mtime":1630509410786},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJGOlxcY3JvZFx1OTg3OVx1NzZFRVxcXHU0RUJBXHU0RThCXHU3QkExXHU3NDA2XHU3Q0ZCXHU3RURGMlxcaUJpekVIUlxcYXBwX0VIUlBpbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIkY6XFxjcm9kXHU5ODc5XHU3NkVFXFxcdTRFQkFcdTRFOEJcdTdCQTFcdTc0MDZcdTdDRkJcdTdFREYyXFxpQml6RUhSXFxhcHBfRUhSUGltXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRjpcXGNyb2RcdTk4NzlcdTc2RUVcXFx1NEVCQVx1NEU4Qlx1N0JBMVx1NzQwNlx1N0NGQlx1N0VERjJcXGlCaXpFSFJcXGFwcF9FSFJQaW1cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tICdAL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudCc7CmltcG9ydCB7IFVJQWN0aW9uVG9vbCwgVXRpbCB9IGZyb20gJ0AvdXRpbHMnOwppbXBvcnQgVUlTZXJ2aWNlIGZyb20gJy4uL3VpLXNlcnZpY2UnOwppbXBvcnQgUGltRXhpdGFuZGVudHJ5U2VydmljZSBmcm9tICdAL3NlcnZpY2UvcGltLWV4aXRhbmRlbnRyeS9waW0tZXhpdGFuZGVudHJ5LXNlcnZpY2UnOwovKioNCiAqIOWHuuWFpeWig+euoeeQhlVJ5pyN5Yqh5a+56LGh5Z+657G7DQogKg0KICogQGV4cG9ydA0KICogQGNsYXNzIFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2UNCiAqLwoKdmFyIFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfVUlTZXJ2aWNlKSB7CiAgX2luaGVyaXRzKFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2UsIF9VSVNlcnZpY2UpOwoKICAvKioNCiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZS4NCiAgICoNCiAgICogQHBhcmFtIHsqfSBbb3B0cz17fV0NCiAgICogQG1lbWJlcm9mICBQaW1FeGl0YW5kZW50cnlVSVNlcnZpY2VCYXNlDQogICAqLwogIGZ1bmN0aW9uIFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2UoKSB7CiAgICB2YXIgX3RoaXMyOwoKICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZSk7CgogICAgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2UpLmNhbGwodGhpcywgb3B0cykpOwogICAgLyoqDQogICAgICog5piv5ZCm5pSv5oyB5bel5L2c5rWBDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgIFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuaXNFbmFibGVXb3JrZmxvdyA9IGZhbHNlOwogICAgLyoqDQogICAgICog5b2T5YmNVUnmnI3liqHlr7nlupTnmoTmlbDmja7mnI3liqHlr7nosaENCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5kYXRhU2VydmljZSA9IG5ldyBQaW1FeGl0YW5kZW50cnlTZXJ2aWNlKCk7CiAgICAvKioNCiAgICAgKiDmiYDmnInlhbPogZTop4blm74NCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5hbGxWaWV3TWFwID0gbmV3IE1hcCgpOwogICAgLyoqDQogICAgICog54q25oCB5YC8DQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgIFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2UNCiAgICAgKi8KCiAgICBfdGhpczIuc3RhdGVWYWx1ZSA9IDA7CiAgICAvKioNCiAgICAgKiDnirbmgIHlsZ7mgKcNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5zdGF0ZUZpZWxkID0gIiI7CiAgICAvKioNCiAgICAgKiDkuLvnirbmgIHlsZ7mgKfpm4blkIgNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZQ0KICAgICAqLwoKICAgIF90aGlzMi5tYWluU3RhdGVGaWVsZHMgPSBbXTsKICAgIC8qKg0KICAgICAqIOS4u+eKtuaAgembhuWQiE1hcA0KICAgICAqDQogICAgICogQG1lbWJlcm9mICBQaW1FeGl0YW5kZW50cnlVSVNlcnZpY2VCYXNlDQogICAgICovCgogICAgX3RoaXMyLmFsbERlTWFpblN0YXRlTWFwID0gbmV3IE1hcCgpOwoKICAgIF90aGlzMi5pbml0Vmlld01hcCgpOwoKICAgIF90aGlzMi5pbml0RGVNYWluU3RhdGVNYXAoKTsKCiAgICByZXR1cm4gX3RoaXMyOwogIH0KICAvKioNCiAgICog5Yid5aeL5YyW6KeG5Zu+TWFwDQogICAqDQogICAqIEBtZW1iZXJvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZQ0KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhQaW1FeGl0YW5kZW50cnlVSVNlcnZpY2VCYXNlLCBbewogICAga2V5OiAiaW5pdFZpZXdNYXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRWaWV3TWFwKCkgewogICAgICB0aGlzLmFsbFZpZXdNYXAuc2V0KCc6JywgewogICAgICAgIHZpZXduYW1lOiAnd2ZlZGl0dmlldzknLAogICAgICAgIHNyZmFwcGRlOiAncGltZXhpdGFuZGVudHJpZXMnCiAgICAgIH0pOwogICAgICB0aGlzLmFsbFZpZXdNYXAuc2V0KCc6JywgewogICAgICAgIHZpZXduYW1lOiAnd2Zwcm94eXJlc3VsdHZpZXcnLAogICAgICAgIHNyZmFwcGRlOiAncGltZXhpdGFuZGVudHJpZXMnCiAgICAgIH0pOwogICAgICB0aGlzLmFsbFZpZXdNYXAuc2V0KCdFRElUVklFVzozMCcsIHsKICAgICAgICB2aWV3bmFtZTogJ2VkaXR2aWV3X3l0ZycsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsVmlld01hcC5zZXQoJzonLCB7CiAgICAgICAgdmlld25hbWU6ICdlZGl0dmlldzInLAogICAgICAgIHNyZmFwcGRlOiAncGltZXhpdGFuZGVudHJpZXMnCiAgICAgIH0pOwogICAgICB0aGlzLmFsbFZpZXdNYXAuc2V0KCc6JywgewogICAgICAgIHZpZXduYW1lOiAncGltZXhpdGdyaWR2aWV3JywKICAgICAgICBzcmZhcHBkZTogJ3BpbWV4aXRhbmRlbnRyaWVzJwogICAgICB9KTsKICAgICAgdGhpcy5hbGxWaWV3TWFwLnNldCgnOicsIHsKICAgICAgICB2aWV3bmFtZTogJ2Zvcm1waWNrdXBkYXRhdmlldycsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsVmlld01hcC5zZXQoJ0VESVRWSUVXOicsIHsKICAgICAgICB2aWV3bmFtZTogJ2VkaXR2aWV3JywKICAgICAgICBzcmZhcHBkZTogJ3BpbWV4aXRhbmRlbnRyaWVzJwogICAgICB9KTsKICAgICAgdGhpcy5hbGxWaWV3TWFwLnNldCgnOicsIHsKICAgICAgICB2aWV3bmFtZTogJ3dmZWRpdHZpZXcnLAogICAgICAgIHNyZmFwcGRlOiAncGltZXhpdGFuZGVudHJpZXMnCiAgICAgIH0pOwogICAgICB0aGlzLmFsbFZpZXdNYXAuc2V0KCc6JywgewogICAgICAgIHZpZXduYW1lOiAncGlja3VwZ3JpZHZpZXcnLAogICAgICAgIHNyZmFwcGRlOiAncGltZXhpdGFuZGVudHJpZXMnCiAgICAgIH0pOwogICAgICB0aGlzLmFsbFZpZXdNYXAuc2V0KCc6JywgewogICAgICAgIHZpZXduYW1lOiAneXNjZ2p4amVkaXR2aWV3JywKICAgICAgICBzcmZhcHBkZTogJ3BpbWV4aXRhbmRlbnRyaWVzJwogICAgICB9KTsKICAgICAgdGhpcy5hbGxWaWV3TWFwLnNldCgnOicsIHsKICAgICAgICB2aWV3bmFtZTogJ3dmYWN0aW9udmlldycsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsVmlld01hcC5zZXQoJ0VESVRWSUVXOjIwJywgewogICAgICAgIHZpZXduYW1lOiAnZWRpdHZpZXdfc3B6JywKICAgICAgICBzcmZhcHBkZTogJ3BpbWV4aXRhbmRlbnRyaWVzJwogICAgICB9KTsKICAgICAgdGhpcy5hbGxWaWV3TWFwLnNldCgnOjEwLDIwLDMwLDQwLDUwJywgewogICAgICAgIHZpZXduYW1lOiAneXNjZ2pncmlkdmlldycsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsVmlld01hcC5zZXQoJ0VESVRWSUVXOjQwJywgewogICAgICAgIHZpZXduYW1lOiAnZWRpdHZpZXdfeWJoJywKICAgICAgICBzcmZhcHBkZTogJ3BpbWV4aXRhbmRlbnRyaWVzJwogICAgICB9KTsKICAgICAgdGhpcy5hbGxWaWV3TWFwLnNldCgnOjEwLDIwLDMwLDQwLDUwJywgewogICAgICAgIHZpZXduYW1lOiAneWdjZ2pncmlkdmlldycsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsVmlld01hcC5zZXQoJzonLCB7CiAgICAgICAgdmlld25hbWU6ICd5Z2NnanhqZWRpdHZpZXcnLAogICAgICAgIHNyZmFwcGRlOiAncGltZXhpdGFuZGVudHJpZXMnCiAgICAgIH0pOwogICAgICB0aGlzLmFsbFZpZXdNYXAuc2V0KCdQSUNLVVBWSUVXOicsIHsKICAgICAgICB2aWV3bmFtZTogJ3BpY2t1cHZpZXcnLAogICAgICAgIHNyZmFwcGRlOiAncGltZXhpdGFuZGVudHJpZXMnCiAgICAgIH0pOwogICAgICB0aGlzLmFsbFZpZXdNYXAuc2V0KCdGT1JNUElDS1VQVklFVzonLCB7CiAgICAgICAgdmlld25hbWU6ICdmb3JtcGlja3VwdmlldycsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsVmlld01hcC5zZXQoJzonLCB7CiAgICAgICAgdmlld25hbWU6ICdtcGlja3VwdmlldycsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsVmlld01hcC5zZXQoJ01EQVRBVklFVzonLCB7CiAgICAgICAgdmlld25hbWU6ICdncmlkdmlldycsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsVmlld01hcC5zZXQoJzoxMCwyMCwzMCw0MCw1MCcsIHsKICAgICAgICB2aWV3bmFtZTogJ3lnenpncmlkdmlldycsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsVmlld01hcC5zZXQoJ0VESVRWSUVXOjEwJywgewogICAgICAgIHZpZXduYW1lOiAnZWRpdHZpZXdfbmcnLAogICAgICAgIHNyZmFwcGRlOiAncGltZXhpdGFuZGVudHJpZXMnCiAgICAgIH0pOwogICAgICB0aGlzLmFsbFZpZXdNYXAuc2V0KCdFRElUVklFVzo1MCcsIHsKICAgICAgICB2aWV3bmFtZTogJ2VkaXR2aWV3X3lxeCcsCiAgICAgICAgc3JmYXBwZGU6ICdwaW1leGl0YW5kZW50cmllcycKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDliJ3lp4vljJbkuLvnirbmgIHpm4blkIgNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpbml0RGVNYWluU3RhdGVNYXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXREZU1haW5TdGF0ZU1hcCgpIHt9CiAgICAvKioNCiAgICAgKiDlm6DlhazmlrDlu7oNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3Mg5b2T5YmN5pWw5o2uDQogICAgICogQHBhcmFtIHthbnl9IGNvbnRleHQg6KGM5Li66ZmE5Yqg5LiK5LiL5paHDQogICAgICogQHBhcmFtIHsqfSBbcGFyYW1zXSDpmYTliqDlj4LmlbANCiAgICAgKiBAcGFyYW0geyp9IFskZXZlbnRdIOS6i+S7tua6kA0KICAgICAqIEBwYXJhbSB7Kn0gW3hEYXRhXSAg5omn6KGM6KGM5Li65omA6ZyA5b2T5YmN6YOo5Lu2DQogICAgICogQHBhcmFtIHsqfSBbYWN0aW9uQ29udGV4dF0gIOaJp+ihjOihjOS4uuS4iuS4i+aWhw0KICAgICAqIEBwYXJhbSB7Kn0gW3NyZlBhcmVudERlTmFtZV0g54i25a6e5L2T5ZCN56ewDQogICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiUGltRXhpdGFuZGVudHJ5X25ld1lHIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfUGltRXhpdGFuZGVudHJ5X25ld1lHID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShhcmdzKSB7CiAgICAgICAgdmFyIGNvbnRleHQsCiAgICAgICAgICAgIHBhcmFtcywKICAgICAgICAgICAgJGV2ZW50LAogICAgICAgICAgICB4RGF0YSwKICAgICAgICAgICAgYWN0aW9uQ29udGV4dCwKICAgICAgICAgICAgc3JmUGFyZW50RGVOYW1lLAogICAgICAgICAgICBkYXRhLAogICAgICAgICAgICBwYXJlbnRDb250ZXh0LAogICAgICAgICAgICBwYXJlbnRWaWV3UGFyYW0sCiAgICAgICAgICAgIF90aGlzLAogICAgICAgICAgICBfYXJncywKICAgICAgICAgICAgYWN0aW9uVGFyZ2V0LAogICAgICAgICAgICBwYXJlbnRPYmosCiAgICAgICAgICAgIGRlUmVzUGFyYW1ldGVycywKICAgICAgICAgICAgcGFyYW1ldGVycywKICAgICAgICAgICAgb3BlbkRyYXdlciwKICAgICAgICAgICAgdmlldywKICAgICAgICAgICAgX2FyZ3MyID0gYXJndW1lbnRzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb250ZXh0ID0gX2FyZ3MyLmxlbmd0aCA+IDEgJiYgX2FyZ3MyWzFdICE9PSB1bmRlZmluZWQgPyBfYXJnczJbMV0gOiB7fTsKICAgICAgICAgICAgICAgIHBhcmFtcyA9IF9hcmdzMi5sZW5ndGggPiAyICYmIF9hcmdzMlsyXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzJdIDoge307CiAgICAgICAgICAgICAgICAkZXZlbnQgPSBfYXJnczIubGVuZ3RoID4gMyA/IF9hcmdzMlszXSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHhEYXRhID0gX2FyZ3MyLmxlbmd0aCA+IDQgPyBfYXJnczJbNF0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0ID0gX2FyZ3MyLmxlbmd0aCA+IDUgPyBfYXJnczJbNV0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBzcmZQYXJlbnREZU5hbWUgPSBfYXJnczIubGVuZ3RoID4gNiA/IF9hcmdzMls2XSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIGRhdGEgPSB7fTsKICAgICAgICAgICAgICAgIHBhcmVudENvbnRleHQgPSB7fTsKICAgICAgICAgICAgICAgIHBhcmVudFZpZXdQYXJhbSA9IHt9OwogICAgICAgICAgICAgICAgX3RoaXMgPSBhY3Rpb25Db250ZXh0OwogICAgICAgICAgICAgICAgX2FyZ3MgPSBVdGlsLmRlZXBDb3B5KGFyZ3MpOwogICAgICAgICAgICAgICAgYWN0aW9uVGFyZ2V0ID0gJ05PTkUnOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgIHBhcmVudENvbnRleHQgPSBfdGhpcy5jb250ZXh0OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy52aWV3cGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgIHBhcmVudFZpZXdQYXJhbSA9IF90aGlzLnZpZXdwYXJhbXM7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29udGV4dCA9IFVJQWN0aW9uVG9vbC5oYW5kbGVDb250ZXh0UGFyYW0oYWN0aW9uVGFyZ2V0LCBfYXJncywgcGFyZW50Q29udGV4dCwgcGFyZW50Vmlld1BhcmFtLCBjb250ZXh0KTsKICAgICAgICAgICAgICAgIGRhdGEgPSBVSUFjdGlvblRvb2wuaGFuZGxlQWN0aW9uUGFyYW0oYWN0aW9uVGFyZ2V0LCBfYXJncywgcGFyZW50Q29udGV4dCwgcGFyZW50Vmlld1BhcmFtLCBwYXJhbXMpOwogICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5hc3NpZ24oe30sIGFjdGlvbkNvbnRleHQuY29udGV4dCwgY29udGV4dCk7CiAgICAgICAgICAgICAgICBwYXJlbnRPYmogPSB7CiAgICAgICAgICAgICAgICAgIHNyZnBhcmVudGRlbmFtZTogc3JmUGFyZW50RGVOYW1lID8gc3JmUGFyZW50RGVOYW1lIDogbnVsbCwKICAgICAgICAgICAgICAgICAgc3JmcGFyZW50a2V5OiBzcmZQYXJlbnREZU5hbWUgPyBjb250ZXh0W3NyZlBhcmVudERlTmFtZS50b0xvd2VyQ2FzZSgpXSA6IG51bGwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGRhdGEsIHBhcmVudE9iaik7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbnRleHQsIHBhcmVudE9iaik7CiAgICAgICAgICAgICAgICBkZVJlc1BhcmFtZXRlcnMgPSBbXTsKCiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5waW1wZXJzb24gJiYgdHJ1ZSkgewogICAgICAgICAgICAgICAgICBkZVJlc1BhcmFtZXRlcnMgPSBbewogICAgICAgICAgICAgICAgICAgIHBhdGhOYW1lOiAncGltcGVvcGxlJywKICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJOYW1lOiAncGltcGVyc29uJwogICAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzID0gW3sKICAgICAgICAgICAgICAgICAgcGF0aE5hbWU6ICdwaW1leGl0YW5kZW50cmllcycsCiAgICAgICAgICAgICAgICAgIHBhcmFtZXRlck5hbWU6ICdwaW1leGl0YW5kZW50cnknCiAgICAgICAgICAgICAgICB9XTsKCiAgICAgICAgICAgICAgICBvcGVuRHJhd2VyID0gZnVuY3Rpb24gb3BlbkRyYXdlcih2aWV3LCBkYXRhKSB7CiAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBhY3Rpb25Db250ZXh0LiRhcHBkcmF3ZXIub3BlbkRyYXdlcih2aWV3LCBjb250ZXh0LCBkYXRhKTsKICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnN1YnNjcmliZShmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQgfHwgIU9iamVjdC5pcyhyZXN1bHQucmV0LCAnT0snKSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gYWN0aW9uQ29udGV4dDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHhEYXRhICYmIHhEYXRhLnJlZnJlc2ggJiYgeERhdGEucmVmcmVzaCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICB4RGF0YS5yZWZyZXNoKGFyZ3MpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5vcGVuZXIpIHsKICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuZXIucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdPSycsCiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aWZpY2F0aW9uOiAnV0YnCiAgICAgICAgICAgICAgICAgICAgICB9LCBFbnZpcm9ubWVudC51bml0ZUFkZHJlc3MpOwogICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGFzOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmlldyA9IHsKICAgICAgICAgICAgICAgICAgdmlld25hbWU6ICdwaW1leGl0YW5kZW50cnl5Z2NnanhqZWRpdC12aWV3JywKICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwLAogICAgICAgICAgICAgICAgICB3aWR0aDogMTM2NiwKICAgICAgICAgICAgICAgICAgdGl0bGU6IGFjdGlvbkNvbnRleHQuJHQoJ2VudGl0aWVzLnBpbWV4aXRhbmRlbnRyeS52aWV3cy55Z2NnanhqZWRpdHZpZXcudGl0bGUnKSwKICAgICAgICAgICAgICAgICAgcGxhY2VtZW50OiAnRFJBV0VSX1JJR0hUJwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIG9wZW5EcmF3ZXIodmlldywgZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gUGltRXhpdGFuZGVudHJ5X25ld1lHKF94KSB7CiAgICAgICAgcmV0dXJuIF9QaW1FeGl0YW5kZW50cnlfbmV3WUcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIFBpbUV4aXRhbmRlbnRyeV9uZXdZRzsKICAgIH0oKQogICAgLyoqDQogICAgICog5YKs5YqeDQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzIOW9k+WJjeaVsOaNrg0KICAgICAqIEBwYXJhbSB7YW55fSBjb250ZXh0IOihjOS4uumZhOWKoOS4iuS4i+aWhw0KICAgICAqIEBwYXJhbSB7Kn0gW3BhcmFtc10g6ZmE5Yqg5Y+C5pWwDQogICAgICogQHBhcmFtIHsqfSBbJGV2ZW50XSDkuovku7bmupANCiAgICAgKiBAcGFyYW0geyp9IFt4RGF0YV0gIOaJp+ihjOihjOS4uuaJgOmcgOW9k+WJjemDqOS7tg0KICAgICAqIEBwYXJhbSB7Kn0gW2FjdGlvbkNvbnRleHRdICDmiafooYzooYzkuLrkuIrkuIvmlocNCiAgICAgKiBAcGFyYW0geyp9IFtzcmZQYXJlbnREZU5hbWVdIOeItuWunuS9k+WQjeensA0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICovCgogIH0sIHsKICAgIGtleTogIlBpbUV4aXRhbmRlbnRyeV9DQiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX1BpbUV4aXRhbmRlbnRyeV9DQiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGFyZ3MpIHsKICAgICAgICB2YXIgY29udGV4dCwKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICAkZXZlbnQsCiAgICAgICAgICAgIHhEYXRhLAogICAgICAgICAgICBhY3Rpb25Db250ZXh0LAogICAgICAgICAgICBzcmZQYXJlbnREZU5hbWUsCiAgICAgICAgICAgIGNvbmZpcm1SZXN1bHQsCiAgICAgICAgICAgIGRhdGEsCiAgICAgICAgICAgIHBhcmVudENvbnRleHQsCiAgICAgICAgICAgIHBhcmVudFZpZXdQYXJhbSwKICAgICAgICAgICAgX3RoaXMsCiAgICAgICAgICAgIF9hcmdzLAogICAgICAgICAgICBhY3Rpb25UYXJnZXQsCiAgICAgICAgICAgIHBhcmVudE9iaiwKICAgICAgICAgICAgYmFja2VuZCwKICAgICAgICAgICAgX2FyZ3MzID0gYXJndW1lbnRzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29udGV4dCA9IF9hcmdzMy5sZW5ndGggPiAxICYmIF9hcmdzM1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MzWzFdIDoge307CiAgICAgICAgICAgICAgICBwYXJhbXMgPSBfYXJnczMubGVuZ3RoID4gMiAmJiBfYXJnczNbMl0gIT09IHVuZGVmaW5lZCA/IF9hcmdzM1syXSA6IHt9OwogICAgICAgICAgICAgICAgJGV2ZW50ID0gX2FyZ3MzLmxlbmd0aCA+IDMgPyBfYXJnczNbM10gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICB4RGF0YSA9IF9hcmdzMy5sZW5ndGggPiA0ID8gX2FyZ3MzWzRdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgYWN0aW9uQ29udGV4dCA9IF9hcmdzMy5sZW5ndGggPiA1ID8gX2FyZ3MzWzVdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgc3JmUGFyZW50RGVOYW1lID0gX2FyZ3MzLmxlbmd0aCA+IDYgPyBfYXJnczNbNl0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0LiRNb2RhbC5jb25maXJtKHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+itpuWRiicsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ+ehruWumuimgeWCrOWKnuW9k+WJjea1geeoi+WQl++8nycsCiAgICAgICAgICAgICAgICAgICAgb25PazogZnVuY3Rpb24gb25PaygpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGNvbmZpcm1SZXN1bHQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoY29uZmlybVJlc3VsdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBkYXRhID0ge307CiAgICAgICAgICAgICAgICBwYXJlbnRDb250ZXh0ID0ge307CiAgICAgICAgICAgICAgICBwYXJlbnRWaWV3UGFyYW0gPSB7fTsKICAgICAgICAgICAgICAgIF90aGlzID0gYWN0aW9uQ29udGV4dDsKICAgICAgICAgICAgICAgIF9hcmdzID0gVXRpbC5kZWVwQ29weShhcmdzKTsKICAgICAgICAgICAgICAgIGFjdGlvblRhcmdldCA9ICdTSU5HTEVLRVknOwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjb250ZXh0LCB7CiAgICAgICAgICAgICAgICAgIHBpbWV4aXRhbmRlbnRyeTogJyVwaW1leGl0YW5kZW50cnklJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHBhcmFtcywgewogICAgICAgICAgICAgICAgICBwaW1leGl0YW5kZW50cnlpZDogJyVwaW1leGl0YW5kZW50cnklJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHBhcmFtcywgewogICAgICAgICAgICAgICAgICBwaW1leGl0YW5kZW50cnluYW1lOiAnJXBpbWV4aXRhbmRlbnRyeW5hbWUlJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgcGFyZW50Q29udGV4dCA9IF90aGlzLmNvbnRleHQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzLnZpZXdwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgcGFyZW50Vmlld1BhcmFtID0gX3RoaXMudmlld3BhcmFtczsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb250ZXh0ID0gVUlBY3Rpb25Ub29sLmhhbmRsZUNvbnRleHRQYXJhbShhY3Rpb25UYXJnZXQsIF9hcmdzLCBwYXJlbnRDb250ZXh0LCBwYXJlbnRWaWV3UGFyYW0sIGNvbnRleHQpOwogICAgICAgICAgICAgICAgZGF0YSA9IFVJQWN0aW9uVG9vbC5oYW5kbGVBY3Rpb25QYXJhbShhY3Rpb25UYXJnZXQsIF9hcmdzLCBwYXJlbnRDb250ZXh0LCBwYXJlbnRWaWV3UGFyYW0sIHBhcmFtcyk7CiAgICAgICAgICAgICAgICBjb250ZXh0ID0gT2JqZWN0LmFzc2lnbih7fSwgYWN0aW9uQ29udGV4dC5jb250ZXh0LCBjb250ZXh0KTsKICAgICAgICAgICAgICAgIHBhcmVudE9iaiA9IHsKICAgICAgICAgICAgICAgICAgc3JmcGFyZW50ZGVuYW1lOiBzcmZQYXJlbnREZU5hbWUgPyBzcmZQYXJlbnREZU5hbWUgOiBudWxsLAogICAgICAgICAgICAgICAgICBzcmZwYXJlbnRrZXk6IHNyZlBhcmVudERlTmFtZSA/IGNvbnRleHRbc3JmUGFyZW50RGVOYW1lLnRvTG93ZXJDYXNlKCldIDogbnVsbAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZGF0YSwgcGFyZW50T2JqKTsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29udGV4dCwgcGFyZW50T2JqKTsgLy8g55u05o6l6LCD5a6e5L2T5pyN5Yqh6ZyA6KaB6L2s5o2i55qE5pWw5o2uCgogICAgICAgICAgICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5zcmZzZXNzaW9uaWQpIHsKICAgICAgICAgICAgICAgICAgY29udGV4dC5zcmZzZXNzaW9ua2V5ID0gY29udGV4dC5zcmZzZXNzaW9uaWQ7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb250ZXh0LnNyZnNlc3Npb25pZDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0LmNsb3NlVmlldyhudWxsKTsKCiAgICAgICAgICAgICAgICBiYWNrZW5kID0gZnVuY3Rpb24gYmFja2VuZCgpIHsKICAgICAgICAgICAgICAgICAgdmFyIGN1clNlcnZpY2UgPSBuZXcgUGltRXhpdGFuZGVudHJ5U2VydmljZSgpOwogICAgICAgICAgICAgICAgICBjdXJTZXJ2aWNlLkNCKGNvbnRleHQsIGRhdGEsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ29udGV4dC4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiByZXNwb25zZS5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuJE5vdGljZS5zdWNjZXNzKHsKICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgICAgICAgICAgIGRlc2M6ICflgqzlip7miJDlip/vvIEnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gYWN0aW9uQ29udGV4dDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ29udGV4dC4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiAn57O757uf5byC5bi477yBJwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGJhY2tlbmQoKTsKCiAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIFBpbUV4aXRhbmRlbnRyeV9DQihfeDIpIHsKICAgICAgICByZXR1cm4gX1BpbUV4aXRhbmRlbnRyeV9DQi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gUGltRXhpdGFuZGVudHJ5X0NCOwogICAgfSgpCiAgICAvKioNCiAgICAgKiDliKDpmaQNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3Mg5b2T5YmN5pWw5o2uDQogICAgICogQHBhcmFtIHthbnl9IGNvbnRleHQg6KGM5Li66ZmE5Yqg5LiK5LiL5paHDQogICAgICogQHBhcmFtIHsqfSBbcGFyYW1zXSDpmYTliqDlj4LmlbANCiAgICAgKiBAcGFyYW0geyp9IFskZXZlbnRdIOS6i+S7tua6kA0KICAgICAqIEBwYXJhbSB7Kn0gW3hEYXRhXSAg5omn6KGM6KGM5Li65omA6ZyA5b2T5YmN6YOo5Lu2DQogICAgICogQHBhcmFtIHsqfSBbYWN0aW9uQ29udGV4dF0gIOaJp+ihjOihjOS4uuS4iuS4i+aWhw0KICAgICAqIEBwYXJhbSB7Kn0gW3NyZlBhcmVudERlTmFtZV0g54i25a6e5L2T5ZCN56ewDQogICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiUGltRXhpdGFuZGVudHJ5X0tTQ0NHSiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX1BpbUV4aXRhbmRlbnRyeV9LU0NDR0ogPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhhcmdzKSB7CiAgICAgICAgdmFyIGNvbnRleHQsCiAgICAgICAgICAgIHBhcmFtcywKICAgICAgICAgICAgJGV2ZW50LAogICAgICAgICAgICB4RGF0YSwKICAgICAgICAgICAgYWN0aW9uQ29udGV4dCwKICAgICAgICAgICAgc3JmUGFyZW50RGVOYW1lLAogICAgICAgICAgICBkYXRhLAogICAgICAgICAgICBwYXJlbnRDb250ZXh0LAogICAgICAgICAgICBwYXJlbnRWaWV3UGFyYW0sCiAgICAgICAgICAgIF90aGlzLAogICAgICAgICAgICBfYXJncywKICAgICAgICAgICAgYWN0aW9uVGFyZ2V0LAogICAgICAgICAgICBwYXJlbnRPYmosCiAgICAgICAgICAgIGJhY2tlbmQsCiAgICAgICAgICAgIF9hcmdzNCA9IGFyZ3VtZW50czsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBfYXJnczQubGVuZ3RoID4gMSAmJiBfYXJnczRbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzNFsxXSA6IHt9OwogICAgICAgICAgICAgICAgcGFyYW1zID0gX2FyZ3M0Lmxlbmd0aCA+IDIgJiYgX2FyZ3M0WzJdICE9PSB1bmRlZmluZWQgPyBfYXJnczRbMl0gOiB7fTsKICAgICAgICAgICAgICAgICRldmVudCA9IF9hcmdzNC5sZW5ndGggPiAzID8gX2FyZ3M0WzNdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgeERhdGEgPSBfYXJnczQubGVuZ3RoID4gNCA/IF9hcmdzNFs0XSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIGFjdGlvbkNvbnRleHQgPSBfYXJnczQubGVuZ3RoID4gNSA/IF9hcmdzNFs1XSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHNyZlBhcmVudERlTmFtZSA9IF9hcmdzNC5sZW5ndGggPiA2ID8gX2FyZ3M0WzZdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgZGF0YSA9IHt9OwogICAgICAgICAgICAgICAgcGFyZW50Q29udGV4dCA9IHt9OwogICAgICAgICAgICAgICAgcGFyZW50Vmlld1BhcmFtID0ge307CiAgICAgICAgICAgICAgICBfdGhpcyA9IGFjdGlvbkNvbnRleHQ7CiAgICAgICAgICAgICAgICBfYXJncyA9IFV0aWwuZGVlcENvcHkoYXJncyk7CiAgICAgICAgICAgICAgICBhY3Rpb25UYXJnZXQgPSAnU0lOR0xFS0VZJzsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29udGV4dCwgewogICAgICAgICAgICAgICAgICBwaW1leGl0YW5kZW50cnk6ICclcGltZXhpdGFuZGVudHJ5JScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbXMsIHsKICAgICAgICAgICAgICAgICAgcGltZXhpdGFuZGVudHJ5aWQ6ICclcGltZXhpdGFuZGVudHJ5JScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbXMsIHsKICAgICAgICAgICAgICAgICAgcGltZXhpdGFuZGVudHJ5bmFtZTogJyVwaW1leGl0YW5kZW50cnluYW1lJScKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgIHBhcmVudENvbnRleHQgPSBfdGhpcy5jb250ZXh0OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy52aWV3cGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgIHBhcmVudFZpZXdQYXJhbSA9IF90aGlzLnZpZXdwYXJhbXM7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29udGV4dCA9IFVJQWN0aW9uVG9vbC5oYW5kbGVDb250ZXh0UGFyYW0oYWN0aW9uVGFyZ2V0LCBfYXJncywgcGFyZW50Q29udGV4dCwgcGFyZW50Vmlld1BhcmFtLCBjb250ZXh0KTsKICAgICAgICAgICAgICAgIGRhdGEgPSBVSUFjdGlvblRvb2wuaGFuZGxlQWN0aW9uUGFyYW0oYWN0aW9uVGFyZ2V0LCBfYXJncywgcGFyZW50Q29udGV4dCwgcGFyZW50Vmlld1BhcmFtLCBwYXJhbXMpOwogICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5hc3NpZ24oe30sIGFjdGlvbkNvbnRleHQuY29udGV4dCwgY29udGV4dCk7CiAgICAgICAgICAgICAgICBwYXJlbnRPYmogPSB7CiAgICAgICAgICAgICAgICAgIHNyZnBhcmVudGRlbmFtZTogc3JmUGFyZW50RGVOYW1lID8gc3JmUGFyZW50RGVOYW1lIDogbnVsbCwKICAgICAgICAgICAgICAgICAgc3JmcGFyZW50a2V5OiBzcmZQYXJlbnREZU5hbWUgPyBjb250ZXh0W3NyZlBhcmVudERlTmFtZS50b0xvd2VyQ2FzZSgpXSA6IG51bGwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGRhdGEsIHBhcmVudE9iaik7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbnRleHQsIHBhcmVudE9iaik7IC8vIOebtOaOpeiwg+WunuS9k+acjeWKoemcgOimgei9rOaNoueahOaVsOaNrgoKICAgICAgICAgICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuc3Jmc2Vzc2lvbmlkKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Jmc2Vzc2lvbmtleSA9IGNvbnRleHQuc3Jmc2Vzc2lvbmlkOwogICAgICAgICAgICAgICAgICBkZWxldGUgY29udGV4dC5zcmZzZXNzaW9uaWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYmFja2VuZCA9IGZ1bmN0aW9uIGJhY2tlbmQoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBjdXJTZXJ2aWNlID0gbmV3IFBpbUV4aXRhbmRlbnRyeVNlcnZpY2UoKTsKICAgICAgICAgICAgICAgICAgY3VyU2VydmljZS5SZW1vdmUoY29udGV4dCwgZGF0YSwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0LiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ29udGV4dC4kTm90aWNlLnN1Y2Nlc3MoewogICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+WIoOmZpOaIkOWKn++8gScKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSBhY3Rpb25Db250ZXh0OwoKICAgICAgICAgICAgICAgICAgICBpZiAoeERhdGEgJiYgeERhdGEucmVmcmVzaCAmJiB4RGF0YS5yZWZyZXNoIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgIHhEYXRhLnJlZnJlc2goYXJncyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ29udGV4dC4kTm90aWNlLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiAn57O757uf5byC5bi477yBJwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGJhY2tlbmQoKTsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIFBpbUV4aXRhbmRlbnRyeV9LU0NDR0ooX3gzKSB7CiAgICAgICAgcmV0dXJuIF9QaW1FeGl0YW5kZW50cnlfS1NDQ0dKLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBQaW1FeGl0YW5kZW50cnlfS1NDQ0dKOwogICAgfSgpCiAgICAvKioNCiAgICAgKiDmkqTplIANCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3Mg5b2T5YmN5pWw5o2uDQogICAgICogQHBhcmFtIHthbnl9IGNvbnRleHQg6KGM5Li66ZmE5Yqg5LiK5LiL5paHDQogICAgICogQHBhcmFtIHsqfSBbcGFyYW1zXSDpmYTliqDlj4LmlbANCiAgICAgKiBAcGFyYW0geyp9IFskZXZlbnRdIOS6i+S7tua6kA0KICAgICAqIEBwYXJhbSB7Kn0gW3hEYXRhXSAg5omn6KGM6KGM5Li65omA6ZyA5b2T5YmN6YOo5Lu2DQogICAgICogQHBhcmFtIHsqfSBbYWN0aW9uQ29udGV4dF0gIOaJp+ihjOihjOS4uuS4iuS4i+aWhw0KICAgICAqIEBwYXJhbSB7Kn0gW3NyZlBhcmVudERlTmFtZV0g54i25a6e5L2T5ZCN56ewDQogICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiUGltRXhpdGFuZGVudHJ5X0NYIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfUGltRXhpdGFuZGVudHJ5X0NYID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoYXJncykgewogICAgICAgIHZhciBjb250ZXh0LAogICAgICAgICAgICBwYXJhbXMsCiAgICAgICAgICAgICRldmVudCwKICAgICAgICAgICAgeERhdGEsCiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQsCiAgICAgICAgICAgIHNyZlBhcmVudERlTmFtZSwKICAgICAgICAgICAgY29uZmlybVJlc3VsdCwKICAgICAgICAgICAgZGF0YSwKICAgICAgICAgICAgcGFyZW50Q29udGV4dCwKICAgICAgICAgICAgcGFyZW50Vmlld1BhcmFtLAogICAgICAgICAgICBfdGhpcywKICAgICAgICAgICAgX2FyZ3MsCiAgICAgICAgICAgIGFjdGlvblRhcmdldCwKICAgICAgICAgICAgcGFyZW50T2JqLAogICAgICAgICAgICBiYWNrZW5kLAogICAgICAgICAgICBfYXJnczUgPSBhcmd1bWVudHM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb250ZXh0ID0gX2FyZ3M1Lmxlbmd0aCA+IDEgJiYgX2FyZ3M1WzFdICE9PSB1bmRlZmluZWQgPyBfYXJnczVbMV0gOiB7fTsKICAgICAgICAgICAgICAgIHBhcmFtcyA9IF9hcmdzNS5sZW5ndGggPiAyICYmIF9hcmdzNVsyXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3M1WzJdIDoge307CiAgICAgICAgICAgICAgICAkZXZlbnQgPSBfYXJnczUubGVuZ3RoID4gMyA/IF9hcmdzNVszXSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHhEYXRhID0gX2FyZ3M1Lmxlbmd0aCA+IDQgPyBfYXJnczVbNF0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0ID0gX2FyZ3M1Lmxlbmd0aCA+IDUgPyBfYXJnczVbNV0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBzcmZQYXJlbnREZU5hbWUgPSBfYXJnczUubGVuZ3RoID4gNiA/IF9hcmdzNVs2XSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuJE1vZGFsLmNvbmZpcm0oewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6K2m5ZGKJywKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAn56Gu5a6a6KaB5pKk6ZSA5b2T5YmN5rWB56iL5ZCX77yfJywKICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbiBvbk9rKCkgewogICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgY29uZmlybVJlc3VsdCA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChjb25maXJtUmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGRhdGEgPSB7fTsKICAgICAgICAgICAgICAgIHBhcmVudENvbnRleHQgPSB7fTsKICAgICAgICAgICAgICAgIHBhcmVudFZpZXdQYXJhbSA9IHt9OwogICAgICAgICAgICAgICAgX3RoaXMgPSBhY3Rpb25Db250ZXh0OwogICAgICAgICAgICAgICAgX2FyZ3MgPSBVdGlsLmRlZXBDb3B5KGFyZ3MpOwogICAgICAgICAgICAgICAgYWN0aW9uVGFyZ2V0ID0gJ1NJTkdMRUtFWSc7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbnRleHQsIHsKICAgICAgICAgICAgICAgICAgcGltZXhpdGFuZGVudHJ5OiAnJXBpbWV4aXRhbmRlbnRyeSUnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocGFyYW1zLCB7CiAgICAgICAgICAgICAgICAgIHBpbWV4aXRhbmRlbnRyeWlkOiAnJXBpbWV4aXRhbmRlbnRyeSUnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocGFyYW1zLCB7CiAgICAgICAgICAgICAgICAgIHBpbWV4aXRhbmRlbnRyeW5hbWU6ICclcGltZXhpdGFuZGVudHJ5bmFtZSUnCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29udGV4dCkgewogICAgICAgICAgICAgICAgICBwYXJlbnRDb250ZXh0ID0gX3RoaXMuY29udGV4dDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMudmlld3BhcmFtcykgewogICAgICAgICAgICAgICAgICBwYXJlbnRWaWV3UGFyYW0gPSBfdGhpcy52aWV3cGFyYW1zOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBVSUFjdGlvblRvb2wuaGFuZGxlQ29udGV4dFBhcmFtKGFjdGlvblRhcmdldCwgX2FyZ3MsIHBhcmVudENvbnRleHQsIHBhcmVudFZpZXdQYXJhbSwgY29udGV4dCk7CiAgICAgICAgICAgICAgICBkYXRhID0gVUlBY3Rpb25Ub29sLmhhbmRsZUFjdGlvblBhcmFtKGFjdGlvblRhcmdldCwgX2FyZ3MsIHBhcmVudENvbnRleHQsIHBhcmVudFZpZXdQYXJhbSwgcGFyYW1zKTsKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBPYmplY3QuYXNzaWduKHt9LCBhY3Rpb25Db250ZXh0LmNvbnRleHQsIGNvbnRleHQpOwogICAgICAgICAgICAgICAgcGFyZW50T2JqID0gewogICAgICAgICAgICAgICAgICBzcmZwYXJlbnRkZW5hbWU6IHNyZlBhcmVudERlTmFtZSA/IHNyZlBhcmVudERlTmFtZSA6IG51bGwsCiAgICAgICAgICAgICAgICAgIHNyZnBhcmVudGtleTogc3JmUGFyZW50RGVOYW1lID8gY29udGV4dFtzcmZQYXJlbnREZU5hbWUudG9Mb3dlckNhc2UoKV0gOiBudWxsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkYXRhLCBwYXJlbnRPYmopOwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjb250ZXh0LCBwYXJlbnRPYmopOyAvLyDnm7TmjqXosIPlrp7kvZPmnI3liqHpnIDopoHovazmjaLnmoTmlbDmja4KCiAgICAgICAgICAgICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0LnNyZnNlc3Npb25pZCkgewogICAgICAgICAgICAgICAgICBjb250ZXh0LnNyZnNlc3Npb25rZXkgPSBjb250ZXh0LnNyZnNlc3Npb25pZDsKICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbnRleHQuc3Jmc2Vzc2lvbmlkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuY2xvc2VWaWV3KG51bGwpOwoKICAgICAgICAgICAgICAgIGJhY2tlbmQgPSBmdW5jdGlvbiBiYWNrZW5kKCkgewogICAgICAgICAgICAgICAgICB2YXIgY3VyU2VydmljZSA9IG5ldyBQaW1FeGl0YW5kZW50cnlTZXJ2aWNlKCk7CiAgICAgICAgICAgICAgICAgIGN1clNlcnZpY2UuQ1goY29udGV4dCwgZGF0YSwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0LiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IHJlc3BvbnNlLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ29udGV4dC4kTm90aWNlLnN1Y2Nlc3MoewogICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+aSpOmUgOaIkOWKn++8gScKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSBhY3Rpb25Db250ZXh0OwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0LiROb3RpY2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6ICfns7vnu5/lvILluLjvvIEnCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgYmFja2VuZCgpOwoKICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gUGltRXhpdGFuZGVudHJ5X0NYKF94NCkgewogICAgICAgIHJldHVybiBfUGltRXhpdGFuZGVudHJ5X0NYLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBQaW1FeGl0YW5kZW50cnlfQ1g7CiAgICB9KCkKICAgIC8qKg0KICAgICAqIOWboOengeaWsOW7ug0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncyDlvZPliY3mlbDmja4NCiAgICAgKiBAcGFyYW0ge2FueX0gY29udGV4dCDooYzkuLrpmYTliqDkuIrkuIvmlocNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXNdIOmZhOWKoOWPguaVsA0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0g5LqL5Lu25rqQDQogICAgICogQHBhcmFtIHsqfSBbeERhdGFdICDmiafooYzooYzkuLrmiYDpnIDlvZPliY3pg6jku7YNCiAgICAgKiBAcGFyYW0geyp9IFthY3Rpb25Db250ZXh0XSAg5omn6KGM6KGM5Li65LiK5LiL5paHDQogICAgICogQHBhcmFtIHsqfSBbc3JmUGFyZW50RGVOYW1lXSDniLblrp7kvZPlkI3np7ANCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJQaW1FeGl0YW5kZW50cnlfbmV3WVMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9QaW1FeGl0YW5kZW50cnlfbmV3WVMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShhcmdzKSB7CiAgICAgICAgdmFyIGNvbnRleHQsCiAgICAgICAgICAgIHBhcmFtcywKICAgICAgICAgICAgJGV2ZW50LAogICAgICAgICAgICB4RGF0YSwKICAgICAgICAgICAgYWN0aW9uQ29udGV4dCwKICAgICAgICAgICAgc3JmUGFyZW50RGVOYW1lLAogICAgICAgICAgICBkYXRhLAogICAgICAgICAgICBwYXJlbnRDb250ZXh0LAogICAgICAgICAgICBwYXJlbnRWaWV3UGFyYW0sCiAgICAgICAgICAgIF90aGlzLAogICAgICAgICAgICBfYXJncywKICAgICAgICAgICAgYWN0aW9uVGFyZ2V0LAogICAgICAgICAgICBwYXJlbnRPYmosCiAgICAgICAgICAgIGRlUmVzUGFyYW1ldGVycywKICAgICAgICAgICAgcGFyYW1ldGVycywKICAgICAgICAgICAgb3BlbkRyYXdlciwKICAgICAgICAgICAgdmlldywKICAgICAgICAgICAgX2FyZ3M2ID0gYXJndW1lbnRzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29udGV4dCA9IF9hcmdzNi5sZW5ndGggPiAxICYmIF9hcmdzNlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3M2WzFdIDoge307CiAgICAgICAgICAgICAgICBwYXJhbXMgPSBfYXJnczYubGVuZ3RoID4gMiAmJiBfYXJnczZbMl0gIT09IHVuZGVmaW5lZCA/IF9hcmdzNlsyXSA6IHt9OwogICAgICAgICAgICAgICAgJGV2ZW50ID0gX2FyZ3M2Lmxlbmd0aCA+IDMgPyBfYXJnczZbM10gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICB4RGF0YSA9IF9hcmdzNi5sZW5ndGggPiA0ID8gX2FyZ3M2WzRdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgYWN0aW9uQ29udGV4dCA9IF9hcmdzNi5sZW5ndGggPiA1ID8gX2FyZ3M2WzVdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgc3JmUGFyZW50RGVOYW1lID0gX2FyZ3M2Lmxlbmd0aCA+IDYgPyBfYXJnczZbNl0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBkYXRhID0ge307CiAgICAgICAgICAgICAgICBwYXJlbnRDb250ZXh0ID0ge307CiAgICAgICAgICAgICAgICBwYXJlbnRWaWV3UGFyYW0gPSB7fTsKICAgICAgICAgICAgICAgIF90aGlzID0gYWN0aW9uQ29udGV4dDsKICAgICAgICAgICAgICAgIF9hcmdzID0gVXRpbC5kZWVwQ29weShhcmdzKTsKICAgICAgICAgICAgICAgIGFjdGlvblRhcmdldCA9ICdOT05FJzsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29udGV4dCkgewogICAgICAgICAgICAgICAgICBwYXJlbnRDb250ZXh0ID0gX3RoaXMuY29udGV4dDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMudmlld3BhcmFtcykgewogICAgICAgICAgICAgICAgICBwYXJlbnRWaWV3UGFyYW0gPSBfdGhpcy52aWV3cGFyYW1zOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBVSUFjdGlvblRvb2wuaGFuZGxlQ29udGV4dFBhcmFtKGFjdGlvblRhcmdldCwgX2FyZ3MsIHBhcmVudENvbnRleHQsIHBhcmVudFZpZXdQYXJhbSwgY29udGV4dCk7CiAgICAgICAgICAgICAgICBkYXRhID0gVUlBY3Rpb25Ub29sLmhhbmRsZUFjdGlvblBhcmFtKGFjdGlvblRhcmdldCwgX2FyZ3MsIHBhcmVudENvbnRleHQsIHBhcmVudFZpZXdQYXJhbSwgcGFyYW1zKTsKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBPYmplY3QuYXNzaWduKHt9LCBhY3Rpb25Db250ZXh0LmNvbnRleHQsIGNvbnRleHQpOwogICAgICAgICAgICAgICAgcGFyZW50T2JqID0gewogICAgICAgICAgICAgICAgICBzcmZwYXJlbnRkZW5hbWU6IHNyZlBhcmVudERlTmFtZSA/IHNyZlBhcmVudERlTmFtZSA6IG51bGwsCiAgICAgICAgICAgICAgICAgIHNyZnBhcmVudGtleTogc3JmUGFyZW50RGVOYW1lID8gY29udGV4dFtzcmZQYXJlbnREZU5hbWUudG9Mb3dlckNhc2UoKV0gOiBudWxsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkYXRhLCBwYXJlbnRPYmopOwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjb250ZXh0LCBwYXJlbnRPYmopOwogICAgICAgICAgICAgICAgZGVSZXNQYXJhbWV0ZXJzID0gW107CgogICAgICAgICAgICAgICAgaWYgKGNvbnRleHQucGltcGVyc29uICYmIHRydWUpIHsKICAgICAgICAgICAgICAgICAgZGVSZXNQYXJhbWV0ZXJzID0gW3sKICAgICAgICAgICAgICAgICAgICBwYXRoTmFtZTogJ3BpbXBlb3BsZScsCiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyTmFtZTogJ3BpbXBlcnNvbicKICAgICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcGFyYW1ldGVycyA9IFt7CiAgICAgICAgICAgICAgICAgIHBhdGhOYW1lOiAncGltZXhpdGFuZGVudHJpZXMnLAogICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJOYW1lOiAncGltZXhpdGFuZGVudHJ5JwogICAgICAgICAgICAgICAgfV07CgogICAgICAgICAgICAgICAgb3BlbkRyYXdlciA9IGZ1bmN0aW9uIG9wZW5EcmF3ZXIodmlldywgZGF0YSkgewogICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gYWN0aW9uQ29udGV4dC4kYXBwZHJhd2VyLm9wZW5EcmF3ZXIodmlldywgY29udGV4dCwgZGF0YSk7CiAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdWJzY3JpYmUoZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0IHx8ICFPYmplY3QuaXMocmVzdWx0LnJldCwgJ09LJykpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IGFjdGlvbkNvbnRleHQ7CgogICAgICAgICAgICAgICAgICAgIGlmICh4RGF0YSAmJiB4RGF0YS5yZWZyZXNoICYmIHhEYXRhLnJlZnJlc2ggaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgeERhdGEucmVmcmVzaChhcmdzKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cub3BlbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbmVyLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnT0snLAogICAgICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWNhdGlvbjogJ1dGJwogICAgICAgICAgICAgICAgICAgICAgfSwgRW52aXJvbm1lbnQudW5pdGVBZGRyZXNzKTsKICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhczsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZpZXcgPSB7CiAgICAgICAgICAgICAgICAgIHZpZXduYW1lOiAncGltZXhpdGFuZGVudHJ5eXNjZ2p4amVkaXQtdmlldycsCiAgICAgICAgICAgICAgICAgIGhlaWdodDogMCwKICAgICAgICAgICAgICAgICAgd2lkdGg6IDEzNjYsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiBhY3Rpb25Db250ZXh0LiR0KCdlbnRpdGllcy5waW1leGl0YW5kZW50cnkudmlld3MueXNjZ2p4amVkaXR2aWV3LnRpdGxlJyksCiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudDogJ0RSQVdFUl9SSUdIVCcKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBvcGVuRHJhd2VyKHZpZXcsIGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gUGltRXhpdGFuZGVudHJ5X25ld1lTKF94NSkgewogICAgICAgIHJldHVybiBfUGltRXhpdGFuZGVudHJ5X25ld1lTLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBQaW1FeGl0YW5kZW50cnlfbmV3WVM7CiAgICB9KCkKICAgIC8qKg0KICAgICAqIOaPkOS6pA0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncyDlvZPliY3mlbDmja4NCiAgICAgKiBAcGFyYW0ge2FueX0gY29udGV4dCDooYzkuLrpmYTliqDkuIrkuIvmlocNCiAgICAgKiBAcGFyYW0geyp9IFtwYXJhbXNdIOmZhOWKoOWPguaVsA0KICAgICAqIEBwYXJhbSB7Kn0gWyRldmVudF0g5LqL5Lu25rqQDQogICAgICogQHBhcmFtIHsqfSBbeERhdGFdICDmiafooYzooYzkuLrmiYDpnIDlvZPliY3pg6jku7YNCiAgICAgKiBAcGFyYW0geyp9IFthY3Rpb25Db250ZXh0XSAg5omn6KGM6KGM5Li65LiK5LiL5paHDQogICAgICogQHBhcmFtIHsqfSBbc3JmUGFyZW50RGVOYW1lXSDniLblrp7kvZPlkI3np7ANCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJQaW1FeGl0YW5kZW50cnlfU3RhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9QaW1FeGl0YW5kZW50cnlfU3RhcnQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihhcmdzKSB7CiAgICAgICAgdmFyIGNvbnRleHQsCiAgICAgICAgICAgIHBhcmFtcywKICAgICAgICAgICAgJGV2ZW50LAogICAgICAgICAgICB4RGF0YSwKICAgICAgICAgICAgYWN0aW9uQ29udGV4dCwKICAgICAgICAgICAgc3JmUGFyZW50RGVOYW1lLAogICAgICAgICAgICBkYXRhLAogICAgICAgICAgICBwYXJlbnRDb250ZXh0LAogICAgICAgICAgICBwYXJlbnRWaWV3UGFyYW0sCiAgICAgICAgICAgIF90aGlzLAogICAgICAgICAgICBfYXJncywKICAgICAgICAgICAgYWN0aW9uVGFyZ2V0LAogICAgICAgICAgICBwYXJlbnRPYmosCiAgICAgICAgICAgIGJhY2tlbmQsCiAgICAgICAgICAgIF9hcmdzNyA9IGFyZ3VtZW50czsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBfYXJnczcubGVuZ3RoID4gMSAmJiBfYXJnczdbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzN1sxXSA6IHt9OwogICAgICAgICAgICAgICAgcGFyYW1zID0gX2FyZ3M3Lmxlbmd0aCA+IDIgJiYgX2FyZ3M3WzJdICE9PSB1bmRlZmluZWQgPyBfYXJnczdbMl0gOiB7fTsKICAgICAgICAgICAgICAgICRldmVudCA9IF9hcmdzNy5sZW5ndGggPiAzID8gX2FyZ3M3WzNdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgeERhdGEgPSBfYXJnczcubGVuZ3RoID4gNCA/IF9hcmdzN1s0XSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIGFjdGlvbkNvbnRleHQgPSBfYXJnczcubGVuZ3RoID4gNSA/IF9hcmdzN1s1XSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHNyZlBhcmVudERlTmFtZSA9IF9hcmdzNy5sZW5ndGggPiA2ID8gX2FyZ3M3WzZdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgZGF0YSA9IHt9OwogICAgICAgICAgICAgICAgcGFyZW50Q29udGV4dCA9IHt9OwogICAgICAgICAgICAgICAgcGFyZW50Vmlld1BhcmFtID0ge307CiAgICAgICAgICAgICAgICBfdGhpcyA9IGFjdGlvbkNvbnRleHQ7CiAgICAgICAgICAgICAgICBfYXJncyA9IFV0aWwuZGVlcENvcHkoYXJncyk7CiAgICAgICAgICAgICAgICBhY3Rpb25UYXJnZXQgPSAnU0lOR0xFS0VZJzsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29udGV4dCwgewogICAgICAgICAgICAgICAgICBwaW1leGl0YW5kZW50cnk6ICclcGltZXhpdGFuZGVudHJ5JScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbXMsIHsKICAgICAgICAgICAgICAgICAgcGltZXhpdGFuZGVudHJ5aWQ6ICclcGltZXhpdGFuZGVudHJ5JScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbXMsIHsKICAgICAgICAgICAgICAgICAgcGltZXhpdGFuZGVudHJ5bmFtZTogJyVwaW1leGl0YW5kZW50cnluYW1lJScKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgIHBhcmVudENvbnRleHQgPSBfdGhpcy5jb250ZXh0OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy52aWV3cGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgIHBhcmVudFZpZXdQYXJhbSA9IF90aGlzLnZpZXdwYXJhbXM7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29udGV4dCA9IFVJQWN0aW9uVG9vbC5oYW5kbGVDb250ZXh0UGFyYW0oYWN0aW9uVGFyZ2V0LCBfYXJncywgcGFyZW50Q29udGV4dCwgcGFyZW50Vmlld1BhcmFtLCBjb250ZXh0KTsKICAgICAgICAgICAgICAgIGRhdGEgPSBVSUFjdGlvblRvb2wuaGFuZGxlQWN0aW9uUGFyYW0oYWN0aW9uVGFyZ2V0LCBfYXJncywgcGFyZW50Q29udGV4dCwgcGFyZW50Vmlld1BhcmFtLCBwYXJhbXMpOwogICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5hc3NpZ24oe30sIGFjdGlvbkNvbnRleHQuY29udGV4dCwgY29udGV4dCk7CiAgICAgICAgICAgICAgICBwYXJlbnRPYmogPSB7CiAgICAgICAgICAgICAgICAgIHNyZnBhcmVudGRlbmFtZTogc3JmUGFyZW50RGVOYW1lID8gc3JmUGFyZW50RGVOYW1lIDogbnVsbCwKICAgICAgICAgICAgICAgICAgc3JmcGFyZW50a2V5OiBzcmZQYXJlbnREZU5hbWUgPyBjb250ZXh0W3NyZlBhcmVudERlTmFtZS50b0xvd2VyQ2FzZSgpXSA6IG51bGwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGRhdGEsIHBhcmVudE9iaik7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbnRleHQsIHBhcmVudE9iaik7IC8vIOebtOaOpeiwg+WunuS9k+acjeWKoemcgOimgei9rOaNoueahOaVsOaNrgoKICAgICAgICAgICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuc3Jmc2Vzc2lvbmlkKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Jmc2Vzc2lvbmtleSA9IGNvbnRleHQuc3Jmc2Vzc2lvbmlkOwogICAgICAgICAgICAgICAgICBkZWxldGUgY29udGV4dC5zcmZzZXNzaW9uaWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYmFja2VuZCA9IGZ1bmN0aW9uIGJhY2tlbmQoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBjdXJTZXJ2aWNlID0gbmV3IFBpbUV4aXRhbmRlbnRyeVNlcnZpY2UoKTsKICAgICAgICAgICAgICAgICAgY3VyU2VydmljZS5TdGFydChjb250ZXh0LCBkYXRhLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogcmVzcG9uc2UubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0LiROb3RpY2Uuc3VjY2Vzcyh7CiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjOiAn5ZCv5Yqo5rWB56iL5oiQ5YqfJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IGFjdGlvbkNvbnRleHQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuJE5vdGljZS5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+ezu+e7n+W8guW4uO+8gScKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBiYWNrZW5kKCk7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBQaW1FeGl0YW5kZW50cnlfU3RhcnQoX3g2KSB7CiAgICAgICAgcmV0dXJuIF9QaW1FeGl0YW5kZW50cnlfU3RhcnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIFBpbUV4aXRhbmRlbnRyeV9TdGFydDsKICAgIH0oKQogICAgLyoqDQogICAgICog5paw5bu6DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzIOW9k+WJjeaVsOaNrg0KICAgICAqIEBwYXJhbSB7YW55fSBjb250ZXh0IOihjOS4uumZhOWKoOS4iuS4i+aWhw0KICAgICAqIEBwYXJhbSB7Kn0gW3BhcmFtc10g6ZmE5Yqg5Y+C5pWwDQogICAgICogQHBhcmFtIHsqfSBbJGV2ZW50XSDkuovku7bmupANCiAgICAgKiBAcGFyYW0geyp9IFt4RGF0YV0gIOaJp+ihjOihjOS4uuaJgOmcgOW9k+WJjemDqOS7tg0KICAgICAqIEBwYXJhbSB7Kn0gW2FjdGlvbkNvbnRleHRdICDmiafooYzooYzkuLrkuIrkuIvmlocNCiAgICAgKiBAcGFyYW0geyp9IFtzcmZQYXJlbnREZU5hbWVdIOeItuWunuS9k+WQjeensA0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICovCgogIH0sIHsKICAgIGtleTogIlBpbUV4aXRhbmRlbnRyeV9uZXdHUiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX1BpbUV4aXRhbmRlbnRyeV9uZXdHUiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KGFyZ3MpIHsKICAgICAgICB2YXIgY29udGV4dCwKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICAkZXZlbnQsCiAgICAgICAgICAgIHhEYXRhLAogICAgICAgICAgICBhY3Rpb25Db250ZXh0LAogICAgICAgICAgICBzcmZQYXJlbnREZU5hbWUsCiAgICAgICAgICAgIGRhdGEsCiAgICAgICAgICAgIHBhcmVudENvbnRleHQsCiAgICAgICAgICAgIHBhcmVudFZpZXdQYXJhbSwKICAgICAgICAgICAgX3RoaXMsCiAgICAgICAgICAgIF9hcmdzLAogICAgICAgICAgICBhY3Rpb25UYXJnZXQsCiAgICAgICAgICAgIHBhcmVudE9iaiwKICAgICAgICAgICAgZGVSZXNQYXJhbWV0ZXJzLAogICAgICAgICAgICBwYXJhbWV0ZXJzLAogICAgICAgICAgICBvcGVuRHJhd2VyLAogICAgICAgICAgICB2aWV3LAogICAgICAgICAgICBfYXJnczggPSBhcmd1bWVudHM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb250ZXh0ID0gX2FyZ3M4Lmxlbmd0aCA+IDEgJiYgX2FyZ3M4WzFdICE9PSB1bmRlZmluZWQgPyBfYXJnczhbMV0gOiB7fTsKICAgICAgICAgICAgICAgIHBhcmFtcyA9IF9hcmdzOC5sZW5ndGggPiAyICYmIF9hcmdzOFsyXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3M4WzJdIDoge307CiAgICAgICAgICAgICAgICAkZXZlbnQgPSBfYXJnczgubGVuZ3RoID4gMyA/IF9hcmdzOFszXSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHhEYXRhID0gX2FyZ3M4Lmxlbmd0aCA+IDQgPyBfYXJnczhbNF0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0ID0gX2FyZ3M4Lmxlbmd0aCA+IDUgPyBfYXJnczhbNV0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBzcmZQYXJlbnREZU5hbWUgPSBfYXJnczgubGVuZ3RoID4gNiA/IF9hcmdzOFs2XSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIGRhdGEgPSB7fTsKICAgICAgICAgICAgICAgIHBhcmVudENvbnRleHQgPSB7fTsKICAgICAgICAgICAgICAgIHBhcmVudFZpZXdQYXJhbSA9IHt9OwogICAgICAgICAgICAgICAgX3RoaXMgPSBhY3Rpb25Db250ZXh0OwogICAgICAgICAgICAgICAgX2FyZ3MgPSBVdGlsLmRlZXBDb3B5KGFyZ3MpOwogICAgICAgICAgICAgICAgYWN0aW9uVGFyZ2V0ID0gJ05PTkUnOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgIHBhcmVudENvbnRleHQgPSBfdGhpcy5jb250ZXh0OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy52aWV3cGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgIHBhcmVudFZpZXdQYXJhbSA9IF90aGlzLnZpZXdwYXJhbXM7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29udGV4dCA9IFVJQWN0aW9uVG9vbC5oYW5kbGVDb250ZXh0UGFyYW0oYWN0aW9uVGFyZ2V0LCBfYXJncywgcGFyZW50Q29udGV4dCwgcGFyZW50Vmlld1BhcmFtLCBjb250ZXh0KTsKICAgICAgICAgICAgICAgIGRhdGEgPSBVSUFjdGlvblRvb2wuaGFuZGxlQWN0aW9uUGFyYW0oYWN0aW9uVGFyZ2V0LCBfYXJncywgcGFyZW50Q29udGV4dCwgcGFyZW50Vmlld1BhcmFtLCBwYXJhbXMpOwogICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5hc3NpZ24oe30sIGFjdGlvbkNvbnRleHQuY29udGV4dCwgY29udGV4dCk7CiAgICAgICAgICAgICAgICBwYXJlbnRPYmogPSB7CiAgICAgICAgICAgICAgICAgIHNyZnBhcmVudGRlbmFtZTogc3JmUGFyZW50RGVOYW1lID8gc3JmUGFyZW50RGVOYW1lIDogbnVsbCwKICAgICAgICAgICAgICAgICAgc3JmcGFyZW50a2V5OiBzcmZQYXJlbnREZU5hbWUgPyBjb250ZXh0W3NyZlBhcmVudERlTmFtZS50b0xvd2VyQ2FzZSgpXSA6IG51bGwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGRhdGEsIHBhcmVudE9iaik7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbnRleHQsIHBhcmVudE9iaik7CiAgICAgICAgICAgICAgICBkZVJlc1BhcmFtZXRlcnMgPSBbXTsKCiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5waW1wZXJzb24gJiYgdHJ1ZSkgewogICAgICAgICAgICAgICAgICBkZVJlc1BhcmFtZXRlcnMgPSBbewogICAgICAgICAgICAgICAgICAgIHBhdGhOYW1lOiAncGltcGVvcGxlJywKICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJOYW1lOiAncGltcGVyc29uJwogICAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzID0gW3sKICAgICAgICAgICAgICAgICAgcGF0aE5hbWU6ICdwaW1leGl0YW5kZW50cmllcycsCiAgICAgICAgICAgICAgICAgIHBhcmFtZXRlck5hbWU6ICdwaW1leGl0YW5kZW50cnknCiAgICAgICAgICAgICAgICB9XTsKCiAgICAgICAgICAgICAgICBvcGVuRHJhd2VyID0gZnVuY3Rpb24gb3BlbkRyYXdlcih2aWV3LCBkYXRhKSB7CiAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBhY3Rpb25Db250ZXh0LiRhcHBkcmF3ZXIub3BlbkRyYXdlcih2aWV3LCBjb250ZXh0LCBkYXRhKTsKICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnN1YnNjcmliZShmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQgfHwgIU9iamVjdC5pcyhyZXN1bHQucmV0LCAnT0snKSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gYWN0aW9uQ29udGV4dDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHhEYXRhICYmIHhEYXRhLnJlZnJlc2ggJiYgeERhdGEucmVmcmVzaCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICB4RGF0YS5yZWZyZXNoKGFyZ3MpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5vcGVuZXIpIHsKICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuZXIucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdPSycsCiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aWZpY2F0aW9uOiAnV0YnCiAgICAgICAgICAgICAgICAgICAgICB9LCBFbnZpcm9ubWVudC51bml0ZUFkZHJlc3MpOwogICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGFzOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmlldyA9IHsKICAgICAgICAgICAgICAgICAgdmlld25hbWU6ICdwaW1leGl0YW5kZW50cnllZGl0LXZpZXctbmcnLAogICAgICAgICAgICAgICAgICBoZWlnaHQ6IDUwMCwKICAgICAgICAgICAgICAgICAgd2lkdGg6IDEzNjYsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiBhY3Rpb25Db250ZXh0LiR0KCdlbnRpdGllcy5waW1leGl0YW5kZW50cnkudmlld3MuZWRpdHZpZXdfbmcudGl0bGUnKSwKICAgICAgICAgICAgICAgICAgcGxhY2VtZW50OiAnRFJBV0VSX1JJR0hUJwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIG9wZW5EcmF3ZXIodmlldywgZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBQaW1FeGl0YW5kZW50cnlfbmV3R1IoX3g3KSB7CiAgICAgICAgcmV0dXJuIF9QaW1FeGl0YW5kZW50cnlfbmV3R1IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIFBpbUV4aXRhbmRlbnRyeV9uZXdHUjsKICAgIH0oKQogICAgLyoqDQogICAgICog6I635Y+W5oyH5a6a5pWw5o2u55qE6YeN5a6a5ZCR6aG16Z2iDQogICAgICoNCiAgICAgKiBAcGFyYW0gc3Jma2V5IOaVsOaNruS4u+mUrg0KICAgICAqIEBwYXJhbSBpc0VuYWJsZVdvcmtmbG93ICDph43lrprlkJHop4blm77mmK/lkKbpnIDopoHlpITnkIbmtYHnqIvkuK3nmoTmlbDmja4NCiAgICAgKiBAbWVtYmVyb2YgIFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2UNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0UkRBcHBWaWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0UkRBcHBWaWV3ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoc3Jma2V5LCBpc0VuYWJsZVdvcmtmbG93KSB7CiAgICAgICAgdmFyIHJlc3VsdCwgY3VyRGF0YSwgaVJlYWxERU1vZGVsLCBiRGF0YUluV0YsIGJXRk1vZGUsIHN0clBEVFZpZXdQYXJhbTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5pc0VuYWJsZVdvcmtmbG93ID0gaXNFbmFibGVXb3JrZmxvdzsgLy8g6L+b6KGM5pWw5o2u5p+l6K+iCgogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuR2V0KHsKICAgICAgICAgICAgICAgICAgcGltZXhpdGFuZGVudHJ5OiBzcmZrZXkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgIGN1ckRhdGEgPSByZXN1bHQuZGF0YTsgLy/liKTmlq3lvZPliY3mlbDmja7mqKHlvI8s6buY6K6k5Li6dHJ1Ze+8jHRvZG8KCiAgICAgICAgICAgICAgICBpUmVhbERFTW9kZWwgPSB0cnVlOwogICAgICAgICAgICAgICAgYkRhdGFJbldGID0gZmFsc2U7CiAgICAgICAgICAgICAgICBiV0ZNb2RlID0gZmFsc2U7IC8vIOiuoeeul+aVsOaNruaooeW8jwoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0VuYWJsZVdvcmtmbG93KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS50ZXN0RGF0YUluV0YoewogICAgICAgICAgICAgICAgICBzdGF0ZVZhbHVlOiB0aGlzLnN0YXRlVmFsdWUsCiAgICAgICAgICAgICAgICAgIHN0YXRlRmllbGQ6IHRoaXMuc3RhdGVGaWVsZAogICAgICAgICAgICAgICAgfSwgY3VyRGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBiRGF0YUluV0YgPSBfY29udGV4dDguc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIWJEYXRhSW5XRikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBiRGF0YUluV0YgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLnRlc3RVc2VyRXhpc3RXb3JrbGlzdChudWxsLCBjdXJEYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGJXRk1vZGUgPSBfY29udGV4dDguc2VudDsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRERVNEREVWaWV3UERUUGFyYW0oY3VyRGF0YSwgYkRhdGFJbldGLCBiV0ZNb2RlKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIHN0clBEVFZpZXdQYXJhbSA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIHRoaXMuYWxsVmlld01hcC5nZXQoc3RyUERUVmlld1BhcmFtKSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRSREFwcFZpZXcoX3g4LCBfeDkpIHsKICAgICAgICByZXR1cm4gX2dldFJEQXBwVmlldy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0UkRBcHBWaWV3OwogICAgfSgpCiAgICAvKioNCiAgICAgKiDojrflj5blrp7pmYXnmoTmlbDmja7nsbvlnosNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRSZWFsREVUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWFsREVUeXBlKGVudGl0eSkge30KICAgIC8qKg0KICAgICAqIOiOt+WPluWunuS9k+WNleaVsOaNruWunuS9k+inhuWbvumihOWumuS5ieWPguaVsA0KICAgICAqDQogICAgICogQHBhcmFtIGN1ckRhdGEg5b2T5YmN5pWw5o2uDQogICAgICogQHBhcmFtIGJEYXRhSW5XRiDmmK/lkKbmnInmlbDmja7lnKjlt6XkvZzmtYHkuK0NCiAgICAgKiBAcGFyYW0gYldGTW9kZSAgIOaYr+WQpuW3peS9nOa1geaooeW8jw0KICAgICAqIEBtZW1iZXJvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRERVNEREVWaWV3UERUUGFyYW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRERVNEREVWaWV3UERUUGFyYW0gPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOShjdXJEYXRhLCBiRGF0YUluV0YsIGJXRk1vZGUpIHsKICAgICAgICB2YXIgc3RyUERUUGFyYW0sIGlzRW5hYmxlTXVsdGlGb3JtLCBtdWx0aUZvcm1ERUZpZWxkLCBvYmpGb3JtVmFsdWU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0clBEVFBhcmFtID0gJyc7CgogICAgICAgICAgICAgICAgaWYgKGJEYXRhSW5XRikge30gLy8g5Yik5pat5pWw5o2u5piv5ZCm5Zyo5rWB56iL5LitCiAgICAgICAgICAgICAgICAvL+WkmuihqOWNle+8jHRvZG8KCgogICAgICAgICAgICAgICAgaXNFbmFibGVNdWx0aUZvcm0gPSBmYWxzZTsKICAgICAgICAgICAgICAgIG11bHRpRm9ybURFRmllbGQgPSBudWxsOwoKICAgICAgICAgICAgICAgIGlmICghKGlzRW5hYmxlTXVsdGlGb3JtICYmIG11bHRpRm9ybURFRmllbGQpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgb2JqRm9ybVZhbHVlID0gY3VyRGF0YVttdWx0aUZvcm1ERUZpZWxkXTsKCiAgICAgICAgICAgICAgICBpZiAoRW52aXJvbm1lbnQuaXNBcHBNb2RlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsICdNT0JFRElUVklFVycgKyBvYmpGb3JtVmFsdWUpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgJ0VESVRWSUVXJyArIG9iakZvcm1WYWx1ZSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGlmIChFbnZpcm9ubWVudC5pc0FwcE1vZGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmdldERFTWFpblN0YXRlVGFnKGN1ckRhdGEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS50MCA9ICJNT0JFRElUVklFVzpNU1RBRzoiOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERFTWFpblN0YXRlVGFnKGN1ckRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQ5LnQxID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ5LnQwLmNvbmNhdC5jYWxsKF9jb250ZXh0OS50MCwgX2NvbnRleHQ5LnQxKSk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgJ01PQkVESVRWSUVXOicpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmdldERFTWFpblN0YXRlVGFnKGN1ckRhdGEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS50MiA9ICJFRElUVklFVzpNU1RBRzoiOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERFTWFpblN0YXRlVGFnKGN1ckRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQ5LnQzID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ5LnQyLmNvbmNhdC5jYWxsKF9jb250ZXh0OS50MiwgX2NvbnRleHQ5LnQzKSk7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgJ0VESVRWSUVXOicpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0REVTRERFVmlld1BEVFBhcmFtKF94MTAsIF94MTEsIF94MTIpIHsKICAgICAgICByZXR1cm4gX2dldERFU0RERVZpZXdQRFRQYXJhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0REVTRERFVmlld1BEVFBhcmFtOwogICAgfSgpCiAgICAvKioNCiAgICAgKiDojrflj5bmlbDmja7lr7nosaHnmoTkuLvnirbmgIHmoIfor4YNCiAgICAgKg0KICAgICAqIEBwYXJhbSBjdXJEYXRhIOW9k+WJjeaVsOaNrg0KICAgICAqIEBtZW1iZXJvZiAgUGltRXhpdGFuZGVudHJ5VUlTZXJ2aWNlQmFzZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRERU1haW5TdGF0ZVRhZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldERFTWFpblN0YXRlVGFnID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKGN1ckRhdGEpIHsKICAgICAgICB2YXIgc3RyVGFnLCBpLCBfc3RyVGFnLCBqLCBzdHJUYWcyLCBrLCBzdHJUYWczOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKHRoaXMubWFpblN0YXRlRmllbGRzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdGhpcy5tYWluU3RhdGVGaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoc2luZ2xlTWFpbkZpZWxkKSB7CiAgICAgICAgICAgICAgICAgIGlmICghKHNpbmdsZU1haW5GaWVsZCBpbiBjdXJEYXRhKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlx1NUY1M1x1NTI0RFx1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVx1NEUwRFx1NTMwNVx1NTQyQlx1NUM1RVx1NjAyN3NpbmdsZU1haW5GaWVsZFx1RkYwQ1x1NTNFRlx1ODBGRFx1NEYxQVx1NTNEMVx1NzUxRlx1OTUxOVx1OEJFRiIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHN0clRhZyA9ICIiOwogICAgICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICghKGkgPD0gMSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9zdHJUYWcgPSBjdXJEYXRhW3RoaXMubWFpblN0YXRlRmllbGRzWzBdXSA/IGkgPT0gMCA/IGN1ckRhdGFbdGhpcy5tYWluU3RhdGVGaWVsZHNbMF1dIDogIiIgOiAiIjsKCiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLm1haW5TdGF0ZUZpZWxkcy5sZW5ndGggPj0gMikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGogPSAwOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBpZiAoIShqIDw9IDEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzdHJUYWcyID0gY3VyRGF0YVt0aGlzLm1haW5TdGF0ZUZpZWxkc1sxXV0gPyAiIi5jb25jYXQoX3N0clRhZywgIl9fIikuY29uY2F0KGogPT0gMCA/IGN1ckRhdGFbdGhpcy5tYWluU3RhdGVGaWVsZHNbMV1dIDogIiIpIDogX3N0clRhZzsKCiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLm1haW5TdGF0ZUZpZWxkcy5sZW5ndGggPj0gMykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGsgPSAwOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgaWYgKCEoayA8PSAxKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3RyVGFnMyA9IGN1ckRhdGFbdGhpcy5tYWluU3RhdGVGaWVsZHNbMl1dID8gIiIuY29uY2F0KHN0clRhZzIsICJfXyIpLmNvbmNhdChrID09IDAgPyBjdXJEYXRhW3RoaXMubWFpblN0YXRlRmllbGRzWzJdXSA6ICIiKSA6IHN0clRhZzI7IC8vIOWIpOaWreaYr+WQpuWtmOWcqAoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgdGhpcy5hbGxEZU1haW5TdGF0ZU1hcC5nZXQoc3RyVGFnMykpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgaysrOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIsIHRoaXMuYWxsRGVNYWluU3RhdGVNYXAuZ2V0KHN0clRhZzIpKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIGorKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIsIHRoaXMuYWxsRGVNYWluU3RhdGVNYXAuZ2V0KF9zdHJUYWcpKTsKCiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldERFTWFpblN0YXRlVGFnKF94MTMpIHsKICAgICAgICByZXR1cm4gX2dldERFTWFpblN0YXRlVGFnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRERU1haW5TdGF0ZVRhZzsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2U7Cn0oVUlTZXJ2aWNlKTsKCmV4cG9ydCB7IFBpbUV4aXRhbmRlbnRyeVVJU2VydmljZUJhc2UgYXMgZGVmYXVsdCB9Ow=="},null]}