{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-exitandentry\\ygcgj-form\\ygcgj-form-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-exitandentry\\ygcgj-form\\ygcgj-form-base.vue","mtime":1630509411602},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgVnVlLCBDb21wb25lbnQsIFByb3AsIFByb3ZpZGUsIEVtaXQsIFdhdGNoLCBNb2RlbCxJbmplY3QgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsNCmltcG9ydCB7IENyZWF0ZUVsZW1lbnQgfSBmcm9tICd2dWUnOw0KaW1wb3J0IHsgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7DQppbXBvcnQgeyBDb250cm9sSW50ZXJmYWNlIH0gZnJvbSAnQC9pbnRlcmZhY2UvY29udHJvbCc7DQppbXBvcnQgeyBVSUFjdGlvblRvb2wsVXRpbCB9IGZyb20gJ0AvdXRpbHMnOw0KaW1wb3J0IE5hdkRhdGFTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9hcHAvbmF2ZGF0YS1zZXJ2aWNlJzsNCmltcG9ydCBQaW1FeGl0YW5kZW50cnlTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9waW0tZXhpdGFuZGVudHJ5L3BpbS1leGl0YW5kZW50cnktc2VydmljZSc7DQppbXBvcnQgWUdDR0pTZXJ2aWNlIGZyb20gJy4veWdjZ2otZm9ybS1zZXJ2aWNlJzsNCg0KaW1wb3J0IHsgRm9ybUJ1dHRvbk1vZGVsLCBGb3JtUGFnZU1vZGVsLCBGb3JtSXRlbU1vZGVsLCBGb3JtRFJVSVBhcnRNb2RlbCwgRm9ybVBhcnRNb2RlbCwgRm9ybUdyb3VwUGFuZWxNb2RlbCwgRm9ybUlGcmFtZU1vZGVsLCBGb3JtUm93SXRlbU1vZGVsLCBGb3JtVGFiUGFnZU1vZGVsLCBGb3JtVGFiUGFuZWxNb2RlbCwgRm9ybVVzZXJDb250cm9sTW9kZWwgfSBmcm9tICdAL21vZGVsL2Zvcm0tZGV0YWlsJzsNCmltcG9ydCB7IGRlYm91bmNlVGltZSwgZGlzdGluY3RVbnRpbENoYW5nZWQgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7DQoNCg0KQENvbXBvbmVudCh7DQogICAgY29tcG9uZW50czogew0KICAgICAgDQogICAgfQ0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFlHQ0dKQmFzZSBleHRlbmRzIFZ1ZSBpbXBsZW1lbnRzIENvbnRyb2xJbnRlcmZhY2Ugew0KDQogICAgLyoqDQogICAgICog5ZCN56ewDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBuYW1lPzogc3RyaW5nOw0KDQogICAgLyoqDQogICAgICog6KeG5Zu+6YCa6K6v5a+56LGhDQogICAgICoNCiAgICAgKiBAdHlwZSB7U3ViamVjdDxWaWV3U3RhdGU+fQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyB2aWV3U3RhdGUhOiBTdWJqZWN0PFZpZXdTdGF0ZT47DQoNCiAgICAvKioNCiAgICAgKiDlupTnlKjkuIrkuIvmlocNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBjb250ZXh0OiBhbnk7DQoNCiAgICAvKioNCiAgICAgKiDop4blm77lj4LmlbANCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyB2aWV3cGFyYW1zOiBhbnk7DQoNCiAgICAvKioNCiAgICAgKiDop4blm77nirbmgIHkuovku7YNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAdHlwZSB7KFN1YnNjcmlwdGlvbiB8IHVuZGVmaW5lZCl9DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyB2aWV3U3RhdGVFdmVudDogU3Vic2NyaXB0aW9uIHwgdW5kZWZpbmVkOw0KDQogICAgLyoqDQogICAgICog6I635Y+W6YOo5Lu257G75Z6LDQogICAgICoNCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZ2V0Q29udHJvbFR5cGUoKTogc3RyaW5nIHsNCiAgICAgICAgcmV0dXJuICdGT1JNJw0KICAgIH0NCg0KDQoNCiAgICAvKioNCiAgICAgKiDorqHmlbDlmajmnI3liqHlr7nosaHpm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHtBcnJheTwqPn0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovICAgIA0KICAgIHB1YmxpYyBjb3VudGVyU2VydmljZUFycmF5OkFycmF5PGFueT4gPSBbXTsNCg0KICAgIC8qKg0KICAgICAqIOW7uuaehOmDqOS7tuacjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1lHQ0dKU2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIHNlcnZpY2U6IFlHQ0dKU2VydmljZSA9IG5ldyBZR0NHSlNlcnZpY2UoeyAkc3RvcmU6IHRoaXMuJHN0b3JlIH0pOw0KDQogICAgLyoqDQogICAgICog5a6e5L2T5pyN5Yqh5a+56LGhDQogICAgICoNCiAgICAgKiBAdHlwZSB7UGltRXhpdGFuZGVudHJ5U2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGFwcEVudGl0eVNlcnZpY2U6IFBpbUV4aXRhbmRlbnRyeVNlcnZpY2UgPSBuZXcgUGltRXhpdGFuZGVudHJ5U2VydmljZSh7ICRzdG9yZTogdGhpcy4kc3RvcmUgfSk7DQogICAgDQoNCg0KICAgIC8qKg0KICAgICAqIOWFs+mXreinhuWbvg0KICAgICAqDQogICAgICogQHBhcmFtIHthbnl9IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGNsb3NlVmlldyhhcmdzOiBhbnkpOiB2b2lkIHsNCiAgICAgICAgbGV0IF90aGlzOiBhbnkgPSB0aGlzOw0KICAgICAgICBfdGhpcy4kZW1pdCgnY2xvc2V2aWV3JywgW2FyZ3NdKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiAg6K6h5pWw5Zmo5Yi35pawDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGNvdW50ZXJSZWZyZXNoKCl7DQogICAgICAgIGNvbnN0IF90aGlzOmFueSA9dGhpczsNCiAgICAgICAgaWYoX3RoaXMuY291bnRlclNlcnZpY2VBcnJheSAmJiBfdGhpcy5jb3VudGVyU2VydmljZUFycmF5Lmxlbmd0aCA+MCl7DQogICAgICAgICAgICBfdGhpcy5jb3VudGVyU2VydmljZUFycmF5LmZvckVhY2goKGl0ZW06YW55KSA9PnsNCiAgICAgICAgICAgICAgICBpZihpdGVtLnJlZnJlc2hEYXRhICYmIGl0ZW0ucmVmcmVzaERhdGEgaW5zdGFuY2VvZiBGdW5jdGlvbil7DQogICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVmcmVzaERhdGEoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfQ0KDQoNCiAgICAvKioNCiAgICAgKiDlt6XkvZzmtYHlrqHmibnmhI/op4Hmjqfku7bnu5HlrprlgLwNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc3Jmd2ZtZW1vOnN0cmluZyA9ICIiOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOiOt+WPluWkmumhueaVsOaNrg0KICAgICAqDQogICAgICogQHJldHVybnMge2FueVtdfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZ2V0RGF0YXMoKTogYW55W10gew0KICAgICAgICByZXR1cm4gW3RoaXMuZGF0YV07DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6I635Y+W5Y2V6aG55qCRDQogICAgICoNCiAgICAgKiBAcmV0dXJucyB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGdldERhdGEoKTogYW55IHsNCiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmmK/lkKbpu5jorqTkv53lrZgNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCh7IGRlZmF1bHQ6IGZhbHNlIH0pIHB1YmxpYyBhdXRvc2F2ZT86IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDmmL7npLrlpITnkIbmj5DnpLoNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCh7IGRlZmF1bHQ6IHRydWUgfSkgcHVibGljIHNob3dCdXN5SW5kaWNhdG9yPzogYm9vbGVhbjsNCg0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tc3VibWl0DQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBXRlN1Ym1pdEFjdGlvbiE6IHN0cmluZzsNCiAgICANCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLXN0YXJ0DQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBXRlN0YXJ0QWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tdXBkYXRlDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyB1cGRhdGVBY3Rpb24hOiBzdHJpbmc7DQogICAgDQogICAgLyoqDQogICAgICog6YOo5Lu26KGM5Li6LS1yZW1vdmUNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHJlbW92ZUFjdGlvbiE6IHN0cmluZzsNCiAgICANCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLWxvYWRkcmFmdA0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgbG9hZGRyYWZ0QWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tbG9hZA0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgbG9hZEFjdGlvbiE6IHN0cmluZzsNCiAgICANCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLWNyZWF0ZQ0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgY3JlYXRlQWN0aW9uITogc3RyaW5nOw0KDQogICAgLyoqDQogICAgICog6YOo5Lu26KGM5Li6LS1jcmVhdGUNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHNlYXJjaEFjdGlvbiE6IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvuagh+ivhg0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgdmlld3RhZyE6IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOihqOWNleeKtuaAgQ0KICAgICAqDQogICAgICogQHR5cGUge1N1YmplY3Q8YW55Pn0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGZvcm1TdGF0ZTogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3QoKTsNCg0KICAgIC8qKg0KICAgICAqIOW/veeVpeihqOWNlemhueWAvOWPmOWMlg0KICAgICAqDQogICAgICogQHR5cGUge2Jvb2xlYW59DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBpZ25vcmVmaWVsZHZhbHVlY2hhbmdlOiBib29sZWFuID0gZmFsc2U7DQoNCiAgICAvKioNCiAgICAgKiDmlbDmja7lj5jljJYNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAdHlwZSB7U3ViamVjdDxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZGF0YUNoYW5nOiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdCgpOw0KDQogICAgLyoqDQogICAgICog6KeG5Zu+54q25oCB5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHR5cGUgeyhTdWJzY3JpcHRpb24gfCB1bmRlZmluZWQpfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZGF0YUNoYW5nRXZlbnQ6IFN1YnNjcmlwdGlvbiB8IHVuZGVmaW5lZDsNCg0KICAgIC8qKg0KICAgICAqIOWOn+Wni+aVsOaNrg0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgb2xkRGF0YTogYW55ID0ge307DQoNCiAgICAvKioNCiAgICAgKiDooajljZXmlbDmja7lr7nosaENCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZGF0YTogYW55ID0gew0KICAgICAgICBzcmZ1cGRhdGVkYXRlOiBudWxsLA0KICAgICAgICBzcmZvcmlrZXk6IG51bGwsDQogICAgICAgIHNyZmtleTogbnVsbCwNCiAgICAgICAgc3JmbWFqb3J0ZXh0OiBudWxsLA0KICAgICAgICBzcmZ0ZW1wbW9kZTogbnVsbCwNCiAgICAgICAgc3JmdWY6IG51bGwsDQogICAgICAgIHNyZmRlaWQ6IG51bGwsDQogICAgICAgIHNyZnNvdXJjZWtleTogbnVsbCwNCiAgICAgICAgcGltcGVyc29uaWQ6IG51bGwsDQogICAgICAgIHBpbXBlcnNvbm5hbWU6IG51bGwsDQogICAgICAgIGNqc2o6IG51bGwsDQogICAgICAgIHJqc2o6IG51bGwsDQogICAgICAgIHF3ZmhnajogbnVsbCwNCiAgICAgICAgbHg6IG51bGwsDQogICAgICAgIHN5OiBudWxsLA0KICAgICAgICBiejogbnVsbCwNCiAgICAgICAgb3JnaWQ6IG51bGwsDQogICAgICAgIG9yZ3NlY3RvcmlkOiBudWxsLA0KICAgICAgICB3b3JrZmxvd3N0YXRlOiBudWxsLA0KICAgICAgICBwaW1leGl0YW5kZW50cnlpZDogbnVsbCwNCiAgICAgICAgcGltZXhpdGFuZGVudHJ5Om51bGwsDQogICAgfTsNCg0KICAgIC8qKg0KICAgICAgKiDlvZPliY3miafooYznmoTooYzkuLrpgLvovpENCiAgICAgICoNCiAgICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAgKi8NCiAgICBwdWJsaWMgY3VycmVudEFjdGlvbjogc3RyaW5nID0gIiI7DQoNCiAgICAvKioNCiAgICAgICog5YWz57O755WM6Z2i6K6h5pWw5ZmoDQogICAgICAqDQogICAgICAqIEB0eXBlIHtudW1iZXJ9DQogICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgICovDQogICAgcHVibGljIGRyY291bnRlcjogbnVtYmVyID0gMDsNCg0KICAgIC8qKg0KICAgICAgKiDpnIDopoHnrYnlvoXlhbPns7vnlYzpnaLkv53lrZjml7bvvIznrKzkuIDmrKHosIPnlKhzYXZl5Y+C5pWw55qE5aSH5Lu9DQogICAgICAqDQogICAgICAqIEB0eXBlIHtudW1iZXJ9DQogICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgICovDQogICAgcHVibGljIGRyc2F2ZW9wdDogYW55ID0ge307DQoNCiAgICAvKioNCiAgICAgICog6KGo5Y2V5L+d5a2Y5Zue6LCD5a2Y5YKo5a+56LGhDQogICAgICAqDQogICAgICAqIEB0eXBlIHthbnl9DQogICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgICovDQogICAgcHVibGljIHNhdmVTdGF0ZTphbnkgOw0KDQogICAgLyoqDQogICAgICog5bGe5oCn5YC86KeE5YiZDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIHJ1bGVzOiBhbnkgPSB7DQogICAgICAgIHNyZnVwZGF0ZWRhdGU6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfmm7TmlrDml7bpl7Qg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfmm7TmlrDml7bpl7Qg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfmm7TmlrDml7bpl7Qg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+abtOaWsOaXtumXtCDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3Jmb3Jpa2V5OiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHNyZmtleTogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WHuuWFpeWig+euoeeQhuagh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WHuuWFpeWig+euoeeQhuagh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WHuuWFpeWig+euoeeQhuagh+ivhiDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Ye65YWl5aKD566h55CG5qCH6K+GIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBzcmZtYWpvcnRleHQ6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflh7rlhaXlooPnrqHnkIblkI3np7Ag5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflh7rlhaXlooPnrqHnkIblkI3np7Ag5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflh7rlhaXlooPnrqHnkIblkI3np7Ag5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WHuuWFpeWig+euoeeQhuWQjeensCDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3JmdGVtcG1vZGU6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3JmdWY6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3JmZGVpZDogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBzcmZzb3VyY2VrZXk6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcGltcGVyc29uaWQ6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfkurrlkZjkv6Hmga/moIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfkurrlkZjkv6Hmga/moIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfkurrlkZjkv6Hmga/moIfor4Yg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+S6uuWRmOS/oeaBr+agh+ivhiDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcGltcGVyc29ubmFtZTogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WRmOW3peWnk+WQjSDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WRmOW3peWnk+WQjSDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5ZGY5bel5aeT5ZCNIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WRmOW3peWnk+WQjSDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgY2pzajogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WHuu+8iOWbve+8ieWig+aXtumXtCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WHuu+8iOWbve+8ieWig+aXtumXtCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Ye677yI5Zu977yJ5aKD5pe26Ze0IOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WHuu+8iOWbve+8ieWig+aXtumXtCDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcmpzajogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WFpe+8iOWbve+8ieWig+aXtumXtCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WFpe+8iOWbve+8ieWig+aXtumXtCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5YWl77yI5Zu977yJ5aKD5pe26Ze0IOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WFpe+8iOWbve+8ieWig+aXtumXtCDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcXdmaGdqOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn55uu55qE5Zu95a62L+WcsOWMuiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+ebrueahOWbveWuti/lnLDljLog5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+ebrueahOWbveWuti/lnLDljLog5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn55uu55qE5Zu95a62L+WcsOWMuiDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgbHg6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfnsbvlnosg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfnsbvlnosg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+exu+WeiyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfnsbvlnosg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHN5OiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5LqL55SxIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5LqL55SxIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfkuovnlLEg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5LqL55SxIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBiejogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+Wkh+azqCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+Wkh+azqCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+Wkh+azqCDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5aSH5rOoIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBvcmdpZDogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+e7hOe7hyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+e7hOe7hyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+e7hOe7hyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn57uE57uHIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBvcmdzZWN0b3JpZDogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+mDqOmXqCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+mDqOmXqCDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+mDqOmXqCDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn6YOo6ZeoIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICB3b3JrZmxvd3N0YXRlOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5rWB56iL54q25oCBIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5rWB56iL54q25oCBIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5rWB56iL54q25oCBIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfmtYHnqIvnirbmgIEg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHBpbWV4aXRhbmRlbnRyeWlkOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Ye65YWl5aKD566h55CG5qCH6K+GIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Ye65YWl5aKD566h55CG5qCH6K+GIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Ye65YWl5aKD566h55CG5qCH6K+GIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflh7rlhaXlooPnrqHnkIbmoIfor4Yg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6K+m5oOF5qih5Z6L6ZuG5ZCIDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGRldGFpbHNNb2RlbDogYW55ID0gew0KICAgICAgICBncm91cDE6IG5ldyBGb3JtR3JvdXBQYW5lbE1vZGVsKHsgY2FwdGlvbjogJ+WHuu+8iOWbve+8ieWig+eUs+ivtycsIGRldGFpbFR5cGU6ICdHUk9VUFBBTkVMJywgbmFtZTogJ2dyb3VwMScsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IGZhbHNlLCBmb3JtOiB0aGlzLCB1aUFjdGlvbkdyb3VwOiB7IGNhcHRpb246ICcnLCBsYW5nYmFzZTogJ2VudGl0aWVzLnBpbWV4aXRhbmRlbnRyeS55Z2Nnal9mb3JtJywgZXh0cmFjdE1vZGU6ICdJVEVNJywgZGV0YWlsczogW10gfSB9KQ0KLCANCiAgICAgICAgZm9ybXBhZ2UxOiBuZXcgRm9ybVBhZ2VNb2RlbCh7IGNhcHRpb246ICfln7rmnKzkv6Hmga8nLCBkZXRhaWxUeXBlOiAnRk9STVBBR0UnLCBuYW1lOiAnZm9ybXBhZ2UxJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcyB9KQ0KLCANCiAgICAgICAgc3JmdXBkYXRlZGF0ZTogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAn5pu05paw5pe26Ze0JywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ3NyZnVwZGF0ZWRhdGUnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZm9yaWtleTogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAnJywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ3NyZm9yaWtleScsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMsIGRpc2FibGVkOiBmYWxzZSwgZW5hYmxlQ29uZDogMyB9KQ0KLCANCiAgICAgICAgc3Jma2V5OiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICflh7rlhaXlooPnrqHnkIbmoIfor4YnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3Jma2V5JywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBzcmZtYWpvcnRleHQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+WHuuWFpeWig+euoeeQhuWQjeensCcsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdzcmZtYWpvcnRleHQnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZnRlbXBtb2RlOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICcnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3JmdGVtcG1vZGUnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZnVmOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICcnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3JmdWYnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZmRlaWQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJycsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdzcmZkZWlkJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBzcmZzb3VyY2VrZXk6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJycsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdzcmZzb3VyY2VrZXknLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHBpbXBlcnNvbmlkOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfkurrlkZjkv6Hmga/moIfor4YnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAncGltcGVyc29uaWQnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHBpbXBlcnNvbm5hbWU6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+WRmOW3peWnk+WQjScsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdwaW1wZXJzb25uYW1lJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBjanNqOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICflh7rvvIjlm73vvInlooPml7bpl7QnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnY2pzaicsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMsIGRpc2FibGVkOiBmYWxzZSwgZW5hYmxlQ29uZDogMyB9KQ0KLCANCiAgICAgICAgcmpzajogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAn5YWl77yI5Zu977yJ5aKD5pe26Ze0JywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ3Jqc2onLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHF3ZmhnajogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAn55uu55qE5Zu95a62L+WcsOWMuicsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdxd2ZoZ2onLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIGx4OiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfnsbvlnosnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnbHgnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDAgfSkNCiwgDQogICAgICAgIHN5OiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfkuovnlLEnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3knLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIGJ6OiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICflpIfms6gnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnYnonLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIG9yZ2lkOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfnu4Tnu4cnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnb3JnaWQnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIG9yZ3NlY3RvcmlkOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfpg6jpl6gnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnb3Jnc2VjdG9yaWQnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHdvcmtmbG93c3RhdGU6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+a1geeoi+eKtuaAgScsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICd3b3JrZmxvd3N0YXRlJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBwaW1leGl0YW5kZW50cnlpZDogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAn5Ye65YWl5aKD566h55CG5qCH6K+GJywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ3BpbWV4aXRhbmRlbnRyeWlkJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3JmdXBkYXRlZGF0ZSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnNyZnVwZGF0ZWRhdGUnKQ0KICAgIG9uU3JmdXBkYXRlZGF0ZUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzcmZ1cGRhdGVkYXRlJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZvcmlrZXkg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5zcmZvcmlrZXknKQ0KICAgIG9uU3Jmb3Jpa2V5Q2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZm9yaWtleScsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3Jma2V5IOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuc3Jma2V5JykNCiAgICBvblNyZmtleUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzcmZrZXknLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZm1ham9ydGV4dCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnNyZm1ham9ydGV4dCcpDQogICAgb25TcmZtYWpvcnRleHRDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAnc3JmbWFqb3J0ZXh0JywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZ0ZW1wbW9kZSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnNyZnRlbXBtb2RlJykNCiAgICBvblNyZnRlbXBtb2RlQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZnRlbXBtb2RlJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZ1ZiDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnNyZnVmJykNCiAgICBvblNyZnVmQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZnVmJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZkZWlkIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuc3JmZGVpZCcpDQogICAgb25TcmZkZWlkQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZmRlaWQnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZnNvdXJjZWtleSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnNyZnNvdXJjZWtleScpDQogICAgb25TcmZzb3VyY2VrZXlDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAnc3Jmc291cmNla2V5JywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBwaW1wZXJzb25pZCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnBpbXBlcnNvbmlkJykNCiAgICBvblBpbXBlcnNvbmlkQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3BpbXBlcnNvbmlkJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBwaW1wZXJzb25uYW1lIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEucGltcGVyc29ubmFtZScpDQogICAgb25QaW1wZXJzb25uYW1lQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3BpbXBlcnNvbm5hbWUnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIGNqc2og5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5janNqJykNCiAgICBvbkNqc2pDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAnY2pzaicsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgcmpzaiDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnJqc2onKQ0KICAgIG9uUmpzakNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdyanNqJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBxd2ZoZ2og5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5xd2ZoZ2onKQ0KICAgIG9uUXdmaGdqQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3F3ZmhnaicsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgbHgg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5seCcpDQogICAgb25MeENoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdseCcsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3kg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5zeScpDQogICAgb25TeUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzeScsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgYnog5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5ieicpDQogICAgb25CekNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdieicsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgb3JnaWQg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5vcmdpZCcpDQogICAgb25PcmdpZENoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdvcmdpZCcsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgb3Jnc2VjdG9yaWQg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5vcmdzZWN0b3JpZCcpDQogICAgb25PcmdzZWN0b3JpZENoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdvcmdzZWN0b3JpZCcsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgd29ya2Zsb3dzdGF0ZSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLndvcmtmbG93c3RhdGUnKQ0KICAgIG9uV29ya2Zsb3dzdGF0ZUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICd3b3JrZmxvd3N0YXRlJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBwaW1leGl0YW5kZW50cnlpZCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnBpbWV4aXRhbmRlbnRyeWlkJykNCiAgICBvblBpbWV4aXRhbmRlbnRyeWlkQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3BpbWV4aXRhbmRlbnRyeWlkJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICog6YeN572u6KGo5Y2V6aG55YC8DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHt7IG5hbWU6IHN0cmluZywgbmV3VmFsOiBhbnksIG9sZFZhbDogYW55IH19IHsgbmFtZSwgbmV3VmFsLCBvbGRWYWwgfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVzZXRGb3JtRGF0YSh7IG5hbWUsIG5ld1ZhbCwgb2xkVmFsIH06IHsgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfSk6IHZvaWQgew0KICAgIH0NCg0KICAgIC8qKg0KICAgICAgKiDnva7nqbrlr7nosaENCiAgICAgICoNCiAgICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgICovDQogICAgcHVibGljIFJlc2V0RGF0YShfZGF0YXM6YW55KXsNCiAgICAgICAgaWYoT2JqZWN0LmtleXMoX2RhdGFzKS5sZW5ndGggPjApew0KICAgICAgICAgICAgT2JqZWN0LmtleXMoX2RhdGFzKS5mb3JFYWNoKChuYW1lOiBzdHJpbmcpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXSA9IG51bGw7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDooajljZXpgLvovpENCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0ge3sgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfX0geyBuYW1lLCBuZXdWYWwsIG9sZFZhbCB9DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmb3JtTG9naWMoeyBuYW1lLCBuZXdWYWwsIG9sZFZhbCB9OiB7IG5hbWU6IHN0cmluZywgbmV3VmFsOiBhbnksIG9sZFZhbDogYW55IH0pOiB2b2lkIHsNCiAgICAgICAgICAgICAgICANCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOihqOWNleWAvOWPmOWMlg0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7eyBuYW1lOiBzdHJpbmcsIG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSB9fSB7IG5hbWUsIG5ld1ZhbCwgb2xkVmFsIH0NCiAgICAgKiBAcmV0dXJucyB7dm9pZH0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGZvcm1EYXRhQ2hhbmdlKHsgbmFtZSwgbmV3VmFsLCBvbGRWYWwgfTogeyBuYW1lOiBzdHJpbmcsIG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSB9KTogdm9pZCB7DQogICAgICAgIGlmICh0aGlzLmlnbm9yZWZpZWxkdmFsdWVjaGFuZ2UpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnJlc2V0Rm9ybURhdGEoeyBuYW1lOiBuYW1lLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgICAgIHRoaXMuZm9ybUxvZ2ljKHsgbmFtZTogbmFtZSwgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgICAgICB0aGlzLmRhdGFDaGFuZy5uZXh0KEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSkpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOihqOWNleWKoOi9veWujOaIkA0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHtzdHJpbmd9IFthY3Rpb25dDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBvbkZvcm1Mb2FkKGRhdGE6IGFueSA9IHt9LGFjdGlvbjpzdHJpbmcpOiB2b2lkIHsNCiAgICAgICAgaWYoT2JqZWN0LmlzKGFjdGlvbiwic2F2ZSIpIHx8IE9iamVjdC5pcyhhY3Rpb24sImF1dG9TYXZlIikgfHwgT2JqZWN0LmlzKGFjdGlvbiwic3VibWl0IikpDQogICAgICAgIC8vIOabtOaWsGNvbnRleHTnmoTlrp7kvZPkuLvplK4NCiAgICAgICAgaWYoZGF0YS5waW1leGl0YW5kZW50cnkpew0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbnRleHQse3BpbWV4aXRhbmRlbnRyeTpkYXRhLnBpbWV4aXRhbmRlbnRyeX0pDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5zZXRGb3JtRW5hYmxlQ29uZChkYXRhKTsNCiAgICAgICAgdGhpcy5maWxsRm9ybShkYXRhLGFjdGlvbik7DQogICAgICAgIHRoaXMub2xkRGF0YSA9IHt9Ow0KICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMub2xkRGF0YSwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKSk7DQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndmlld2FjdGlvbi9zZXRWaWV3RGF0YUNoYW5nZScsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnLCB2aWV3ZGF0YWNoYW5nZTogZmFsc2UgfSk7DQogICAgICAgIHRoaXMuZm9ybUxvZ2ljKHsgbmFtZTogJycsIG5ld1ZhbDogbnVsbCwgb2xkVmFsOiBudWxsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWAvOWhq+WFhQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbX2RhdGFzPXt9XQ0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbYWN0aW9uXQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZmlsbEZvcm0oX2RhdGFzOiBhbnkgPSB7fSxhY3Rpb246c3RyaW5nKTogdm9pZCB7DQogICAgICAgIHRoaXMuaWdub3JlZmllbGR2YWx1ZWNoYW5nZSA9IHRydWU7DQogICAgICAgIE9iamVjdC5rZXlzKF9kYXRhcykuZm9yRWFjaCgobmFtZTogc3RyaW5nKSA9PiB7DQogICAgICAgICAgICBpZiAodGhpcy5kYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdID0gX2RhdGFzW25hbWVdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgICAgaWYoT2JqZWN0LmlzKGFjdGlvbiwnbG9hZERyYWZ0Jykpew0KICAgICAgICAgICAgdGhpcy5jcmVhdGVEZWZhdWx0KCk7DQogICAgICAgIH0NCiAgICAgICAgaWYoT2JqZWN0LmlzKGFjdGlvbiwnbG9hZCcpKXsNCiAgICAgICAgICAgIHRoaXMudXBkYXRlRGVmYXVsdCgpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMuaWdub3JlZmllbGR2YWx1ZWNoYW5nZSA9IGZhbHNlOw0KICAgICAgICB9KQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiuvue9ruihqOWNlemhueaYr+WQpuWQr+eUqA0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc2V0Rm9ybUVuYWJsZUNvbmQoZGF0YTogYW55KTogdm9pZCB7DQogICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5kZXRhaWxzTW9kZWwpLmZvckVhY2goKGRldGFpbDogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAoIU9iamVjdC5pcyhkZXRhaWwuZGV0YWlsVHlwZSwgJ0ZPUk1JVEVNJykpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBmb3JtSXRlbTogRm9ybUl0ZW1Nb2RlbCA9IGRldGFpbDsNCiAgICAgICAgICAgIGZvcm1JdGVtLnNldEVuYWJsZUNvbmQoZGF0YS5zcmZ1Zik7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmHjee9ruiNieeov+ihqOWNleeKtuaAgQ0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVzZXREcmFmdEZvcm1TdGF0ZXMoKTogdm9pZCB7DQogICAgICAgIGNvbnN0IGZvcm06IGFueSA9IHRoaXMuJHJlZnMuZm9ybTsNCiAgICAgICAgaWYgKGZvcm0pIHsNCiAgICAgICAgICAgIGZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmHjee9ruagoemqjOe7k+aenA0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyByZXNldFZhbGlkYXRlcygpOiB2b2lkIHsNCiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmRldGFpbHNNb2RlbCkuZm9yRWFjaCgoZGV0YWlsOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghT2JqZWN0LmlzKGRldGFpbC5kZXRhaWxUeXBlLCAnRk9STUlURU0nKSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IGZvcm1JdGVtOiBGb3JtSXRlbU1vZGVsID0gZGV0YWlsOw0KICAgICAgICAgICAgZm9ybUl0ZW0uc2V0RXJyb3IoJycpOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDloavlhYXmoKHpqoznu5Pmnpwg77yI5ZCO5Y+w77yJDQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBmaWVsZEVycm9ycw0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZmlsbFZhbGlkYXRlcyhmaWVsZEVycm9yczogYW55W10pOiB2b2lkIHsNCiAgICAgICAgZmllbGRFcnJvcnMuZm9yRWFjaCgoZXJyb3I6IGFueSkgPT4gew0KICAgICAgICAgICAgY29uc3QgZm9ybUl0ZW06IEZvcm1JdGVtTW9kZWwgPSB0aGlzLmRldGFpbHNNb2RlbFtlcnJvci5maWVsZF07DQogICAgICAgICAgICBpZiAoIWZvcm1JdGVtKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIGZvcm1JdGVtLnNldEVycm9yKGVycm9yLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOihqOWNleagoemqjOeKtuaAgQ0KICAgICAqDQogICAgICogQHJldHVybnMge2Jvb2xlYW59IA0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZm9ybVZhbGlkYXRlU3RhdHVzKCk6IGJvb2xlYW4gew0KICAgICAgICBjb25zdCBmb3JtOiBhbnkgPSB0aGlzLiRyZWZzLmZvcm07DQogICAgICAgIGxldCB2YWxpZGF0ZXN0YXRlOiBib29sZWFuID0gdHJ1ZTsNCiAgICAgICAgZm9ybS52YWxpZGF0ZSgodmFsaWQ6IGJvb2xlYW4pID0+IHsNCiAgICAgICAgICAgIHZhbGlkYXRlc3RhdGUgPSB2YWxpZCA/IHRydWUgOiBmYWxzZTsNCiAgICAgICAgfSk7DQogICAgICAgIHJldHVybiB2YWxpZGF0ZXN0YXRlDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6I635Y+W5YWo6YOo5YC8DQogICAgICoNCiAgICAgKiBAcmV0dXJucyB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGdldFZhbHVlcygpOiBhbnkgew0KICAgICAgICByZXR1cm4gdGhpcy5kYXRhOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOihqOWNlemhueWAvOWPmOabtA0KICAgICAqDQogICAgICogQHBhcmFtIHt7IG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSB9fSAkZXZlbnQNCiAgICAgKiBAcmV0dXJucyB7dm9pZH0NCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIG9uRm9ybUl0ZW1WYWx1ZUNoYW5nZSgkZXZlbnQ6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogYW55IH0pOiB2b2lkIHsNCiAgICAgICAgaWYgKCEkZXZlbnQpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoISRldmVudC5uYW1lIHx8IE9iamVjdC5pcygkZXZlbnQubmFtZSwgJycpIHx8ICF0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkoJGV2ZW50Lm5hbWUpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kYXRhWyRldmVudC5uYW1lXSA9ICRldmVudC52YWx1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDorr7nva7mlbDmja7pobnlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lDQogICAgICogQHBhcmFtIHsqfSB2YWx1ZQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc2V0RGF0YUl0ZW1WYWx1ZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHsNCiAgICAgICAgaWYgKCFuYW1lIHx8IE9iamVjdC5pcyhuYW1lLCAnJykgfHwgIXRoaXMuZGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmIChPYmplY3QuaXModGhpcy5kYXRhW25hbWVdLCB2YWx1ZSkpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmRhdGFbbmFtZV0gPSB2YWx1ZTsNCiAgICB9DQoNCg0KDQogICAgLyoqDQogICAgICog5YiG57uE55WM6Z2i6KGM5Li65LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZ3JvdXBVSUFjdGlvbkNsaWNrKCRldmVudDogYW55KTogdm9pZCB7DQogICAgICAgIGlmICghJGV2ZW50KSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgaXRlbTphbnkgPSAkZXZlbnQuaXRlbTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBWdWXlo7DmmI7lkajmnJ8o5aSE55CG57uE5Lu255qE6L6T5YWl5bGe5oCnKQ0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjcmVhdGVkKCk6IHZvaWQgew0KICAgICAgICB0aGlzLmFmdGVyQ3JlYXRlZCgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaJp+ihjGNyZWF0ZWTlkI7nmoTpgLvovpENCiAgICAgKg0KICAgICAqICBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovICAgIA0KICAgIHB1YmxpYyBhZnRlckNyZWF0ZWQoKXsNCiAgICAgICAgaWYgKHRoaXMudmlld1N0YXRlKSB7DQogICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZUV2ZW50ID0gdGhpcy52aWV3U3RhdGUuc3Vic2NyaWJlKCh7IHRhZywgYWN0aW9uLCBkYXRhIH0pID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5pcyh0YWcsIHRoaXMubmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdhdXRvbG9hZCcsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRvTG9hZChkYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygnbG9hZCcsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkKGRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdsb2FkZHJhZnQnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY29udGV4dC5zcmZzb3VyY2VrZXkpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5KHRoaXMuY29udGV4dC5zcmZzb3VyY2VrZXkpOw0KICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERyYWZ0KGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaXMoJ3NhdmUnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZShkYXRhLGRhdGEuc2hvd1Jlc3VsdEluZm8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdyZW1vdmUnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdzYXZlYW5kZXhpdCcsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQW5kRXhpdChkYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygnc2F2ZWFuZG5ldycsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQW5kTmV3KGRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdyZW1vdmVhbmRleGl0JywgYWN0aW9uKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFuZEV4aXQoZGF0YSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaXMoJ3JlZnJlc2gnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaChkYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmRhdGFDaGFuZw0KICAgICAgICAgICAgLnBpcGUoDQogICAgICAgICAgICAgICAgZGVib3VuY2VUaW1lKDMwMCksDQogICAgICAgICAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKQ0KICAgICAgICAgICAgKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dG9zYXZlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b1NhdmUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSAhT2JqZWN0LmlzKEpTT04uc3RyaW5naWZ5KHRoaXMub2xkRGF0YSksIEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSkpID8gdHJ1ZSA6IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndmlld2FjdGlvbi9zZXRWaWV3RGF0YUNoYW5nZScsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnLCB2aWV3ZGF0YWNoYW5nZTogc3RhdGUgfSk7DQogICAgICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiB2dWUg55Sf5ZG95ZGo5pyfDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGRlc3Ryb3llZCgpIHsNCiAgICAgICAgdGhpcy5hZnRlckRlc3Ryb3koKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmiafooYxkZXN0cm95ZWTlkI7nmoTpgLvovpENCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgYWZ0ZXJEZXN0cm95KCkgew0KICAgICAgICBpZiAodGhpcy52aWV3U3RhdGVFdmVudCkgew0KICAgICAgICAgICAgdGhpcy52aWV3U3RhdGVFdmVudC51bnN1YnNjcmliZSgpOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmRhdGFDaGFuZ0V2ZW50KSB7DQogICAgICAgICAgICB0aGlzLmRhdGFDaGFuZ0V2ZW50LnVuc3Vic2NyaWJlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmi7fotJ3lhoXlrrkNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW2FyZz17fV0NCiAgICAgKiBAbWVtYmVyb2YgQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjb3B5KHNyZmtleTogc3RyaW5nKTogdm9pZCB7DQogICAgICAgIGxldCBjb3B5RGF0YSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q29weURhdGEoc3Jma2V5KTsNCiAgICAgICAgY29weURhdGEuc3Jma2V5ID0gVXRpbC5jcmVhdGVVVUlEKCk7DQogICAgICAgIGNvcHlEYXRhLnBpbWV4aXRhbmRlbnRyeSA9IGNvcHlEYXRhLnNyZmtleTsNCiAgICAgICAgY29weURhdGEucGltZXhpdGFuZGVudHJ5aWQgPSBjb3B5RGF0YS5zcmZrZXk7DQogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb250ZXh0LHtwaW1leGl0YW5kZW50cnk6Y29weURhdGEucGltZXhpdGFuZGVudHJ5fSkNCiAgICAgICAgdGhpcy5kYXRhID0gY29weURhdGE7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ2xvYWQnLCBkYXRhOiBjb3B5RGF0YSB9KTsNCiAgICAgICAgICB0aGlzLmRhdGEuc3JmdWYgPSAnMCc7DQogICAgICAgICAgdGhpcy5zZXRGb3JtRW5hYmxlQ29uZCh0aGlzLmRhdGEpOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKuaJk+WNsA0KICAgICAqQG1lbWJlcm9mIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcHJpbnQoKXsNCiAgICAgICAgbGV0IF90aGlzOmFueSA9IHRoaXM7DQogICAgICAgIF90aGlzLiRwcmludCh7aWQ6J3BpbWV4aXRhbmRlbnRyeV95Z2NnaicscG9wVGl0bGU6J+WboOWFrOWHuuWbveWigyd9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7bliLfmlrANCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIHJlZnJlc2goYXJnczogYW55W10pOiB2b2lkIHsNCiAgICAgICAgbGV0IGFyZzogYW55ID0ge307DQogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLGFyZ3NbMF0pOw0KICAgICAgICBpZiAodGhpcy5kYXRhLnNyZmtleSAmJiAhT2JqZWN0LmlzKHRoaXMuZGF0YS5zcmZrZXksICcnKSkgew0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHsgc3Jma2V5OiB0aGlzLmRhdGEuc3Jma2V5IH0pOw0KICAgICAgICAgICAgdGhpcy5sb2FkKGFyZyk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMuZGF0YS5zcmZrZXlzICYmICFPYmplY3QuaXModGhpcy5kYXRhLnNyZmtleXMsICcnKSkgew0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHsgc3Jma2V5OiB0aGlzLmRhdGEuc3Jma2V5cyB9KTsNCiAgICAgICAgICAgIHRoaXMubG9hZChhcmcpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6Ieq5Yqo5Yqg6L29DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFthcmc9e31dDQogICAgICogQHJldHVybnMge3ZvaWR9DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBhdXRvTG9hZChhcmc6IGFueSA9IHt9KTogdm9pZCB7DQogICAgICAgIGlmIChhcmcuc3Jma2V5ICYmICFPYmplY3QuaXMoYXJnLnNyZmtleSwgJycpKSB7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgeyBzcmZrZXk6IGFyZy5zcmZrZXkgfSk7DQogICAgICAgICAgICB0aGlzLmxvYWQoYXJnKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYXJnLnNyZmtleXMgJiYgIU9iamVjdC5pcyhhcmcuc3Jma2V5cywgJycpKSB7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgeyBzcmZrZXk6IGFyZy5zcmZrZXlzIH0pOw0KICAgICAgICAgICAgdGhpcy5sb2FkKGFyZyk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5sb2FkRHJhZnQoYXJnKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDliqDovb0NCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0geyp9IFtvcHQ9e31dDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBsb2FkKG9wdDogYW55ID0ge30pOiB2b2lkIHsNCiAgICAgICAgaWYoIXRoaXMubG9hZEFjdGlvbil7DQogICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICdQSU1FWElUQU5ERU5UUllZR0NHSlhKRWRpdFZpZXfop4blm77ooajljZVsb2FkQWN0aW9u5Y+C5pWw5pyq6YWN572uJyB9KTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBhcmc6IGFueSA9IHsgLi4ub3B0IH07DQogICAgICAgIGxldCB2aWV3cGFyYW1SZXN1bHQ6YW55ID0gT2JqZWN0LmFzc2lnbihhcmcsdGhpcy52aWV3cGFyYW1zKTsNCiAgICAgICAgY29uc3QgZ2V0OiBQcm9taXNlPGFueT4gPSB0aGlzLnNlcnZpY2UuZ2V0KHRoaXMubG9hZEFjdGlvbixKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLHt2aWV3cGFyYW1zOnZpZXdwYXJhbVJlc3VsdH0sIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOw0KICAgICAgICBnZXQudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgICAgdGhpcy5vbkZvcm1Mb2FkKGRhdGEsJ2xvYWQnKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2FkJywgZGF0YSk7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ2xvYWQnLCBkYXRhOiBkYXRhIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn57O757uf5byC5bi4JyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWKoOi9veiNieeovw0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbb3B0PXt9XQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgbG9hZERyYWZ0KG9wdDogYW55ID0ge30pOiB2b2lkIHsNCiAgICAgICAgaWYoIXRoaXMubG9hZGRyYWZ0QWN0aW9uKXsNCiAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ1BJTUVYSVRBTkRFTlRSWVlHQ0dKWEpFZGl0Vmlld+inhuWbvuihqOWNlWxvYWRkcmFmdEFjdGlvbuWPguaVsOacqumFjee9ricgfSk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgYXJnOiBhbnkgPSB7IC4uLm9wdCB9IDsNCiAgICAgICAgbGV0IHZpZXdwYXJhbVJlc3VsdDphbnkgPSBPYmplY3QuYXNzaWduKGFyZyx0aGlzLnZpZXdwYXJhbXMpOw0KICAgICAgICBsZXQgcG9zdDogUHJvbWlzZTxhbnk+ID0gdGhpcy5zZXJ2aWNlLmxvYWREcmFmdCh0aGlzLmxvYWRkcmFmdEFjdGlvbixKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLHt2aWV3cGFyYW1zOnZpZXdwYXJhbVJlc3VsdH0sIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOw0KICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICBpZihkYXRhLnBpbWV4aXRhbmRlbnRyeSl7DQogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbnRleHQse3BpbWV4aXRhbmRlbnRyeTpkYXRhLnBpbWV4aXRhbmRlbnRyeX0pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnJlc2V0RHJhZnRGb3JtU3RhdGVzKCk7DQogICAgICAgICAgICB0aGlzLm9uRm9ybUxvYWQoZGF0YSwnbG9hZERyYWZ0Jyk7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2FkJywgZGF0YSk7DQogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdsb2FkJywgZGF0YTogZGF0YSB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZm9ybTogYW55ID0gdGhpcy4kcmVmcy5mb3JtOw0KICAgICAgICAgICAgICAgIGlmIChmb3JtKSB7DQogICAgICAgICAgICAgICAgICAgIGZvcm0uZmllbGRzLmZvckVhY2goKGZpZWxkOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnZhbGlkYXRlTWVzc2FnZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQudmFsaWRhdGVTdGF0ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQudmFsaWRhdGVTdGF0dXMgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pLmNhdGNoKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn57O757uf5byC5bi4JyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiHquWKqOS/neWtmA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbb3B0PXt9XQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgYXV0b1NhdmUob3B0OiBhbnkgPSB7fSk6IHZvaWQgew0KICAgICAgICBpZiAoIXRoaXMuZm9ybVZhbGlkYXRlU3RhdHVzKCkpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBhcmc6IGFueSA9IHsgLi4ub3B0IH07DQogICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldFZhbHVlcygpOw0KICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgZGF0YSk7DQogICAgICAgIGNvbnN0IGFjdGlvbjogYW55ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJykgPyB0aGlzLnVwZGF0ZUFjdGlvbiA6IHRoaXMuY3JlYXRlQWN0aW9uOw0KICAgICAgICBpZighYWN0aW9uKXsNCiAgICAgICAgICAgIGxldCBhY3Rpb25OYW1lOmFueSA9IE9iamVjdC5pcyhkYXRhLnNyZnVmLCAnMScpPyJ1cGRhdGVBY3Rpb24iOiJjcmVhdGVBY3Rpb24iOw0KICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAnUElNRVhJVEFOREVOVFJZWUdDR0pYSkVkaXRWaWV36KeG5Zu+6KGo5Y2VJythY3Rpb25OYW1lKyflj4LmlbDmnKrphY3nva4nIH0pOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICBjb25zdCBwb3N0OiBQcm9taXNlPGFueT4gPSB0aGlzLnNlcnZpY2UuYWRkKGFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOw0KICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICB0aGlzLm9uRm9ybUxvYWQoZGF0YSwnYXV0b1NhdmUnKTsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NhdmUnLCBkYXRhKTsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd2aWV3YWN0aW9uL2RhdGFzYXZlZCcsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnIH0pOw0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybVN0YXRlLm5leHQoeyB0eXBlOiAnc2F2ZScsIGRhdGE6IGRhdGEgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDkv53lrZgNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW29wdD17fV0NCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzaG93UmVzdWx0SW5mb10gDQogICAgICogQHBhcmFtIHtib29sZWFufSBbaWZTdGF0ZU5leHRdIGZvcm1TdGF0ZeaYr+WQpuS4i+WPkemAmuefpQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBhc3luYyBzYXZlKG9wdDogYW55ID0ge30sIHNob3dSZXN1bHRJbmZvPzogYm9vbGVhbiwgaWZTdGF0ZU5leHQ6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxhbnk+IHsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSA9PiB7DQogICAgICAgICAgICBzaG93UmVzdWx0SW5mbyA9IHNob3dSZXN1bHRJbmZvID09PSB1bmRlZmluZWQgPyB0cnVlIDogZmFsc2U7DQogICAgICAgICAgICBpZiAoIXRoaXMuZm9ybVZhbGlkYXRlU3RhdHVzKCkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICflgLzop4TliJnmoKHpqozlvILluLgnIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IGFyZzogYW55ID0geyAuLi5vcHQgfTsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldFZhbHVlcygpOw0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIGRhdGEpOw0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHRoaXMuY29udGV4dCk7DQogICAgICAgICAgICBpZiAoaWZTdGF0ZU5leHQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRyY291bnRlciA9IDA7DQogICAgICAgICAgICAgICAgaWYodGhpcy5kcmNvdW50ZXIgIT09IDApew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRyc2F2ZW9wdCA9IG9wdDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdiZWZvcmVzYXZlJywgZGF0YTogYXJnIH0pOy8v5YWI6YCa55+l5YWz57O755WM6Z2i5L+d5a2YDQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXRlID0gcmVzb2x2ZTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IGFjdGlvbjogYW55ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJykgPyB0aGlzLnVwZGF0ZUFjdGlvbiA6IHRoaXMuY3JlYXRlQWN0aW9uOw0KICAgICAgICAgICAgaWYoIWFjdGlvbil7DQogICAgICAgICAgICAgICAgbGV0IGFjdGlvbk5hbWU6YW55ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJyk/InVwZGF0ZUFjdGlvbiI6ImNyZWF0ZUFjdGlvbiI7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAnUElNRVhJVEFOREVOVFJZWUdDR0pYSkVkaXRWaWV36KeG5Zu+6KGo5Y2VJythY3Rpb25OYW1lKyflj4LmlbDmnKrphY3nva4nIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICAgICAgY29uc3QgcG9zdDogUHJvbWlzZTxhbnk+ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJyk/dGhpcy5zZXJ2aWNlLnVwZGF0ZShhY3Rpb24sIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksYXJnLCB0aGlzLnNob3dCdXN5SW5kaWNhdG9yKTp0aGlzLnNlcnZpY2UuYWRkKGFjdGlvbixKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcik7DQogICAgICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgIHRoaXMub25Gb3JtTG9hZChkYXRhLCdzYXZlJyk7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2F2ZScsIGRhdGEpOw0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd2aWV3YWN0aW9uL2RhdGFzYXZlZCcsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdzYXZlJywgZGF0YTogZGF0YSB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAoc2hvd1Jlc3VsdEluZm8pIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLnN1Y2Nlc3MoeyB0aXRsZTogJycsIGRlc2M6IChkYXRhLnNyZm1ham9ydGV4dCA/IGRhdGEuc3JmbWFqb3J0ZXh0IDogJycpICsgJyZuYnNwO+S/neWtmOaIkOWKn++8gScgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICfns7vnu5/lvILluLgnIH0pOw0KICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIOWIoOmZpA0KICAgICoNCiAgICAqIEBwdWJsaWMNCiAgICAqIEBwYXJhbSB7Kn0gW29wdD17fV0NCiAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAqLw0KICAgIHB1YmxpYyByZW1vdmUob3B0OkFycmF5PGFueT4gPSBbXSxzaG93UmVzdWx0SW5mbz86IGJvb2xlYW4pOiBQcm9taXNlPGFueT4gew0KICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmU6IGFueSwgcmVqZWN0OiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmKCF0aGlzLnJlbW92ZUFjdGlvbil7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAnUElNRVhJVEFOREVOVFJZWUdDR0pYSkVkaXRWaWV36KeG5Zu+6KGo5Y2VcmVtb3ZlQWN0aW9u5Y+C5pWw5pyq6YWN572uJyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBhcmc6IGFueSA9IG9wdFswXTsNCiAgICAgICAgICAgIGNvbnN0IF90aGlzOiBhbnkgPSB0aGlzOw0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcse3ZpZXdwYXJhbXM6dGhpcy52aWV3cGFyYW1zfSk7DQogICAgICAgICAgICB0aGlzLnNlcnZpY2UuZGVsZXRlKF90aGlzLnJlbW92ZUFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHNob3dSZXN1bHRJbmZvKS50aGVuKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdyZW1vdmUnLGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ3JlbW92ZScsIGRhdGE6IGRhdGEgfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5pc21vZGlmeSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2Uuc3VjY2Vzcyh7IHRpdGxlOiAnJywgZGVzYzogKGRhdGEuc3JmbWFqb3J0ZXh0ID8gZGF0YS5zcmZtYWpvcnRleHQgOiAnJykgKyAnJm5ic3A75Yig6Zmk5oiQ5Yqf77yBJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IF9kYXRhIH0gPSBlcnJvcjsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogX2RhdGEudGl0bGUsIGRlc2M6IF9kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlt6XkvZzmtYHlkK/liqgNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHsqfSBbbG9jYWxkYXRhPXt9XQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBhc3luYyB3ZnN0YXJ0KGRhdGE6IGFueSxsb2NhbGRhdGE/OmFueSk6IFByb21pc2U8YW55PiB7DQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkgPT4gew0KICAgICAgICAgICAgY29uc3QgX3RoaXM6IGFueSA9IHRoaXM7DQogICAgICAgICAgICBjb25zdCBwb3N0OiBQcm9taXNlPGFueT4gPSBfdGhpcy5zYXZlKHt9LGZhbHNlKTsNCiAgICAgICAgICAgIHBvc3QudGhlbigocmVzcG9uc2U6YW55KSA9PnsNCiAgICAgICAgICAgICAgICBjb25zdCBhcmc6YW55ID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgICAgICBpZih0aGlzLnZpZXdwYXJhbXMpew0KICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZyx7dmlld3BhcmFtczp0aGlzLnZpZXdwYXJhbXN9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0OiBQcm9taXNlPGFueT4gPSB0aGlzLnNlcnZpY2Uud2ZzdGFydChfdGhpcy5XRlN0YXJ0QWN0aW9uLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcixsb2NhbGRhdGEpOw0KICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAnJywgZGVzYzogJ+W3peS9nOa1geWQr+WKqOWksei0pSwgJyArIHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuaW5mbyh7IHRpdGxlOiAnJywgZGVzYzogJ+W3peS9nOa1geWQr+WKqOaIkOWKnycgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICfns7vnu5/lvILluLgnIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5bel5L2c5rWB5o+Q5LqkDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFtkYXRhPXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gW2xvY2FsZGF0YT17fV0NCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgYXN5bmMgd2ZzdWJtaXQoZGF0YTogYW55LGxvY2FsZGF0YT86YW55KTogUHJvbWlzZTxhbnk+IHsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSA9PiB7DQogICAgICAgIGNvbnN0IF90aGlzOiBhbnkgPSB0aGlzOw0KICAgICAgICBjb25zdCBhcmc6IGFueSA9IGRhdGFbMF07DQogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICBpZiAoIWFyZy5waW1leGl0YW5kZW50cnkgfHwgT2JqZWN0LmlzKGFyZy5waW1leGl0YW5kZW50cnksICcnKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IHBvc3Q6IFByb21pc2U8YW55PiA9IE9iamVjdC5pcyhhcmcuc3JmdWYsICcxJyk/dGhpcy5zZXJ2aWNlLnVwZGF0ZSh0aGlzLnVwZGF0ZUFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOnRoaXMuc2VydmljZS5hZGQodGhpcy5jcmVhdGVBY3Rpb24sSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOw0KICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOmFueSkgPT57DQogICAgICAgICAgICAgICAgY29uc3QgYXJnOmFueSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgICAgLy8g5L+d5a2Y5a6M5oiQVUnlpITnkIYNCiAgICAgICAgICAgICAgICB0aGlzLm9uRm9ybUxvYWQoYXJnLCdzYXZlJyk7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2F2ZScsIGFyZyk7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ3NhdmUnLCBkYXRhOiBhcmcgfSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgLy8g5YeG5aSH5o+Q5Lqk5Y+C5pWwDQogICAgICAgICAgICAgICAgaWYodGhpcy52aWV3cGFyYW1zKXsNCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcse3ZpZXdwYXJhbXM6dGhpcy52aWV3cGFyYW1zfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIOW8uuWItuihpeWFhXNyZndmbWVtbw0KICAgICAgICAgICAgICAgIGlmKHRoaXMuc3Jmd2ZtZW1vKXsNCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcse3NyZndmbWVtbzp0aGlzLnNyZndmbWVtb30pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQ6IFByb21pc2U8YW55PiA9IHRoaXMuc2VydmljZS53ZnN1Ym1pdChfdGhpcy5XRlN1Ym1pdEFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IsbG9jYWxkYXRhKTsNCiAgICAgICAgICAgICAgICByZXN1bHQudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJycsIGRlc2M6ICflt6XkvZzmtYHmj5DkuqTlpLHotKUsICcgKyByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZvcm1Mb2FkKGFyZywnc3VibWl0Jyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd2aWV3YWN0aW9uL2RhdGFzYXZlZCcsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnIH0pOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuaW5mbyh7IHRpdGxlOiAnJywgZGVzYzogJ+W3peS9nOa1geaPkOS6pOaIkOWKnycgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICfns7vnu5/lvILluLgnIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDooajljZXpobnmm7TmlrANCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIOeVjOmdouihjOS4uuWQjeensA0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dIOivt+axguaVsOaNrg0KICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHVwZGF0ZURldGFpbHMg5pu05paw6aG5DQogICAgICogQHBhcmFtIHtib29sZWFufSBbc2hvd2xvYWRpbmddIOaYr+WQpuaYvuekuuWKoOi9veeKtuaAgQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgdXBkYXRlRm9ybUl0ZW1zKG1vZGU6IHN0cmluZywgZGF0YTogYW55ID0ge30sIHVwZGF0ZURldGFpbHM6IHN0cmluZ1tdLCBzaG93bG9hZGluZz86IGJvb2xlYW4pOiB2b2lkIHsNCiAgICAgICAgaWYgKCFtb2RlIHx8IChtb2RlICYmIE9iamVjdC5pcyhtb2RlLCAnJykpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgYXJnOiBhbnkgPSB7IC4uLmRhdGEgfTsNCiAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsdGhpcy52aWV3cGFyYW1zKTsNCiAgICAgICAgY29uc3QgcG9zdDogUHJvbWlzZTxhbnk+ID0gdGhpcy5zZXJ2aWNlLmZyb250TG9naWMobW9kZSxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLGFyZywgc2hvd2xvYWRpbmcpOw0KICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICfooajljZXpobnmm7TmlrDlpLHotKUnIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgY29uc3QgX2RhdGE6IGFueSA9IHt9Ow0KICAgICAgICAgICAgdXBkYXRlRGV0YWlscy5mb3JFYWNoKChuYW1lOiBzdHJpbmcpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKF9kYXRhLCB7IFtuYW1lXTogZGF0YVtuYW1lXSB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGhpcy5zZXRGb3JtRW5hYmxlQ29uZChfZGF0YSk7DQogICAgICAgICAgICB0aGlzLmZpbGxGb3JtKF9kYXRhLCd1cGRhdGVGb3JtSXRlbScpOw0KICAgICAgICAgICAgdGhpcy5mb3JtTG9naWMoeyBuYW1lOiAnJywgbmV3VmFsOiBudWxsLCBvbGRWYWw6IG51bGwgfSk7DQogICAgICAgICAgICB0aGlzLmRhdGFDaGFuZy5uZXh0KEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSkpOw0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybVN0YXRlLm5leHQoeyB0eXBlOiAndXBkYXRlZm9ybWl0ZW0nLCB1Zmltb2RlOiBhcmcuc3JmdWZpbW9kZSwgZGF0YTogX2RhdGEgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlm57ovabkuovku7YNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gJGV2ZW50DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBvbkVudGVyKCRldmVudDogYW55KTogdm9pZCB7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5L+d5a2Y5bm26YCA5Ye6DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzDQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBzYXZlQW5kRXhpdChkYXRhOmFueVtdKTpQcm9taXNlPGFueT57DQogICAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkgPT57DQogICAgICAgICAgICBsZXQgYXJnOiBhbnkgPSB7fTsNCiAgICAgICAgICAgIGlmKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKXsNCiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZyxkYXRhWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF90aGlzLmN1cnJlbnRBY3Rpb24gPSAic2F2ZUFuZEV4aXQiOw0KICAgICAgICAgICAgX3RoaXMuc2F2ZShbYXJnXSkudGhlbigocmVzKSA9PnsNCiAgICAgICAgICAgICAgICBpZihyZXMpew0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZVZpZXcocmVzLmRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7DQogICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+ew0KICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOS/neWtmOW5tuaWsOW7ug0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc2F2ZUFuZE5ldyhkYXRhOmFueVtdKTpQcm9taXNlPGFueT57DQogICAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkgPT57DQogICAgICAgICAgICBsZXQgYXJnOiBhbnkgPSB7fTsNCiAgICAgICAgICAgIGlmKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKXsNCiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZyxkYXRhWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF90aGlzLmN1cnJlbnRBY3Rpb24gPSAic2F2ZUFuZE5ldyI7DQogICAgICAgICAgICBfdGhpcy5zYXZlKFthcmddKS50aGVuKChyZXMpID0+ew0KICAgICAgICAgICAgICAgIF90aGlzLlJlc2V0RGF0YShyZXMpOw0KICAgICAgICAgICAgICAgIF90aGlzLmxvYWREcmFmdCh7fSk7DQogICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+ew0KICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWIoOmZpOW5tumAgOWHug0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVtb3ZlQW5kRXhpdChkYXRhOmFueVtdKTpQcm9taXNlPGFueT57DQogICAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkgPT57DQogICAgICAgICAgICBsZXQgYXJnOiBhbnkgPSB7fTsNCiAgICAgICAgICAgIGlmKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKXsNCiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZyxkYXRhWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF90aGlzLnJlbW92ZShbYXJnXSkudGhlbigocmVzKSA9PnsNCiAgICAgICAgICAgICAgICBpZihyZXMpew0KICAgICAgICAgICAgICAgICAgX3RoaXMuY2xvc2VWaWV3KHJlcy5kYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpOw0KICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PnsNCiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIOWFs+ezu+eVjOmdouaVsOaNruS/neWtmOWujOaIkA0KICAgICoNCiAgICAqIEBwYXJhbSB7YW55fSAkZXZlbnQNCiAgICAqIEBtZW1iZXJvZiBZR0NHSkJhc2UNCiAgICAqLw0KICAgIHB1YmxpYyBkcmRhdGFzYXZlZCgkZXZlbnQ6YW55KXsNCiAgICAgICAgbGV0IF90aGlzID0gdGhpczsNCiAgICAgICAgdGhpcy5kcmNvdW50ZXItLTsNCiAgICAgICAgaWYodGhpcy5kcmNvdW50ZXIgPT09IDApew0KICAgICAgICAgICAgdGhpcy5zYXZlKHRoaXMuZHJzYXZlb3B0LCB1bmRlZmluZWQsIGZhbHNlKS50aGVuKChyZXMpID0+ew0KICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXRlKHJlcyk7DQogICAgICAgICAgICAgICAgdGhpcy5kcnNhdmVvcHQgPSB7fTsNCiAgICAgICAgICAgICAgICBpZihPYmplY3QuaXMoX3RoaXMuY3VycmVudEFjdGlvbiwgInNhdmVBbmROZXciKSl7DQogICAgICAgICAgICAgICAgICAgIF90aGlzLlJlc2V0RGF0YShyZXMpOw0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkRHJhZnQoe30pOw0KICAgICAgICAgICAgICAgIH1lbHNlIGlmKE9iamVjdC5pcyhfdGhpcy5jdXJyZW50QWN0aW9uLCAic2F2ZUFuZEV4aXQiKSl7DQogICAgICAgICAgICAgICAgICAgIGlmKHJlcyl7DQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZVZpZXcocmVzLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmlrDlu7rpu5jorqTlgLwNCiAgICAgKiBAbWVtYmVyb2YgWUdDR0pCYXNlDQogICAgICovDQogICAgcHVibGljIGNyZWF0ZURlZmF1bHQoKXsgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICBpZiAodGhpcy5kYXRhLmhhc093blByb3BlcnR5KCdwaW1wZXJzb25pZCcpKSB7DQogICAgICAgICAgICB0aGlzLmRhdGFbJ3BpbXBlcnNvbmlkJ10gPSB0aGlzLmNvbnRleHRbJ1NSRlBFUlNPTklEJ107DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMuZGF0YS5oYXNPd25Qcm9wZXJ0eSgncGltcGVyc29ubmFtZScpKSB7DQogICAgICAgICAgICB0aGlzLmRhdGFbJ3BpbXBlcnNvbm5hbWUnXSA9IHRoaXMuY29udGV4dFsnU1JGVVNFUk5BTUUnXTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5kYXRhLmhhc093blByb3BlcnR5KCdseCcpKSB7DQogICAgICAgICAgICB0aGlzLmRhdGFbJ2x4J10gPSAnMTAnOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkoJ3dvcmtmbG93c3RhdGUnKSkgew0KICAgICAgICAgICAgdGhpcy5kYXRhWyd3b3JrZmxvd3N0YXRlJ10gPSAnMTAnOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5pu05paw6buY6K6k5YC8DQogICAgICogQG1lbWJlcm9mIFlHQ0dKQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyB1cGRhdGVEZWZhdWx0KCl7ICAgICAgICAgICAgICAgICAgICANCiAgICB9DQoNCiAgICANCn0NCg=="},null]}