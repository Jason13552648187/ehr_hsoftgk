{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\components\\app-picker\\app-picker.vue?vue&type=script&lang=ts&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\components\\app-picker\\app-picker.vue","mtime":1630509408738},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUsIFByb3AsIE1vZGVsLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOw0KaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnOw0KaW1wb3J0IHsgQXBwTW9kYWwgfSBmcm9tICdAL3V0aWxzJzsNCg0KQENvbXBvbmVudCh7DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwUGlja2VyIGV4dGVuZHMgVnVlIHsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvuS4iuS4i+aWhw0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIEFwcEZvcm1EUlVJUGFydA0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGNvbnRleHQhOiBhbnk7DQoNCiAgICAvKioNCiAgICAgKiDop4blm77lj4LmlbANCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBBcHBGb3JtRFJVSVBhcnQNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyB2aWV3cGFyYW1zITogYW55Ow0KDQogICAgLyoqDQogICAgICogQUPlj4LmlbANCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBBcHBGb3JtRFJVSVBhcnQNCiAgICAgKi8NCiAgICBAUHJvcCh7ZGVmYXVsdDogKCkgPT4ge319KSBwdWJsaWMgYWNQYXJhbXM/OiBhbnk7DQoNCiAgICAvKioNCiAgICAgKiDooajljZXmnI3liqENCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBBcHBGb3JtRFJVSVBhcnQNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBzZXJ2aWNlPzogYW55Ow0KDQogICAgLyoqDQogICAgICog5bqU55So5a6e5L2T5Li75L+h5oGv5bGe5oCn5ZCN56ewDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBBcHBBdXRvY29tcGxldGUNCiAgICAgKi8NCiAgICBAUHJvcCh7ZGVmYXVsdDogJ3NyZm1ham9ydGV4dCd9KSBwdWJsaWMgZGVNYWpvckZpZWxkITogc3RyaW5nOw0KDQogICAgLyoqDQogICAgICog5bqU55So5a6e5L2T5Li76ZSu5bGe5oCn5ZCN56ewDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBBcHBBdXRvY29tcGxldGUNCiAgICAgKi8NCiAgICBAUHJvcCh7ZGVmYXVsdDogJ3NyZmtleSd9KSBwdWJsaWMgZGVLZXlGaWVsZCE6IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOihqOWNleaVsOaNrg0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGRhdGEhOiBhbnk7DQoNCiAgICAvKioNCiAgICAgKiDlsZ7mgKfpobnlkI3np7ANCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIG5hbWUhOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDmmK/lkKblkK/nlKgNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXINCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBkaXNhYmxlZD86IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDnsbvlnosNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGVkaXRvcnR5cGU/OiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDop4blm77lj4LmlbDvvIjlpoLvvJrop4blm75uYW1l77yMdGl0bGXvvIx3aWR0aO+8jGhlaWdodO+8iQ0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHBpY2t1cFZpZXc/OiBhbnk7DQoNCiAgICAvKioNCiAgICAgKiDmlbDmja7pk77mjqXlj4LmlbANCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXINCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBsaW5rdmlldz86IGFueTsNCg0KICAgIC8qKg0KICAgICAqIOWxgOmDqOS4iuS4i+aWh+WvvOiIquWPguaVsA0KICAgICAqIA0KICAgICAqIEB0eXBlIHthbnl9DQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGxvY2FsQ29udGV4dCE6YW55Ow0KDQogICAgLyoqDQogICAgICog5bGA6YOo5a+86Iiq5Y+C5pWwDQogICAgICogDQogICAgICogQHR5cGUge2FueX0NCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgbG9jYWxQYXJhbSE6YW55Ow0KDQogICAgLyoqDQogICAgICog5YC86aG55ZCN56ewDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXINCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyB2YWx1ZWl0ZW0hOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDlgLwNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXINCiAgICAgKi8NCiAgICBATW9kZWwoJ2NoYW5nZScpIHB1YmxpYyB2YWx1ZT86IGFueTsNCg0KICAgIC8qKg0KICAgICAqIOW9k+WJjeWAvA0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHVibGljIGN1cnZhbHVlOiBzdHJpbmcgPSAnJzsNCg0KICAgIC8qKg0KICAgICAqIOS4i+aLieaVsOe7hA0KICAgICAqIEB0eXBlIHthbnlbXX0NCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHVibGljIGl0ZW1zOiBhbnlbXSA9IFtdOw0KDQogICAgLyoqIA0KICAgICAqIOS4i+aLieWbvuagh+aMh+WQkeeKtuaAgeeuoeeQhg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXIgDQogICAgICovDQogICAgcHVibGljIG9wZW46IGJvb2xlYW4gPSBmYWxzZTsNCg0KICAgIC8qKg0KICAgICAqIOi+k+WFpeeKtuaAgQ0KICAgICAqDQogICAgICogQHR5cGUge2Jvb2xlYW59DQogICAgICogQG1lbWJlcm9mIEFwcEF1dG9jb21wbGV0ZQ0KICAgICAqLw0KICAgIHB1YmxpYyBpbnB1dFN0YXRlOiBib29sZWFuID0gZmFsc2U7DQoNCiAgIC8qKg0KICAgICAqIOW9k+WJjemAieaLqeeahOWAvA0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHVibGljIHNlbGVjdFZhbHVlID0gdGhpcy52YWx1ZTsNCg0KICAgIC8qKg0KICAgICAqIOiOt+WPluWFs+iBlOaVsOaNrumhueWAvA0KICAgICAqDQogICAgICogQHJlYWRvbmx5DQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIGdldCByZWZ2YWx1ZSgpIHsNCiAgICAgICAgaWYgKHRoaXMudmFsdWVpdGVtICYmIHRoaXMuZGF0YSkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVt0aGlzLnZhbHVlaXRlbV07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRoaXMuY3VydmFsdWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5YC85Y+Y5YyWDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIEBXYXRjaCgndmFsdWUnLHtpbW1lZGlhdGU6IHRydWV9KQ0KICAgIHB1YmxpYyBvblZhbHVlQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmN1cnZhbHVlID0gbmV3VmFsOw0KICAgICAgICBpZiAoT2JqZWN0LmlzKHRoaXMuZWRpdG9ydHlwZSwgJ2Ryb3Bkb3duJykgJiYgdGhpcy52YWx1ZWl0ZW0pIHsNCiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kYXRhW3RoaXMudmFsdWVpdGVtXTsNCiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pdGVtcy5maW5kSW5kZXgoKGl0ZW06IGFueSkgPT4gT2JqZWN0LmlzKGl0ZW0udmFsdWUsIHZhbHVlKSk7DQogICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5pdGVtcyA9IFtdOw0KICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKHt0ZXh0OiBuZXdWYWwsIHZhbHVlOiB2YWx1ZX0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5vblNlYXJjaChuZXdWYWwsIG51bGwsIGZhbHNlKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIHZ1ZSDnlJ/lkb3lkajmnJ8NCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXINCiAgICAgKi8NCiAgICBwdWJsaWMgY3JlYXRlZCgpIHsNCiAgICAgICAgaWYoT2JqZWN0LmlzKHRoaXMuZWRpdG9ydHlwZSwgJ2Ryb3Bkb3duJykpew0KICAgICAgICAgICAgdGhpcy5vblNlYXJjaCgiIiwgbnVsbCwgdHJ1ZSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiB2dWUg55Sf5ZG95ZGo5pyfDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHVibGljIG1vdW50ZWQoKSB7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog57uE5Lu26ZSA5q+BDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHVibGljIGRlc3Ryb3llZCgpOiB2b2lkIHsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDkuIvmi4nliIfmjaLlm57osIMNCiAgICAgKiBAcGFyYW0gZmxhZyANCiAgICAgKi8NCiAgICBwdWJsaWMgb25TZWxlY3RPcGVuKGZsYWc6IGJvb2xlYW4pOiB2b2lkIHsNCiAgICAgICAgdGhpcy5vcGVuID0gZmxhZzsNCiAgICAgICAgaWYgKHRoaXMub3Blbikgew0KICAgICAgICAgICAgdGhpcy5vblNlYXJjaCh0aGlzLmN1cnZhbHVlLCBudWxsLCB0cnVlKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaJp+ihjOaQnOe0ouaVsOaNrg0KICAgICAqIEBwYXJhbSBxdWVyeSANCiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgDQogICAgICovDQogICAgcHVibGljIG9uU2VhcmNoKHF1ZXJ5OiBhbnksIGNhbGxiYWNrOiBhbnksIG90aGVyOiBib29sZWFuKTogdm9pZCB7DQogICAgICAgIC8vIOWFrOWFseWPguaVsOWkhOeQhg0KICAgICAgICBsZXQgZGF0YTogYW55ID0ge307DQogICAgICAgIGNvbnN0IGJjYW5jZWw6IGJvb2xlYW4gPSB0aGlzLmhhbmRsZVB1YmxpY1BhcmFtcyhkYXRhKTsNCiAgICAgICAgaWYgKCFiY2FuY2VsKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5aSE55CG5pCc57Si5Y+C5pWwDQogICAgICAgIGxldCBfY29udGV4dCA9IGRhdGEuY29udGV4dDsNCiAgICAgICAgbGV0IF9wYXJhbSA9IGRhdGEucGFyYW07DQogICAgICAgIHF1ZXJ5ID0gIXF1ZXJ5ID8gJycgOiBxdWVyeTsNCiAgICAgICAgaWYgKCF0aGlzLmlucHV0U3RhdGUgJiYgb3RoZXIgJiYgT2JqZWN0LmlzKHF1ZXJ5LCB0aGlzLnZhbHVlKSkgew0KICAgICAgICAgICAgcXVlcnkgPSAnJzsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmlucHV0U3RhdGUgPSBmYWxzZTsNCiAgICAgICAgT2JqZWN0LmFzc2lnbihfcGFyYW0sIHsgcXVlcnk6IHF1ZXJ5IH0pOw0KICAgICAgICAvLyDplJnor6/kv6Hmga/lm73pmYXljJYNCiAgICAgICAgbGV0IGVycm9yOiBzdHJpbmcgPSAodGhpcy4kdCgnY29tcG9uZW50cy5hcHBQaWNrZXIuZXJyb3InKSBhcyBhbnkpOw0KICAgICAgICBsZXQgbWlzczogc3RyaW5nID0gKHRoaXMuJHQoJ2NvbXBvbmVudHMuYXBwUGlja2VyLm1pc3MnKSBhcyBhbnkpOw0KICAgICAgICBsZXQgcmVxdWVzdEV4Y2VwdGlvbjogc3RyaW5nID0gKHRoaXMuJHQoJ2NvbXBvbmVudHMuYXBwUGlja2VyLnJlcXVlc3RFeGNlcHRpb24nKSBhcyBhbnkpOw0KICAgICAgICBpZighdGhpcy5zZXJ2aWNlKXsNCiAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiBlcnJvciwgZGVzYzogbWlzcysnc2VydmljZScgfSk7DQogICAgICAgIH0gZWxzZSBpZighdGhpcy5hY1BhcmFtcy5zZXJ2aWNlTmFtZSkgew0KICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6IGVycm9yLCBkZXNjOiBtaXNzKydzZXJ2aWNlTmFtZScgfSk7DQogICAgICAgIH0gZWxzZSBpZighdGhpcy5hY1BhcmFtcy5pbnRlcmZhY2VOYW1lKSB7DQogICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogZXJyb3IsIGRlc2M6IG1pc3MrJ2ludGVyZmFjZU5hbWUnIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuc2VydmljZS5nZXRJdGVtcyh0aGlzLmFjUGFyYW1zLnNlcnZpY2VOYW1lLHRoaXMuYWNQYXJhbXMuaW50ZXJmYWNlTmFtZSwgX2NvbnRleHQsIF9wYXJhbSkudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogZXJyb3IsIGRlc2M6IHJlcXVlc3RFeGNlcHRpb24gfSk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gWy4uLnJlc3BvbnNlXTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZih0aGlzLmFjUGFyYW1zICYmIHRoaXMubGlua3ZpZXcpew0KICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKHsgaXNOZXcgOnRydWUgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7DQogICAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLml0ZW1zKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pLmNhdGNoKChlcnJvcjogYW55KSA9PiB7DQogICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgew0KICAgICAgICAgICAgICAgICAgY2FsbGJhY2soW10pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0gDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6YCJ5Lit5pWw5o2u5Zue6LCDDQogICAgICogQHBhcmFtIGl0ZW0gDQogICAgICovDQogICAgcHVibGljIG9uQUNTZWxlY3QoaXRlbTogYW55KTogdm9pZCB7DQogICAgICAgIHRoaXMuc2VsZWN0VmFsdWUgPSBpdGVtW3RoaXMuZGVNYWpvckZpZWxkXTsNCiAgICAgICAgaWYgKHRoaXMudmFsdWVpdGVtKSB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdmb3JtaXRlbXZhbHVlY2hhbmdlJywgeyBuYW1lOiB0aGlzLnZhbHVlaXRlbSwgdmFsdWU6IGl0ZW1bdGhpcy5kZUtleUZpZWxkXSB9KTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5uYW1lKSB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdmb3JtaXRlbXZhbHVlY2hhbmdlJywgeyBuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiBpdGVtW3RoaXMuZGVNYWpvckZpZWxkXSB9KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOS4i+aLiemAieS4rQ0KICAgICAqDQogICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbA0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXINCiAgICAgKi8NCiAgICBwdWJsaWMgb25TZWxlY3QodmFsOiBzdHJpbmcpIHsNCiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5pdGVtcy5maW5kSW5kZXgoKGl0ZW0pID0+IE9iamVjdC5pcyhpdGVtW3RoaXMuZGVLZXlGaWVsZF0sIHZhbCkpOw0KICAgICAgICBpZiAoaW5kZXggPj0gMCkgew0KICAgICAgICAgICAgdGhpcy5vbkFDU2VsZWN0KHRoaXMuaXRlbXNbaW5kZXhdKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWkseWOu+eEpueCueS6i+S7tg0KICAgICAqIEBwYXJhbSBlIA0KICAgICAqLw0KICAgIHB1YmxpYyBvbkJsdXIoZTogYW55KTogdm9pZCB7DQogICAgICAgIHRoaXMuY3VydmFsdWUgPSB0aGlzLnZhbHVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOa4hemZpA0KICAgICAqLw0KICAgIHB1YmxpYyBvbkNsZWFyKCRldmVudDogYW55KTogdm9pZCB7DQogICAgICAgIGlmICh0aGlzLnZhbHVlaXRlbSkgew0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnZm9ybWl0ZW12YWx1ZWNoYW5nZScsIHsgbmFtZTogdGhpcy52YWx1ZWl0ZW0sIHZhbHVlOiAnJyB9KTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5uYW1lKSB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdmb3JtaXRlbXZhbHVlY2hhbmdlJywgeyBuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiAnJyB9KTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaJk+W8gOinhuWbvg0KICAgICAqLw0KICAgIHB1YmxpYyBvcGVuVmlldygkZXZlbnQ6IGFueSk6IHZvaWQgew0KICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIC8vIOWFrOWFseWPguaVsOWkhOeQhg0KICAgICAgICBsZXQgZGF0YTogYW55ID0ge307DQogICAgICAgIGNvbnN0IGJjYW5jZWw6IGJvb2xlYW4gPSB0aGlzLmhhbmRsZVB1YmxpY1BhcmFtcyhkYXRhKTsNCiAgICAgICAgaWYgKCFiY2FuY2VsKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5Y+C5pWw5aSE55CGDQogICAgICAgIGNvbnN0IHZpZXcgPSB7IC4uLnRoaXMucGlja3VwVmlldyB9Ow0KICAgICAgICBsZXQgX2NvbnRleHQgPSBkYXRhLmNvbnRleHQ7DQogICAgICAgIGxldCBfcGFyYW0gPSBkYXRhLnBhcmFtOw0KICAgICAgICBfcGFyYW0uc2VsZWN0ZWREYXRhID0gW3tzcmZrZXk6IHRoaXMuZGF0YVt0aGlzLnZhbHVlaXRlbV0sIHNyZm1ham9ydGV4dDogdGhpcy5jdXJ2YWx1ZSB9XTsNCiAgICAgICAgLy8g5Yik5pat5omT5byA5pa55byPDQogICAgICAgIGlmICh2aWV3LnBsYWNlbWVudCAmJiAhT2JqZWN0LmlzKHZpZXcucGxhY2VtZW50LCAnJykpIHsNCiAgICAgICAgICAgIGlmIChPYmplY3QuaXModmlldy5wbGFjZW1lbnQsICdQT1BPVkVSJykpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3BPdmVyKCRldmVudCwgdmlldywgX2NvbnRleHQsIF9wYXJhbSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMub3BlbkRyYXdlcih2aWV3LCBfY29udGV4dCwgX3BhcmFtKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMub3BlblBvcHVwTW9kYWwodmlldywgX2NvbnRleHQsIF9wYXJhbSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6Lev55Sx5qih5byP5omT5byA6KeG5Zu+DQogICAgICoNCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2aWV3cGF0aA0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YQ0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXINCiAgICAgKi8NCiAgICBwcml2YXRlIG9wZW5JbmRleFZpZXdUYWIodmlldzogYW55LCBjb250ZXh0OiBhbnksIHBhcmFtOiBhbnkpOiB2b2lkIHsNCiAgICAgICAgY29uc3Qgcm91dGVQYXRoID0gdGhpcy4kdmlld1Rvb2wuYnVpbGRVcFJvdXRlUGF0aCh0aGlzLiRyb3V0ZSwgdGhpcy5jb250ZXh0LCB2aWV3LmRlUmVzUGFyYW1ldGVycywgdmlldy5wYXJhbWV0ZXJzLCBbY29udGV4dF0gLCBwYXJhbSk7DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHJvdXRlUGF0aCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5qih5oCB5qih5byP5omT5byA6KeG5Zu+DQogICAgICoNCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqIEBwYXJhbSB7Kn0gdmlldw0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YQ0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXINCiAgICAgKi8NCiAgICBwcml2YXRlIG9wZW5Qb3B1cE1vZGFsKHZpZXc6IGFueSwgY29udGV4dDogYW55LCBwYXJhbTogYW55KTogdm9pZCB7DQogICAgICAgIGxldCBjb250YWluZXI6IFN1YmplY3Q8YW55PiA9IHRoaXMuJGFwcG1vZGFsLm9wZW5Nb2RhbCh2aWV3LCBjb250ZXh0LCBwYXJhbSk7DQogICAgICAgIGNvbnRhaW5lci5zdWJzY3JpYmUoKHJlc3VsdDogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAoIXJlc3VsdCB8fCAhT2JqZWN0LmlzKHJlc3VsdC5yZXQsICdPSycpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5vcGVuVmlld0Nsb3NlKHJlc3VsdCk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaKveWxieaooeW8j+aJk+W8gOinhuWbvg0KICAgICAqDQogICAgICogQHByaXZhdGUNCiAgICAgKiBAcGFyYW0geyp9IHZpZXcNCiAgICAgKiBAcGFyYW0geyp9IGRhdGENCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHJpdmF0ZSBvcGVuRHJhd2VyKHZpZXc6IGFueSwgY29udGV4dDogYW55LCBwYXJhbTogYW55KTogdm9pZCB7DQogICAgICAgIGxldCBjb250YWluZXI6IFN1YmplY3Q8YW55PiA9IHRoaXMuJGFwcGRyYXdlci5vcGVuRHJhd2VyKHZpZXcsIGNvbnRleHQsIHBhcmFtKTsNCiAgICAgICAgY29udGFpbmVyLnN1YnNjcmliZSgocmVzdWx0OiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzdWx0IHx8ICFPYmplY3QuaXMocmVzdWx0LnJldCwgJ09LJykpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm9wZW5WaWV3Q2xvc2UocmVzdWx0KTsNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5rCU5rOh5Y2h54mH5qih5byP5omT5byADQogICAgICoNCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqIEBwYXJhbSB7Kn0gJGV2ZW50DQogICAgICogQHBhcmFtIHsqfSB2aWV3DQogICAgICogQHBhcmFtIHsqfSBkYXRhDQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIHByaXZhdGUgb3BlblBvcE92ZXIoJGV2ZW50OiBhbnksIHZpZXc6IGFueSwgY29udGV4dDogYW55LCBwYXJhbTogYW55KTogdm9pZCB7DQogICAgICAgIGxldCBjb250YWluZXI6IFN1YmplY3Q8YW55PiA9IHRoaXMuJGFwcHBvcG92ZXIub3BlblBvcCgkZXZlbnQsIHZpZXcsIGNvbnRleHQsIHBhcmFtKTsNCiAgICAgICAgY29udGFpbmVyLnN1YnNjcmliZSgocmVzdWx0OiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzdWx0IHx8ICFPYmplY3QuaXMocmVzdWx0LnJldCwgJ09LJykpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm9wZW5WaWV3Q2xvc2UocmVzdWx0KTsNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog54us56uL6YeM6Z2i5by55Ye6DQogICAgICoNCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwNCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHJpdmF0ZSBvcGVuUG9wdXBBcHAodXJsOiBzdHJpbmcpOiB2b2lkIHsNCiAgICAgICAgd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5omT5byA6YeN5a6a5ZCR6KeG5Zu+DQogICAgICoNCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqIEBwYXJhbSB7Kn0gJGV2ZW50DQogICAgICogQHBhcmFtIHsqfSB2aWV3DQogICAgICogQHBhcmFtIHsqfSBkYXRhDQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIHByaXZhdGUgb3BlblJlZGlyZWN0VmlldygkZXZlbnQ6IGFueSwgdmlldzogYW55LCBkYXRhOiBhbnkpOiB2b2lkIHsNCiAgICAgICAgdGhpcy4kaHR0cC5nZXQodmlldy51cmwsIGRhdGEpLnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogKHRoaXMuJHQoJ2NvbXBvbmVudHMuYXBwUGlja2VyLmVycm9yJykgYXMgYW55KSwgZGVzYzogKHRoaXMuJHQoJ2NvbXBvbmVudHMuYXBwUGlja2VyLnJlcXVlc3RFeGNlcHRpb24nKSBhcyBhbnkpIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgeyBkYXRhOiByZXN1bHQgfSA9IHJlc3BvbnNlOw0KDQogICAgICAgICAgICBpZiAocmVzdWx0LnZpZXdwYXJhbXMgJiYgIU9iamVjdC5pcyhyZXN1bHQudmlld3BhcmFtcy5zcmZrZXksICcnKSkgew0KICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZGF0YSwgeyBzcmZrZXk6IHJlc3VsdC52aWV3cGFyYW1zLnNyZmtleSB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKE9iamVjdC5pcyhyZXN1bHQub3Blbm1vZGUsICdQT1BVUEFQUCcpICYmIHJlc3VsdC51cmwgJiYgIU9iamVjdC5pcyhyZXN1bHQudXJsLCAnJykpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3B1cEFwcChyZXN1bHQudXJsKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmlzKHJlc3VsdC5vcGVubW9kZSwgJ0lOREVYVklFV1RBQicpIHx8IE9iamVjdC5pcyhyZXN1bHQub3Blbm1vZGUsICcnKSkgew0KICAgICAgICAgICAgICAgIC8vIOaJgOacieaVsOaNruS/neaMgeWcqOWQjOS4gOe6pw0KICAgICAgICAgICAgICAgIGlmIChkYXRhLnNyZnBhcmVudGRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkYXRhLCBkYXRhLnNyZnBhcmVudGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGF0YS5zcmZwYXJlbnRkYXRhOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLm9wZW5JbmRleFZpZXdUYWIodmlldywgbnVsbCwgZGF0YSk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pcyhyZXN1bHQub3Blbm1vZGUsICdQT1BVUE1PREFMJykpIHsNCiAgICAgICAgICAgICAgICBjb25zdCB2aWV3bmFtZSA9IHRoaXMuJHV0aWwuc3JmRmlsZVBhdGgyKHJlc3VsdC52aWV3bmFtZSk7DQogICAgICAgICAgICAgICAgY29uc3QgdmlldzogYW55ID0gew0KICAgICAgICAgICAgICAgICAgICB2aWV3bmFtZTogdmlld25hbWUsDQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHQudGl0bGUsDQogICAgICAgICAgICAgICAgICAgIHdpZHRoOiByZXN1bHQud2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodDogcmVzdWx0LmhlaWdodCwNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5vcGVuUG9wdXBNb2RhbCh2aWV3LCBudWxsLGRhdGEpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQub3Blbm1vZGUuc3RhcnRzV2l0aCgnRFJBV0VSJykpIHsNCiAgICAgICAgICAgICAgICBjb25zdCB2aWV3bmFtZSA9IHRoaXMuJHV0aWwuc3JmRmlsZVBhdGgyKHJlc3VsdC52aWV3bmFtZSk7DQogICAgICAgICAgICAgICAgY29uc3QgdmlldzogYW55ID0gew0KICAgICAgICAgICAgICAgICAgICB2aWV3bmFtZTogdmlld25hbWUsDQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHQudGl0bGUsDQogICAgICAgICAgICAgICAgICAgIHdpZHRoOiByZXN1bHQud2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodDogcmVzdWx0LmhlaWdodCwNCiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50OiByZXN1bHQub3Blbm1vZGUsDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMub3BlbkRyYXdlcih2aWV3LCBudWxsLCBkYXRhKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmlzKHJlc3VsdC5vcGVubW9kZSwgJ1BPUE9WRVInKSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHZpZXduYW1lID0gdGhpcy4kdXRpbC5zcmZGaWxlUGF0aDIocmVzdWx0LnZpZXduYW1lKTsNCiAgICAgICAgICAgICAgICBjb25zdCB2aWV3OiBhbnkgPSB7DQogICAgICAgICAgICAgICAgICAgIHZpZXduYW1lOiB2aWV3bmFtZSwNCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlc3VsdC50aXRsZSwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHJlc3VsdC53aWR0aCwNCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiByZXN1bHQuaGVpZ2h0LA0KICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6IHJlc3VsdC5vcGVubW9kZSwNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5vcGVuUG9wT3ZlcigkZXZlbnQsIHZpZXcsIG51bGwsIGRhdGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICh0aGlzLiR0KCdjb21wb25lbnRzLmFwcFBpY2tlci5lcnJvcicpIGFzIGFueSksIGRlc2M6ICh0aGlzLiR0KCdjb21wb25lbnRzLmFwcFBpY2tlci5zeXN0ZW1FeGNlcHRpb24nKSBhcyBhbnkpIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5omT5byA6ZO+5o6l6KeG5Zu+DQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHVibGljIG9wZW5MaW5rVmlldygkZXZlbnQ6IGFueSk6IHZvaWQgew0KICAgICAgICBpZiAoIXRoaXMuZGF0YSB8fCAhdGhpcy52YWx1ZWl0ZW0gfHwgIXRoaXMuZGF0YVt0aGlzLnZhbHVlaXRlbV0pIHsNCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoeyB0aXRsZTogKHRoaXMuJHQoJ2NvbXBvbmVudHMuYXBwUGlja2VyLmVycm9yJykgYXMgYW55KSwgZGVzYzogKHRoaXMuJHQoJ2NvbXBvbmVudHMuYXBwUGlja2VyLnZhbHVlaXRlbUV4Y2VwdGlvbicpIGFzIGFueSkgfSk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5YWs5YWx5Y+C5pWw5aSE55CGDQogICAgICAgIGxldCBkYXRhOiBhbnkgPSB7fTsNCiAgICAgICAgY29uc3QgYmNhbmNlbDogYm9vbGVhbiA9IHRoaXMuaGFuZGxlUHVibGljUGFyYW1zKGRhdGEpOw0KICAgICAgICBpZiAoIWJjYW5jZWwpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICAvLyDlj4LmlbDlpITnkIYNCiAgICAgICAgbGV0IF9jb250ZXh0ID0gZGF0YS5jb250ZXh0Ow0KICAgICAgICBsZXQgX3BhcmFtID0gZGF0YS5wYXJhbTsNCiAgICAgICAgT2JqZWN0LmFzc2lnbihfY29udGV4dCwgeyBbdGhpcy5kZUtleUZpZWxkXTogdGhpcy5kYXRhW3RoaXMudmFsdWVpdGVtXSB9KTsNCiAgICAgICAgY29uc3QgdmlldyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5saW5rdmlldykpOw0KICAgICAgICBjb25zdCB2aWV3bmFtZTI6IHN0cmluZyA9IHRoaXMuJHV0aWwuc3JmRmlsZVBhdGgyKHZpZXcudmlld25hbWUpOw0KICAgICAgICB2aWV3LnZpZXduYW1lID0gdmlld25hbWUyOw0KDQogICAgICAgIGlmICh2aWV3LmlzUmVkaXJlY3RWaWV3KSB7DQogICAgICAgICAgICB0aGlzLm9wZW5SZWRpcmVjdFZpZXcoJGV2ZW50LCB2aWV3LCBkYXRhKTsNCiAgICAgICAgfSBlbHNlIGlmIChPYmplY3QuaXModmlldy5wbGFjZW1lbnQsICdJTkRFWFZJRVdUQUInKSB8fCBPYmplY3QuaXModmlldy5wbGFjZW1lbnQsICcnKSkgew0KICAgICAgICAgICAgdGhpcy5vcGVuSW5kZXhWaWV3VGFiKHZpZXcsIF9jb250ZXh0LCBfcGFyYW0pOw0KICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pcyh2aWV3LnBsYWNlbWVudCwgJ1BPUE9WRVInKSkgew0KICAgICAgICAgICAgdGhpcy5vcGVuUG9wT3ZlcigkZXZlbnQsIHZpZXcsIF9jb250ZXh0LCBfcGFyYW0pOw0KICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pcyh2aWV3LnBsYWNlbWVudCwgJ1BPUFVQTU9EQUwnKSkgew0KICAgICAgICAgICAgdGhpcy5vcGVuUG9wdXBNb2RhbCh2aWV3LCBfY29udGV4dCwgX3BhcmFtKTsNCiAgICAgICAgfSBlbHNlIGlmICh2aWV3LnBsYWNlbWVudC5zdGFydHNXaXRoKCdEUkFXRVInKSkgew0KICAgICAgICAgICAgdGhpcy5vcGVuRHJhd2VyKHZpZXcsIF9jb250ZXh0LCBfcGFyYW0pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5omT5byA6aG16Z2i5YWz6ZetDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IHJlc3VsdA0KICAgICAqIEBtZW1iZXJvZiBBcHBQaWNrZXINCiAgICAgKi8NCiAgICBwdWJsaWMgb3BlblZpZXdDbG9zZShyZXN1bHQ6IGFueSkgew0KICAgICAgICBsZXQgaXRlbTogYW55ID0ge307DQogICAgICAgIGlmIChyZXN1bHQuZGF0YXMgJiYgQXJyYXkuaXNBcnJheShyZXN1bHQuZGF0YXMpKSB7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGl0ZW0sIHJlc3VsdC5kYXRhc1swXSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAodGhpcy5kYXRhKSB7DQogICAgICAgICAgICBpZiAodGhpcy52YWx1ZWl0ZW0pIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdmb3JtaXRlbXZhbHVlY2hhbmdlJywgeyBuYW1lOiB0aGlzLnZhbHVlaXRlbSwgdmFsdWU6IGl0ZW1bdGhpcy5kZUtleUZpZWxkXT9pdGVtW3RoaXMuZGVLZXlGaWVsZF06aXRlbVsic3Jma2V5Il0gfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5uYW1lKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZm9ybWl0ZW12YWx1ZWNoYW5nZScsIHsgbmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogaXRlbVt0aGlzLmRlTWFqb3JGaWVsZF0/aXRlbVt0aGlzLmRlTWFqb3JGaWVsZF06aXRlbVsic3JmbWFqb3J0ZXh0Il0gfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlhazlhbHlj4LmlbDlpITnkIYNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gYXJnDQogICAgICogQHJldHVybnMNCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHVibGljIGhhbmRsZVB1YmxpY1BhcmFtcyhhcmc6IGFueSk6IGJvb2xlYW4gew0KICAgICAgICBpZiAoIXRoaXMuZGF0YSkgew0KICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICh0aGlzLiR0KCdjb21wb25lbnRzLmFwcFBpY2tlci5lcnJvcicpIGFzIGFueSksIGRlc2M6ICh0aGlzLiR0KCdjb21wb25lbnRzLmFwcFBpY2tlci5mb3JtZGF0YUV4Y2VwdGlvbicpIGFzIGFueSkgfSk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgLy8g5ZCI5bm26KGo5Y2V5Y+C5pWwDQogICAgICAgIGFyZy5wYXJhbSA9IHRoaXMudmlld3BhcmFtcyA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy52aWV3cGFyYW1zKSkgOiB7fTsNCiAgICAgICAgYXJnLmNvbnRleHQgPSB0aGlzLmNvbnRleHQgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpIDoge307DQogICAgICAgIC8vIOmZhOWKoOWPguaVsOWkhOeQhg0KICAgICAgICBpZiAodGhpcy5sb2NhbENvbnRleHQgJiYgT2JqZWN0LmtleXModGhpcy5sb2NhbENvbnRleHQpLmxlbmd0aCA+MCkgew0KICAgICAgICAgICAgbGV0IF9jb250ZXh0ID0gdGhpcy4kdXRpbC5jb21wdXRlZE5hdkRhdGEodGhpcy5kYXRhLGFyZy5jb250ZXh0LGFyZy5wYXJhbSx0aGlzLmxvY2FsQ29udGV4dCk7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZy5jb250ZXh0LF9jb250ZXh0KTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5sb2NhbFBhcmFtICYmIE9iamVjdC5rZXlzKHRoaXMubG9jYWxQYXJhbSkubGVuZ3RoID4wKSB7DQogICAgICAgICAgICBsZXQgX3BhcmFtID0gdGhpcy4kdXRpbC5jb21wdXRlZE5hdkRhdGEodGhpcy5kYXRhLGFyZy5wYXJhbSxhcmcucGFyYW0sdGhpcy5sb2NhbFBhcmFtKTsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLnBhcmFtLF9wYXJhbSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5Yib5bu65bm257yW6L6RDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IGFyZw0KICAgICAqIEByZXR1cm5zDQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIHB1YmxpYyBuZXdBbmRFZGl0KCRldmVudDphbnkpew0KICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIC8vIOWFrOWFseWPguaVsOWkhOeQhg0KICAgICAgICBsZXQgZGF0YTogYW55ID0ge307DQogICAgICAgIGNvbnN0IGJjYW5jZWw6IGJvb2xlYW4gPSB0aGlzLmhhbmRsZVB1YmxpY1BhcmFtcyhkYXRhKTsNCiAgICAgICAgaWYgKCFiY2FuY2VsKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5Y+C5pWw5aSE55CGDQogICAgICAgIGNvbnN0IHZpZXcgPSB7IC4uLnRoaXMubGlua3ZpZXcgfTsNCiAgICAgICAgdmlldy52aWV3bmFtZSA9IHRoaXMuJHV0aWwuc3JmRmlsZVBhdGgyKHZpZXcudmlld25hbWUpOw0KICAgICAgICBsZXQgX2NvbnRleHQgPSBkYXRhLmNvbnRleHQ7DQogICAgICAgIGRlbGV0ZSBfY29udGV4dFt0aGlzLmRlS2V5RmllbGRdOw0KICAgICAgICBsZXQgX3BhcmFtID0gZGF0YS5wYXJhbTsNCiAgICAgICAgLy8g5Yik5pat5omT5byA5pa55byPDQogICAgICAgIGlmICh2aWV3LnBsYWNlbWVudCAmJiAhT2JqZWN0LmlzKHZpZXcucGxhY2VtZW50LCAnJykpIHsNCiAgICAgICAgICAgIGlmIChPYmplY3QuaXModmlldy5wbGFjZW1lbnQsICdQT1BPVkVSJykpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3BPdmVyKCRldmVudCwgdmlldywgX2NvbnRleHQsIF9wYXJhbSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMub3BlbkRyYXdlcih2aWV3LCBfY29udGV4dCwgX3BhcmFtKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMub3BlblBvcHVwTW9kYWwodmlldywgX2NvbnRleHQsIF9wYXJhbSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6L6T5YWl6L+H56iL5LitDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgQXBwQXV0b2NvbXBsZXRlDQogICAgICovDQogICAgcHVibGljIG9uSW5wdXQoJGV2ZW50OiBhbnkpIHsNCiAgICAgICAgaWYgKE9iamVjdC5pcygkZXZlbnQsIHRoaXMudmFsdWUpKSB7DQogICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUgPSB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5bGV5byA5LiL5ouJDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgQXBwUGlja2VyDQogICAgICovDQogICAgcHVibGljIG9wZW5Ecm9wZG93bigpIHsNCiAgICAgICAgY29uc3QgYXBwUGlja2VyOiBhbnkgPSB0aGlzLiRyZWZzLmFwcFBpY2tlcjsNCiAgICAgICAgaWYoYXBwUGlja2VyKSB7DQogICAgICAgICAgICBhcHBQaWNrZXIuZm9jdXMoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaUtui1t+S4i+aLiQ0KICAgICAqDQogICAgICogQG1lbWJlcm9mIEFwcFBpY2tlcg0KICAgICAqLw0KICAgIHB1YmxpYyBjbG9zZURyb3Bkb3duKCkgew0KICAgICAgICBjb25zdCBhcHBQaWNrZXI6IGFueSA9IHRoaXMuJHJlZnMuYXBwUGlja2VyOw0KICAgICAgICBpZihhcHBQaWNrZXIpIHsNCiAgICAgICAgICAgIGFwcFBpY2tlci5ibHVyKCk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQoNCn0NCg=="},null]}