{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-person\\personinfotree-treeview\\personinfotree-treeview-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-person\\personinfotree-treeview\\personinfotree-treeview-base.vue","mtime":1630509411922},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgVnVlLCBDb21wb25lbnQsIFByb3AsIFByb3ZpZGUsIEVtaXQsIFdhdGNoLCBNb2RlbCxJbmplY3QgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsNCmltcG9ydCB7IENyZWF0ZUVsZW1lbnQgfSBmcm9tICd2dWUnOw0KaW1wb3J0IHsgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7DQppbXBvcnQgeyBDb250cm9sSW50ZXJmYWNlIH0gZnJvbSAnQC9pbnRlcmZhY2UvY29udHJvbCc7DQppbXBvcnQgeyBVSUFjdGlvblRvb2wsVXRpbCB9IGZyb20gJ0AvdXRpbHMnOw0KaW1wb3J0IE5hdkRhdGFTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9hcHAvbmF2ZGF0YS1zZXJ2aWNlJzsNCmltcG9ydCBQaW1QZXJzb25TZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9waW0tcGVyc29uL3BpbS1wZXJzb24tc2VydmljZSc7DQppbXBvcnQgUEVSU09OSU5GT1RSRUVTZXJ2aWNlIGZyb20gJy4vcGVyc29uaW5mb3RyZWUtdHJlZXZpZXctc2VydmljZSc7DQoNCg0KDQpAQ29tcG9uZW50KHsNCiAgICBjb21wb25lbnRzOiB7DQogICAgICANCiAgICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgUEVSU09OSU5GT1RSRUVCYXNlIGV4dGVuZHMgVnVlIGltcGxlbWVudHMgQ29udHJvbEludGVyZmFjZSB7DQoNCiAgICAvKioNCiAgICAgKiDlkI3np7ANCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIG5hbWU/OiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDop4blm77pgJrorq/lr7nosaENCiAgICAgKg0KICAgICAqIEB0eXBlIHtTdWJqZWN0PFZpZXdTdGF0ZT59DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHZpZXdTdGF0ZSE6IFN1YmplY3Q8Vmlld1N0YXRlPjsNCg0KICAgIC8qKg0KICAgICAqIOW6lOeUqOS4iuS4i+aWhw0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGNvbnRleHQ6IGFueTsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvuWPguaVsA0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHZpZXdwYXJhbXM6IGFueTsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvueKtuaAgeS6i+S7tg0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEB0eXBlIHsoU3Vic2NyaXB0aW9uIHwgdW5kZWZpbmVkKX0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIHZpZXdTdGF0ZUV2ZW50OiBTdWJzY3JpcHRpb24gfCB1bmRlZmluZWQ7DQoNCiAgICAvKioNCiAgICAgKiDojrflj5bpg6jku7bnsbvlnosNCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBnZXRDb250cm9sVHlwZSgpOiBzdHJpbmcgew0KICAgICAgICByZXR1cm4gJ1RSRUVWSUVXJw0KICAgIH0NCg0KDQoNCiAgICAvKioNCiAgICAgKiDorqHmlbDlmajmnI3liqHlr7nosaHpm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHtBcnJheTwqPn0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovICAgIA0KICAgIHB1YmxpYyBjb3VudGVyU2VydmljZUFycmF5OkFycmF5PGFueT4gPSBbXTsNCg0KICAgIC8qKg0KICAgICAqIOW7uuaehOmDqOS7tuacjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1BFUlNPTklORk9UUkVFU2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIHNlcnZpY2U6IFBFUlNPTklORk9UUkVFU2VydmljZSA9IG5ldyBQRVJTT05JTkZPVFJFRVNlcnZpY2UoeyAkc3RvcmU6IHRoaXMuJHN0b3JlIH0pOw0KDQogICAgLyoqDQogICAgICog5a6e5L2T5pyN5Yqh5a+56LGhDQogICAgICoNCiAgICAgKiBAdHlwZSB7UGltUGVyc29uU2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIGFwcEVudGl0eVNlcnZpY2U6IFBpbVBlcnNvblNlcnZpY2UgPSBuZXcgUGltUGVyc29uU2VydmljZSh7ICRzdG9yZTogdGhpcy4kc3RvcmUgfSk7DQogICAgDQoNCg0KICAgIC8qKg0KICAgICAqIOWFs+mXreinhuWbvg0KICAgICAqDQogICAgICogQHBhcmFtIHthbnl9IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIGNsb3NlVmlldyhhcmdzOiBhbnkpOiB2b2lkIHsNCiAgICAgICAgbGV0IF90aGlzOiBhbnkgPSB0aGlzOw0KICAgICAgICBfdGhpcy4kZW1pdCgnY2xvc2V2aWV3JywgW2FyZ3NdKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiAg6K6h5pWw5Zmo5Yi35pawDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIGNvdW50ZXJSZWZyZXNoKCl7DQogICAgICAgIGNvbnN0IF90aGlzOmFueSA9dGhpczsNCiAgICAgICAgaWYoX3RoaXMuY291bnRlclNlcnZpY2VBcnJheSAmJiBfdGhpcy5jb3VudGVyU2VydmljZUFycmF5Lmxlbmd0aCA+MCl7DQogICAgICAgICAgICBfdGhpcy5jb3VudGVyU2VydmljZUFycmF5LmZvckVhY2goKGl0ZW06YW55KSA9PnsNCiAgICAgICAgICAgICAgICBpZihpdGVtLnJlZnJlc2hEYXRhICYmIGl0ZW0ucmVmcmVzaERhdGEgaW5zdGFuY2VvZiBGdW5jdGlvbil7DQogICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVmcmVzaERhdGEoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfQ0KDQoNCiAgICAvKioNCiAgICAgKiDojrflj5blpJrpobnmlbDmja4NCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHthbnlbXX0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIGdldERhdGFzKCk6IGFueVtdIHsNCiAgICAgICAgcmV0dXJuIFt0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGVdOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiOt+WPluWNlemhueagkQ0KICAgICAqDQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBnZXREYXRhKCk6IGFueSB7DQogICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5piv5ZCm5Y2V6YCJDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgQFByb3AoeyBkZWZhdWx0OiB0cnVlIH0pIHB1YmxpYyBpc1NpbmdsZVNlbGVjdCE6IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDmmK/lkKbpu5jorqTpgInkuK3nrKzkuIDmnaHmlbDmja4NCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCh7IGRlZmF1bHQ6IGZhbHNlIH0pIHB1YmxpYyBpc1NlbGVjdEZpcnN0RGVmYXVsdCE6IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDmnp3lubLoioLngrnmmK/lkKblj6/nlKjvvIjlhbfmnInmlbDmja7og73lipvvvIzlj6/mipvlh7rvvIkNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKHtkZWZhdWx0OnRydWV9KSBwdWJsaWMgaXNCcmFuY2hBdmFpbGFibGUhOiBib29sZWFuOw0KDQogICAgLyoqDQogICAgICog5pi+56S65aSE55CG5o+Q56S6DQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgQFByb3AoeyBkZWZhdWx0OiB0cnVlIH0pIHB1YmxpYyBzaG93QnVzeUluZGljYXRvcj86IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDliJ3lp4vljJblrozmiJANCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgaW5pdGVkOiBib29sZWFuID0gZmFsc2U7DQoNCiAgICAvKioNCiAgICAgKiDlt7LpgInkuK3mlbDmja7pm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc2VsZWN0ZWROb2RlczogYW55ID0gW107DQoNCiAgICAvKioNCiAgICAgKiDlvZPliY3pgInkuK3mlbDmja7pobkNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgY3VycmVudHNlbGVjdGVkTm9kZTogYW55ID0ge307DQoNCiAgICAvKioNCiAgICAgKiDpgInkuK3mlbDmja7lrZfnrKbkuLINCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHNlbGVjdGVkRGF0YT86IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOmAieS4reWAvOWPmOWMlg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ3NlbGVjdGVkRGF0YScpDQogICAgcHVibGljIG9uVmFsdWVDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZWNob3NlbGVjdGVkTm9kZXMgPSBuZXdWYWwgPyB0aGlzLmlzU2luZ2xlU2VsZWN0ID8gSlNPTi5wYXJzZShuZXdWYWwpWzBdIDogSlNPTi5wYXJzZShuZXdWYWwpIDogW107DQogICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IFtdOw0KICAgICAgICBpZih0aGlzLmVjaG9zZWxlY3RlZE5vZGVzLmxlbmd0aCA+IDApew0KICAgICAgICAgICAgbGV0IEFsbG5vZGVzT2JqID0gKHRoaXMuJHJlZnMudHJlZWV4cGJhcl90cmVlIGFzIGFueSkuc3RvcmUubm9kZXNNYXA7DQogICAgICAgICAgICBsZXQgQWxsbm9kZXNBcnJheSA6IGFueVtdID0gW107DQogICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBBbGxub2Rlc09iaikgew0KICAgICAgICAgICAgICBpZiAoQWxsbm9kZXNPYmouaGFzT3duUHJvcGVydHkoa2V5KSkgew0KICAgICAgICAgICAgICAgIEFsbG5vZGVzQXJyYXkucHVzaChBbGxub2Rlc09ialtrZXldLmRhdGEpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldERlZmF1bHRTZWxlY3Rpb24oQWxsbm9kZXNBcnJheSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlm57mmL7pgInkuK3mlbDmja7pm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZWNob3NlbGVjdGVkTm9kZXM6YW55W10gPSB0aGlzLnNlbGVjdGVkRGF0YSA/ICggdGhpcy5pc1NpbmdsZVNlbGVjdCA/IFtKU09OLnBhcnNlKHRoaXMuc2VsZWN0ZWREYXRhKVswXV0gOiBKU09OLnBhcnNlKHRoaXMuc2VsZWN0ZWREYXRhKSkgOiBbXTsNCg0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tdXBkYXRlDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyB1cGRhdGVBY3Rpb24hOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLWZldGNoDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBmZXRjaEFjdGlvbiE6IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tcmVtb3ZlDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyByZW1vdmVBY3Rpb24hOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLWxvYWQNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGxvYWRBY3Rpb24hOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLWNyZWF0ZQ0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgY3JlYXRlQWN0aW9uITogc3RyaW5nOw0KDQogICAgLyoqDQogICAgICog6L+H5ruk5bGe5oCnDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc3Jmbm9kZWZpbHRlcjogc3RyaW5nID0gJyc7DQoNCiAgICAvKioNCiAgICAgKiDpu5jorqTovpPlh7rlm77moIcNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgaXNPdXRwdXRJY29uRGVmYXVsdDogYm9vbGVhbiA9IHRydWU7DQoNCg0KICAgIC8qKg0KICAgICAqIOaVsOaNruWxleW8gOS4u+mUrg0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ1tdfQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBAUHJvdmlkZSgpDQogICAgcHVibGljIGV4cGFuZGVkS2V5czogc3RyaW5nW10gPSBbXTsNCg0KICAgIC8qKg0KICAgICAqIOmAieS4reaVsOaNruWPmOabtOS6i+S7tg0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YQ0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YSDlvZPliY3oioLngrnlr7nlupTkvKDlhaXlr7nosaENCiAgICAgKiBAcGFyYW0geyp9IGNoZWNrZWRTdGF0ZSDmoJHnm67liY3pgInkuK3nirbmgIHlr7nosaENCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIG9uQ2hlY2soZGF0YTogYW55LCBjaGVja2VkU3RhdGU6IGFueSkgew0KICAgICAgICAvLyDlpITnkIblpJrpgInmlbDmja4NCiAgICAgICAgaWYoIXRoaXMuaXNTaW5nbGVTZWxlY3Qpew0KICAgICAgICAgICAgbGV0IGxlYWZOb2RlcyA9IGNoZWNrZWRTdGF0ZS5jaGVja2VkTm9kZXMuZmlsdGVyKChpdGVtOmFueSkgPT4gaXRlbS5sZWFmKTsNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobGVhZk5vZGVzKSk7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdzZWxlY3Rpb25jaGFuZ2UnLCB0aGlzLnNlbGVjdGVkTm9kZXMpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6YCJ5Lit5pWw5o2u5Y+Y5pu05LqL5Lu2DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBkYXRhIOiKgueCueWvueW6lOS8oOWFpeWvueixoQ0KICAgICAqIEBwYXJhbSB7Kn0gbm9kZSDoioLngrnlr7nlupRub2Rl5a+56LGhDQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBzZWxlY3Rpb25DaGFuZ2UoZGF0YTogYW55LCBub2RlOiBhbnkpIHsNCiAgICAgICAgLy8g56aB55So6aG55aSE55CGDQogICAgICAgIGlmIChkYXRhLmRpc2FibGVkKXsNCiAgICAgICAgICAgIG5vZGUuaXNDdXJyZW50ID0gZmFsc2U7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5Y+q5aSE55CG5pyA5bqV5bGC5a2Q6IqC54K5DQogICAgICAgIGlmKHRoaXMuaXNCcmFuY2hBdmFpbGFibGUgfHwgZGF0YS5sZWFmKXsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudHNlbGVjdGVkTm9kZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOw0KICAgICAgICAgICAgLy8g5Y2V6YCJ55u05o6l5pu/5o2iDQogICAgICAgICAgICBpZih0aGlzLmlzU2luZ2xlU2VsZWN0KXsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlXTsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZWxlY3Rpb25jaGFuZ2UnLCB0aGlzLnNlbGVjdGVkTm9kZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8g5aSa6YCJ55SoY2hlY2vmlrnms5UNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFZ1ZeWjsOaYjuWRqOacnyjlpITnkIbnu4Tku7bnmoTovpPlhaXlsZ7mgKcpDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIGNyZWF0ZWQoKSB7DQogICAgICAgIHRoaXMuYWZ0ZXJDcmVhdGVkKCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5omn6KGMY3JlYXRlZOWQjueahOmAu+i+kQ0KICAgICAqDQogICAgICogIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8gICAgDQogICAgcHVibGljIGFmdGVyQ3JlYXRlZCgpew0KICAgICAgICBpZiAodGhpcy52aWV3U3RhdGUpIHsNCiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlRXZlbnQgPSB0aGlzLnZpZXdTdGF0ZS5zdWJzY3JpYmUoKHsgdGFnLCBhY3Rpb24sIGRhdGEgfSkgPT4gew0KICAgICAgICAgICAgICAgIGlmICghT2JqZWN0LmlzKHRhZywgdGhpcy5uYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaXMoJ2xvYWQnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaXMoJ2ZpbHRlcicsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcmZub2RlZmlsdGVyICA9IGRhdGEuc3Jmbm9kZWZpbHRlcjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoX2FsbCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdyZWZyZXNoX3BhcmVudCcsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoX3BhcmVudCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5a+55qCR6IqC54K56L+b6KGM562b6YCJ5pON5L2cDQogICAgICogQG1lbWJlcm9mIE9yZGVyVHJlZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmaWx0ZXJOb2RlKHZhbHVlOmFueSwgZGF0YTphbnkpIHsNCiAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7DQogICAgICAgIHJldHVybiBkYXRhLnRleHQuaW5kZXhPZih2YWx1ZSkgIT09IC0xOw0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICogdnVlIOeUn+WRveWRqOacnw0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBkZXN0cm95ZWQoKSB7DQogICAgICAgIHRoaXMuYWZ0ZXJEZXN0cm95KCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5omn6KGMZGVzdHJveWVk5ZCO55qE6YC76L6RDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIGFmdGVyRGVzdHJveSgpIHsNCiAgICAgICAgaWYgKHRoaXMudmlld1N0YXRlRXZlbnQpIHsNCiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlRXZlbnQudW5zdWJzY3JpYmUoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWIt+aWsOaVsOaNrg0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyByZWZyZXNoX2FsbCgpOiB2b2lkIHsNCiAgICAgICAgdGhpcy5pbml0ZWQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5pbml0ZWQgPSB0cnVlOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDliLfmlrDniLboioLngrkNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVmcmVzaF9wYXJlbnQoKTogdm9pZCB7DQogICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGUpLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IHRyZWU6IGFueSA9IHRoaXMuJHJlZnMudHJlZWV4cGJhcl90cmVlOw0KICAgICAgICBjb25zdCBub2RlOiBhbnkgPSB0cmVlLmdldE5vZGUodGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlLmlkKTsNCiAgICAgICAgaWYgKCFub2RlIHx8ICFub2RlLnBhcmVudCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGxldCBjdXJOb2RlOmFueSA9IHt9OyANCiAgICAgICAgY29uc3QgeyBwYXJlbnQ6IF9wYXJlbnQgfSA9IG5vZGU7DQogICAgICAgIGN1ck5vZGUgPSBVdGlsLmRlZXBPYmplY3RNZXJnZShjdXJOb2RlLF9wYXJlbnQpOw0KICAgICAgICBsZXQgdGVtcENvbnRleHQ6YW55ID0ge307DQogICAgICAgIGlmKGN1ck5vZGUuZGF0YSAmJiBjdXJOb2RlLmRhdGEuc3JmYXBwY3R4KXsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGVtcENvbnRleHQsY3VyTm9kZS5kYXRhLnNyZmFwcGN0eCk7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCx0aGlzLmNvbnRleHQpOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IGlkOiBzdHJpbmcgPSBfcGFyZW50LmtleSA/IF9wYXJlbnQua2V5IDogJyMnOw0KICAgICAgICBjb25zdCBwYXJhbTogYW55ID0geyBzcmZub2RlaWQ6IGlkIH07DQogICAgICAgIHRoaXMucmVmcmVzaF9ub2RlKHRlbXBDb250ZXh0LHBhcmFtLCB0cnVlKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmlbDmja7liqDovb0NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbm9kZQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgbG9hZChub2RlOiBhbnkgPSB7fSwgcmVzb2x2ZT86IGFueSkgew0KICAgICAgICBpZiAobm9kZS5kYXRhICYmIG5vZGUuZGF0YS5jaGlsZHJlbikgew0KICAgICAgICAgICAgcmVzb2x2ZShub2RlLmRhdGEuY2hpbGRyZW4pOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IHBhcmFtczogYW55ID0gew0KICAgICAgICAgICAgc3Jmbm9kZWlkOiBub2RlLmRhdGEgJiYgbm9kZS5kYXRhLmlkID8gbm9kZS5kYXRhLmlkIDogIiMiLA0KICAgICAgICAgICAgc3Jmbm9kZWZpbHRlcjogdGhpcy5zcmZub2RlZmlsdGVyDQogICAgICAgIH07DQogICAgICAgIGxldCB0ZW1wVmlld1BhcmFtczphbnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudmlld3BhcmFtcykpOw0KICAgICAgICBsZXQgY3VyTm9kZTphbnkgPSB7fTsgDQogICAgICAgIGN1ck5vZGUgPSBVdGlsLmRlZXBPYmplY3RNZXJnZShjdXJOb2RlLG5vZGUpOw0KICAgICAgICBsZXQgdGVtcENvbnRleHQ6YW55ID0gdGhpcy5jb21wdXRlY3VyTm9kZUNvbnRleHQoY3VyTm9kZSk7DQogICAgICAgIGlmKGN1ck5vZGUuZGF0YSAmJiBjdXJOb2RlLmRhdGEuc3JmcGFyZW50ZGVuYW1lKXsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGVtcENvbnRleHQse3NyZnBhcmVudGRlbmFtZTpjdXJOb2RlLmRhdGEuc3JmcGFyZW50ZGVuYW1lfSk7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKHRlbXBWaWV3UGFyYW1zLHtzcmZwYXJlbnRkZW5hbWU6Y3VyTm9kZS5kYXRhLnNyZnBhcmVudGRlbmFtZX0pOw0KICAgICAgICB9DQogICAgICAgIGlmKGN1ck5vZGUuZGF0YSAmJiBjdXJOb2RlLmRhdGEuc3JmcGFyZW50a2V5KXsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGVtcENvbnRleHQse3NyZnBhcmVudGtleTpjdXJOb2RlLmRhdGEuc3JmcGFyZW50a2V5fSk7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKHRlbXBWaWV3UGFyYW1zLHtzcmZwYXJlbnRrZXk6Y3VyTm9kZS5kYXRhLnNyZnBhcmVudGtleX0pOw0KICAgICAgICB9DQogICAgICAgIE9iamVjdC5hc3NpZ24ocGFyYW1zLHt2aWV3cGFyYW1zOnRlbXBWaWV3UGFyYW1zfSk7DQogICAgICAgIHRoaXMuc2VydmljZS5nZXROb2Rlcyh0ZW1wQ29udGV4dCxwYXJhbXMpLnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogIumUmeivryIsIGRlc2M6IHJlc3BvbnNlLmluZm8gfSk7DQogICAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgX2l0ZW1zID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgIHRoaXMuZm9ybWF0RXhwYW5kZWQoX2l0ZW1zKTsNCiAgICAgICAgICAgIHJlc29sdmUoWy4uLl9pdGVtc10pOw0KICAgICAgICAgICAgbGV0IGlzUm9vdCA9IE9iamVjdC5pcyhub2RlLmxldmVsLDApOw0KICAgICAgICAgICAgbGV0IGlzU2VsZWN0ZWRBbGwgPSBub2RlLmNoZWNrZWQ7DQogICAgICAgICAgICB0aGlzLnNldERlZmF1bHRTZWxlY3Rpb24oX2l0ZW1zLCBpc1Jvb3QsIGlzU2VsZWN0ZWRBbGwpOw0KICAgICAgICAgICAgdGhpcy4kZW1pdCgibG9hZCIsIF9pdGVtcyk7DQogICAgICAgIH0pLmNhdGNoKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICByZXNvbHZlKFtdKTsNCiAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAi6ZSZ6K+vIiwgZGVzYzogcmVzcG9uc2UuaW5mbyB9KTsNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6K6h566X5b2T5YmN6IqC54K555qE5LiK5LiL5paHDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IGN1ck5vZGUg5b2T5YmN6IqC54K5DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjb21wdXRlY3VyTm9kZUNvbnRleHQoY3VyTm9kZTphbnkpew0KICAgICAgICBsZXQgdGVtcENvbnRleHQ6YW55ID0ge307DQogICAgICAgIGlmKGN1ck5vZGUgJiYgY3VyTm9kZS5kYXRhICYmIGN1ck5vZGUuZGF0YS5zcmZhcHBjdHgpew0KICAgICAgICAgICAgdGVtcENvbnRleHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN1ck5vZGUuZGF0YS5zcmZhcHBjdHgpKTsNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgICB0ZW1wQ29udGV4dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRlbXBDb250ZXh0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWIt+aWsOWKn+iDvQ0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVmcmVzaChhcmdzOiBhbnlbXSk6IHZvaWQgew0KICAgICAgICB0aGlzLnJlZnJlc2hfYWxsKCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5Yi35paw6IqC54K5DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBbY3VyQ29udGV4dF0g5b2T5YmN6IqC54K55LiK5LiL5paHDQogICAgICogQHBhcmFtIHsqfSBbYXJnPXt9XSDlvZPliY3oioLngrnpmYTliqDlj4LmlbANCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHBhcmVudG5vZGUg5piv5ZCm5piv5Yi35paw54i26IqC54K5DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyByZWZyZXNoX25vZGUoY3VyQ29udGV4dDphbnksYXJnOiBhbnkgPSB7fSwgcGFyZW50bm9kZTogYm9vbGVhbik6IHZvaWQgew0KICAgICAgICBjb25zdCB7IHNyZm5vZGVpZDogaWQgfSA9IGFyZzsNCiAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcse3ZpZXdwYXJhbXM6dGhpcy52aWV3cGFyYW1zfSk7DQogICAgICAgIGNvbnN0IGdldDogUHJvbWlzZTxhbnk+ID0gdGhpcy5zZXJ2aWNlLmdldE5vZGVzKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksYXJnKTsNCiAgICAgICAgZ2V0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmluZm8gfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgX2l0ZW1zID0gWy4uLnJlc3BvbnNlLmRhdGFdOw0KICAgICAgICAgICAgdGhpcy5mb3JtYXRFeHBhbmRlZChfaXRlbXMpOw0KICAgICAgICAgICAgY29uc3QgdHJlZTogYW55ID0gdGhpcy4kcmVmcy50cmVlZXhwYmFyX3RyZWU7DQogICAgICAgICAgICB0cmVlLnVwZGF0ZUtleUNoaWxkcmVuKGlkLCBfaXRlbXMpOw0KICAgICAgICAgICAgaWYgKHBhcmVudG5vZGUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGUgPSB7fTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdFNlbGVjdGlvbihfaXRlbXMpOw0KICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5pbmZvIH0pOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpu5jorqTlsZXlvIDoioLngrkNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBpdGVtcw0KICAgICAqIEByZXR1cm5zIHthbnlbXX0NCiAgICAgKiBAbWVtYmVyb2YgUEVSU09OSU5GT1RSRUVCYXNlDQogICAgICovDQogICAgcHVibGljIGZvcm1hdEV4cGFuZGVkKGl0ZW1zOiBhbnlbXSk6IGFueVtdIHsNCiAgICAgICAgY29uc3QgZGF0YTogYW55W10gPSBbXTsNCiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgaWYgKGl0ZW0uZXhwYW5kZWQgfHwgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRLZXlzLnB1c2goaXRlbS5pZCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICByZXR1cm4gZGF0YTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDorr7nva7pu5jorqTpgInkuK0s5Zue5pi+5pWw6aG577yM6YCJ5Lit5omA5pyJ5a2Q6IqC54K5DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBpdGVtcyDlvZPliY3oioLngrnmiYDmnInlrZDoioLngrnpm4blkIgNCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzUm9vdCDmmK/lkKbmmK/liqDovb3moLnoioLngrkNCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzU2VsZWN0ZWRBbGwg5piv5ZCm6YCJ5Lit5omA5pyJ5a2Q6IqC54K5DQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBzZXREZWZhdWx0U2VsZWN0aW9uKGl0ZW1zOiBhbnlbXSwgaXNSb290OiBib29sZWFuID0gZmFsc2UsIGlzU2VsZWN0ZWRBbGw6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQgew0KICAgICAgICBpZihpdGVtcy5sZW5ndGggPT0gMCl7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgbGV0IGRlZmF1bHREYXRhOiBhbnk7DQogICAgICAgIC8vIOWvvOiIquS4remAieS4reesrOS4gOadoemFjee9rueahOm7mOiupOmAieS4rSzmsqHmnInpgInkuK3nrKzkuIDmnaENCiAgICAgICAgaWYodGhpcy5pc1NlbGVjdEZpcnN0RGVmYXVsdCl7DQogICAgICAgICAgICBpZih0aGlzLmlzU2luZ2xlU2VsZWN0KXsNCiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoKGl0ZW06IGFueSkgPT4gaXRlbS5zZWxlY3RlZCk7DQogICAgICAgICAgICAgICAgaWYoaW5kZXggPT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIGlmKGlzUm9vdCl7DQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IDA7DQogICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRlZmF1bHREYXRhID0gaXRlbXNbaW5kZXhdOw0KICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJlZU5vZGVIaWdoTGlnaHQoZGVmYXVsdERhdGEpOw0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudHNlbGVjdGVkTm9kZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVmYXVsdERhdGEpKTsNCiAgICAgICAgICAgICAgICBpZih0aGlzLmlzQnJhbmNoQXZhaWxhYmxlIHx8IGRlZmF1bHREYXRhLmxlYWYpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlXTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0aW9uY2hhbmdlJywgdGhpcy5zZWxlY3RlZE5vZGVzKTsNCiAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vIOW3sumAieaVsOaNrueahOWbnuaYvg0KICAgICAgICBpZih0aGlzLmVjaG9zZWxlY3RlZE5vZGVzICYmIHRoaXMuZWNob3NlbGVjdGVkTm9kZXMubGVuZ3RoID4gMCl7DQogICAgICAgICAgICBsZXQgY2hlY2tlZE5vZGVzID0gaXRlbXMuZmlsdGVyKChpdGVtOmFueSk9PnsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lY2hvc2VsZWN0ZWROb2Rlcy5zb21lKCh2YWw6YW55KT0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYoT2JqZWN0LmlzKGl0ZW0uc3Jma2V5LHZhbC5zcmZrZXkpICYmIE9iamVjdC5pcyhpdGVtLnNyZm1ham9ydGV4dCx2YWwuc3JmbWFqb3J0ZXh0KSl7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWwudXNlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZihjaGVja2VkTm9kZXMubGVuZ3RoID4gMCl7DQogICAgICAgICAgICAgICAgdGhpcy5lY2hvc2VsZWN0ZWROb2RlcyA9IHRoaXMuZWNob3NlbGVjdGVkTm9kZXMuZmlsdGVyKChpdGVtOmFueSk9PiAhaXRlbS51c2VkKTsNCiAgICAgICAgICAgICAgICAvLyDniLboioLngrnpgInkuK3ml7bvvIzkuI3pnIDopoHmiafooYzov5nmrrXvvIzkvJrpgInkuK3miYDmnInlrZDoioLngrkNCiAgICAgICAgICAgICAgICBpZighaXNTZWxlY3RlZEFsbCl7DQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNTaW5nbGVTZWxlY3Qpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmVlTm9kZUhpZ2hMaWdodChjaGVja2VkTm9kZXNbMF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjaGVja2VkTm9kZXNbMF0pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IFt0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGVdOw0KICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IHRoaXMuc2VsZWN0ZWROb2Rlcy5jb25jYXQoY2hlY2tlZE5vZGVzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyZWU6IGFueSA9IHRoaXMuJHJlZnMudHJlZWV4cGJhcl90cmVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdHJlZS5zZXRDaGVja2VkTm9kZXModGhpcy5zZWxlY3RlZE5vZGVzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLyDniLboioLngrnpgInkuK3ml7bvvIzpgInkuK3miYDmnInlrZDoioLngrkNCiAgICAgICAgaWYoaXNTZWxlY3RlZEFsbCl7DQogICAgICAgICAgICBsZXQgbGVhZk5vZGVzID0gaXRlbXMuZmlsdGVyKChpdGVtOmFueSkgPT4gaXRlbS5sZWFmKTsNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IHRoaXMuc2VsZWN0ZWROb2Rlcy5jb25jYXQobGVhZk5vZGVzKTsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGlvbmNoYW5nZScsIHRoaXMuc2VsZWN0ZWROb2Rlcyk7DQogICAgICAgIH0NCiAgICB9IA0KDQogICAgLyoqDQogICAgICog57uY5Yi25Y+z5Ye76I+c5Y2VDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5vZGUNCiAgICAgKiBAcmV0dXJucw0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVuZGVyQ29udGV4dE1lbnUobm9kZTogYW55KSB7DQogICAgICAgIGxldCBjb250ZW50Ow0KICAgICAgICBpZiAobm9kZSAmJiBub2RlLmRhdGEpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGE6IGFueSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobm9kZS5kYXRhKSk7DQogICAgICAgICAgICB0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGUgPSB7IC4uLmRhdGEgfTsNCiAgICAgICAgICAgIGNvbnN0IHRhZ3M6IHN0cmluZ1tdID0gZGF0YS5pZC5zcGxpdCgnOycpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBjb250ZW50Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiuvue9rumAieS4remrmOS6rg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBkYXRhDQogICAgICogQG1lbWJlcm9mIFBFUlNPTklORk9UUkVFQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBzZXRUcmVlTm9kZUhpZ2hMaWdodChkYXRhOiBhbnkpOiB2b2lkIHsNCiAgICAgICAgY29uc3QgdHJlZTogYW55ID0gdGhpcy4kcmVmcy50cmVlZXhwYmFyX3RyZWU7DQogICAgICAgIHRyZWUuc2V0Q3VycmVudEtleShkYXRhLmlkKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmiafooYzpu5jorqTnlYzpnaLooYzkuLoNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbm9kZQ0KICAgICAqIEBtZW1iZXJvZiBQRVJTT05JTkZPVFJFRUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZG9EZWZhdWx0QWN0aW9uKG5vZGU6IGFueSkgew0KICAgICAgICBpZiAobm9kZSAmJiBub2RlLmRhdGEpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGE6IGFueSA9IG5vZGUuZGF0YTsNCiAgICAgICAgICAgIGNvbnN0IHRhZ3M6IHN0cmluZ1tdID0gZGF0YS5pZC5zcGxpdCgnOycpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuJGVtaXQoJ25vZGVkYmxjbGljaycsIHRoaXMuc2VsZWN0ZWROb2Rlcyk7DQogICAgfQ0KDQp9DQo="},null]}