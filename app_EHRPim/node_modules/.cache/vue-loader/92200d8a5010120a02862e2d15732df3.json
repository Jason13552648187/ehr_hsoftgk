{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-person\\ryinfo-form-4-form\\ryinfo-form-4-form-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-person\\ryinfo-form-4-form\\ryinfo-form-4-form-base.vue","mtime":1630509411964},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQppbXBvcnQgeyBWdWUsIENvbXBvbmVudCwgUHJvcCwgUHJvdmlkZSwgRW1pdCwgV2F0Y2gsIE1vZGVsLEluamVjdCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOw0KaW1wb3J0IHsgQ3JlYXRlRWxlbWVudCB9IGZyb20gJ3Z1ZSc7DQppbXBvcnQgeyBTdWJqZWN0LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJzsNCmltcG9ydCB7IENvbnRyb2xJbnRlcmZhY2UgfSBmcm9tICdAL2ludGVyZmFjZS9jb250cm9sJzsNCmltcG9ydCB7IFVJQWN0aW9uVG9vbCxVdGlsIH0gZnJvbSAnQC91dGlscyc7DQppbXBvcnQgTmF2RGF0YVNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlL2FwcC9uYXZkYXRhLXNlcnZpY2UnOw0KaW1wb3J0IFBpbVBlcnNvblNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlL3BpbS1wZXJzb24vcGltLXBlcnNvbi1zZXJ2aWNlJzsNCmltcG9ydCBSWUluZm9Gb3JtXzRTZXJ2aWNlIGZyb20gJy4vcnlpbmZvLWZvcm0tNC1mb3JtLXNlcnZpY2UnOw0KDQppbXBvcnQgeyBGb3JtQnV0dG9uTW9kZWwsIEZvcm1QYWdlTW9kZWwsIEZvcm1JdGVtTW9kZWwsIEZvcm1EUlVJUGFydE1vZGVsLCBGb3JtUGFydE1vZGVsLCBGb3JtR3JvdXBQYW5lbE1vZGVsLCBGb3JtSUZyYW1lTW9kZWwsIEZvcm1Sb3dJdGVtTW9kZWwsIEZvcm1UYWJQYWdlTW9kZWwsIEZvcm1UYWJQYW5lbE1vZGVsLCBGb3JtVXNlckNvbnRyb2xNb2RlbCB9IGZyb20gJ0AvbW9kZWwvZm9ybS1kZXRhaWwnOw0KaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJzsNCg0KDQpAQ29tcG9uZW50KHsNCiAgICBjb21wb25lbnRzOiB7DQogICAgICANCiAgICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgUllJbmZvRm9ybV80QmFzZSBleHRlbmRzIFZ1ZSBpbXBsZW1lbnRzIENvbnRyb2xJbnRlcmZhY2Ugew0KDQogICAgLyoqDQogICAgICog5ZCN56ewDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgbmFtZT86IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvumAmuiur+WvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1N1YmplY3Q8Vmlld1N0YXRlPn0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHZpZXdTdGF0ZSE6IFN1YmplY3Q8Vmlld1N0YXRlPjsNCg0KICAgIC8qKg0KICAgICAqIOW6lOeUqOS4iuS4i+aWhw0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBjb250ZXh0OiBhbnk7DQoNCiAgICAvKioNCiAgICAgKiDop4blm77lj4LmlbANCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgdmlld3BhcmFtczogYW55Ow0KDQogICAgLyoqDQogICAgICog6KeG5Zu+54q25oCB5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHR5cGUgeyhTdWJzY3JpcHRpb24gfCB1bmRlZmluZWQpfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIHZpZXdTdGF0ZUV2ZW50OiBTdWJzY3JpcHRpb24gfCB1bmRlZmluZWQ7DQoNCiAgICAvKioNCiAgICAgKiDojrflj5bpg6jku7bnsbvlnosNCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZ2V0Q29udHJvbFR5cGUoKTogc3RyaW5nIHsNCiAgICAgICAgcmV0dXJuICdGT1JNJw0KICAgIH0NCg0KDQoNCiAgICAvKioNCiAgICAgKiDorqHmlbDlmajmnI3liqHlr7nosaHpm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHtBcnJheTwqPn0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLyAgICANCiAgICBwdWJsaWMgY291bnRlclNlcnZpY2VBcnJheTpBcnJheTxhbnk+ID0gW107DQoNCiAgICAvKioNCiAgICAgKiDlu7rmnoTpg6jku7bmnI3liqHlr7nosaENCiAgICAgKg0KICAgICAqIEB0eXBlIHtSWUluZm9Gb3JtXzRTZXJ2aWNlfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIHNlcnZpY2U6IFJZSW5mb0Zvcm1fNFNlcnZpY2UgPSBuZXcgUllJbmZvRm9ybV80U2VydmljZSh7ICRzdG9yZTogdGhpcy4kc3RvcmUgfSk7DQoNCiAgICAvKioNCiAgICAgKiDlrp7kvZPmnI3liqHlr7nosaENCiAgICAgKg0KICAgICAqIEB0eXBlIHtQaW1QZXJzb25TZXJ2aWNlfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGFwcEVudGl0eVNlcnZpY2U6IFBpbVBlcnNvblNlcnZpY2UgPSBuZXcgUGltUGVyc29uU2VydmljZSh7ICRzdG9yZTogdGhpcy4kc3RvcmUgfSk7DQogICAgDQoNCg0KICAgIC8qKg0KICAgICAqIOWFs+mXreinhuWbvg0KICAgICAqDQogICAgICogQHBhcmFtIHthbnl9IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjbG9zZVZpZXcoYXJnczogYW55KTogdm9pZCB7DQogICAgICAgIGxldCBfdGhpczogYW55ID0gdGhpczsNCiAgICAgICAgX3RoaXMuJGVtaXQoJ2Nsb3NldmlldycsIFthcmdzXSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogIOiuoeaVsOWZqOWIt+aWsA0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgY291bnRlclJlZnJlc2goKXsNCiAgICAgICAgY29uc3QgX3RoaXM6YW55ID10aGlzOw0KICAgICAgICBpZihfdGhpcy5jb3VudGVyU2VydmljZUFycmF5ICYmIF90aGlzLmNvdW50ZXJTZXJ2aWNlQXJyYXkubGVuZ3RoID4wKXsNCiAgICAgICAgICAgIF90aGlzLmNvdW50ZXJTZXJ2aWNlQXJyYXkuZm9yRWFjaCgoaXRlbTphbnkpID0+ew0KICAgICAgICAgICAgICAgIGlmKGl0ZW0ucmVmcmVzaERhdGEgJiYgaXRlbS5yZWZyZXNoRGF0YSBpbnN0YW5jZW9mIEZ1bmN0aW9uKXsNCiAgICAgICAgICAgICAgICAgICAgaXRlbS5yZWZyZXNoRGF0YSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICB9DQoNCg0KICAgIC8qKg0KICAgICAqIOW3peS9nOa1geWuoeaJueaEj+ingeaOp+S7tue7keWumuWAvA0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc3Jmd2ZtZW1vOnN0cmluZyA9ICIiOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOiOt+WPluWkmumhueaVsOaNrg0KICAgICAqDQogICAgICogQHJldHVybnMge2FueVtdfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGdldERhdGFzKCk6IGFueVtdIHsNCiAgICAgICAgcmV0dXJuIFt0aGlzLmRhdGFdOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiOt+WPluWNlemhueagkQ0KICAgICAqDQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZ2V0RGF0YSgpOiBhbnkgew0KICAgICAgICByZXR1cm4gdGhpcy5kYXRhOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaYr+WQpum7mOiupOS/neWtmA0KICAgICAqDQogICAgICogQHR5cGUge2Jvb2xlYW59DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCh7IGRlZmF1bHQ6IGZhbHNlIH0pIHB1YmxpYyBhdXRvc2F2ZT86IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDmmL7npLrlpITnkIbmj5DnpLoNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgQFByb3AoeyBkZWZhdWx0OiB0cnVlIH0pIHB1YmxpYyBzaG93QnVzeUluZGljYXRvcj86IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLXN1Ym1pdA0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIFdGU3VibWl0QWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tc3RhcnQNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBXRlN0YXJ0QWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tdXBkYXRlDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgdXBkYXRlQWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tcmVtb3ZlDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgcmVtb3ZlQWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tbG9hZGRyYWZ0DQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgbG9hZGRyYWZ0QWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tbG9hZA0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGxvYWRBY3Rpb24hOiBzdHJpbmc7DQogICAgDQogICAgLyoqDQogICAgICog6YOo5Lu26KGM5Li6LS1jcmVhdGUNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBjcmVhdGVBY3Rpb24hOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLWNyZWF0ZQ0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHNlYXJjaEFjdGlvbiE6IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvuagh+ivhg0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHZpZXd0YWchOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDooajljZXnirbmgIENCiAgICAgKg0KICAgICAqIEB0eXBlIHtTdWJqZWN0PGFueT59DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZm9ybVN0YXRlOiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdCgpOw0KDQogICAgLyoqDQogICAgICog5b+955Wl6KGo5Y2V6aG55YC85Y+Y5YyWDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBpZ25vcmVmaWVsZHZhbHVlY2hhbmdlOiBib29sZWFuID0gZmFsc2U7DQoNCiAgICAvKioNCiAgICAgKiDmlbDmja7lj5jljJYNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAdHlwZSB7U3ViamVjdDxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGRhdGFDaGFuZzogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3QoKTsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvueKtuaAgeS6i+S7tg0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEB0eXBlIHsoU3Vic2NyaXB0aW9uIHwgdW5kZWZpbmVkKX0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBkYXRhQ2hhbmdFdmVudDogU3Vic2NyaXB0aW9uIHwgdW5kZWZpbmVkOw0KDQogICAgLyoqDQogICAgICog5Y6f5aeL5pWw5o2uDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgb2xkRGF0YTogYW55ID0ge307DQoNCiAgICAvKioNCiAgICAgKiDooajljZXmlbDmja7lr7nosaENCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGRhdGE6IGFueSA9IHsNCiAgICAgICAgc3JmdXBkYXRlZGF0ZTogbnVsbCwNCiAgICAgICAgc3Jmb3Jpa2V5OiBudWxsLA0KICAgICAgICBzcmZrZXk6IG51bGwsDQogICAgICAgIHNyZm1ham9ydGV4dDogbnVsbCwNCiAgICAgICAgc3JmdGVtcG1vZGU6IG51bGwsDQogICAgICAgIHNyZnVmOiBudWxsLA0KICAgICAgICBzcmZkZWlkOiBudWxsLA0KICAgICAgICBzcmZzb3VyY2VrZXk6IG51bGwsDQogICAgICAgIHBpbXBlcnNvbmlkOiBudWxsLA0KICAgICAgICBwaW1wZXJzb246bnVsbCwNCiAgICB9Ow0KDQogICAgLyoqDQogICAgICAqIOW9k+WJjeaJp+ihjOeahOihjOS4uumAu+i+kQ0KICAgICAgKg0KICAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAgKi8NCiAgICBwdWJsaWMgY3VycmVudEFjdGlvbjogc3RyaW5nID0gIiI7DQoNCiAgICAvKioNCiAgICAgICog5YWz57O755WM6Z2i6K6h5pWw5ZmoDQogICAgICAqDQogICAgICAqIEB0eXBlIHtudW1iZXJ9DQogICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICAqLw0KICAgIHB1YmxpYyBkcmNvdW50ZXI6IG51bWJlciA9IDA7DQoNCiAgICAvKioNCiAgICAgICog6ZyA6KaB562J5b6F5YWz57O755WM6Z2i5L+d5a2Y5pe277yM56ys5LiA5qyh6LCD55Soc2F2ZeWPguaVsOeahOWkh+S7vQ0KICAgICAgKg0KICAgICAgKiBAdHlwZSB7bnVtYmVyfQ0KICAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAgKi8NCiAgICBwdWJsaWMgZHJzYXZlb3B0OiBhbnkgPSB7fTsNCg0KICAgIC8qKg0KICAgICAgKiDooajljZXkv53lrZjlm57osIPlrZjlgqjlr7nosaENCiAgICAgICoNCiAgICAgICogQHR5cGUge2FueX0NCiAgICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgICovDQogICAgcHVibGljIHNhdmVTdGF0ZTphbnkgOw0KDQogICAgLyoqDQogICAgICog5bGe5oCn5YC86KeE5YiZDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBydWxlczogYW55ID0gew0KICAgICAgICBzcmZ1cGRhdGVkYXRlOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5pu05paw5pe26Ze0IOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5pu05paw5pe26Ze0IOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5pu05paw5pe26Ze0IOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfmm7TmlrDml7bpl7Qg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHNyZm9yaWtleTogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBzcmZrZXk6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfkurrlkZjkv6Hmga/moIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfkurrlkZjkv6Hmga/moIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfkurrlkZjkv6Hmga/moIfor4Yg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+S6uuWRmOS/oeaBr+agh+ivhiDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3JmbWFqb3J0ZXh0OiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5ZGY5bel5aeT5ZCNIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5ZGY5bel5aeT5ZCNIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5ZGY5bel5aeT5ZCNIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflkZjlt6Xlp5PlkI0g5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHNyZnRlbXBtb2RlOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHNyZnVmOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHNyZmRlaWQ6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3Jmc291cmNla2V5OiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHBpbXBlcnNvbmlkOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Lq65ZGY5L+h5oGv5qCH6K+GIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Lq65ZGY5L+h5oGv5qCH6K+GIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Lq65ZGY5L+h5oGv5qCH6K+GIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfkurrlkZjkv6Hmga/moIfor4Yg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6K+m5oOF5qih5Z6L6ZuG5ZCIDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBkZXRhaWxzTW9kZWw6IGFueSA9IHsNCiAgICAgICAgcmF3aXRlbTE6IG5ldyBGb3JtUm93SXRlbU1vZGVsKHsgY2FwdGlvbjogJycsIGRldGFpbFR5cGU6ICdSQVdJVEVNJywgbmFtZTogJ3Jhd2l0ZW0xJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcyB9KQ0KLCANCiAgICAgICAgZHJ1aXBhcnQxOiBuZXcgRm9ybURSVUlQYXJ0TW9kZWwoeyBjYXB0aW9uOiAnJywgZGV0YWlsVHlwZTogJ0RSVUlQQVJUJywgbmFtZTogJ2RydWlwYXJ0MScsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMgfSkNCiwgDQogICAgICAgIHJhd2l0ZW0yOiBuZXcgRm9ybVJvd0l0ZW1Nb2RlbCh7IGNhcHRpb246ICcnLCBkZXRhaWxUeXBlOiAnUkFXSVRFTScsIG5hbWU6ICdyYXdpdGVtMicsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMgfSkNCiwgDQogICAgICAgIGRydWlwYXJ0MjogbmV3IEZvcm1EUlVJUGFydE1vZGVsKHsgY2FwdGlvbjogJycsIGRldGFpbFR5cGU6ICdEUlVJUEFSVCcsIG5hbWU6ICdkcnVpcGFydDInLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzIH0pDQosIA0KICAgICAgICByYXdpdGVtMzogbmV3IEZvcm1Sb3dJdGVtTW9kZWwoeyBjYXB0aW9uOiAnJywgZGV0YWlsVHlwZTogJ1JBV0lURU0nLCBuYW1lOiAncmF3aXRlbTMnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzIH0pDQosIA0KICAgICAgICBkcnVpcGFydDM6IG5ldyBGb3JtRFJVSVBhcnRNb2RlbCh7IGNhcHRpb246ICcnLCBkZXRhaWxUeXBlOiAnRFJVSVBBUlQnLCBuYW1lOiAnZHJ1aXBhcnQzJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcyB9KQ0KLCANCiAgICAgICAgZm9ybXBhZ2UzOiBuZXcgRm9ybVBhZ2VNb2RlbCh7IGNhcHRpb246ICflrabmnK/miJDmnpwnLCBkZXRhaWxUeXBlOiAnRk9STVBBR0UnLCBuYW1lOiAnZm9ybXBhZ2UzJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcyB9KQ0KLCANCiAgICAgICAgc3JmdXBkYXRlZGF0ZTogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAn5pu05paw5pe26Ze0JywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ3NyZnVwZGF0ZWRhdGUnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZm9yaWtleTogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAnJywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ3NyZm9yaWtleScsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMsIGRpc2FibGVkOiBmYWxzZSwgZW5hYmxlQ29uZDogMyB9KQ0KLCANCiAgICAgICAgc3Jma2V5OiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfkurrlkZjkv6Hmga/moIfor4YnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3Jma2V5JywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBzcmZtYWpvcnRleHQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+WRmOW3peWnk+WQjScsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdzcmZtYWpvcnRleHQnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZnRlbXBtb2RlOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICcnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3JmdGVtcG1vZGUnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZnVmOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICcnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3JmdWYnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZmRlaWQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJycsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdzcmZkZWlkJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBzcmZzb3VyY2VrZXk6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJycsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdzcmZzb3VyY2VrZXknLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHBpbXBlcnNvbmlkOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfkurrlkZjkv6Hmga/moIfor4YnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAncGltcGVyc29uaWQnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgfTsNCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZ1cGRhdGVkYXRlIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnNyZnVwZGF0ZWRhdGUnKQ0KICAgIG9uU3JmdXBkYXRlZGF0ZUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzcmZ1cGRhdGVkYXRlJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZvcmlrZXkg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuc3Jmb3Jpa2V5JykNCiAgICBvblNyZm9yaWtleUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzcmZvcmlrZXknLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZmtleSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5zcmZrZXknKQ0KICAgIG9uU3Jma2V5Q2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZmtleScsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3JmbWFqb3J0ZXh0IOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnNyZm1ham9ydGV4dCcpDQogICAgb25TcmZtYWpvcnRleHRDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAnc3JmbWFqb3J0ZXh0JywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZ0ZW1wbW9kZSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5zcmZ0ZW1wbW9kZScpDQogICAgb25TcmZ0ZW1wbW9kZUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzcmZ0ZW1wbW9kZScsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3JmdWYg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuc3JmdWYnKQ0KICAgIG9uU3JmdWZDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAnc3JmdWYnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZmRlaWQg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuc3JmZGVpZCcpDQogICAgb25TcmZkZWlkQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZmRlaWQnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZnNvdXJjZWtleSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5zcmZzb3VyY2VrZXknKQ0KICAgIG9uU3Jmc291cmNla2V5Q2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZnNvdXJjZWtleScsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgcGltcGVyc29uaWQg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEucGltcGVyc29uaWQnKQ0KICAgIG9uUGltcGVyc29uaWRDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAncGltcGVyc29uaWQnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQoNCiAgICAvKioNCiAgICAgKiDph43nva7ooajljZXpobnlgLwNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0ge3sgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfX0geyBuYW1lLCBuZXdWYWwsIG9sZFZhbCB9DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVzZXRGb3JtRGF0YSh7IG5hbWUsIG5ld1ZhbCwgb2xkVmFsIH06IHsgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfSk6IHZvaWQgew0KICAgIH0NCg0KICAgIC8qKg0KICAgICAgKiDnva7nqbrlr7nosaENCiAgICAgICoNCiAgICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICAqLw0KICAgIHB1YmxpYyBSZXNldERhdGEoX2RhdGFzOmFueSl7DQogICAgICAgIGlmKE9iamVjdC5rZXlzKF9kYXRhcykubGVuZ3RoID4wKXsNCiAgICAgICAgICAgIE9iamVjdC5rZXlzKF9kYXRhcykuZm9yRWFjaCgobmFtZTogc3RyaW5nKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0gPSBudWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6KGo5Y2V6YC76L6RDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHt7IG5hbWU6IHN0cmluZywgbmV3VmFsOiBhbnksIG9sZFZhbDogYW55IH19IHsgbmFtZSwgbmV3VmFsLCBvbGRWYWwgfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGZvcm1Mb2dpYyh7IG5hbWUsIG5ld1ZhbCwgb2xkVmFsIH06IHsgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfSk6IHZvaWQgew0KICAgICAgICAgICAgICAgIA0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6KGo5Y2V5YC85Y+Y5YyWDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHt7IG5hbWU6IHN0cmluZywgbmV3VmFsOiBhbnksIG9sZFZhbDogYW55IH19IHsgbmFtZSwgbmV3VmFsLCBvbGRWYWwgfQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGZvcm1EYXRhQ2hhbmdlKHsgbmFtZSwgbmV3VmFsLCBvbGRWYWwgfTogeyBuYW1lOiBzdHJpbmcsIG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSB9KTogdm9pZCB7DQogICAgICAgIGlmICh0aGlzLmlnbm9yZWZpZWxkdmFsdWVjaGFuZ2UpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnJlc2V0Rm9ybURhdGEoeyBuYW1lOiBuYW1lLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgICAgIHRoaXMuZm9ybUxvZ2ljKHsgbmFtZTogbmFtZSwgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgICAgICB0aGlzLmRhdGFDaGFuZy5uZXh0KEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSkpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOihqOWNleWKoOi9veWujOaIkA0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHtzdHJpbmd9IFthY3Rpb25dDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgb25Gb3JtTG9hZChkYXRhOiBhbnkgPSB7fSxhY3Rpb246c3RyaW5nKTogdm9pZCB7DQogICAgICAgIGlmKE9iamVjdC5pcyhhY3Rpb24sInNhdmUiKSB8fCBPYmplY3QuaXMoYWN0aW9uLCJhdXRvU2F2ZSIpIHx8IE9iamVjdC5pcyhhY3Rpb24sInN1Ym1pdCIpKQ0KICAgICAgICAvLyDmm7TmlrBjb250ZXh055qE5a6e5L2T5Li76ZSuDQogICAgICAgIGlmKGRhdGEucGltcGVyc29uKXsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb250ZXh0LHtwaW1wZXJzb246ZGF0YS5waW1wZXJzb259KQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuc2V0Rm9ybUVuYWJsZUNvbmQoZGF0YSk7DQogICAgICAgIHRoaXMuZmlsbEZvcm0oZGF0YSxhY3Rpb24pOw0KICAgICAgICB0aGlzLm9sZERhdGEgPSB7fTsNCiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLm9sZERhdGEsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhKSkpOw0KICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3ZpZXdhY3Rpb24vc2V0Vmlld0RhdGFDaGFuZ2UnLCB7IHZpZXd0YWc6IHRoaXMudmlld3RhZywgdmlld2RhdGFjaGFuZ2U6IGZhbHNlIH0pOw0KICAgICAgICB0aGlzLmZvcm1Mb2dpYyh7IG5hbWU6ICcnLCBuZXdWYWw6IG51bGwsIG9sZFZhbDogbnVsbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlgLzloavlhYUNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW19kYXRhcz17fV0NCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2FjdGlvbl0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmaWxsRm9ybShfZGF0YXM6IGFueSA9IHt9LGFjdGlvbjpzdHJpbmcpOiB2b2lkIHsNCiAgICAgICAgdGhpcy5pZ25vcmVmaWVsZHZhbHVlY2hhbmdlID0gdHJ1ZTsNCiAgICAgICAgT2JqZWN0LmtleXMoX2RhdGFzKS5mb3JFYWNoKChuYW1lOiBzdHJpbmcpID0+IHsNCiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0gPSBfZGF0YXNbbmFtZV07DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICBpZihPYmplY3QuaXMoYWN0aW9uLCdsb2FkRHJhZnQnKSl7DQogICAgICAgICAgICB0aGlzLmNyZWF0ZURlZmF1bHQoKTsNCiAgICAgICAgfQ0KICAgICAgICBpZihPYmplY3QuaXMoYWN0aW9uLCdsb2FkJykpew0KICAgICAgICAgICAgdGhpcy51cGRhdGVEZWZhdWx0KCk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdGhpcy5pZ25vcmVmaWVsZHZhbHVlY2hhbmdlID0gZmFsc2U7DQogICAgICAgIH0pDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6K6+572u6KGo5Y2V6aG55piv5ZCm5ZCv55SoDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBkYXRhDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc2V0Rm9ybUVuYWJsZUNvbmQoZGF0YTogYW55KTogdm9pZCB7DQogICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5kZXRhaWxzTW9kZWwpLmZvckVhY2goKGRldGFpbDogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAoIU9iamVjdC5pcyhkZXRhaWwuZGV0YWlsVHlwZSwgJ0ZPUk1JVEVNJykpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBmb3JtSXRlbTogRm9ybUl0ZW1Nb2RlbCA9IGRldGFpbDsNCiAgICAgICAgICAgIGZvcm1JdGVtLnNldEVuYWJsZUNvbmQoZGF0YS5zcmZ1Zik7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmHjee9ruiNieeov+ihqOWNleeKtuaAgQ0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIHJlc2V0RHJhZnRGb3JtU3RhdGVzKCk6IHZvaWQgew0KICAgICAgICBjb25zdCBmb3JtOiBhbnkgPSB0aGlzLiRyZWZzLmZvcm07DQogICAgICAgIGlmIChmb3JtKSB7DQogICAgICAgICAgICBmb3JtLnJlc2V0RmllbGRzKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDph43nva7moKHpqoznu5PmnpwNCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIHJlc2V0VmFsaWRhdGVzKCk6IHZvaWQgew0KICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMuZGV0YWlsc01vZGVsKS5mb3JFYWNoKChkZXRhaWw6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKCFPYmplY3QuaXMoZGV0YWlsLmRldGFpbFR5cGUsICdGT1JNSVRFTScpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgZm9ybUl0ZW06IEZvcm1JdGVtTW9kZWwgPSBkZXRhaWw7DQogICAgICAgICAgICBmb3JtSXRlbS5zZXRFcnJvcignJyk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWhq+WFheagoemqjOe7k+aenCDvvIjlkI7lj7DvvIkNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGZpZWxkRXJyb3JzDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZmlsbFZhbGlkYXRlcyhmaWVsZEVycm9yczogYW55W10pOiB2b2lkIHsNCiAgICAgICAgZmllbGRFcnJvcnMuZm9yRWFjaCgoZXJyb3I6IGFueSkgPT4gew0KICAgICAgICAgICAgY29uc3QgZm9ybUl0ZW06IEZvcm1JdGVtTW9kZWwgPSB0aGlzLmRldGFpbHNNb2RlbFtlcnJvci5maWVsZF07DQogICAgICAgICAgICBpZiAoIWZvcm1JdGVtKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIGZvcm1JdGVtLnNldEVycm9yKGVycm9yLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOihqOWNleagoemqjOeKtuaAgQ0KICAgICAqDQogICAgICogQHJldHVybnMge2Jvb2xlYW59IA0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGZvcm1WYWxpZGF0ZVN0YXR1cygpOiBib29sZWFuIHsNCiAgICAgICAgY29uc3QgZm9ybTogYW55ID0gdGhpcy4kcmVmcy5mb3JtOw0KICAgICAgICBsZXQgdmFsaWRhdGVzdGF0ZTogYm9vbGVhbiA9IHRydWU7DQogICAgICAgIGZvcm0udmFsaWRhdGUoKHZhbGlkOiBib29sZWFuKSA9PiB7DQogICAgICAgICAgICB2YWxpZGF0ZXN0YXRlID0gdmFsaWQgPyB0cnVlIDogZmFsc2U7DQogICAgICAgIH0pOw0KICAgICAgICByZXR1cm4gdmFsaWRhdGVzdGF0ZQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiOt+WPluWFqOmDqOWAvA0KICAgICAqDQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZ2V0VmFsdWVzKCk6IGFueSB7DQogICAgICAgIHJldHVybiB0aGlzLmRhdGE7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6KGo5Y2V6aG55YC85Y+Y5pu0DQogICAgICoNCiAgICAgKiBAcGFyYW0ge3sgbmFtZTogc3RyaW5nLCB2YWx1ZTogYW55IH19ICRldmVudA0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIG9uRm9ybUl0ZW1WYWx1ZUNoYW5nZSgkZXZlbnQ6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogYW55IH0pOiB2b2lkIHsNCiAgICAgICAgaWYgKCEkZXZlbnQpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoISRldmVudC5uYW1lIHx8IE9iamVjdC5pcygkZXZlbnQubmFtZSwgJycpIHx8ICF0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkoJGV2ZW50Lm5hbWUpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kYXRhWyRldmVudC5uYW1lXSA9ICRldmVudC52YWx1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDorr7nva7mlbDmja7pobnlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lDQogICAgICogQHBhcmFtIHsqfSB2YWx1ZQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIHNldERhdGFJdGVtVmFsdWUobmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7DQogICAgICAgIGlmICghbmFtZSB8fCBPYmplY3QuaXMobmFtZSwgJycpIHx8ICF0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoT2JqZWN0LmlzKHRoaXMuZGF0YVtuYW1lXSwgdmFsdWUpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kYXRhW25hbWVdID0gdmFsdWU7DQogICAgfQ0KDQoNCg0KICAgIC8qKg0KICAgICAqIOWIhue7hOeVjOmdouihjOS4uuS6i+S7tg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSAkZXZlbnQNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBncm91cFVJQWN0aW9uQ2xpY2soJGV2ZW50OiBhbnkpOiB2b2lkIHsNCiAgICAgICAgaWYgKCEkZXZlbnQpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBpdGVtOmFueSA9ICRldmVudC5pdGVtOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFZ1ZeWjsOaYjuWRqOacnyjlpITnkIbnu4Tku7bnmoTovpPlhaXlsZ7mgKcpDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjcmVhdGVkKCk6IHZvaWQgew0KICAgICAgICB0aGlzLmFmdGVyQ3JlYXRlZCgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaJp+ihjGNyZWF0ZWTlkI7nmoTpgLvovpENCiAgICAgKg0KICAgICAqICBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLyAgICANCiAgICBwdWJsaWMgYWZ0ZXJDcmVhdGVkKCl7DQogICAgICAgIGlmICh0aGlzLnZpZXdTdGF0ZSkgew0KICAgICAgICAgICAgdGhpcy52aWV3U3RhdGVFdmVudCA9IHRoaXMudmlld1N0YXRlLnN1YnNjcmliZSgoeyB0YWcsIGFjdGlvbiwgZGF0YSB9KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFPYmplY3QuaXModGFnLCB0aGlzLm5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygnYXV0b2xvYWQnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b0xvYWQoZGF0YSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaXMoJ2xvYWQnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZChkYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygnbG9hZGRyYWZ0JywgYWN0aW9uKSkgew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNvbnRleHQuc3Jmc291cmNla2V5KXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29weSh0aGlzLmNvbnRleHQuc3Jmc291cmNla2V5KTsNCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREcmFmdChkYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdzYXZlJywgYWN0aW9uKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmUoZGF0YSxkYXRhLnNob3dSZXN1bHRJbmZvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygncmVtb3ZlJywgYWN0aW9uKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShkYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygnc2F2ZWFuZGV4aXQnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUFuZEV4aXQoZGF0YSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaXMoJ3NhdmVhbmRuZXcnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUFuZE5ldyhkYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygncmVtb3ZlYW5kZXhpdCcsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbmRFeGl0KGRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdyZWZyZXNoJywgYWN0aW9uKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goZGF0YSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kYXRhQ2hhbmcNCiAgICAgICAgICAgIC5waXBlKA0KICAgICAgICAgICAgICAgIGRlYm91bmNlVGltZSgzMDApLA0KICAgICAgICAgICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkNCiAgICAgICAgICAgICkuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvc2F2ZSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dG9TYXZlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gIU9iamVjdC5pcyhKU09OLnN0cmluZ2lmeSh0aGlzLm9sZERhdGEpLCBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKSA/IHRydWUgOiBmYWxzZTsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3ZpZXdhY3Rpb24vc2V0Vmlld0RhdGFDaGFuZ2UnLCB7IHZpZXd0YWc6IHRoaXMudmlld3RhZywgdmlld2RhdGFjaGFuZ2U6IHN0YXRlIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogdnVlIOeUn+WRveWRqOacnw0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZGVzdHJveWVkKCkgew0KICAgICAgICB0aGlzLmFmdGVyRGVzdHJveSgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaJp+ihjGRlc3Ryb3llZOWQjueahOmAu+i+kQ0KICAgICAqDQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgYWZ0ZXJEZXN0cm95KCkgew0KICAgICAgICBpZiAodGhpcy52aWV3U3RhdGVFdmVudCkgew0KICAgICAgICAgICAgdGhpcy52aWV3U3RhdGVFdmVudC51bnN1YnNjcmliZSgpOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmRhdGFDaGFuZ0V2ZW50KSB7DQogICAgICAgICAgICB0aGlzLmRhdGFDaGFuZ0V2ZW50LnVuc3Vic2NyaWJlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmi7fotJ3lhoXlrrkNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW2FyZz17fV0NCiAgICAgKiBAbWVtYmVyb2YgQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgY29weShzcmZrZXk6IHN0cmluZyk6IHZvaWQgew0KICAgICAgICBsZXQgY29weURhdGEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENvcHlEYXRhKHNyZmtleSk7DQogICAgICAgIGNvcHlEYXRhLnNyZmtleSA9IFV0aWwuY3JlYXRlVVVJRCgpOw0KICAgICAgICBjb3B5RGF0YS5waW1wZXJzb24gPSBjb3B5RGF0YS5zcmZrZXk7DQogICAgICAgIGNvcHlEYXRhLnBpbXBlcnNvbmlkID0gY29weURhdGEuc3Jma2V5Ow0KICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY29udGV4dCx7cGltcGVyc29uOmNvcHlEYXRhLnBpbXBlcnNvbn0pDQogICAgICAgIHRoaXMuZGF0YSA9IGNvcHlEYXRhOw0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdsb2FkJywgZGF0YTogY29weURhdGEgfSk7DQogICAgICAgICAgdGhpcy5kYXRhLnNyZnVmID0gJzAnOw0KICAgICAgICAgIHRoaXMuc2V0Rm9ybUVuYWJsZUNvbmQodGhpcy5kYXRhKTsNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICrmiZPljbANCiAgICAgKkBtZW1iZXJvZiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBwcmludCgpew0KICAgICAgICBsZXQgX3RoaXM6YW55ID0gdGhpczsNCiAgICAgICAgX3RoaXMuJHByaW50KHtpZDoncGltcGVyc29uX3J5aW5mb2Zvcm1fNCcscG9wVGl0bGU6J+S6uuWRmOS/oeaBr++8iOenkeeglOS4k+WIqeiuuuaWh++8iSd9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7bliLfmlrANCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyByZWZyZXNoKGFyZ3M6IGFueVtdKTogdm9pZCB7DQogICAgICAgIGxldCBhcmc6IGFueSA9IHt9Ow0KICAgICAgICBPYmplY3QuYXNzaWduKGFyZyxhcmdzWzBdKTsNCiAgICAgICAgaWYgKHRoaXMuZGF0YS5zcmZrZXkgJiYgIU9iamVjdC5pcyh0aGlzLmRhdGEuc3Jma2V5LCAnJykpIHsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7IHNyZmtleTogdGhpcy5kYXRhLnNyZmtleSB9KTsNCiAgICAgICAgICAgIHRoaXMubG9hZChhcmcpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmRhdGEuc3Jma2V5cyAmJiAhT2JqZWN0LmlzKHRoaXMuZGF0YS5zcmZrZXlzLCAnJykpIHsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7IHNyZmtleTogdGhpcy5kYXRhLnNyZmtleXMgfSk7DQogICAgICAgICAgICB0aGlzLmxvYWQoYXJnKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiHquWKqOWKoOi9vQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbYXJnPXt9XQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGF1dG9Mb2FkKGFyZzogYW55ID0ge30pOiB2b2lkIHsNCiAgICAgICAgaWYgKGFyZy5zcmZrZXkgJiYgIU9iamVjdC5pcyhhcmcuc3Jma2V5LCAnJykpIHsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7IHNyZmtleTogYXJnLnNyZmtleSB9KTsNCiAgICAgICAgICAgIHRoaXMubG9hZChhcmcpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmIChhcmcuc3Jma2V5cyAmJiAhT2JqZWN0LmlzKGFyZy5zcmZrZXlzLCAnJykpIHsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7IHNyZmtleTogYXJnLnNyZmtleXMgfSk7DQogICAgICAgICAgICB0aGlzLmxvYWQoYXJnKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmxvYWREcmFmdChhcmcpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWKoOi9vQ0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7Kn0gW29wdD17fV0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBsb2FkKG9wdDogYW55ID0ge30pOiB2b2lkIHsNCiAgICAgICAgaWYoIXRoaXMubG9hZEFjdGlvbil7DQogICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICdQSU1QRVJTT05YU0NHRWRpdFZpZXfop4blm77ooajljZVsb2FkQWN0aW9u5Y+C5pWw5pyq6YWN572uJyB9KTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBhcmc6IGFueSA9IHsgLi4ub3B0IH07DQogICAgICAgIGxldCB2aWV3cGFyYW1SZXN1bHQ6YW55ID0gT2JqZWN0LmFzc2lnbihhcmcsdGhpcy52aWV3cGFyYW1zKTsNCiAgICAgICAgY29uc3QgZ2V0OiBQcm9taXNlPGFueT4gPSB0aGlzLnNlcnZpY2UuZ2V0KHRoaXMubG9hZEFjdGlvbixKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLHt2aWV3cGFyYW1zOnZpZXdwYXJhbVJlc3VsdH0sIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOw0KICAgICAgICBnZXQudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgICAgdGhpcy5vbkZvcm1Mb2FkKGRhdGEsJ2xvYWQnKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2FkJywgZGF0YSk7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ2xvYWQnLCBkYXRhOiBkYXRhIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn57O757uf5byC5bi4JyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWKoOi9veiNieeovw0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbb3B0PXt9XQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGxvYWREcmFmdChvcHQ6IGFueSA9IHt9KTogdm9pZCB7DQogICAgICAgIGlmKCF0aGlzLmxvYWRkcmFmdEFjdGlvbil7DQogICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICdQSU1QRVJTT05YU0NHRWRpdFZpZXfop4blm77ooajljZVsb2FkZHJhZnRBY3Rpb27lj4LmlbDmnKrphY3nva4nIH0pOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IGFyZzogYW55ID0geyAuLi5vcHQgfSA7DQogICAgICAgIGxldCB2aWV3cGFyYW1SZXN1bHQ6YW55ID0gT2JqZWN0LmFzc2lnbihhcmcsdGhpcy52aWV3cGFyYW1zKTsNCiAgICAgICAgbGV0IHBvc3Q6IFByb21pc2U8YW55PiA9IHRoaXMuc2VydmljZS5sb2FkRHJhZnQodGhpcy5sb2FkZHJhZnRBY3Rpb24sSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSx7dmlld3BhcmFtczp2aWV3cGFyYW1SZXN1bHR9LCB0aGlzLnNob3dCdXN5SW5kaWNhdG9yKTsNCiAgICAgICAgcG9zdC50aGVuKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgaWYoZGF0YS5waW1wZXJzb24pew0KICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb250ZXh0LHtwaW1wZXJzb246ZGF0YS5waW1wZXJzb259KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5yZXNldERyYWZ0Rm9ybVN0YXRlcygpOw0KICAgICAgICAgICAgdGhpcy5vbkZvcm1Mb2FkKGRhdGEsJ2xvYWREcmFmdCcpOw0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnbG9hZCcsIGRhdGEpOw0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybVN0YXRlLm5leHQoeyB0eXBlOiAnbG9hZCcsIGRhdGE6IGRhdGEgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm06IGFueSA9IHRoaXMuJHJlZnMuZm9ybTsNCiAgICAgICAgICAgICAgICBpZiAoZm9ybSkgew0KICAgICAgICAgICAgICAgICAgICBmb3JtLmZpZWxkcy5mb3JFYWNoKChmaWVsZDogYW55KSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC52YWxpZGF0ZU1lc3NhZ2UgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnZhbGlkYXRlU3RhdGUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnZhbGlkYXRlU3RhdHVzID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAgJiYgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDoh6rliqjkv53lrZgNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW29wdD17fV0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBhdXRvU2F2ZShvcHQ6IGFueSA9IHt9KTogdm9pZCB7DQogICAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGVTdGF0dXMoKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IGFyZzogYW55ID0geyAuLi5vcHQgfTsNCiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0VmFsdWVzKCk7DQogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCBkYXRhKTsNCiAgICAgICAgY29uc3QgYWN0aW9uOiBhbnkgPSBPYmplY3QuaXMoZGF0YS5zcmZ1ZiwgJzEnKSA/IHRoaXMudXBkYXRlQWN0aW9uIDogdGhpcy5jcmVhdGVBY3Rpb247DQogICAgICAgIGlmKCFhY3Rpb24pew0KICAgICAgICAgICAgbGV0IGFjdGlvbk5hbWU6YW55ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJyk/InVwZGF0ZUFjdGlvbiI6ImNyZWF0ZUFjdGlvbiI7DQogICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICdQSU1QRVJTT05YU0NHRWRpdFZpZXfop4blm77ooajljZUnK2FjdGlvbk5hbWUrJ+WPguaVsOacqumFjee9ricgfSk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcse3ZpZXdwYXJhbXM6dGhpcy52aWV3cGFyYW1zfSk7DQogICAgICAgIGNvbnN0IHBvc3Q6IFByb21pc2U8YW55PiA9IHRoaXMuc2VydmljZS5hZGQoYWN0aW9uLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcik7DQogICAgICAgIHBvc3QudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgIHRoaXMub25Gb3JtTG9hZChkYXRhLCdhdXRvU2F2ZScpOw0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2F2ZScsIGRhdGEpOw0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3ZpZXdhY3Rpb24vZGF0YXNhdmVkJywgeyB2aWV3dGFnOiB0aGlzLnZpZXd0YWcgfSk7DQogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdzYXZlJywgZGF0YTogZGF0YSB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn57O757uf5byC5bi4JyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOS/neWtmA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbb3B0PXt9XQ0KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3dSZXN1bHRJbmZvXSANCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpZlN0YXRlTmV4dF0gZm9ybVN0YXRl5piv5ZCm5LiL5Y+R6YCa55+lDQogICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0NCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBhc3luYyBzYXZlKG9wdDogYW55ID0ge30sIHNob3dSZXN1bHRJbmZvPzogYm9vbGVhbiwgaWZTdGF0ZU5leHQ6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxhbnk+IHsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSA9PiB7DQogICAgICAgICAgICBzaG93UmVzdWx0SW5mbyA9IHNob3dSZXN1bHRJbmZvID09PSB1bmRlZmluZWQgPyB0cnVlIDogZmFsc2U7DQogICAgICAgICAgICBpZiAoIXRoaXMuZm9ybVZhbGlkYXRlU3RhdHVzKCkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICflgLzop4TliJnmoKHpqozlvILluLgnIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IGFyZzogYW55ID0geyAuLi5vcHQgfTsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldFZhbHVlcygpOw0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIGRhdGEpOw0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsIHRoaXMuY29udGV4dCk7DQogICAgICAgICAgICBpZiAoaWZTdGF0ZU5leHQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRyY291bnRlciA9IDM7DQogICAgICAgICAgICAgICAgaWYodGhpcy5kcmNvdW50ZXIgIT09IDApew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRyc2F2ZW9wdCA9IG9wdDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdiZWZvcmVzYXZlJywgZGF0YTogYXJnIH0pOy8v5YWI6YCa55+l5YWz57O755WM6Z2i5L+d5a2YDQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXRlID0gcmVzb2x2ZTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IGFjdGlvbjogYW55ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJykgPyB0aGlzLnVwZGF0ZUFjdGlvbiA6IHRoaXMuY3JlYXRlQWN0aW9uOw0KICAgICAgICAgICAgaWYoIWFjdGlvbil7DQogICAgICAgICAgICAgICAgbGV0IGFjdGlvbk5hbWU6YW55ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJyk/InVwZGF0ZUFjdGlvbiI6ImNyZWF0ZUFjdGlvbiI7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAnUElNUEVSU09OWFNDR0VkaXRWaWV36KeG5Zu+6KGo5Y2VJythY3Rpb25OYW1lKyflj4LmlbDmnKrphY3nva4nIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICAgICAgY29uc3QgcG9zdDogUHJvbWlzZTxhbnk+ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJyk/dGhpcy5zZXJ2aWNlLnVwZGF0ZShhY3Rpb24sIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksYXJnLCB0aGlzLnNob3dCdXN5SW5kaWNhdG9yKTp0aGlzLnNlcnZpY2UuYWRkKGFjdGlvbixKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcik7DQogICAgICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgIHRoaXMub25Gb3JtTG9hZChkYXRhLCdzYXZlJyk7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2F2ZScsIGRhdGEpOw0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd2aWV3YWN0aW9uL2RhdGFzYXZlZCcsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdzYXZlJywgZGF0YTogZGF0YSB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAoc2hvd1Jlc3VsdEluZm8pIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLnN1Y2Nlc3MoeyB0aXRsZTogJycsIGRlc2M6IChkYXRhLnNyZm1ham9ydGV4dCA/IGRhdGEuc3JmbWFqb3J0ZXh0IDogJycpICsgJyZuYnNwO+S/neWtmOaIkOWKn++8gScgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICfns7vnu5/lvILluLgnIH0pOw0KICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIOWIoOmZpA0KICAgICoNCiAgICAqIEBwdWJsaWMNCiAgICAqIEBwYXJhbSB7Kn0gW29wdD17fV0NCiAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgKi8NCiAgICBwdWJsaWMgcmVtb3ZlKG9wdDpBcnJheTxhbnk+ID0gW10sc2hvd1Jlc3VsdEluZm8/OiBib29sZWFuKTogUHJvbWlzZTxhbnk+IHsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSA9PiB7DQogICAgICAgICAgICBpZighdGhpcy5yZW1vdmVBY3Rpb24pew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ1BJTVBFUlNPTlhTQ0dFZGl0Vmlld+inhuWbvuihqOWNlXJlbW92ZUFjdGlvbuWPguaVsOacqumFjee9ricgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgYXJnOiBhbnkgPSBvcHRbMF07DQogICAgICAgICAgICBjb25zdCBfdGhpczogYW55ID0gdGhpczsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICAgICAgdGhpcy5zZXJ2aWNlLmRlbGV0ZShfdGhpcy5yZW1vdmVBY3Rpb24sIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksYXJnLCBzaG93UmVzdWx0SW5mbykudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgncmVtb3ZlJyxkYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdyZW1vdmUnLCBkYXRhOiBkYXRhIH0pOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuaXNtb2RpZnkgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLnN1Y2Nlc3MoeyB0aXRsZTogJycsIGRlc2M6IChkYXRhLnNyZm1ham9ydGV4dCA/IGRhdGEuc3JmbWFqb3J0ZXh0IDogJycpICsgJyZuYnNwO+WIoOmZpOaIkOWKn++8gScgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcjogYW55KSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBfZGF0YSB9ID0gZXJyb3I7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6IF9kYXRhLnRpdGxlLCBkZXNjOiBfZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5bel5L2c5rWB5ZCv5YqoDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFtkYXRhPXt9XQ0KICAgICAqIEBwYXJhbSB7Kn0gW2xvY2FsZGF0YT17fV0NCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIGFzeW5jIHdmc3RhcnQoZGF0YTogYW55LGxvY2FsZGF0YT86YW55KTogUHJvbWlzZTxhbnk+IHsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSA9PiB7DQogICAgICAgICAgICBjb25zdCBfdGhpczogYW55ID0gdGhpczsNCiAgICAgICAgICAgIGNvbnN0IHBvc3Q6IFByb21pc2U8YW55PiA9IF90aGlzLnNhdmUoe30sZmFsc2UpOw0KICAgICAgICAgICAgcG9zdC50aGVuKChyZXNwb25zZTphbnkpID0+ew0KICAgICAgICAgICAgICAgIGNvbnN0IGFyZzphbnkgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgIGlmKHRoaXMudmlld3BhcmFtcyl7DQogICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQ6IFByb21pc2U8YW55PiA9IHRoaXMuc2VydmljZS53ZnN0YXJ0KF90aGlzLldGU3RhcnRBY3Rpb24sIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksYXJnLCB0aGlzLnNob3dCdXN5SW5kaWNhdG9yLGxvY2FsZGF0YSk7DQogICAgICAgICAgICAgICAgcmVzdWx0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICcnLCBkZXNjOiAn5bel5L2c5rWB5ZCv5Yqo5aSx6LSlLCAnICsgcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5pbmZvKHsgdGl0bGU6ICcnLCBkZXNjOiAn5bel5L2c5rWB5ZCv5Yqo5oiQ5YqfJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7DQogICAgICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn57O757uf5byC5bi4JyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlt6XkvZzmtYHmj5DkuqQNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHsqfSBbbG9jYWxkYXRhPXt9XQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgYXN5bmMgd2ZzdWJtaXQoZGF0YTogYW55LGxvY2FsZGF0YT86YW55KTogUHJvbWlzZTxhbnk+IHsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSA9PiB7DQogICAgICAgIGNvbnN0IF90aGlzOiBhbnkgPSB0aGlzOw0KICAgICAgICBjb25zdCBhcmc6IGFueSA9IGRhdGFbMF07DQogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICBpZiAoIWFyZy5waW1wZXJzb24gfHwgT2JqZWN0LmlzKGFyZy5waW1wZXJzb24sICcnKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IHBvc3Q6IFByb21pc2U8YW55PiA9IE9iamVjdC5pcyhhcmcuc3JmdWYsICcxJyk/dGhpcy5zZXJ2aWNlLnVwZGF0ZSh0aGlzLnVwZGF0ZUFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOnRoaXMuc2VydmljZS5hZGQodGhpcy5jcmVhdGVBY3Rpb24sSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOw0KICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOmFueSkgPT57DQogICAgICAgICAgICAgICAgY29uc3QgYXJnOmFueSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgICAgLy8g5L+d5a2Y5a6M5oiQVUnlpITnkIYNCiAgICAgICAgICAgICAgICB0aGlzLm9uRm9ybUxvYWQoYXJnLCdzYXZlJyk7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2F2ZScsIGFyZyk7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ3NhdmUnLCBkYXRhOiBhcmcgfSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgLy8g5YeG5aSH5o+Q5Lqk5Y+C5pWwDQogICAgICAgICAgICAgICAgaWYodGhpcy52aWV3cGFyYW1zKXsNCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcse3ZpZXdwYXJhbXM6dGhpcy52aWV3cGFyYW1zfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIOW8uuWItuihpeWFhXNyZndmbWVtbw0KICAgICAgICAgICAgICAgIGlmKHRoaXMuc3Jmd2ZtZW1vKXsNCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcse3NyZndmbWVtbzp0aGlzLnNyZndmbWVtb30pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQ6IFByb21pc2U8YW55PiA9IHRoaXMuc2VydmljZS53ZnN1Ym1pdChfdGhpcy5XRlN1Ym1pdEFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IsbG9jYWxkYXRhKTsNCiAgICAgICAgICAgICAgICByZXN1bHQudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJycsIGRlc2M6ICflt6XkvZzmtYHmj5DkuqTlpLHotKUsICcgKyByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZvcm1Mb2FkKGFyZywnc3VibWl0Jyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd2aWV3YWN0aW9uL2RhdGFzYXZlZCcsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnIH0pOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuaW5mbyh7IHRpdGxlOiAnJywgZGVzYzogJ+W3peS9nOa1geaPkOS6pOaIkOWKnycgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICfns7vnu5/lvILluLgnIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDooajljZXpobnmm7TmlrANCiAgICAgKg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIOeVjOmdouihjOS4uuWQjeensA0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dIOivt+axguaVsOaNrg0KICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHVwZGF0ZURldGFpbHMg5pu05paw6aG5DQogICAgICogQHBhcmFtIHtib29sZWFufSBbc2hvd2xvYWRpbmddIOaYr+WQpuaYvuekuuWKoOi9veeKtuaAgQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIHVwZGF0ZUZvcm1JdGVtcyhtb2RlOiBzdHJpbmcsIGRhdGE6IGFueSA9IHt9LCB1cGRhdGVEZXRhaWxzOiBzdHJpbmdbXSwgc2hvd2xvYWRpbmc/OiBib29sZWFuKTogdm9pZCB7DQogICAgICAgIGlmICghbW9kZSB8fCAobW9kZSAmJiBPYmplY3QuaXMobW9kZSwgJycpKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IGFyZzogYW55ID0geyAuLi5kYXRhIH07DQogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHRoaXMudmlld3BhcmFtcyk7DQogICAgICAgIGNvbnN0IHBvc3Q6IFByb21pc2U8YW55PiA9IHRoaXMuc2VydmljZS5mcm9udExvZ2ljKG1vZGUsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHNob3dsb2FkaW5nKTsNCiAgICAgICAgcG9zdC50aGVuKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn6KGo5Y2V6aG55pu05paw5aSx6LSlJyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgIGNvbnN0IF9kYXRhOiBhbnkgPSB7fTsNCiAgICAgICAgICAgIHVwZGF0ZURldGFpbHMuZm9yRWFjaCgobmFtZTogc3RyaW5nKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihfZGF0YSwgeyBbbmFtZV06IGRhdGFbbmFtZV0gfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRoaXMuc2V0Rm9ybUVuYWJsZUNvbmQoX2RhdGEpOw0KICAgICAgICAgICAgdGhpcy5maWxsRm9ybShfZGF0YSwndXBkYXRlRm9ybUl0ZW0nKTsNCiAgICAgICAgICAgIHRoaXMuZm9ybUxvZ2ljKHsgbmFtZTogJycsIG5ld1ZhbDogbnVsbCwgb2xkVmFsOiBudWxsIH0pOw0KICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbmcubmV4dChKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKTsNCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ3VwZGF0ZWZvcm1pdGVtJywgdWZpbW9kZTogYXJnLnNyZnVmaW1vZGUsIGRhdGE6IF9kYXRhIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pLmNhdGNoKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICfns7vnu5/lvILluLgnIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5Zue6L2m5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIG9uRW50ZXIoJGV2ZW50OiBhbnkpOiB2b2lkIHsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDkv53lrZjlubbpgIDlh7oNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBzYXZlQW5kRXhpdChkYXRhOmFueVtdKTpQcm9taXNlPGFueT57DQogICAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkgPT57DQogICAgICAgICAgICBsZXQgYXJnOiBhbnkgPSB7fTsNCiAgICAgICAgICAgIGlmKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKXsNCiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZyxkYXRhWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF90aGlzLmN1cnJlbnRBY3Rpb24gPSAic2F2ZUFuZEV4aXQiOw0KICAgICAgICAgICAgX3RoaXMuc2F2ZShbYXJnXSkudGhlbigocmVzKSA9PnsNCiAgICAgICAgICAgICAgICBpZihyZXMpew0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZVZpZXcocmVzLmRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7DQogICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+ew0KICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOS/neWtmOW5tuaWsOW7ug0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBSWUluZm9Gb3JtXzRCYXNlDQogICAgICovDQogICAgcHVibGljIHNhdmVBbmROZXcoZGF0YTphbnlbXSk6UHJvbWlzZTxhbnk+ew0KICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOw0KICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmU6IGFueSwgcmVqZWN0OiBhbnkpID0+ew0KICAgICAgICAgICAgbGV0IGFyZzogYW55ID0ge307DQogICAgICAgICAgICBpZihkYXRhICYmIGRhdGEubGVuZ3RoID4gMCl7DQogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsZGF0YVswXSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBfdGhpcy5jdXJyZW50QWN0aW9uID0gInNhdmVBbmROZXciOw0KICAgICAgICAgICAgX3RoaXMuc2F2ZShbYXJnXSkudGhlbigocmVzKSA9PnsNCiAgICAgICAgICAgICAgICBfdGhpcy5SZXNldERhdGEocmVzKTsNCiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkRHJhZnQoe30pOw0KICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PnsNCiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDliKDpmaTlubbpgIDlh7oNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyByZW1vdmVBbmRFeGl0KGRhdGE6YW55W10pOlByb21pc2U8YW55PnsNCiAgICAgICAgbGV0IF90aGlzID0gdGhpczsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSA9PnsNCiAgICAgICAgICAgIGxldCBhcmc6IGFueSA9IHt9Ow0KICAgICAgICAgICAgaWYoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApew0KICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLGRhdGFbMF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgX3RoaXMucmVtb3ZlKFthcmddKS50aGVuKChyZXMpID0+ew0KICAgICAgICAgICAgICAgIGlmKHJlcyl7DQogICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZVZpZXcocmVzLmRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7DQogICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+ew0KICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICog5YWz57O755WM6Z2i5pWw5o2u5L+d5a2Y5a6M5oiQDQogICAgKg0KICAgICogQHBhcmFtIHthbnl9ICRldmVudA0KICAgICogQG1lbWJlcm9mIFJZSW5mb0Zvcm1fNEJhc2UNCiAgICAqLw0KICAgIHB1YmxpYyBkcmRhdGFzYXZlZCgkZXZlbnQ6YW55KXsNCiAgICAgICAgbGV0IF90aGlzID0gdGhpczsNCiAgICAgICAgdGhpcy5kcmNvdW50ZXItLTsNCiAgICAgICAgaWYodGhpcy5kcmNvdW50ZXIgPT09IDApew0KICAgICAgICAgICAgdGhpcy5zYXZlKHRoaXMuZHJzYXZlb3B0LCB1bmRlZmluZWQsIGZhbHNlKS50aGVuKChyZXMpID0+ew0KICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXRlKHJlcyk7DQogICAgICAgICAgICAgICAgdGhpcy5kcnNhdmVvcHQgPSB7fTsNCiAgICAgICAgICAgICAgICBpZihPYmplY3QuaXMoX3RoaXMuY3VycmVudEFjdGlvbiwgInNhdmVBbmROZXciKSl7DQogICAgICAgICAgICAgICAgICAgIF90aGlzLlJlc2V0RGF0YShyZXMpOw0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkRHJhZnQoe30pOw0KICAgICAgICAgICAgICAgIH1lbHNlIGlmKE9iamVjdC5pcyhfdGhpcy5jdXJyZW50QWN0aW9uLCAic2F2ZUFuZEV4aXQiKSl7DQogICAgICAgICAgICAgICAgICAgIGlmKHJlcyl7DQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZVZpZXcocmVzLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmlrDlu7rpu5jorqTlgLwNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjcmVhdGVEZWZhdWx0KCl7ICAgICAgICAgICAgICAgICAgICANCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmm7TmlrDpu5jorqTlgLwNCiAgICAgKiBAbWVtYmVyb2YgUllJbmZvRm9ybV80QmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyB1cGRhdGVEZWZhdWx0KCl7ICAgICAgICAgICAgICAgICAgICANCiAgICB9DQoNCiAgICANCn0NCg=="},null]}