{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\trm-train-person\\main-form\\main-form-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\trm-train-person\\main-form\\main-form-base.vue","mtime":1630509413802},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1630511853252},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IFZ1ZSwgQ29tcG9uZW50LCBQcm9wLCBQcm92aWRlLCBFbWl0LCBXYXRjaCwgTW9kZWwsSW5qZWN0IH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7DQppbXBvcnQgeyBDcmVhdGVFbGVtZW50IH0gZnJvbSAndnVlJzsNCmltcG9ydCB7IFN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnOw0KaW1wb3J0IHsgQ29udHJvbEludGVyZmFjZSB9IGZyb20gJ0AvaW50ZXJmYWNlL2NvbnRyb2wnOw0KaW1wb3J0IHsgVUlBY3Rpb25Ub29sLFV0aWwgfSBmcm9tICdAL3V0aWxzJzsNCmltcG9ydCBOYXZEYXRhU2VydmljZSBmcm9tICdAL3NlcnZpY2UvYXBwL25hdmRhdGEtc2VydmljZSc7DQppbXBvcnQgVHJtVHJhaW5QZXJzb25TZXJ2aWNlIGZyb20gJ0Avc2VydmljZS90cm0tdHJhaW4tcGVyc29uL3RybS10cmFpbi1wZXJzb24tc2VydmljZSc7DQppbXBvcnQgTWFpblNlcnZpY2UgZnJvbSAnLi9tYWluLWZvcm0tc2VydmljZSc7DQoNCmltcG9ydCB7IEZvcm1CdXR0b25Nb2RlbCwgRm9ybVBhZ2VNb2RlbCwgRm9ybUl0ZW1Nb2RlbCwgRm9ybURSVUlQYXJ0TW9kZWwsIEZvcm1QYXJ0TW9kZWwsIEZvcm1Hcm91cFBhbmVsTW9kZWwsIEZvcm1JRnJhbWVNb2RlbCwgRm9ybVJvd0l0ZW1Nb2RlbCwgRm9ybVRhYlBhZ2VNb2RlbCwgRm9ybVRhYlBhbmVsTW9kZWwsIEZvcm1Vc2VyQ29udHJvbE1vZGVsIH0gZnJvbSAnQC9tb2RlbC9mb3JtLWRldGFpbCc7DQppbXBvcnQgeyBkZWJvdW5jZVRpbWUsIGRpc3RpbmN0VW50aWxDaGFuZ2VkIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnOw0KDQoNCkBDb21wb25lbnQoew0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgIA0KICAgIH0NCn0pDQpleHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluQmFzZSBleHRlbmRzIFZ1ZSBpbXBsZW1lbnRzIENvbnRyb2xJbnRlcmZhY2Ugew0KDQogICAgLyoqDQogICAgICog5ZCN56ewDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIG5hbWU/OiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDop4blm77pgJrorq/lr7nosaENCiAgICAgKg0KICAgICAqIEB0eXBlIHtTdWJqZWN0PFZpZXdTdGF0ZT59DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgdmlld1N0YXRlITogU3ViamVjdDxWaWV3U3RhdGU+Ow0KDQogICAgLyoqDQogICAgICog5bqU55So5LiK5LiL5paHDQogICAgICoNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBjb250ZXh0OiBhbnk7DQoNCiAgICAvKioNCiAgICAgKiDop4blm77lj4LmlbANCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHZpZXdwYXJhbXM6IGFueTsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvueKtuaAgeS6i+S7tg0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEB0eXBlIHsoU3Vic2NyaXB0aW9uIHwgdW5kZWZpbmVkKX0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgdmlld1N0YXRlRXZlbnQ6IFN1YnNjcmlwdGlvbiB8IHVuZGVmaW5lZDsNCg0KICAgIC8qKg0KICAgICAqIOiOt+WPlumDqOS7tuexu+Weiw0KICAgICAqDQogICAgICogQHJldHVybnMge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZ2V0Q29udHJvbFR5cGUoKTogc3RyaW5nIHsNCiAgICAgICAgcmV0dXJuICdGT1JNJw0KICAgIH0NCg0KDQoNCiAgICAvKioNCiAgICAgKiDorqHmlbDlmajmnI3liqHlr7nosaHpm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHtBcnJheTwqPn0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8gICAgDQogICAgcHVibGljIGNvdW50ZXJTZXJ2aWNlQXJyYXk6QXJyYXk8YW55PiA9IFtdOw0KDQogICAgLyoqDQogICAgICog5bu65p6E6YOo5Lu25pyN5Yqh5a+56LGhDQogICAgICoNCiAgICAgKiBAdHlwZSB7TWFpblNlcnZpY2V9DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIHNlcnZpY2U6IE1haW5TZXJ2aWNlID0gbmV3IE1haW5TZXJ2aWNlKHsgJHN0b3JlOiB0aGlzLiRzdG9yZSB9KTsNCg0KICAgIC8qKg0KICAgICAqIOWunuS9k+acjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1RybVRyYWluUGVyc29uU2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgYXBwRW50aXR5U2VydmljZTogVHJtVHJhaW5QZXJzb25TZXJ2aWNlID0gbmV3IFRybVRyYWluUGVyc29uU2VydmljZSh7ICRzdG9yZTogdGhpcy4kc3RvcmUgfSk7DQogICAgDQoNCg0KICAgIC8qKg0KICAgICAqIOWFs+mXreinhuWbvg0KICAgICAqDQogICAgICogQHBhcmFtIHthbnl9IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgY2xvc2VWaWV3KGFyZ3M6IGFueSk6IHZvaWQgew0KICAgICAgICBsZXQgX3RoaXM6IGFueSA9IHRoaXM7DQogICAgICAgIF90aGlzLiRlbWl0KCdjbG9zZXZpZXcnLCBbYXJnc10pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqICDorqHmlbDlmajliLfmlrANCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjb3VudGVyUmVmcmVzaCgpew0KICAgICAgICBjb25zdCBfdGhpczphbnkgPXRoaXM7DQogICAgICAgIGlmKF90aGlzLmNvdW50ZXJTZXJ2aWNlQXJyYXkgJiYgX3RoaXMuY291bnRlclNlcnZpY2VBcnJheS5sZW5ndGggPjApew0KICAgICAgICAgICAgX3RoaXMuY291bnRlclNlcnZpY2VBcnJheS5mb3JFYWNoKChpdGVtOmFueSkgPT57DQogICAgICAgICAgICAgICAgaWYoaXRlbS5yZWZyZXNoRGF0YSAmJiBpdGVtLnJlZnJlc2hEYXRhIGluc3RhbmNlb2YgRnVuY3Rpb24pew0KICAgICAgICAgICAgICAgICAgICBpdGVtLnJlZnJlc2hEYXRhKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICog5bel5L2c5rWB5a6h5om55oSP6KeB5o6n5Lu257uR5a6a5YC8DQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc3Jmd2ZtZW1vOnN0cmluZyA9ICIiOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOiOt+WPluWkmumhueaVsOaNrg0KICAgICAqDQogICAgICogQHJldHVybnMge2FueVtdfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBnZXREYXRhcygpOiBhbnlbXSB7DQogICAgICAgIHJldHVybiBbdGhpcy5kYXRhXTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDojrflj5bljZXpobnmoJENCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBnZXREYXRhKCk6IGFueSB7DQogICAgICAgIHJldHVybiB0aGlzLmRhdGE7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5piv5ZCm6buY6K6k5L+d5a2YDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCh7IGRlZmF1bHQ6IGZhbHNlIH0pIHB1YmxpYyBhdXRvc2F2ZT86IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDmmL7npLrlpITnkIbmj5DnpLoNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKHsgZGVmYXVsdDogdHJ1ZSB9KSBwdWJsaWMgc2hvd0J1c3lJbmRpY2F0b3I/OiBib29sZWFuOw0KDQogICAgLyoqDQogICAgICog6YOo5Lu26KGM5Li6LS1zdWJtaXQNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgV0ZTdWJtaXRBY3Rpb24hOiBzdHJpbmc7DQogICAgDQogICAgLyoqDQogICAgICog6YOo5Lu26KGM5Li6LS1zdGFydA0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBXRlN0YXJ0QWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tdXBkYXRlDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHVwZGF0ZUFjdGlvbiE6IHN0cmluZzsNCiAgICANCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLXJlbW92ZQ0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyByZW1vdmVBY3Rpb24hOiBzdHJpbmc7DQogICAgDQogICAgLyoqDQogICAgICog6YOo5Lu26KGM5Li6LS1sb2FkZHJhZnQNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgbG9hZGRyYWZ0QWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tbG9hZA0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBsb2FkQWN0aW9uITogc3RyaW5nOw0KICAgIA0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tY3JlYXRlDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGNyZWF0ZUFjdGlvbiE6IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOmDqOS7tuihjOS4ui0tY3JlYXRlDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHNlYXJjaEFjdGlvbiE6IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvuagh+ivhg0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyB2aWV3dGFnITogc3RyaW5nOw0KDQogICAgLyoqDQogICAgICog6KGo5Y2V54q25oCBDQogICAgICoNCiAgICAgKiBAdHlwZSB7U3ViamVjdDxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmb3JtU3RhdGU6IFN1YmplY3Q8YW55PiA9IG5ldyBTdWJqZWN0KCk7DQoNCiAgICAvKioNCiAgICAgKiDlv73nlaXooajljZXpobnlgLzlj5jljJYNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBpZ25vcmVmaWVsZHZhbHVlY2hhbmdlOiBib29sZWFuID0gZmFsc2U7DQoNCiAgICAvKioNCiAgICAgKiDmlbDmja7lj5jljJYNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAdHlwZSB7U3ViamVjdDxhbnk+fQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBkYXRhQ2hhbmc6IFN1YmplY3Q8YW55PiA9IG5ldyBTdWJqZWN0KCk7DQoNCiAgICAvKioNCiAgICAgKiDop4blm77nirbmgIHkuovku7YNCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAdHlwZSB7KFN1YnNjcmlwdGlvbiB8IHVuZGVmaW5lZCl9DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIGRhdGFDaGFuZ0V2ZW50OiBTdWJzY3JpcHRpb24gfCB1bmRlZmluZWQ7DQoNCiAgICAvKioNCiAgICAgKiDljp/lp4vmlbDmja4NCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAdHlwZSB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgb2xkRGF0YTogYW55ID0ge307DQoNCiAgICAvKioNCiAgICAgKiDooajljZXmlbDmja7lr7nosaENCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBkYXRhOiBhbnkgPSB7DQogICAgICAgIHNyZnVwZGF0ZWRhdGU6IG51bGwsDQogICAgICAgIHNyZm9yaWtleTogbnVsbCwNCiAgICAgICAgc3Jma2V5OiBudWxsLA0KICAgICAgICBzcmZtYWpvcnRleHQ6IG51bGwsDQogICAgICAgIHNyZnRlbXBtb2RlOiBudWxsLA0KICAgICAgICBzcmZ1ZjogbnVsbCwNCiAgICAgICAgc3JmZGVpZDogbnVsbCwNCiAgICAgICAgc3Jmc291cmNla2V5OiBudWxsLA0KICAgICAgICBwaW1wZXJzb25uYW1lOiBudWxsLA0KICAgICAgICB5Z2JoOiBudWxsLA0KICAgICAgICB4YjogbnVsbCwNCiAgICAgICAgbmo6IG51bGwsDQogICAgICAgIGx4ZGg6IG51bGwsDQogICAgICAgIHp6OiBudWxsLA0KICAgICAgICBibTogbnVsbCwNCiAgICAgICAgenc6IG51bGwsDQogICAgICAgIGpzZnM6IG51bGwsDQogICAgICAgIHNmenM6IG51bGwsDQogICAgICAgIGZqaDogbnVsbCwNCiAgICAgICAgdHJtdHJhaW5wbGFudGVybWlkOiBudWxsLA0KICAgICAgICB0cm10cmlhbnBlcnNvbmlkOiBudWxsLA0KICAgICAgICBwaW1wZXJzb25pZDogbnVsbCwNCiAgICAgICAgdHJtdHJhaW5wZXJzb246bnVsbCwNCiAgICB9Ow0KDQogICAgLyoqDQogICAgICAqIOW9k+WJjeaJp+ihjOeahOihjOS4uumAu+i+kQ0KICAgICAgKg0KICAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgICovDQogICAgcHVibGljIGN1cnJlbnRBY3Rpb246IHN0cmluZyA9ICIiOw0KDQogICAgLyoqDQogICAgICAqIOWFs+ezu+eVjOmdouiuoeaVsOWZqA0KICAgICAgKg0KICAgICAgKiBAdHlwZSB7bnVtYmVyfQ0KICAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgICovDQogICAgcHVibGljIGRyY291bnRlcjogbnVtYmVyID0gMDsNCg0KICAgIC8qKg0KICAgICAgKiDpnIDopoHnrYnlvoXlhbPns7vnlYzpnaLkv53lrZjml7bvvIznrKzkuIDmrKHosIPnlKhzYXZl5Y+C5pWw55qE5aSH5Lu9DQogICAgICAqDQogICAgICAqIEB0eXBlIHtudW1iZXJ9DQogICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAgKi8NCiAgICBwdWJsaWMgZHJzYXZlb3B0OiBhbnkgPSB7fTsNCg0KICAgIC8qKg0KICAgICAgKiDooajljZXkv53lrZjlm57osIPlrZjlgqjlr7nosaENCiAgICAgICoNCiAgICAgICogQHR5cGUge2FueX0NCiAgICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICAqLw0KICAgIHB1YmxpYyBzYXZlU3RhdGU6YW55IDsNCg0KICAgIC8qKg0KICAgICAqIOWxnuaAp+WAvOinhOWImQ0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIHJ1bGVzOiBhbnkgPSB7DQogICAgICAgIHNyZnVwZGF0ZWRhdGU6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfmm7TmlrDml7bpl7Qg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfmm7TmlrDml7bpl7Qg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfmm7TmlrDml7bpl7Qg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+abtOaWsOaXtumXtCDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3Jmb3Jpa2V5OiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHNyZmtleTogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WfueiureS6uuWRmOagh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WfueiureS6uuWRmOagh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WfueiureS6uuWRmOagh+ivhiDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Z+56K6t5Lq65ZGY5qCH6K+GIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBzcmZtYWpvcnRleHQ6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflj4Lln7nkurrlkZgg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflj4Lln7nkurrlkZgg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflj4Lln7nkurrlkZgg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WPguWfueS6uuWRmCDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3JmdGVtcG1vZGU6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3JmdWY6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgc3JmZGVpZDogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAnIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBzcmZzb3VyY2VrZXk6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICcg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcGltcGVyc29ubmFtZTogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+Wnk+WQjSDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+Wnk+WQjSDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+Wnk+WQjSDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5aeT5ZCNIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICB5Z2JoOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5ZGY5bel57yW5Y+3IOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5ZGY5bel57yW5Y+3IOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5ZGY5bel57yW5Y+3IOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflkZjlt6XnvJblj7cg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIHhiOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5oCn5YirIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5oCn5YirIOWAvOW/hemhu+S4uuWtl+espuS4suexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5oCn5YirIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfmgKfliKsg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIG5qOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdudW1iZXInLCBtZXNzYWdlOiAn5bm06b6EIOWAvOW/hemhu+S4uuaVsOWAvOexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdudW1iZXInLCBtZXNzYWdlOiAn5bm06b6EIOWAvOW/hemhu+S4uuaVsOWAvOexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdudW1iZXInLCBtZXNzYWdlOiAn5bm06b6EIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ251bWJlcicsIG1lc3NhZ2U6ICflubTpvoQg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIGx4ZGg6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfogZTns7vnlLXor50g5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfogZTns7vnlLXor50g5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfogZTns7vnlLXor50g5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+iBlOezu+eUteivnSDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgeno6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfljZXkvY0g5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfljZXkvY0g5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfljZXkvY0g5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WNleS9jSDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgYm06IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfpg6jpl6gg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfpg6jpl6gg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfpg6jpl6gg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+mDqOmXqCDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgenc6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfogYzliqEg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfogYzliqEg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfogYzliqEg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+iBjOWKoSDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAganNmczogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+aOpemAgeaWueW8jyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+aOpemAgeaWueW8jyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+aOpemAgeaWueW8jyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5o6l6YCB5pa55byPIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBzZnpzOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdudW1iZXInLCBtZXNzYWdlOiAn5piv5ZCm5L2P5a6/IOWAvOW/hemhu+S4uuaVsOWAvOexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHR5cGU6ICdudW1iZXInLCBtZXNzYWdlOiAn5piv5ZCm5L2P5a6/IOWAvOW/hemhu+S4uuaVsOWAvOexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdudW1iZXInLCBtZXNzYWdlOiAn5piv5ZCm5L2P5a6/IOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ251bWJlcicsIG1lc3NhZ2U6ICfmmK/lkKbkvY/lrr8g5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICAgIGZqaDogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+aIv+mXtOWPtyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+aIv+mXtOWPtyDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+aIv+mXtOWPtyDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5oi/6Ze05Y+3IOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICB0cm10cmFpbnBsYW50ZXJtaWQ6IFsNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfln7norq3orqHliJLpobnmoIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfln7norq3orqHliJLpobnmoIfor4Yg5YC85b+F6aG75Li65a2X56ym5Liy57G75Z6LJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICfln7norq3orqHliJLpobnmoIfor4Yg5YC85LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WfueiureiuoeWIkumhueagh+ivhiDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgdHJtdHJpYW5wZXJzb25pZDogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WfueiureS6uuWRmOagh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WfueiureS6uuWRmOagh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+WfueiureS6uuWRmOagh+ivhiDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Z+56K6t5Lq65ZGY5qCH6K+GIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBwaW1wZXJzb25pZDogWw0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+S6uuWRmOS/oeaBr+agh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+S6uuWRmOS/oeaBr+agh+ivhiDlgLzlv4XpobvkuLrlrZfnrKbkuLLnsbvlnosnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnc3RyaW5nJywgbWVzc2FnZTogJ+S6uuWRmOS/oeaBr+agh+ivhiDlgLzkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LA0KICAgICAgICAgICAgeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdzdHJpbmcnLCBtZXNzYWdlOiAn5Lq65ZGY5L+h5oGv5qCH6K+GIOWAvOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOivpuaDheaooeWei+mbhuWQiA0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIGRldGFpbHNNb2RlbDogYW55ID0gew0KICAgICAgICBncm91cDE6IG5ldyBGb3JtR3JvdXBQYW5lbE1vZGVsKHsgY2FwdGlvbjogJ+WfueiureS6uuWRmOWfuuacrOS/oeaBrycsIGRldGFpbFR5cGU6ICdHUk9VUFBBTkVMJywgbmFtZTogJ2dyb3VwMScsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMsIHVpQWN0aW9uR3JvdXA6IHsgY2FwdGlvbjogJycsIGxhbmdiYXNlOiAnZW50aXRpZXMudHJtdHJhaW5wZXJzb24ubWFpbl9mb3JtJywgZXh0cmFjdE1vZGU6ICdJVEVNJywgZGV0YWlsczogW10gfSB9KQ0KLCANCiAgICAgICAgZm9ybXBhZ2UxOiBuZXcgRm9ybVBhZ2VNb2RlbCh7IGNhcHRpb246ICfln7rmnKzkv6Hmga8nLCBkZXRhaWxUeXBlOiAnRk9STVBBR0UnLCBuYW1lOiAnZm9ybXBhZ2UxJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcyB9KQ0KLCANCiAgICAgICAgc3JmdXBkYXRlZGF0ZTogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAn5pu05paw5pe26Ze0JywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ3NyZnVwZGF0ZWRhdGUnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZm9yaWtleTogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAnJywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ3NyZm9yaWtleScsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMsIGRpc2FibGVkOiBmYWxzZSwgZW5hYmxlQ29uZDogMyB9KQ0KLCANCiAgICAgICAgc3Jma2V5OiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfln7norq3kurrlkZjmoIfor4YnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3Jma2V5JywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBzcmZtYWpvcnRleHQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+WPguWfueS6uuWRmCcsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdzcmZtYWpvcnRleHQnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZnRlbXBtb2RlOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICcnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3JmdGVtcG1vZGUnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZnVmOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICcnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc3JmdWYnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHNyZmRlaWQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJycsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdzcmZkZWlkJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBzcmZzb3VyY2VrZXk6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJycsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdzcmZzb3VyY2VrZXknLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHBpbXBlcnNvbm5hbWU6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+Wnk+WQjScsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdwaW1wZXJzb25uYW1lJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICB5Z2JoOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICflkZjlt6XnvJblj7cnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAneWdiaCcsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMsIGRpc2FibGVkOiBmYWxzZSwgZW5hYmxlQ29uZDogMyB9KQ0KLCANCiAgICAgICAgeGI6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+aAp+WIqycsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICd4YicsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMsIGRpc2FibGVkOiBmYWxzZSwgZW5hYmxlQ29uZDogMyB9KQ0KLCANCiAgICAgICAgbmo6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+W5tOm+hCcsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICduaicsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMsIGRpc2FibGVkOiBmYWxzZSwgZW5hYmxlQ29uZDogMyB9KQ0KLCANCiAgICAgICAgbHhkaDogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAn6IGU57O755S16K+dJywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ2x4ZGgnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHp6OiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfljZXkvY0nLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnenonLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIGJtOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfpg6jpl6gnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnYm0nLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHp3OiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfogYzliqEnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnencnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIGpzZnM6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+aOpemAgeaWueW8jycsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICdqc2ZzJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBzZnpzOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfmmK/lkKbkvY/lrr8nLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnc2Z6cycsIHZpc2libGU6IHRydWUsIGlzU2hvd0NhcHRpb246IHRydWUsIGZvcm06IHRoaXMsIGRpc2FibGVkOiBmYWxzZSwgZW5hYmxlQ29uZDogMyB9KQ0KLCANCiAgICAgICAgZmpoOiBuZXcgRm9ybUl0ZW1Nb2RlbCh7IGNhcHRpb246ICfmiL/pl7Tlj7cnLCBkZXRhaWxUeXBlOiAnRk9STUlURU0nLCBuYW1lOiAnZmpoJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICB0cm10cmFpbnBsYW50ZXJtaWQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+WfueiureiuoeWIkumhueagh+ivhicsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICd0cm10cmFpbnBsYW50ZXJtaWQnLCB2aXNpYmxlOiB0cnVlLCBpc1Nob3dDYXB0aW9uOiB0cnVlLCBmb3JtOiB0aGlzLCBkaXNhYmxlZDogZmFsc2UsIGVuYWJsZUNvbmQ6IDMgfSkNCiwgDQogICAgICAgIHRybXRyaWFucGVyc29uaWQ6IG5ldyBGb3JtSXRlbU1vZGVsKHsgY2FwdGlvbjogJ+WfueiureS6uuWRmOagh+ivhicsIGRldGFpbFR5cGU6ICdGT1JNSVRFTScsIG5hbWU6ICd0cm10cmlhbnBlcnNvbmlkJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgICAgICBwaW1wZXJzb25pZDogbmV3IEZvcm1JdGVtTW9kZWwoeyBjYXB0aW9uOiAn5Lq65ZGY5L+h5oGv5qCH6K+GJywgZGV0YWlsVHlwZTogJ0ZPUk1JVEVNJywgbmFtZTogJ3BpbXBlcnNvbmlkJywgdmlzaWJsZTogdHJ1ZSwgaXNTaG93Q2FwdGlvbjogdHJ1ZSwgZm9ybTogdGhpcywgZGlzYWJsZWQ6IGZhbHNlLCBlbmFibGVDb25kOiAzIH0pDQosIA0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3JmdXBkYXRlZGF0ZSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuc3JmdXBkYXRlZGF0ZScpDQogICAgb25TcmZ1cGRhdGVkYXRlQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZnVwZGF0ZWRhdGUnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZm9yaWtleSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuc3Jmb3Jpa2V5JykNCiAgICBvblNyZm9yaWtleUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzcmZvcmlrZXknLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZmtleSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuc3Jma2V5JykNCiAgICBvblNyZmtleUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzcmZrZXknLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZm1ham9ydGV4dCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuc3JmbWFqb3J0ZXh0JykNCiAgICBvblNyZm1ham9ydGV4dENoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzcmZtYWpvcnRleHQnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHNyZnRlbXBtb2RlIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5zcmZ0ZW1wbW9kZScpDQogICAgb25TcmZ0ZW1wbW9kZUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdzcmZ0ZW1wbW9kZScsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3JmdWYg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnNyZnVmJykNCiAgICBvblNyZnVmQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZnVmJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzcmZkZWlkIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5zcmZkZWlkJykNCiAgICBvblNyZmRlaWRDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAnc3JmZGVpZCcsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgc3Jmc291cmNla2V5IOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5zcmZzb3VyY2VrZXknKQ0KICAgIG9uU3Jmc291cmNla2V5Q2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3NyZnNvdXJjZWtleScsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgcGltcGVyc29ubmFtZSDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEucGltcGVyc29ubmFtZScpDQogICAgb25QaW1wZXJzb25uYW1lQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3BpbXBlcnNvbm5hbWUnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHlnYmgg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLnlnYmgnKQ0KICAgIG9uWWdiaENoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICd5Z2JoJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyB4YiDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEueGInKQ0KICAgIG9uWGJDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAneGInLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIG5qIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5uaicpDQogICAgb25OakNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICduaicsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgbHhkaCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEubHhkaCcpDQogICAgb25MeGRoQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ2x4ZGgnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHp6IOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS56eicpDQogICAgb25aekNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICd6eicsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgYm0g5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLmJtJykNCiAgICBvbkJtQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ2JtJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyB6dyDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEuencnKQ0KICAgIG9uWndDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAnencnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIGpzZnMg5YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5ld1ZhbA0KICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgQFdhdGNoKCdkYXRhLmpzZnMnKQ0KICAgIG9uSnNmc0NoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdqc2ZzJywgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOebkeaOp+ihqOWNleWxnuaApyBzZnpzIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5zZnpzJykNCiAgICBvblNmenNDaGFuZ2UobmV3VmFsOiBhbnksIG9sZFZhbDogYW55KSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFDaGFuZ2UoeyBuYW1lOiAnc2Z6cycsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgZmpoIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5mamgnKQ0KICAgIG9uRmpoQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ2ZqaCcsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgdHJtdHJhaW5wbGFudGVybWlkIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS50cm10cmFpbnBsYW50ZXJtaWQnKQ0KICAgIG9uVHJtdHJhaW5wbGFudGVybWlkQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3RybXRyYWlucGxhbnRlcm1pZCcsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnm5HmjqfooajljZXlsZ7mgKcgdHJtdHJpYW5wZXJzb25pZCDlgLwNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbmV3VmFsDQogICAgICogQHBhcmFtIHsqfSBvbGRWYWwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBAV2F0Y2goJ2RhdGEudHJtdHJpYW5wZXJzb25pZCcpDQogICAgb25Ucm10cmlhbnBlcnNvbmlkQ2hhbmdlKG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSkgew0KICAgICAgICB0aGlzLmZvcm1EYXRhQ2hhbmdlKHsgbmFtZTogJ3RybXRyaWFucGVyc29uaWQnLCBuZXdWYWw6IG5ld1ZhbCwgb2xkVmFsOiBvbGRWYWwgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog55uR5o6n6KGo5Y2V5bGe5oCnIHBpbXBlcnNvbmlkIOWAvA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnZGF0YS5waW1wZXJzb25pZCcpDQogICAgb25QaW1wZXJzb25pZENoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5mb3JtRGF0YUNoYW5nZSh7IG5hbWU6ICdwaW1wZXJzb25pZCcsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICB9DQoNCg0KICAgIC8qKg0KICAgICAqIOmHjee9ruihqOWNlemhueWAvA0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7eyBuYW1lOiBzdHJpbmcsIG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSB9fSB7IG5hbWUsIG5ld1ZhbCwgb2xkVmFsIH0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVzZXRGb3JtRGF0YSh7IG5hbWUsIG5ld1ZhbCwgb2xkVmFsIH06IHsgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfSk6IHZvaWQgew0KICAgIH0NCg0KICAgIC8qKg0KICAgICAgKiDnva7nqbrlr7nosaENCiAgICAgICoNCiAgICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAgKi8NCiAgICBwdWJsaWMgUmVzZXREYXRhKF9kYXRhczphbnkpew0KICAgICAgICBpZihPYmplY3Qua2V5cyhfZGF0YXMpLmxlbmd0aCA+MCl7DQogICAgICAgICAgICBPYmplY3Qua2V5cyhfZGF0YXMpLmZvckVhY2goKG5hbWU6IHN0cmluZykgPT4gew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdID0gbnVsbDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOihqOWNlemAu+i+kQ0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7eyBuYW1lOiBzdHJpbmcsIG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSB9fSB7IG5hbWUsIG5ld1ZhbCwgb2xkVmFsIH0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZm9ybUxvZ2ljKHsgbmFtZSwgbmV3VmFsLCBvbGRWYWwgfTogeyBuYW1lOiBzdHJpbmcsIG5ld1ZhbDogYW55LCBvbGRWYWw6IGFueSB9KTogdm9pZCB7DQogICAgICAgICAgICAgICAgDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6KGo5Y2V5YC85Y+Y5YyWDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHt7IG5hbWU6IHN0cmluZywgbmV3VmFsOiBhbnksIG9sZFZhbDogYW55IH19IHsgbmFtZSwgbmV3VmFsLCBvbGRWYWwgfQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmb3JtRGF0YUNoYW5nZSh7IG5hbWUsIG5ld1ZhbCwgb2xkVmFsIH06IHsgbmFtZTogc3RyaW5nLCBuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkgfSk6IHZvaWQgew0KICAgICAgICBpZiAodGhpcy5pZ25vcmVmaWVsZHZhbHVlY2hhbmdlKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5yZXNldEZvcm1EYXRhKHsgbmFtZTogbmFtZSwgbmV3VmFsOiBuZXdWYWwsIG9sZFZhbDogb2xkVmFsIH0pOw0KICAgICAgICB0aGlzLmZvcm1Mb2dpYyh7IG5hbWU6IG5hbWUsIG5ld1ZhbDogbmV3VmFsLCBvbGRWYWw6IG9sZFZhbCB9KTsNCiAgICAgICAgdGhpcy5kYXRhQ2hhbmcubmV4dChKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDooajljZXliqDovb3lrozmiJANCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0geyp9IFtkYXRhPXt9XQ0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbYWN0aW9uXQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBvbkZvcm1Mb2FkKGRhdGE6IGFueSA9IHt9LGFjdGlvbjpzdHJpbmcpOiB2b2lkIHsNCiAgICAgICAgaWYoT2JqZWN0LmlzKGFjdGlvbiwic2F2ZSIpIHx8IE9iamVjdC5pcyhhY3Rpb24sImF1dG9TYXZlIikgfHwgT2JqZWN0LmlzKGFjdGlvbiwic3VibWl0IikpDQogICAgICAgIC8vIOabtOaWsGNvbnRleHTnmoTlrp7kvZPkuLvplK4NCiAgICAgICAgaWYoZGF0YS50cm10cmFpbnBlcnNvbil7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY29udGV4dCx7dHJtdHJhaW5wZXJzb246ZGF0YS50cm10cmFpbnBlcnNvbn0pDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5zZXRGb3JtRW5hYmxlQ29uZChkYXRhKTsNCiAgICAgICAgdGhpcy5maWxsRm9ybShkYXRhLGFjdGlvbik7DQogICAgICAgIHRoaXMub2xkRGF0YSA9IHt9Ow0KICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMub2xkRGF0YSwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKSk7DQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndmlld2FjdGlvbi9zZXRWaWV3RGF0YUNoYW5nZScsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnLCB2aWV3ZGF0YWNoYW5nZTogZmFsc2UgfSk7DQogICAgICAgIHRoaXMuZm9ybUxvZ2ljKHsgbmFtZTogJycsIG5ld1ZhbDogbnVsbCwgb2xkVmFsOiBudWxsIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWAvOWhq+WFhQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbX2RhdGFzPXt9XQ0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbYWN0aW9uXQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmaWxsRm9ybShfZGF0YXM6IGFueSA9IHt9LGFjdGlvbjpzdHJpbmcpOiB2b2lkIHsNCiAgICAgICAgdGhpcy5pZ25vcmVmaWVsZHZhbHVlY2hhbmdlID0gdHJ1ZTsNCiAgICAgICAgT2JqZWN0LmtleXMoX2RhdGFzKS5mb3JFYWNoKChuYW1lOiBzdHJpbmcpID0+IHsNCiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0gPSBfZGF0YXNbbmFtZV07DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICBpZihPYmplY3QuaXMoYWN0aW9uLCdsb2FkRHJhZnQnKSl7DQogICAgICAgICAgICB0aGlzLmNyZWF0ZURlZmF1bHQoKTsNCiAgICAgICAgfQ0KICAgICAgICBpZihPYmplY3QuaXMoYWN0aW9uLCdsb2FkJykpew0KICAgICAgICAgICAgdGhpcy51cGRhdGVEZWZhdWx0KCk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdGhpcy5pZ25vcmVmaWVsZHZhbHVlY2hhbmdlID0gZmFsc2U7DQogICAgICAgIH0pDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6K6+572u6KGo5Y2V6aG55piv5ZCm5ZCv55SoDQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBkYXRhDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIHNldEZvcm1FbmFibGVDb25kKGRhdGE6IGFueSk6IHZvaWQgew0KICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMuZGV0YWlsc01vZGVsKS5mb3JFYWNoKChkZXRhaWw6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKCFPYmplY3QuaXMoZGV0YWlsLmRldGFpbFR5cGUsICdGT1JNSVRFTScpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgZm9ybUl0ZW06IEZvcm1JdGVtTW9kZWwgPSBkZXRhaWw7DQogICAgICAgICAgICBmb3JtSXRlbS5zZXRFbmFibGVDb25kKGRhdGEuc3JmdWYpOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDph43nva7ojYnnqL/ooajljZXnirbmgIENCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVzZXREcmFmdEZvcm1TdGF0ZXMoKTogdm9pZCB7DQogICAgICAgIGNvbnN0IGZvcm06IGFueSA9IHRoaXMuJHJlZnMuZm9ybTsNCiAgICAgICAgaWYgKGZvcm0pIHsNCiAgICAgICAgICAgIGZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmHjee9ruagoemqjOe7k+aenA0KICAgICAqDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIHJlc2V0VmFsaWRhdGVzKCk6IHZvaWQgew0KICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMuZGV0YWlsc01vZGVsKS5mb3JFYWNoKChkZXRhaWw6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKCFPYmplY3QuaXMoZGV0YWlsLmRldGFpbFR5cGUsICdGT1JNSVRFTScpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgZm9ybUl0ZW06IEZvcm1JdGVtTW9kZWwgPSBkZXRhaWw7DQogICAgICAgICAgICBmb3JtSXRlbS5zZXRFcnJvcignJyk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWhq+WFheagoemqjOe7k+aenCDvvIjlkI7lj7DvvIkNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGZpZWxkRXJyb3JzDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIGZpbGxWYWxpZGF0ZXMoZmllbGRFcnJvcnM6IGFueVtdKTogdm9pZCB7DQogICAgICAgIGZpZWxkRXJyb3JzLmZvckVhY2goKGVycm9yOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGZvcm1JdGVtOiBGb3JtSXRlbU1vZGVsID0gdGhpcy5kZXRhaWxzTW9kZWxbZXJyb3IuZmllbGRdOw0KICAgICAgICAgICAgaWYgKCFmb3JtSXRlbSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICBmb3JtSXRlbS5zZXRFcnJvcihlcnJvci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDooajljZXmoKHpqoznirbmgIENCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHtib29sZWFufSANCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZm9ybVZhbGlkYXRlU3RhdHVzKCk6IGJvb2xlYW4gew0KICAgICAgICBjb25zdCBmb3JtOiBhbnkgPSB0aGlzLiRyZWZzLmZvcm07DQogICAgICAgIGxldCB2YWxpZGF0ZXN0YXRlOiBib29sZWFuID0gdHJ1ZTsNCiAgICAgICAgZm9ybS52YWxpZGF0ZSgodmFsaWQ6IGJvb2xlYW4pID0+IHsNCiAgICAgICAgICAgIHZhbGlkYXRlc3RhdGUgPSB2YWxpZCA/IHRydWUgOiBmYWxzZTsNCiAgICAgICAgfSk7DQogICAgICAgIHJldHVybiB2YWxpZGF0ZXN0YXRlDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6I635Y+W5YWo6YOo5YC8DQogICAgICoNCiAgICAgKiBAcmV0dXJucyB7Kn0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZ2V0VmFsdWVzKCk6IGFueSB7DQogICAgICAgIHJldHVybiB0aGlzLmRhdGE7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6KGo5Y2V6aG55YC85Y+Y5pu0DQogICAgICoNCiAgICAgKiBAcGFyYW0ge3sgbmFtZTogc3RyaW5nLCB2YWx1ZTogYW55IH19ICRldmVudA0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBvbkZvcm1JdGVtVmFsdWVDaGFuZ2UoJGV2ZW50OiB7IG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSB9KTogdm9pZCB7DQogICAgICAgIGlmICghJGV2ZW50KSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKCEkZXZlbnQubmFtZSB8fCBPYmplY3QuaXMoJGV2ZW50Lm5hbWUsICcnKSB8fCAhdGhpcy5kYXRhLmhhc093blByb3BlcnR5KCRldmVudC5uYW1lKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuZGF0YVskZXZlbnQubmFtZV0gPSAkZXZlbnQudmFsdWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6K6+572u5pWw5o2u6aG55YC8DQogICAgICoNCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZQ0KICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUNCiAgICAgKiBAcmV0dXJucyB7dm9pZH0NCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc2V0RGF0YUl0ZW1WYWx1ZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHsNCiAgICAgICAgaWYgKCFuYW1lIHx8IE9iamVjdC5pcyhuYW1lLCAnJykgfHwgIXRoaXMuZGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmIChPYmplY3QuaXModGhpcy5kYXRhW25hbWVdLCB2YWx1ZSkpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmRhdGFbbmFtZV0gPSB2YWx1ZTsNCiAgICB9DQoNCg0KDQogICAgLyoqDQogICAgICog5YiG57uE55WM6Z2i6KGM5Li65LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBncm91cFVJQWN0aW9uQ2xpY2soJGV2ZW50OiBhbnkpOiB2b2lkIHsNCiAgICAgICAgaWYgKCEkZXZlbnQpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBpdGVtOmFueSA9ICRldmVudC5pdGVtOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFZ1ZeWjsOaYjuWRqOacnyjlpITnkIbnu4Tku7bnmoTovpPlhaXlsZ7mgKcpDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgY3JlYXRlZCgpOiB2b2lkIHsNCiAgICAgICAgdGhpcy5hZnRlckNyZWF0ZWQoKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmiafooYxjcmVhdGVk5ZCO55qE6YC76L6RDQogICAgICoNCiAgICAgKiAgQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovICAgIA0KICAgIHB1YmxpYyBhZnRlckNyZWF0ZWQoKXsNCiAgICAgICAgaWYgKHRoaXMudmlld1N0YXRlKSB7DQogICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZUV2ZW50ID0gdGhpcy52aWV3U3RhdGUuc3Vic2NyaWJlKCh7IHRhZywgYWN0aW9uLCBkYXRhIH0pID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5pcyh0YWcsIHRoaXMubmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdhdXRvbG9hZCcsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRvTG9hZChkYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygnbG9hZCcsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkKGRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdsb2FkZHJhZnQnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY29udGV4dC5zcmZzb3VyY2VrZXkpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5KHRoaXMuY29udGV4dC5zcmZzb3VyY2VrZXkpOw0KICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERyYWZ0KGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaXMoJ3NhdmUnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZShkYXRhLGRhdGEuc2hvd1Jlc3VsdEluZm8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdyZW1vdmUnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdzYXZlYW5kZXhpdCcsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQW5kRXhpdChkYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygnc2F2ZWFuZG5ldycsIGFjdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQW5kTmV3KGRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdyZW1vdmVhbmRleGl0JywgYWN0aW9uKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFuZEV4aXQoZGF0YSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaXMoJ3JlZnJlc2gnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaChkYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmRhdGFDaGFuZw0KICAgICAgICAgICAgLnBpcGUoDQogICAgICAgICAgICAgICAgZGVib3VuY2VUaW1lKDMwMCksDQogICAgICAgICAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKQ0KICAgICAgICAgICAgKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dG9zYXZlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b1NhdmUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSAhT2JqZWN0LmlzKEpTT04uc3RyaW5naWZ5KHRoaXMub2xkRGF0YSksIEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSkpID8gdHJ1ZSA6IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndmlld2FjdGlvbi9zZXRWaWV3RGF0YUNoYW5nZScsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnLCB2aWV3ZGF0YWNoYW5nZTogc3RhdGUgfSk7DQogICAgICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiB2dWUg55Sf5ZG95ZGo5pyfDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZGVzdHJveWVkKCkgew0KICAgICAgICB0aGlzLmFmdGVyRGVzdHJveSgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaJp+ihjGRlc3Ryb3llZOWQjueahOmAu+i+kQ0KICAgICAqDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIGFmdGVyRGVzdHJveSgpIHsNCiAgICAgICAgaWYgKHRoaXMudmlld1N0YXRlRXZlbnQpIHsNCiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlRXZlbnQudW5zdWJzY3JpYmUoKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5kYXRhQ2hhbmdFdmVudCkgew0KICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbmdFdmVudC51bnN1YnNjcmliZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5ou36LSd5YaF5a65DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IFthcmc9e31dDQogICAgICogQG1lbWJlcm9mIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjb3B5KHNyZmtleTogc3RyaW5nKTogdm9pZCB7DQogICAgICAgIGxldCBjb3B5RGF0YSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q29weURhdGEoc3Jma2V5KTsNCiAgICAgICAgY29weURhdGEuc3Jma2V5ID0gVXRpbC5jcmVhdGVVVUlEKCk7DQogICAgICAgIGNvcHlEYXRhLnRybXRyYWlucGVyc29uID0gY29weURhdGEuc3Jma2V5Ow0KICAgICAgICBjb3B5RGF0YS50cm10cmlhbnBlcnNvbmlkID0gY29weURhdGEuc3Jma2V5Ow0KICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY29udGV4dCx7dHJtdHJhaW5wZXJzb246Y29weURhdGEudHJtdHJhaW5wZXJzb259KQ0KICAgICAgICB0aGlzLmRhdGEgPSBjb3B5RGF0YTsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHRoaXMuZm9ybVN0YXRlLm5leHQoeyB0eXBlOiAnbG9hZCcsIGRhdGE6IGNvcHlEYXRhIH0pOw0KICAgICAgICAgIHRoaXMuZGF0YS5zcmZ1ZiA9ICcwJzsNCiAgICAgICAgICB0aGlzLnNldEZvcm1FbmFibGVDb25kKHRoaXMuZGF0YSk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAq5omT5Y2wDQogICAgICpAbWVtYmVyb2YgQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIHByaW50KCl7DQogICAgICAgIGxldCBfdGhpczphbnkgPSB0aGlzOw0KICAgICAgICBfdGhpcy4kcHJpbnQoe2lkOid0cm10cmFpbnBlcnNvbl9tYWluJyxwb3BUaXRsZTon5Li757yW6L6R6KGo5Y2VJ30pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmDqOS7tuWIt+aWsA0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gYXJncw0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyByZWZyZXNoKGFyZ3M6IGFueVtdKTogdm9pZCB7DQogICAgICAgIGxldCBhcmc6IGFueSA9IHt9Ow0KICAgICAgICBPYmplY3QuYXNzaWduKGFyZyxhcmdzWzBdKTsNCiAgICAgICAgaWYgKHRoaXMuZGF0YS5zcmZrZXkgJiYgIU9iamVjdC5pcyh0aGlzLmRhdGEuc3Jma2V5LCAnJykpIHsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7IHNyZmtleTogdGhpcy5kYXRhLnNyZmtleSB9KTsNCiAgICAgICAgICAgIHRoaXMubG9hZChhcmcpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmRhdGEuc3Jma2V5cyAmJiAhT2JqZWN0LmlzKHRoaXMuZGF0YS5zcmZrZXlzLCAnJykpIHsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCB7IHNyZmtleTogdGhpcy5kYXRhLnNyZmtleXMgfSk7DQogICAgICAgICAgICB0aGlzLmxvYWQoYXJnKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiHquWKqOWKoOi9vQ0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbYXJnPXt9XQ0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBhdXRvTG9hZChhcmc6IGFueSA9IHt9KTogdm9pZCB7DQogICAgICAgIGlmIChhcmcuc3Jma2V5ICYmICFPYmplY3QuaXMoYXJnLnNyZmtleSwgJycpKSB7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgeyBzcmZrZXk6IGFyZy5zcmZrZXkgfSk7DQogICAgICAgICAgICB0aGlzLmxvYWQoYXJnKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYXJnLnNyZmtleXMgJiYgIU9iamVjdC5pcyhhcmcuc3Jma2V5cywgJycpKSB7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgeyBzcmZrZXk6IGFyZy5zcmZrZXlzIH0pOw0KICAgICAgICAgICAgdGhpcy5sb2FkKGFyZyk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5sb2FkRHJhZnQoYXJnKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDliqDovb0NCiAgICAgKg0KICAgICAqIEBwdWJsaWMNCiAgICAgKiBAcGFyYW0geyp9IFtvcHQ9e31dDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIGxvYWQob3B0OiBhbnkgPSB7fSk6IHZvaWQgew0KICAgICAgICBpZighdGhpcy5sb2FkQWN0aW9uKXsNCiAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ1RSTVRSSUFOUEVSU09ORWRpdFZpZXfop4blm77ooajljZVsb2FkQWN0aW9u5Y+C5pWw5pyq6YWN572uJyB9KTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBhcmc6IGFueSA9IHsgLi4ub3B0IH07DQogICAgICAgIGxldCB2aWV3cGFyYW1SZXN1bHQ6YW55ID0gT2JqZWN0LmFzc2lnbihhcmcsdGhpcy52aWV3cGFyYW1zKTsNCiAgICAgICAgY29uc3QgZ2V0OiBQcm9taXNlPGFueT4gPSB0aGlzLnNlcnZpY2UuZ2V0KHRoaXMubG9hZEFjdGlvbixKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLHt2aWV3cGFyYW1zOnZpZXdwYXJhbVJlc3VsdH0sIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOw0KICAgICAgICBnZXQudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgICAgdGhpcy5vbkZvcm1Mb2FkKGRhdGEsJ2xvYWQnKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2FkJywgZGF0YSk7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ2xvYWQnLCBkYXRhOiBkYXRhIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn57O757uf5byC5bi4JyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWKoOi9veiNieeovw0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbb3B0PXt9XQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBsb2FkRHJhZnQob3B0OiBhbnkgPSB7fSk6IHZvaWQgew0KICAgICAgICBpZighdGhpcy5sb2FkZHJhZnRBY3Rpb24pew0KICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAnVFJNVFJJQU5QRVJTT05FZGl0Vmlld+inhuWbvuihqOWNlWxvYWRkcmFmdEFjdGlvbuWPguaVsOacqumFjee9ricgfSk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgYXJnOiBhbnkgPSB7IC4uLm9wdCB9IDsNCiAgICAgICAgbGV0IHZpZXdwYXJhbVJlc3VsdDphbnkgPSBPYmplY3QuYXNzaWduKGFyZyx0aGlzLnZpZXdwYXJhbXMpOw0KICAgICAgICBsZXQgcG9zdDogUHJvbWlzZTxhbnk+ID0gdGhpcy5zZXJ2aWNlLmxvYWREcmFmdCh0aGlzLmxvYWRkcmFmdEFjdGlvbixKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLHt2aWV3cGFyYW1zOnZpZXdwYXJhbVJlc3VsdH0sIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOw0KICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICBpZihkYXRhLnRybXRyYWlucGVyc29uKXsNCiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY29udGV4dCx7dHJtdHJhaW5wZXJzb246ZGF0YS50cm10cmFpbnBlcnNvbn0pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnJlc2V0RHJhZnRGb3JtU3RhdGVzKCk7DQogICAgICAgICAgICB0aGlzLm9uRm9ybUxvYWQoZGF0YSwnbG9hZERyYWZ0Jyk7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2FkJywgZGF0YSk7DQogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdsb2FkJywgZGF0YTogZGF0YSB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZm9ybTogYW55ID0gdGhpcy4kcmVmcy5mb3JtOw0KICAgICAgICAgICAgICAgIGlmIChmb3JtKSB7DQogICAgICAgICAgICAgICAgICAgIGZvcm0uZmllbGRzLmZvckVhY2goKGZpZWxkOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnZhbGlkYXRlTWVzc2FnZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQudmFsaWRhdGVTdGF0ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQudmFsaWRhdGVTdGF0dXMgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pLmNhdGNoKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn57O757uf5byC5bi4JyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiHquWKqOS/neWtmA0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBbb3B0PXt9XQ0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBhdXRvU2F2ZShvcHQ6IGFueSA9IHt9KTogdm9pZCB7DQogICAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGVTdGF0dXMoKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IGFyZzogYW55ID0geyAuLi5vcHQgfTsNCiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0VmFsdWVzKCk7DQogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLCBkYXRhKTsNCiAgICAgICAgY29uc3QgYWN0aW9uOiBhbnkgPSBPYmplY3QuaXMoZGF0YS5zcmZ1ZiwgJzEnKSA/IHRoaXMudXBkYXRlQWN0aW9uIDogdGhpcy5jcmVhdGVBY3Rpb247DQogICAgICAgIGlmKCFhY3Rpb24pew0KICAgICAgICAgICAgbGV0IGFjdGlvbk5hbWU6YW55ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJyk/InVwZGF0ZUFjdGlvbiI6ImNyZWF0ZUFjdGlvbiI7DQogICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICdUUk1UUklBTlBFUlNPTkVkaXRWaWV36KeG5Zu+6KGo5Y2VJythY3Rpb25OYW1lKyflj4LmlbDmnKrphY3nva4nIH0pOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICBjb25zdCBwb3N0OiBQcm9taXNlPGFueT4gPSB0aGlzLnNlcnZpY2UuYWRkKGFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHRoaXMuc2hvd0J1c3lJbmRpY2F0b3IpOw0KICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICB0aGlzLm9uRm9ybUxvYWQoZGF0YSwnYXV0b1NhdmUnKTsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NhdmUnLCBkYXRhKTsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd2aWV3YWN0aW9uL2RhdGFzYXZlZCcsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnIH0pOw0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybVN0YXRlLm5leHQoeyB0eXBlOiAnc2F2ZScsIGRhdGE6IGRhdGEgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDkv53lrZgNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW29wdD17fV0NCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzaG93UmVzdWx0SW5mb10gDQogICAgICogQHBhcmFtIHtib29sZWFufSBbaWZTdGF0ZU5leHRdIGZvcm1TdGF0ZeaYr+WQpuS4i+WPkemAmuefpQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIGFzeW5jIHNhdmUob3B0OiBhbnkgPSB7fSwgc2hvd1Jlc3VsdEluZm8/OiBib29sZWFuLCBpZlN0YXRlTmV4dDogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPGFueT4gew0KICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmU6IGFueSwgcmVqZWN0OiBhbnkpID0+IHsNCiAgICAgICAgICAgIHNob3dSZXN1bHRJbmZvID0gc2hvd1Jlc3VsdEluZm8gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBmYWxzZTsNCiAgICAgICAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGVTdGF0dXMoKSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+WAvOinhOWImeagoemqjOW8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgYXJnOiBhbnkgPSB7IC4uLm9wdCB9Ow0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0VmFsdWVzKCk7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgZGF0YSk7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZywgdGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgIGlmIChpZlN0YXRlTmV4dCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZHJjb3VudGVyID0gMDsNCiAgICAgICAgICAgICAgICBpZih0aGlzLmRyY291bnRlciAhPT0gMCl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZHJzYXZlb3B0ID0gb3B0Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ2JlZm9yZXNhdmUnLCBkYXRhOiBhcmcgfSk7Ly/lhYjpgJrnn6XlhbPns7vnlYzpnaLkv53lrZgNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlU3RhdGUgPSByZXNvbHZlOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgYWN0aW9uOiBhbnkgPSBPYmplY3QuaXMoZGF0YS5zcmZ1ZiwgJzEnKSA/IHRoaXMudXBkYXRlQWN0aW9uIDogdGhpcy5jcmVhdGVBY3Rpb247DQogICAgICAgICAgICBpZighYWN0aW9uKXsNCiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uTmFtZTphbnkgPSBPYmplY3QuaXMoZGF0YS5zcmZ1ZiwgJzEnKT8idXBkYXRlQWN0aW9uIjoiY3JlYXRlQWN0aW9uIjsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICdUUk1UUklBTlBFUlNPTkVkaXRWaWV36KeG5Zu+6KGo5Y2VJythY3Rpb25OYW1lKyflj4LmlbDmnKrphY3nva4nIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICAgICAgY29uc3QgcG9zdDogUHJvbWlzZTxhbnk+ID0gT2JqZWN0LmlzKGRhdGEuc3JmdWYsICcxJyk/dGhpcy5zZXJ2aWNlLnVwZGF0ZShhY3Rpb24sIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksYXJnLCB0aGlzLnNob3dCdXN5SW5kaWNhdG9yKTp0aGlzLnNlcnZpY2UuYWRkKGFjdGlvbixKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcik7DQogICAgICAgICAgICBwb3N0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgIHRoaXMub25Gb3JtTG9hZChkYXRhLCdzYXZlJyk7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2F2ZScsIGRhdGEpOw0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd2aWV3YWN0aW9uL2RhdGFzYXZlZCcsIHsgdmlld3RhZzogdGhpcy52aWV3dGFnIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtU3RhdGUubmV4dCh7IHR5cGU6ICdzYXZlJywgZGF0YTogZGF0YSB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAoc2hvd1Jlc3VsdEluZm8pIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLnN1Y2Nlc3MoeyB0aXRsZTogJycsIGRlc2M6IChkYXRhLnNyZm1ham9ydGV4dCA/IGRhdGEuc3JmbWFqb3J0ZXh0IDogJycpICsgJyZuYnNwO+S/neWtmOaIkOWKn++8gScgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICAmJiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnN0YXR1cyB8fCAhcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICfns7vnu5/lvILluLgnIH0pOw0KICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIOWIoOmZpA0KICAgICoNCiAgICAqIEBwdWJsaWMNCiAgICAqIEBwYXJhbSB7Kn0gW29wdD17fV0NCiAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICovDQogICAgcHVibGljIHJlbW92ZShvcHQ6QXJyYXk8YW55PiA9IFtdLHNob3dSZXN1bHRJbmZvPzogYm9vbGVhbik6IFByb21pc2U8YW55PiB7DQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYoIXRoaXMucmVtb3ZlQWN0aW9uKXsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICdUUk1UUklBTlBFUlNPTkVkaXRWaWV36KeG5Zu+6KGo5Y2VcmVtb3ZlQWN0aW9u5Y+C5pWw5pyq6YWN572uJyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBhcmc6IGFueSA9IG9wdFswXTsNCiAgICAgICAgICAgIGNvbnN0IF90aGlzOiBhbnkgPSB0aGlzOw0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcse3ZpZXdwYXJhbXM6dGhpcy52aWV3cGFyYW1zfSk7DQogICAgICAgICAgICB0aGlzLnNlcnZpY2UuZGVsZXRlKF90aGlzLnJlbW92ZUFjdGlvbiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHNob3dSZXN1bHRJbmZvKS50aGVuKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdyZW1vdmUnLGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ3JlbW92ZScsIGRhdGE6IGRhdGEgfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5pc21vZGlmeSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2Uuc3VjY2Vzcyh7IHRpdGxlOiAnJywgZGVzYzogKGRhdGEuc3JmbWFqb3J0ZXh0ID8gZGF0YS5zcmZtYWpvcnRleHQgOiAnJykgKyAnJm5ic3A75Yig6Zmk5oiQ5Yqf77yBJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IF9kYXRhIH0gPSBlcnJvcjsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogX2RhdGEudGl0bGUsIGRlc2M6IF9kYXRhLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlt6XkvZzmtYHlkK/liqgNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHsqfSBbbG9jYWxkYXRhPXt9XQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIGFzeW5jIHdmc3RhcnQoZGF0YTogYW55LGxvY2FsZGF0YT86YW55KTogUHJvbWlzZTxhbnk+IHsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSA9PiB7DQogICAgICAgICAgICBjb25zdCBfdGhpczogYW55ID0gdGhpczsNCiAgICAgICAgICAgIGNvbnN0IHBvc3Q6IFByb21pc2U8YW55PiA9IF90aGlzLnNhdmUoe30sZmFsc2UpOw0KICAgICAgICAgICAgcG9zdC50aGVuKChyZXNwb25zZTphbnkpID0+ew0KICAgICAgICAgICAgICAgIGNvbnN0IGFyZzphbnkgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgIGlmKHRoaXMudmlld3BhcmFtcyl7DQogICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHt2aWV3cGFyYW1zOnRoaXMudmlld3BhcmFtc30pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQ6IFByb21pc2U8YW55PiA9IHRoaXMuc2VydmljZS53ZnN0YXJ0KF90aGlzLldGU3RhcnRBY3Rpb24sIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0KSksYXJnLCB0aGlzLnNob3dCdXN5SW5kaWNhdG9yLGxvY2FsZGF0YSk7DQogICAgICAgICAgICAgICAgcmVzdWx0LnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICcnLCBkZXNjOiAn5bel5L2c5rWB5ZCv5Yqo5aSx6LSlLCAnICsgcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5pbmZvKHsgdGl0bGU6ICcnLCBkZXNjOiAn5bel5L2c5rWB5ZCv5Yqo5oiQ5YqfJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7DQogICAgICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn57O757uf5byC5bi4JyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlt6XkvZzmtYHmj5DkuqQNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gW2RhdGE9e31dDQogICAgICogQHBhcmFtIHsqfSBbbG9jYWxkYXRhPXt9XQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIGFzeW5jIHdmc3VibWl0KGRhdGE6IGFueSxsb2NhbGRhdGE/OmFueSk6IFByb21pc2U8YW55PiB7DQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkgPT4gew0KICAgICAgICBjb25zdCBfdGhpczogYW55ID0gdGhpczsNCiAgICAgICAgY29uc3QgYXJnOiBhbnkgPSBkYXRhWzBdOw0KICAgICAgICBPYmplY3QuYXNzaWduKGFyZyx7dmlld3BhcmFtczp0aGlzLnZpZXdwYXJhbXN9KTsNCiAgICAgICAgaWYgKCFhcmcudHJtdHJhaW5wZXJzb24gfHwgT2JqZWN0LmlzKGFyZy50cm10cmFpbnBlcnNvbiwgJycpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgcG9zdDogUHJvbWlzZTxhbnk+ID0gT2JqZWN0LmlzKGFyZy5zcmZ1ZiwgJzEnKT90aGlzLnNlcnZpY2UudXBkYXRlKHRoaXMudXBkYXRlQWN0aW9uLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcik6dGhpcy5zZXJ2aWNlLmFkZCh0aGlzLmNyZWF0ZUFjdGlvbixKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcik7DQogICAgICAgIHBvc3QudGhlbigocmVzcG9uc2U6YW55KSA9PnsNCiAgICAgICAgICAgICAgICBjb25zdCBhcmc6YW55ID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgICAgICAvLyDkv53lrZjlrozmiJBVSeWkhOeQhg0KICAgICAgICAgICAgICAgIHRoaXMub25Gb3JtTG9hZChhcmcsJ3NhdmUnKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzYXZlJywgYXJnKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybVN0YXRlLm5leHQoeyB0eXBlOiAnc2F2ZScsIGRhdGE6IGFyZyB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAvLyDlh4blpIfmj5DkuqTlj4LmlbANCiAgICAgICAgICAgICAgICBpZih0aGlzLnZpZXdwYXJhbXMpew0KICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZyx7dmlld3BhcmFtczp0aGlzLnZpZXdwYXJhbXN9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8g5by65Yi26KGl5YWFc3Jmd2ZtZW1vDQogICAgICAgICAgICAgICAgaWYodGhpcy5zcmZ3Zm1lbW8pew0KICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZyx7c3Jmd2ZtZW1vOnRoaXMuc3Jmd2ZtZW1vfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdDogUHJvbWlzZTxhbnk+ID0gdGhpcy5zZXJ2aWNlLndmc3VibWl0KF90aGlzLldGU3VibWl0QWN0aW9uLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpLGFyZywgdGhpcy5zaG93QnVzeUluZGljYXRvcixsb2NhbGRhdGEpOw0KICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAnJywgZGVzYzogJ+W3peS9nOa1geaPkOS6pOWksei0pSwgJyArIHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRm9ybUxvYWQoYXJnLCdzdWJtaXQnKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3ZpZXdhY3Rpb24vZGF0YXNhdmVkJywgeyB2aWV3dGFnOiB0aGlzLnZpZXd0YWcgfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5pbmZvKHsgdGl0bGU6ICcnLCBkZXNjOiAn5bel5L2c5rWB5o+Q5Lqk5oiQ5YqfJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7DQogICAgICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn57O757uf5byC5bi4JyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogJ+ezu+e7n+W8guW4uCcgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOihqOWNlemhueabtOaWsA0KICAgICAqDQogICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUg55WM6Z2i6KGM5Li65ZCN56ewDQogICAgICogQHBhcmFtIHsqfSBbZGF0YT17fV0g6K+35rGC5pWw5o2uDQogICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdXBkYXRlRGV0YWlscyDmm7TmlrDpobkNCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzaG93bG9hZGluZ10g5piv5ZCm5pi+56S65Yqg6L2954q25oCBDQogICAgICogQHJldHVybnMge3ZvaWR9DQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIHVwZGF0ZUZvcm1JdGVtcyhtb2RlOiBzdHJpbmcsIGRhdGE6IGFueSA9IHt9LCB1cGRhdGVEZXRhaWxzOiBzdHJpbmdbXSwgc2hvd2xvYWRpbmc/OiBib29sZWFuKTogdm9pZCB7DQogICAgICAgIGlmICghbW9kZSB8fCAobW9kZSAmJiBPYmplY3QuaXMobW9kZSwgJycpKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IGFyZzogYW55ID0geyAuLi5kYXRhIH07DQogICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLHRoaXMudmlld3BhcmFtcyk7DQogICAgICAgIGNvbnN0IHBvc3Q6IFByb21pc2U8YW55PiA9IHRoaXMuc2VydmljZS5mcm9udExvZ2ljKG1vZGUsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcsIHNob3dsb2FkaW5nKTsNCiAgICAgICAgcG9zdC50aGVuKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICfplJnor68nLCBkZXNjOiAn6KGo5Y2V6aG55pu05paw5aSx6LSlJyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgIGNvbnN0IF9kYXRhOiBhbnkgPSB7fTsNCiAgICAgICAgICAgIHVwZGF0ZURldGFpbHMuZm9yRWFjaCgobmFtZTogc3RyaW5nKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihfZGF0YSwgeyBbbmFtZV06IGRhdGFbbmFtZV0gfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRoaXMuc2V0Rm9ybUVuYWJsZUNvbmQoX2RhdGEpOw0KICAgICAgICAgICAgdGhpcy5maWxsRm9ybShfZGF0YSwndXBkYXRlRm9ybUl0ZW0nKTsNCiAgICAgICAgICAgIHRoaXMuZm9ybUxvZ2ljKHsgbmFtZTogJycsIG5ld1ZhbDogbnVsbCwgb2xkVmFsOiBudWxsIH0pOw0KICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbmcubmV4dChKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKTsNCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1TdGF0ZS5uZXh0KHsgdHlwZTogJ3VwZGF0ZWZvcm1pdGVtJywgdWZpbW9kZTogYXJnLnNyZnVmaW1vZGUsIGRhdGE6IF9kYXRhIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pLmNhdGNoKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5zdGF0dXMgfHwgIXJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6ICfns7vnu5/lvILluLgnIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5Zue6L2m5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9ICRldmVudA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBvbkVudGVyKCRldmVudDogYW55KTogdm9pZCB7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5L+d5a2Y5bm26YCA5Ye6DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIHNhdmVBbmRFeGl0KGRhdGE6YW55W10pOlByb21pc2U8YW55PnsNCiAgICAgICAgbGV0IF90aGlzID0gdGhpczsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSA9PnsNCiAgICAgICAgICAgIGxldCBhcmc6IGFueSA9IHt9Ow0KICAgICAgICAgICAgaWYoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApew0KICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXJnLGRhdGFbMF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgX3RoaXMuY3VycmVudEFjdGlvbiA9ICJzYXZlQW5kRXhpdCI7DQogICAgICAgICAgICBfdGhpcy5zYXZlKFthcmddKS50aGVuKChyZXMpID0+ew0KICAgICAgICAgICAgICAgIGlmKHJlcyl7DQogICAgICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlVmlldyhyZXMuZGF0YSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTsNCiAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT57DQogICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgfQ0KDQogICAgLyoqDQogICAgICog5L+d5a2Y5bm25paw5bu6DQogICAgICoNCiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzDQogICAgICogQG1lbWJlcm9mIE1haW5CYXNlDQogICAgICovDQogICAgcHVibGljIHNhdmVBbmROZXcoZGF0YTphbnlbXSk6UHJvbWlzZTxhbnk+ew0KICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOw0KICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmU6IGFueSwgcmVqZWN0OiBhbnkpID0+ew0KICAgICAgICAgICAgbGV0IGFyZzogYW55ID0ge307DQogICAgICAgICAgICBpZihkYXRhICYmIGRhdGEubGVuZ3RoID4gMCl7DQogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhcmcsZGF0YVswXSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBfdGhpcy5jdXJyZW50QWN0aW9uID0gInNhdmVBbmROZXciOw0KICAgICAgICAgICAgX3RoaXMuc2F2ZShbYXJnXSkudGhlbigocmVzKSA9PnsNCiAgICAgICAgICAgICAgICBfdGhpcy5SZXNldERhdGEocmVzKTsNCiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkRHJhZnQoe30pOw0KICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PnsNCiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDliKDpmaTlubbpgIDlh7oNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVtb3ZlQW5kRXhpdChkYXRhOmFueVtdKTpQcm9taXNlPGFueT57DQogICAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkgPT57DQogICAgICAgICAgICBsZXQgYXJnOiBhbnkgPSB7fTsNCiAgICAgICAgICAgIGlmKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKXsNCiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGFyZyxkYXRhWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF90aGlzLnJlbW92ZShbYXJnXSkudGhlbigocmVzKSA9PnsNCiAgICAgICAgICAgICAgICBpZihyZXMpew0KICAgICAgICAgICAgICAgICAgX3RoaXMuY2xvc2VWaWV3KHJlcy5kYXRhKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpOw0KICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PnsNCiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIOWFs+ezu+eVjOmdouaVsOaNruS/neWtmOWujOaIkA0KICAgICoNCiAgICAqIEBwYXJhbSB7YW55fSAkZXZlbnQNCiAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICovDQogICAgcHVibGljIGRyZGF0YXNhdmVkKCRldmVudDphbnkpew0KICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOw0KICAgICAgICB0aGlzLmRyY291bnRlci0tOw0KICAgICAgICBpZih0aGlzLmRyY291bnRlciA9PT0gMCl7DQogICAgICAgICAgICB0aGlzLnNhdmUodGhpcy5kcnNhdmVvcHQsIHVuZGVmaW5lZCwgZmFsc2UpLnRoZW4oKHJlcykgPT57DQogICAgICAgICAgICAgICAgdGhpcy5zYXZlU3RhdGUocmVzKTsNCiAgICAgICAgICAgICAgICB0aGlzLmRyc2F2ZW9wdCA9IHt9Ow0KICAgICAgICAgICAgICAgIGlmKE9iamVjdC5pcyhfdGhpcy5jdXJyZW50QWN0aW9uLCAic2F2ZUFuZE5ldyIpKXsNCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuUmVzZXREYXRhKHJlcyk7DQogICAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWREcmFmdCh7fSk7DQogICAgICAgICAgICAgICAgfWVsc2UgaWYoT2JqZWN0LmlzKF90aGlzLmN1cnJlbnRBY3Rpb24sICJzYXZlQW5kRXhpdCIpKXsNCiAgICAgICAgICAgICAgICAgICAgaWYocmVzKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlVmlldyhyZXMuZGF0YSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOaWsOW7uum7mOiupOWAvA0KICAgICAqIEBtZW1iZXJvZiBNYWluQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjcmVhdGVEZWZhdWx0KCl7ICAgICAgICAgICAgICAgICAgICANCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmm7TmlrDpu5jorqTlgLwNCiAgICAgKiBAbWVtYmVyb2YgTWFpbkJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgdXBkYXRlRGVmYXVsdCgpeyAgICAgICAgICAgICAgICAgICAgDQogICAgfQ0KDQogICAgDQp9DQo="},null]}