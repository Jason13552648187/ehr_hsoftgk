{"remainingRequest":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-contract\\tree-treeview\\tree-treeview-base.vue?vue&type=script&lang=tsx&","dependencies":[{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\src\\widgets\\pim-contract\\tree-treeview\\tree-treeview-base.vue","mtime":1630509411480},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\babel-loader\\lib\\index.js","mtime":1630511852747},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\ts-loader\\index.js","mtime":1630511985412},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630511852775},{"path":"F:\\crod项目\\人事管理系统2\\iBizEHR\\app_EHRPim\\node_modules\\vue-loader\\lib\\index.js","mtime":1630512070338}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgVnVlLCBDb21wb25lbnQsIFByb3AsIFByb3ZpZGUsIEVtaXQsIFdhdGNoLCBNb2RlbCxJbmplY3QgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsNCmltcG9ydCB7IENyZWF0ZUVsZW1lbnQgfSBmcm9tICd2dWUnOw0KaW1wb3J0IHsgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7DQppbXBvcnQgeyBDb250cm9sSW50ZXJmYWNlIH0gZnJvbSAnQC9pbnRlcmZhY2UvY29udHJvbCc7DQppbXBvcnQgeyBVSUFjdGlvblRvb2wsVXRpbCB9IGZyb20gJ0AvdXRpbHMnOw0KaW1wb3J0IE5hdkRhdGFTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9hcHAvbmF2ZGF0YS1zZXJ2aWNlJzsNCmltcG9ydCBQaW1Db250cmFjdFNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlL3BpbS1jb250cmFjdC9waW0tY29udHJhY3Qtc2VydmljZSc7DQppbXBvcnQgVHJlZVNlcnZpY2UgZnJvbSAnLi90cmVlLXRyZWV2aWV3LXNlcnZpY2UnOw0KDQoNCg0KQENvbXBvbmVudCh7DQogICAgY29tcG9uZW50czogew0KICAgICAgDQogICAgfQ0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyZWVCYXNlIGV4dGVuZHMgVnVlIGltcGxlbWVudHMgQ29udHJvbEludGVyZmFjZSB7DQoNCiAgICAvKioNCiAgICAgKiDlkI3np7ANCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgbmFtZT86IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvumAmuiur+WvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1N1YmplY3Q8Vmlld1N0YXRlPn0NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyB2aWV3U3RhdGUhOiBTdWJqZWN0PFZpZXdTdGF0ZT47DQoNCiAgICAvKioNCiAgICAgKiDlupTnlKjkuIrkuIvmlocNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGNvbnRleHQ6IGFueTsNCg0KICAgIC8qKg0KICAgICAqIOinhuWbvuWPguaVsA0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgdmlld3BhcmFtczogYW55Ow0KDQogICAgLyoqDQogICAgICog6KeG5Zu+54q25oCB5LqL5Lu2DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHR5cGUgeyhTdWJzY3JpcHRpb24gfCB1bmRlZmluZWQpfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyB2aWV3U3RhdGVFdmVudDogU3Vic2NyaXB0aW9uIHwgdW5kZWZpbmVkOw0KDQogICAgLyoqDQogICAgICog6I635Y+W6YOo5Lu257G75Z6LDQogICAgICoNCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBnZXRDb250cm9sVHlwZSgpOiBzdHJpbmcgew0KICAgICAgICByZXR1cm4gJ1RSRUVWSUVXJw0KICAgIH0NCg0KDQoNCiAgICAvKioNCiAgICAgKiDorqHmlbDlmajmnI3liqHlr7nosaHpm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHtBcnJheTwqPn0NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8gICAgDQogICAgcHVibGljIGNvdW50ZXJTZXJ2aWNlQXJyYXk6QXJyYXk8YW55PiA9IFtdOw0KDQogICAgLyoqDQogICAgICog5bu65p6E6YOo5Lu25pyN5Yqh5a+56LGhDQogICAgICoNCiAgICAgKiBAdHlwZSB7VHJlZVNlcnZpY2V9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgcHVibGljIHNlcnZpY2U6IFRyZWVTZXJ2aWNlID0gbmV3IFRyZWVTZXJ2aWNlKHsgJHN0b3JlOiB0aGlzLiRzdG9yZSB9KTsNCg0KICAgIC8qKg0KICAgICAqIOWunuS9k+acjeWKoeWvueixoQ0KICAgICAqDQogICAgICogQHR5cGUge1BpbUNvbnRyYWN0U2VydmljZX0NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgYXBwRW50aXR5U2VydmljZTogUGltQ29udHJhY3RTZXJ2aWNlID0gbmV3IFBpbUNvbnRyYWN0U2VydmljZSh7ICRzdG9yZTogdGhpcy4kc3RvcmUgfSk7DQogICAgDQoNCg0KICAgIC8qKg0KICAgICAqIOWFs+mXreinhuWbvg0KICAgICAqDQogICAgICogQHBhcmFtIHthbnl9IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgY2xvc2VWaWV3KGFyZ3M6IGFueSk6IHZvaWQgew0KICAgICAgICBsZXQgX3RoaXM6IGFueSA9IHRoaXM7DQogICAgICAgIF90aGlzLiRlbWl0KCdjbG9zZXZpZXcnLCBbYXJnc10pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqICDorqHmlbDlmajliLfmlrANCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBjb3VudGVyUmVmcmVzaCgpew0KICAgICAgICBjb25zdCBfdGhpczphbnkgPXRoaXM7DQogICAgICAgIGlmKF90aGlzLmNvdW50ZXJTZXJ2aWNlQXJyYXkgJiYgX3RoaXMuY291bnRlclNlcnZpY2VBcnJheS5sZW5ndGggPjApew0KICAgICAgICAgICAgX3RoaXMuY291bnRlclNlcnZpY2VBcnJheS5mb3JFYWNoKChpdGVtOmFueSkgPT57DQogICAgICAgICAgICAgICAgaWYoaXRlbS5yZWZyZXNoRGF0YSAmJiBpdGVtLnJlZnJlc2hEYXRhIGluc3RhbmNlb2YgRnVuY3Rpb24pew0KICAgICAgICAgICAgICAgICAgICBpdGVtLnJlZnJlc2hEYXRhKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICog6I635Y+W5aSa6aG55pWw5o2uDQogICAgICoNCiAgICAgKiBAcmV0dXJucyB7YW55W119DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgcHVibGljIGdldERhdGFzKCk6IGFueVtdIHsNCiAgICAgICAgcmV0dXJuIFt0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGVdOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiOt+WPluWNlemhueagkQ0KICAgICAqDQogICAgICogQHJldHVybnMgeyp9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgcHVibGljIGdldERhdGEoKTogYW55IHsNCiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudHNlbGVjdGVkTm9kZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmmK/lkKbljZXpgIkNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKHsgZGVmYXVsdDogdHJ1ZSB9KSBwdWJsaWMgaXNTaW5nbGVTZWxlY3QhOiBib29sZWFuOw0KDQogICAgLyoqDQogICAgICog5piv5ZCm6buY6K6k6YCJ5Lit56ys5LiA5p2h5pWw5o2uDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCh7IGRlZmF1bHQ6IGZhbHNlIH0pIHB1YmxpYyBpc1NlbGVjdEZpcnN0RGVmYXVsdCE6IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDmnp3lubLoioLngrnmmK/lkKblj6/nlKjvvIjlhbfmnInmlbDmja7og73lipvvvIzlj6/mipvlh7rvvIkNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgQFByb3Aoe2RlZmF1bHQ6dHJ1ZX0pIHB1YmxpYyBpc0JyYW5jaEF2YWlsYWJsZSE6IGJvb2xlYW47DQoNCiAgICAvKioNCiAgICAgKiDmmL7npLrlpITnkIbmj5DnpLoNCiAgICAgKg0KICAgICAqIEB0eXBlIHtib29sZWFufQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKHsgZGVmYXVsdDogdHJ1ZSB9KSBwdWJsaWMgc2hvd0J1c3lJbmRpY2F0b3I/OiBib29sZWFuOw0KDQogICAgLyoqDQogICAgICog5Yid5aeL5YyW5a6M5oiQDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgaW5pdGVkOiBib29sZWFuID0gZmFsc2U7DQoNCiAgICAvKioNCiAgICAgKiDlt7LpgInkuK3mlbDmja7pm4blkIgNCiAgICAgKg0KICAgICAqIEB0eXBlIHsqfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBzZWxlY3RlZE5vZGVzOiBhbnkgPSBbXTsNCg0KICAgIC8qKg0KICAgICAqIOW9k+WJjemAieS4reaVsOaNrumhuQ0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgcHVibGljIGN1cnJlbnRzZWxlY3RlZE5vZGU6IGFueSA9IHt9Ow0KDQogICAgLyoqDQogICAgICog6YCJ5Lit5pWw5o2u5a2X56ym5LiyDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIHNlbGVjdGVkRGF0YT86IHN0cmluZzsNCg0KICAgIC8qKg0KICAgICAqIOmAieS4reWAvOWPmOWMlg0KICAgICAqDQogICAgICogQHBhcmFtIHsqfSBuZXdWYWwNCiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbA0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIEBXYXRjaCgnc2VsZWN0ZWREYXRhJykNCiAgICBwdWJsaWMgb25WYWx1ZUNoYW5nZShuZXdWYWw6IGFueSwgb2xkVmFsOiBhbnkpIHsNCiAgICAgICAgdGhpcy5lY2hvc2VsZWN0ZWROb2RlcyA9IG5ld1ZhbCA/IHRoaXMuaXNTaW5nbGVTZWxlY3QgPyBKU09OLnBhcnNlKG5ld1ZhbClbMF0gOiBKU09OLnBhcnNlKG5ld1ZhbCkgOiBbXTsNCiAgICAgICAgdGhpcy5zZWxlY3RlZE5vZGVzID0gW107DQogICAgICAgIGlmKHRoaXMuZWNob3NlbGVjdGVkTm9kZXMubGVuZ3RoID4gMCl7DQogICAgICAgICAgICBsZXQgQWxsbm9kZXNPYmogPSAodGhpcy4kcmVmcy50cmVlZXhwYmFyX3RyZWUgYXMgYW55KS5zdG9yZS5ub2Rlc01hcDsNCiAgICAgICAgICAgIGxldCBBbGxub2Rlc0FycmF5IDogYW55W10gPSBbXTsNCiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIEFsbG5vZGVzT2JqKSB7DQogICAgICAgICAgICAgIGlmIChBbGxub2Rlc09iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7DQogICAgICAgICAgICAgICAgQWxsbm9kZXNBcnJheS5wdXNoKEFsbG5vZGVzT2JqW2tleV0uZGF0YSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdFNlbGVjdGlvbihBbGxub2Rlc0FycmF5KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWbnuaYvumAieS4reaVsOaNrumbhuWQiA0KICAgICAqDQogICAgICogQHR5cGUgeyp9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgcHVibGljIGVjaG9zZWxlY3RlZE5vZGVzOmFueVtdID0gdGhpcy5zZWxlY3RlZERhdGEgPyAoIHRoaXMuaXNTaW5nbGVTZWxlY3QgPyBbSlNPTi5wYXJzZSh0aGlzLnNlbGVjdGVkRGF0YSlbMF1dIDogSlNPTi5wYXJzZSh0aGlzLnNlbGVjdGVkRGF0YSkpIDogW107DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLXVwZGF0ZQ0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyB1cGRhdGVBY3Rpb24hOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLWZldGNoDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGZldGNoQWN0aW9uITogc3RyaW5nOw0KDQogICAgLyoqDQogICAgICog6YOo5Lu26KGM5Li6LS1yZW1vdmUNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgQFByb3AoKSBwdWJsaWMgcmVtb3ZlQWN0aW9uITogc3RyaW5nOw0KDQogICAgLyoqDQogICAgICog6YOo5Lu26KGM5Li6LS1sb2FkDQogICAgICoNCiAgICAgKiBAdHlwZSB7c3RyaW5nfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIEBQcm9wKCkgcHVibGljIGxvYWRBY3Rpb24hOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDpg6jku7booYzkuLotLWNyZWF0ZQ0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ30NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBAUHJvcCgpIHB1YmxpYyBjcmVhdGVBY3Rpb24hOiBzdHJpbmc7DQoNCiAgICAvKioNCiAgICAgKiDov4fmu6TlsZ7mgKcNCiAgICAgKg0KICAgICAqIEB0eXBlIHtzdHJpbmd9DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgcHVibGljIHNyZm5vZGVmaWx0ZXI6IHN0cmluZyA9ICcnOw0KDQogICAgLyoqDQogICAgICog6buY6K6k6L6T5Ye65Zu+5qCHDQogICAgICoNCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0NCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgaXNPdXRwdXRJY29uRGVmYXVsdDogYm9vbGVhbiA9IHRydWU7DQoNCg0KICAgIC8qKg0KICAgICAqIOaVsOaNruWxleW8gOS4u+mUrg0KICAgICAqDQogICAgICogQHR5cGUge3N0cmluZ1tdfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIEBQcm92aWRlKCkNCiAgICBwdWJsaWMgZXhwYW5kZWRLZXlzOiBzdHJpbmdbXSA9IFtdOw0KDQogICAgLyoqDQogICAgICog6YCJ5Lit5pWw5o2u5Y+Y5pu05LqL5Lu2DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBkYXRhDQogICAgICogQHBhcmFtIHsqfSBkYXRhIOW9k+WJjeiKgueCueWvueW6lOS8oOWFpeWvueixoQ0KICAgICAqIEBwYXJhbSB7Kn0gY2hlY2tlZFN0YXRlIOagkeebruWJjemAieS4reeKtuaAgeWvueixoQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBvbkNoZWNrKGRhdGE6IGFueSwgY2hlY2tlZFN0YXRlOiBhbnkpIHsNCiAgICAgICAgLy8g5aSE55CG5aSa6YCJ5pWw5o2uDQogICAgICAgIGlmKCF0aGlzLmlzU2luZ2xlU2VsZWN0KXsNCiAgICAgICAgICAgIGxldCBsZWFmTm9kZXMgPSBjaGVja2VkU3RhdGUuY2hlY2tlZE5vZGVzLmZpbHRlcigoaXRlbTphbnkpID0+IGl0ZW0ubGVhZik7DQogICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGxlYWZOb2RlcykpOw0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0aW9uY2hhbmdlJywgdGhpcy5zZWxlY3RlZE5vZGVzKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmAieS4reaVsOaNruWPmOabtOS6i+S7tg0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YSDoioLngrnlr7nlupTkvKDlhaXlr7nosaENCiAgICAgKiBAcGFyYW0geyp9IG5vZGUg6IqC54K55a+55bqUbm9kZeWvueixoQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBzZWxlY3Rpb25DaGFuZ2UoZGF0YTogYW55LCBub2RlOiBhbnkpIHsNCiAgICAgICAgLy8g56aB55So6aG55aSE55CGDQogICAgICAgIGlmIChkYXRhLmRpc2FibGVkKXsNCiAgICAgICAgICAgIG5vZGUuaXNDdXJyZW50ID0gZmFsc2U7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLy8g5Y+q5aSE55CG5pyA5bqV5bGC5a2Q6IqC54K5DQogICAgICAgIGlmKHRoaXMuaXNCcmFuY2hBdmFpbGFibGUgfHwgZGF0YS5sZWFmKXsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudHNlbGVjdGVkTm9kZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOw0KICAgICAgICAgICAgLy8g5Y2V6YCJ55u05o6l5pu/5o2iDQogICAgICAgICAgICBpZih0aGlzLmlzU2luZ2xlU2VsZWN0KXsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlXTsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZWxlY3Rpb25jaGFuZ2UnLCB0aGlzLnNlbGVjdGVkTm9kZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8g5aSa6YCJ55SoY2hlY2vmlrnms5UNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFZ1ZeWjsOaYjuWRqOacnyjlpITnkIbnu4Tku7bnmoTovpPlhaXlsZ7mgKcpDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5hZnRlckNyZWF0ZWQoKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmiafooYxjcmVhdGVk5ZCO55qE6YC76L6RDQogICAgICoNCiAgICAgKiAgQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovICAgIA0KICAgIHB1YmxpYyBhZnRlckNyZWF0ZWQoKXsNCiAgICAgICAgaWYgKHRoaXMudmlld1N0YXRlKSB7DQogICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZUV2ZW50ID0gdGhpcy52aWV3U3RhdGUuc3Vic2NyaWJlKCh7IHRhZywgYWN0aW9uLCBkYXRhIH0pID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5pcyh0YWcsIHRoaXMubmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdsb2FkJywgYWN0aW9uKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKCdmaWx0ZXInLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3Jmbm9kZWZpbHRlciAgPSBkYXRhLnNyZm5vZGVmaWx0ZXI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaF9hbGwoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKE9iamVjdC5pcygncmVmcmVzaF9wYXJlbnQnLCBhY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaF9wYXJlbnQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWvueagkeiKgueCuei/m+ihjOetm+mAieaTjeS9nA0KICAgICAqIEBtZW1iZXJvZiBPcmRlclRyZWUNCiAgICAgKi8NCiAgICBwdWJsaWMgZmlsdGVyTm9kZSh2YWx1ZTphbnksIGRhdGE6YW55KSB7DQogICAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlOw0KICAgICAgICByZXR1cm4gZGF0YS50ZXh0LmluZGV4T2YodmFsdWUpICE9PSAtMTsNCiAgICB9DQoNCg0KICAgIC8qKg0KICAgICAqIHZ1ZSDnlJ/lkb3lkajmnJ8NCiAgICAgKg0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBkZXN0cm95ZWQoKSB7DQogICAgICAgIHRoaXMuYWZ0ZXJEZXN0cm95KCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5omn6KGMZGVzdHJveWVk5ZCO55qE6YC76L6RDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgYWZ0ZXJEZXN0cm95KCkgew0KICAgICAgICBpZiAodGhpcy52aWV3U3RhdGVFdmVudCkgew0KICAgICAgICAgICAgdGhpcy52aWV3U3RhdGVFdmVudC51bnN1YnNjcmliZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5Yi35paw5pWw5o2uDQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVmcmVzaF9hbGwoKTogdm9pZCB7DQogICAgICAgIHRoaXMuaW5pdGVkID0gZmFsc2U7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuaW5pdGVkID0gdHJ1ZTsNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5Yi35paw54i26IqC54K5DQogICAgICoNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVmcmVzaF9wYXJlbnQoKTogdm9pZCB7DQogICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGUpLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IHRyZWU6IGFueSA9IHRoaXMuJHJlZnMudHJlZWV4cGJhcl90cmVlOw0KICAgICAgICBjb25zdCBub2RlOiBhbnkgPSB0cmVlLmdldE5vZGUodGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlLmlkKTsNCiAgICAgICAgaWYgKCFub2RlIHx8ICFub2RlLnBhcmVudCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGxldCBjdXJOb2RlOmFueSA9IHt9OyANCiAgICAgICAgY29uc3QgeyBwYXJlbnQ6IF9wYXJlbnQgfSA9IG5vZGU7DQogICAgICAgIGN1ck5vZGUgPSBVdGlsLmRlZXBPYmplY3RNZXJnZShjdXJOb2RlLF9wYXJlbnQpOw0KICAgICAgICBsZXQgdGVtcENvbnRleHQ6YW55ID0ge307DQogICAgICAgIGlmKGN1ck5vZGUuZGF0YSAmJiBjdXJOb2RlLmRhdGEuc3JmYXBwY3R4KXsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGVtcENvbnRleHQsY3VyTm9kZS5kYXRhLnNyZmFwcGN0eCk7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCx0aGlzLmNvbnRleHQpOw0KICAgICAgICB9DQogICAgICAgIGNvbnN0IGlkOiBzdHJpbmcgPSBfcGFyZW50LmtleSA/IF9wYXJlbnQua2V5IDogJyMnOw0KICAgICAgICBjb25zdCBwYXJhbTogYW55ID0geyBzcmZub2RlaWQ6IGlkIH07DQogICAgICAgIHRoaXMucmVmcmVzaF9ub2RlKHRlbXBDb250ZXh0LHBhcmFtLCB0cnVlKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmlbDmja7liqDovb0NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gbm9kZQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBsb2FkKG5vZGU6IGFueSA9IHt9LCByZXNvbHZlPzogYW55KSB7DQogICAgICAgIGlmIChub2RlLmRhdGEgJiYgbm9kZS5kYXRhLmNoaWxkcmVuKSB7DQogICAgICAgICAgICByZXNvbHZlKG5vZGUuZGF0YS5jaGlsZHJlbik7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgcGFyYW1zOiBhbnkgPSB7DQogICAgICAgICAgICBzcmZub2RlaWQ6IG5vZGUuZGF0YSAmJiBub2RlLmRhdGEuaWQgPyBub2RlLmRhdGEuaWQgOiAiIyIsDQogICAgICAgICAgICBzcmZub2RlZmlsdGVyOiB0aGlzLnNyZm5vZGVmaWx0ZXINCiAgICAgICAgfTsNCiAgICAgICAgbGV0IHRlbXBWaWV3UGFyYW1zOmFueSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy52aWV3cGFyYW1zKSk7DQogICAgICAgIGxldCBjdXJOb2RlOmFueSA9IHt9OyANCiAgICAgICAgY3VyTm9kZSA9IFV0aWwuZGVlcE9iamVjdE1lcmdlKGN1ck5vZGUsbm9kZSk7DQogICAgICAgIGxldCB0ZW1wQ29udGV4dDphbnkgPSB0aGlzLmNvbXB1dGVjdXJOb2RlQ29udGV4dChjdXJOb2RlKTsNCiAgICAgICAgaWYoY3VyTm9kZS5kYXRhICYmIGN1ck5vZGUuZGF0YS5zcmZwYXJlbnRkZW5hbWUpew0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCx7c3JmcGFyZW50ZGVuYW1lOmN1ck5vZGUuZGF0YS5zcmZwYXJlbnRkZW5hbWV9KTsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGVtcFZpZXdQYXJhbXMse3NyZnBhcmVudGRlbmFtZTpjdXJOb2RlLmRhdGEuc3JmcGFyZW50ZGVuYW1lfSk7DQogICAgICAgIH0NCiAgICAgICAgaWYoY3VyTm9kZS5kYXRhICYmIGN1ck5vZGUuZGF0YS5zcmZwYXJlbnRrZXkpew0KICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0ZW1wQ29udGV4dCx7c3JmcGFyZW50a2V5OmN1ck5vZGUuZGF0YS5zcmZwYXJlbnRrZXl9KTsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGVtcFZpZXdQYXJhbXMse3NyZnBhcmVudGtleTpjdXJOb2RlLmRhdGEuc3JmcGFyZW50a2V5fSk7DQogICAgICAgIH0NCiAgICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbXMse3ZpZXdwYXJhbXM6dGVtcFZpZXdQYXJhbXN9KTsNCiAgICAgICAgdGhpcy5zZXJ2aWNlLmdldE5vZGVzKHRlbXBDb250ZXh0LHBhcmFtcykudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAi6ZSZ6K+vIiwgZGVzYzogcmVzcG9uc2UuaW5mbyB9KTsNCiAgICAgICAgICAgICAgICByZXNvbHZlKFtdKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBfaXRlbXMgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgdGhpcy5mb3JtYXRFeHBhbmRlZChfaXRlbXMpOw0KICAgICAgICAgICAgcmVzb2x2ZShbLi4uX2l0ZW1zXSk7DQogICAgICAgICAgICBsZXQgaXNSb290ID0gT2JqZWN0LmlzKG5vZGUubGV2ZWwsMCk7DQogICAgICAgICAgICBsZXQgaXNTZWxlY3RlZEFsbCA9IG5vZGUuY2hlY2tlZDsNCiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdFNlbGVjdGlvbihfaXRlbXMsIGlzUm9vdCwgaXNTZWxlY3RlZEFsbCk7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCJsb2FkIiwgX2l0ZW1zKTsNCiAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlOiBhbnkpID0+IHsNCiAgICAgICAgICAgIHJlc29sdmUoW10pOw0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kTm90aWNlLmVycm9yKHsgdGl0bGU6ICLplJnor68iLCBkZXNjOiByZXNwb25zZS5pbmZvIH0pOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDorqHnrpflvZPliY3oioLngrnnmoTkuIrkuIvmlocNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gY3VyTm9kZSDlvZPliY3oioLngrkNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgY29tcHV0ZWN1ck5vZGVDb250ZXh0KGN1ck5vZGU6YW55KXsNCiAgICAgICAgbGV0IHRlbXBDb250ZXh0OmFueSA9IHt9Ow0KICAgICAgICBpZihjdXJOb2RlICYmIGN1ck5vZGUuZGF0YSAmJiBjdXJOb2RlLmRhdGEuc3JmYXBwY3R4KXsNCiAgICAgICAgICAgIHRlbXBDb250ZXh0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjdXJOb2RlLmRhdGEuc3JmYXBwY3R4KSk7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgdGVtcENvbnRleHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29udGV4dCkpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0ZW1wQ29udGV4dDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDliLfmlrDlip/og70NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55W119IGFyZ3MNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgcmVmcmVzaChhcmdzOiBhbnlbXSk6IHZvaWQgew0KICAgICAgICB0aGlzLnJlZnJlc2hfYWxsKCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5Yi35paw6IqC54K5DQogICAgICoNCiAgICAgKiBAcHVibGljDQogICAgICogQHBhcmFtIHsqfSBbY3VyQ29udGV4dF0g5b2T5YmN6IqC54K55LiK5LiL5paHDQogICAgICogQHBhcmFtIHsqfSBbYXJnPXt9XSDlvZPliY3oioLngrnpmYTliqDlj4LmlbANCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHBhcmVudG5vZGUg5piv5ZCm5piv5Yi35paw54i26IqC54K5DQogICAgICogQG1lbWJlcm9mIFRyZWVCYXNlDQogICAgICovDQogICAgcHVibGljIHJlZnJlc2hfbm9kZShjdXJDb250ZXh0OmFueSxhcmc6IGFueSA9IHt9LCBwYXJlbnRub2RlOiBib29sZWFuKTogdm9pZCB7DQogICAgICAgIGNvbnN0IHsgc3Jmbm9kZWlkOiBpZCB9ID0gYXJnOw0KICAgICAgICBPYmplY3QuYXNzaWduKGFyZyx7dmlld3BhcmFtczp0aGlzLnZpZXdwYXJhbXN9KTsNCiAgICAgICAgY29uc3QgZ2V0OiBQcm9taXNlPGFueT4gPSB0aGlzLnNlcnZpY2UuZ2V0Tm9kZXMoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHQpKSxhcmcpOw0KICAgICAgICBnZXQudGhlbigocmVzcG9uc2U6IGFueSkgPT4gew0KICAgICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCByZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJE5vdGljZS5lcnJvcih7IHRpdGxlOiAn6ZSZ6K+vJywgZGVzYzogcmVzcG9uc2UuaW5mbyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBfaXRlbXMgPSBbLi4ucmVzcG9uc2UuZGF0YV07DQogICAgICAgICAgICB0aGlzLmZvcm1hdEV4cGFuZGVkKF9pdGVtcyk7DQogICAgICAgICAgICBjb25zdCB0cmVlOiBhbnkgPSB0aGlzLiRyZWZzLnRyZWVleHBiYXJfdHJlZTsNCiAgICAgICAgICAgIHRyZWUudXBkYXRlS2V5Q2hpbGRyZW4oaWQsIF9pdGVtcyk7DQogICAgICAgICAgICBpZiAocGFyZW50bm9kZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudHNlbGVjdGVkTm9kZSA9IHt9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0U2VsZWN0aW9uKF9pdGVtcyk7DQogICAgICAgIH0pLmNhdGNoKChyZXNwb25zZTogYW55KSA9PiB7DQogICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiROb3RpY2UuZXJyb3IoeyB0aXRsZTogJ+mUmeivrycsIGRlc2M6IHJlc3BvbnNlLmluZm8gfSk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOm7mOiupOWxleW8gOiKgueCuQ0KICAgICAqDQogICAgICogQHB1YmxpYw0KICAgICAqIEBwYXJhbSB7YW55W119IGl0ZW1zDQogICAgICogQHJldHVybnMge2FueVtdfQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmb3JtYXRFeHBhbmRlZChpdGVtczogYW55W10pOiBhbnlbXSB7DQogICAgICAgIGNvbnN0IGRhdGE6IGFueVtdID0gW107DQogICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgICAgIGlmIChpdGVtLmV4cGFuZGVkIHx8IChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkS2V5cy5wdXNoKGl0ZW0uaWQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJuIGRhdGE7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6K6+572u6buY6K6k6YCJ5LitLOWbnuaYvuaVsOmhue+8jOmAieS4reaJgOacieWtkOiKgueCuQ0KICAgICAqDQogICAgICogQHBhcmFtIHthbnlbXX0gaXRlbXMg5b2T5YmN6IqC54K55omA5pyJ5a2Q6IqC54K56ZuG5ZCIDQogICAgICogQHBhcmFtIHtib29sZWFufSBpc1Jvb3Qg5piv5ZCm5piv5Yqg6L295qC56IqC54K5DQogICAgICogQHBhcmFtIHtib29sZWFufSBpc1NlbGVjdGVkQWxsIOaYr+WQpumAieS4reaJgOacieWtkOiKgueCuQ0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBzZXREZWZhdWx0U2VsZWN0aW9uKGl0ZW1zOiBhbnlbXSwgaXNSb290OiBib29sZWFuID0gZmFsc2UsIGlzU2VsZWN0ZWRBbGw6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQgew0KICAgICAgICBpZihpdGVtcy5sZW5ndGggPT0gMCl7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgbGV0IGRlZmF1bHREYXRhOiBhbnk7DQogICAgICAgIC8vIOWvvOiIquS4remAieS4reesrOS4gOadoemFjee9rueahOm7mOiupOmAieS4rSzmsqHmnInpgInkuK3nrKzkuIDmnaENCiAgICAgICAgaWYodGhpcy5pc1NlbGVjdEZpcnN0RGVmYXVsdCl7DQogICAgICAgICAgICBpZih0aGlzLmlzU2luZ2xlU2VsZWN0KXsNCiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoKGl0ZW06IGFueSkgPT4gaXRlbS5zZWxlY3RlZCk7DQogICAgICAgICAgICAgICAgaWYoaW5kZXggPT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIGlmKGlzUm9vdCl7DQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IDA7DQogICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRlZmF1bHREYXRhID0gaXRlbXNbaW5kZXhdOw0KICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJlZU5vZGVIaWdoTGlnaHQoZGVmYXVsdERhdGEpOw0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudHNlbGVjdGVkTm9kZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVmYXVsdERhdGEpKTsNCiAgICAgICAgICAgICAgICBpZih0aGlzLmlzQnJhbmNoQXZhaWxhYmxlIHx8IGRlZmF1bHREYXRhLmxlYWYpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlXTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0aW9uY2hhbmdlJywgdGhpcy5zZWxlY3RlZE5vZGVzKTsNCiAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vIOW3sumAieaVsOaNrueahOWbnuaYvg0KICAgICAgICBpZih0aGlzLmVjaG9zZWxlY3RlZE5vZGVzICYmIHRoaXMuZWNob3NlbGVjdGVkTm9kZXMubGVuZ3RoID4gMCl7DQogICAgICAgICAgICBsZXQgY2hlY2tlZE5vZGVzID0gaXRlbXMuZmlsdGVyKChpdGVtOmFueSk9PnsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lY2hvc2VsZWN0ZWROb2Rlcy5zb21lKCh2YWw6YW55KT0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYoT2JqZWN0LmlzKGl0ZW0uc3Jma2V5LHZhbC5zcmZrZXkpICYmIE9iamVjdC5pcyhpdGVtLnNyZm1ham9ydGV4dCx2YWwuc3JmbWFqb3J0ZXh0KSl7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWwudXNlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZihjaGVja2VkTm9kZXMubGVuZ3RoID4gMCl7DQogICAgICAgICAgICAgICAgdGhpcy5lY2hvc2VsZWN0ZWROb2RlcyA9IHRoaXMuZWNob3NlbGVjdGVkTm9kZXMuZmlsdGVyKChpdGVtOmFueSk9PiAhaXRlbS51c2VkKTsNCiAgICAgICAgICAgICAgICAvLyDniLboioLngrnpgInkuK3ml7bvvIzkuI3pnIDopoHmiafooYzov5nmrrXvvIzkvJrpgInkuK3miYDmnInlrZDoioLngrkNCiAgICAgICAgICAgICAgICBpZighaXNTZWxlY3RlZEFsbCl7DQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNTaW5nbGVTZWxlY3Qpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmVlTm9kZUhpZ2hMaWdodChjaGVja2VkTm9kZXNbMF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50c2VsZWN0ZWROb2RlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjaGVja2VkTm9kZXNbMF0pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IFt0aGlzLmN1cnJlbnRzZWxlY3RlZE5vZGVdOw0KICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IHRoaXMuc2VsZWN0ZWROb2Rlcy5jb25jYXQoY2hlY2tlZE5vZGVzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyZWU6IGFueSA9IHRoaXMuJHJlZnMudHJlZWV4cGJhcl90cmVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdHJlZS5zZXRDaGVja2VkTm9kZXModGhpcy5zZWxlY3RlZE5vZGVzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLyDniLboioLngrnpgInkuK3ml7bvvIzpgInkuK3miYDmnInlrZDoioLngrkNCiAgICAgICAgaWYoaXNTZWxlY3RlZEFsbCl7DQogICAgICAgICAgICBsZXQgbGVhZk5vZGVzID0gaXRlbXMuZmlsdGVyKChpdGVtOmFueSkgPT4gaXRlbS5sZWFmKTsNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IHRoaXMuc2VsZWN0ZWROb2Rlcy5jb25jYXQobGVhZk5vZGVzKTsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGlvbmNoYW5nZScsIHRoaXMuc2VsZWN0ZWROb2Rlcyk7DQogICAgICAgIH0NCiAgICB9IA0KDQogICAgLyoqDQogICAgICog57uY5Yi25Y+z5Ye76I+c5Y2VDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5vZGUNCiAgICAgKiBAcmV0dXJucw0KICAgICAqIEBtZW1iZXJvZiBUcmVlQmFzZQ0KICAgICAqLw0KICAgIHB1YmxpYyByZW5kZXJDb250ZXh0TWVudShub2RlOiBhbnkpIHsNCiAgICAgICAgbGV0IGNvbnRlbnQ7DQogICAgICAgIGlmIChub2RlICYmIG5vZGUuZGF0YSkgew0KICAgICAgICAgICAgY29uc3QgZGF0YTogYW55ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShub2RlLmRhdGEpKTsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudHNlbGVjdGVkTm9kZSA9IHsgLi4uZGF0YSB9Ow0KICAgICAgICAgICAgY29uc3QgdGFnczogc3RyaW5nW10gPSBkYXRhLmlkLnNwbGl0KCc7Jyk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6K6+572u6YCJ5Lit6auY5LquDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IGRhdGENCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgc2V0VHJlZU5vZGVIaWdoTGlnaHQoZGF0YTogYW55KTogdm9pZCB7DQogICAgICAgIGNvbnN0IHRyZWU6IGFueSA9IHRoaXMuJHJlZnMudHJlZWV4cGJhcl90cmVlOw0KICAgICAgICB0cmVlLnNldEN1cnJlbnRLZXkoZGF0YS5pZCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5omn6KGM6buY6K6k55WM6Z2i6KGM5Li6DQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IG5vZGUNCiAgICAgKiBAbWVtYmVyb2YgVHJlZUJhc2UNCiAgICAgKi8NCiAgICBwdWJsaWMgZG9EZWZhdWx0QWN0aW9uKG5vZGU6IGFueSkgew0KICAgICAgICBpZiAobm9kZSAmJiBub2RlLmRhdGEpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGE6IGFueSA9IG5vZGUuZGF0YTsNCiAgICAgICAgICAgIGNvbnN0IHRhZ3M6IHN0cmluZ1tdID0gZGF0YS5pZC5zcGxpdCgnOycpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuJGVtaXQoJ25vZGVkYmxjbGljaycsIHRoaXMuc2VsZWN0ZWROb2Rlcyk7DQogICAgfQ0KDQp9DQo="},null]}